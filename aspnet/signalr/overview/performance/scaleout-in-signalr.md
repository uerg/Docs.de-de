---
uid: signalr/overview/performance/scaleout-in-signalr
title: Einführung zur horizontalen Skalierung in SignalR | Microsoft-Dokumentation
author: MikeWasson
description: Version der Software verwendete in diesem Thema Visual Studio 2013 .NET 4.5 SignalR Version 2-Vorgängerversionen des in diesem Thema Informationen zu früheren Versionen von...
ms.author: riande
ms.date: 06/10/2014
ms.assetid: 7e781fc1-1c1f-45a8-bc1d-338e96dbe9c9
msc.legacyurl: /signalr/overview/performance/scaleout-in-signalr
msc.type: authoredcontent
ms.openlocfilehash: 50f9e5bc2713af7fe41473339e360099a92d4c5d
ms.sourcegitcommit: 74e3be25ea37b5fc8b4b433b0b872547b4b99186
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 12/12/2018
ms.locfileid: "53286986"
---
<a name="introduction-to-scaleout-in-signalr"></a><span data-ttu-id="493a6-103">Einführung zur horizontalen Skalierung in SignalR</span><span class="sxs-lookup"><span data-stu-id="493a6-103">Introduction to Scaleout in SignalR</span></span>
====================
<span data-ttu-id="493a6-104">durch [Mike Wasson](https://github.com/MikeWasson), [Patrick Fletcher](https://github.com/pfletcher)</span><span class="sxs-lookup"><span data-stu-id="493a6-104">by [Mike Wasson](https://github.com/MikeWasson), [Patrick Fletcher](https://github.com/pfletcher)</span></span>

[!INCLUDE [Consider ASP.NET Core SignalR](~/includes/signalr/signalr-version-disambiguation.md)]

> ## <a name="software-versions-used-in-this-topic"></a><span data-ttu-id="493a6-105">In diesem Thema verwendeten Softwareversionen</span><span class="sxs-lookup"><span data-stu-id="493a6-105">Software versions used in this topic</span></span>
>
>
> - [<span data-ttu-id="493a6-106">Visual Studio 2013</span><span class="sxs-lookup"><span data-stu-id="493a6-106">Visual Studio 2013</span></span>](https://my.visualstudio.com/Downloads?q=visual%20studio%202013)
> - <span data-ttu-id="493a6-107">.NET 4.5</span><span class="sxs-lookup"><span data-stu-id="493a6-107">.NET 4.5</span></span>
> - <span data-ttu-id="493a6-108">SignalR-Version 2</span><span class="sxs-lookup"><span data-stu-id="493a6-108">SignalR version 2</span></span>
>
>
>
> ## <a name="previous-versions-of-this-topic"></a><span data-ttu-id="493a6-109">Vorherige Versionen dieses Themas</span><span class="sxs-lookup"><span data-stu-id="493a6-109">Previous versions of this topic</span></span>
>
> <span data-ttu-id="493a6-110">Weitere Informationen zu früheren Versionen von SignalR, finden Sie unter [ältere Versionen von SignalR](../older-versions/index.md).</span><span class="sxs-lookup"><span data-stu-id="493a6-110">For information about earlier versions of SignalR, see [SignalR Older Versions](../older-versions/index.md).</span></span>
>
> ## <a name="questions-and-comments"></a><span data-ttu-id="493a6-111">Fragen und Kommentare</span><span class="sxs-lookup"><span data-stu-id="493a6-111">Questions and comments</span></span>
>
> <span data-ttu-id="493a6-112">Lassen Sie Feedback, auf wie Ihnen in diesem Tutorial gefallen hat und was wir in den Kommentaren am unteren Rand der Seite verbessern können.</span><span class="sxs-lookup"><span data-stu-id="493a6-112">Please leave feedback on how you liked this tutorial and what we could improve in the comments at the bottom of the page.</span></span> <span data-ttu-id="493a6-113">Wenn Sie Fragen, die nicht direkt mit dem Tutorial verknüpft sind haben, können Sie sie veröffentlichen das [ASP.NET SignalR-Forum](https://forums.asp.net/1254.aspx/1?ASP+NET+SignalR) oder [StackOverflow.com](http://stackoverflow.com/).</span><span class="sxs-lookup"><span data-stu-id="493a6-113">If you have questions that are not directly related to the tutorial, you can post them to the [ASP.NET SignalR forum](https://forums.asp.net/1254.aspx/1?ASP+NET+SignalR) or [StackOverflow.com](http://stackoverflow.com/).</span></span>


<span data-ttu-id="493a6-114">Im Allgemeinen stehen zwei Möglichkeiten, eine Webanwendung zu skalieren: *zentral hochskalieren* und *horizontal hochskalieren*.</span><span class="sxs-lookup"><span data-stu-id="493a6-114">In general, there are two ways to scale a web application: *scale up* and *scale out*.</span></span>

- <span data-ttu-id="493a6-115">Zentral hochskalieren bedeutet einen größeren Server (oder eine größere VM) mit mehr Arbeitsspeicher, CPUs usw. verwenden.</span><span class="sxs-lookup"><span data-stu-id="493a6-115">Scale up means using a larger server (or a larger VM) with more RAM, CPUs, etc.</span></span>
- <span data-ttu-id="493a6-116">Horizontales hochskalieren bedeutet, dass weitere Server hinzufügen, die Last zu bewältigen.</span><span class="sxs-lookup"><span data-stu-id="493a6-116">Scale out means adding more servers to handle the load.</span></span>

<span data-ttu-id="493a6-117">Das Problem mit Zentrales Skalieren ist, dass Sie schnell eine Begrenzung der Größe des Computers erreicht.</span><span class="sxs-lookup"><span data-stu-id="493a6-117">The problem with scaling up is that you quickly hit a limit on the size of the machine.</span></span> <span data-ttu-id="493a6-118">Darüber hinaus müssen Sie horizontal hochskalieren. Aber wenn Sie horizontal hochskalieren, können Clients auf verschiedenen Servern weitergeleitet werden.</span><span class="sxs-lookup"><span data-stu-id="493a6-118">Beyond that, you need to scale out. However, when you scale out, clients can get routed to different servers.</span></span> <span data-ttu-id="493a6-119">Ein Client, der mit einem Server verbunden ist, erhalten keine Nachrichten von einem anderen Server gesendet.</span><span class="sxs-lookup"><span data-stu-id="493a6-119">A client that is connected to one server will not receive messages sent from another server.</span></span>

![](scaleout-in-signalr/_static/image1.png)

<span data-ttu-id="493a6-120">Eine Lösung besteht darin, Weiterleiten von Nachrichten zwischen Servern mit einer Komponente mit dem Namen einer *Rückwandplatine*.</span><span class="sxs-lookup"><span data-stu-id="493a6-120">One solution is to forward messages between servers, using a component called a *backplane*.</span></span> <span data-ttu-id="493a6-121">Mit einer Rückwandplatine aktiviert ist jede Anwendungsinstanz sendet Nachrichten an die Backplane und der Rückwand an die anderen Anwendungsinstanzen weitergeleitet werden.</span><span class="sxs-lookup"><span data-stu-id="493a6-121">With a backplane enabled, each application instance sends messages to the backplane, and the backplane forwards them to the other application instances.</span></span> <span data-ttu-id="493a6-122">(Im Bereich der Elektronik ist eine Rückwandplatine eine Gruppe von parallelen Connectors.</span><span class="sxs-lookup"><span data-stu-id="493a6-122">(In electronics, a backplane is a group of parallel connectors.</span></span> <span data-ttu-id="493a6-123">Entsprechend stellt eine Verbindung her SignalR-Backplane mehrerer Server.)</span><span class="sxs-lookup"><span data-stu-id="493a6-123">By analogy, a SignalR backplane connects multiple servers.)</span></span>

![](scaleout-in-signalr/_static/image2.png)

<span data-ttu-id="493a6-124">SignalR stellt derzeit drei Backplanes bereit:</span><span class="sxs-lookup"><span data-stu-id="493a6-124">SignalR currently provides three backplanes:</span></span>

- <span data-ttu-id="493a6-125">**Azure Servicebus**.</span><span class="sxs-lookup"><span data-stu-id="493a6-125">**Azure Service Bus**.</span></span> <span data-ttu-id="493a6-126">Service Bus ist eine messaging-Infrastruktur, die Komponenten zum Senden von Nachrichten in einem lose gekoppelten System ermöglicht.</span><span class="sxs-lookup"><span data-stu-id="493a6-126">Service Bus is a messaging infrastructure that allows components to send messages in a loosely coupled way.</span></span>
- <span data-ttu-id="493a6-127">**Redis**.</span><span class="sxs-lookup"><span data-stu-id="493a6-127">**Redis**.</span></span> <span data-ttu-id="493a6-128">Redis ist ein Schlüssel-Wert-Speicher im Arbeitsspeicher.</span><span class="sxs-lookup"><span data-stu-id="493a6-128">Redis is an in-memory key-value store.</span></span> <span data-ttu-id="493a6-129">Redis unterstützt ein Muster zum Veröffentlichen/Abonnieren ("Pub/Sub") zum Senden von Nachrichten an.</span><span class="sxs-lookup"><span data-stu-id="493a6-129">Redis supports a publish/subscribe ("pub/sub") pattern for sending messages.</span></span>
- <span data-ttu-id="493a6-130">**SQLServer**.</span><span class="sxs-lookup"><span data-stu-id="493a6-130">**SQL Server**.</span></span> <span data-ttu-id="493a6-131">Die SQL Server-Rückwandplatine Nachrichten, die in SQL-Tabellen geschrieben wird.</span><span class="sxs-lookup"><span data-stu-id="493a6-131">The SQL Server backplane writes messages to SQL tables.</span></span> <span data-ttu-id="493a6-132">Der Rückwand verwendet Service Broker für effiziente messaging.</span><span class="sxs-lookup"><span data-stu-id="493a6-132">The backplane uses Service Broker for efficient messaging.</span></span> <span data-ttu-id="493a6-133">Es funktioniert jedoch auch, wenn Service Broker nicht aktiviert ist.</span><span class="sxs-lookup"><span data-stu-id="493a6-133">However, it also works if Service Broker is not enabled.</span></span>

<span data-ttu-id="493a6-134">Wenn Sie Ihre Anwendung in Azure bereitstellen, sollten Sie die Redis-Rückwandplatine mit [Azure Redis Cache](https://azure.microsoft.com/services/cache/).</span><span class="sxs-lookup"><span data-stu-id="493a6-134">If you deploy your application on Azure, consider using the Redis backplane using [Azure Redis Cache](https://azure.microsoft.com/services/cache/).</span></span> <span data-ttu-id="493a6-135">Wenn Sie mit Ihren eigenen Serverfarm bereitstellen, sollten Sie Sie der SQL Server- oder Redis Backplanes.</span><span class="sxs-lookup"><span data-stu-id="493a6-135">If you are deploying to your own server farm, consider the SQL Server or Redis backplanes.</span></span>

<span data-ttu-id="493a6-136">Die folgenden Themen enthalten schrittweise aufgebaute Lernprogramme für jede-Rückwandplatine:</span><span class="sxs-lookup"><span data-stu-id="493a6-136">The following topics contain step-by-step tutorials for each backplane:</span></span>

- [<span data-ttu-id="493a6-137">Horizontale Skalierung in SignalR mit dem Azure Service Bus</span><span class="sxs-lookup"><span data-stu-id="493a6-137">SignalR Scaleout with Azure Service Bus</span></span>](scaleout-with-windows-azure-service-bus.md)
- [<span data-ttu-id="493a6-138">Horizontale Skalierung in SignalR mit Redis</span><span class="sxs-lookup"><span data-stu-id="493a6-138">SignalR Scaleout with Redis</span></span>](scaleout-with-redis.md)
- [<span data-ttu-id="493a6-139">Horizontale Skalierung in SignalR mit SQL Server</span><span class="sxs-lookup"><span data-stu-id="493a6-139">SignalR Scaleout with SQL Server</span></span>](scaleout-with-sql-server.md)

## <a name="implementation"></a><span data-ttu-id="493a6-140">Implementierung</span><span class="sxs-lookup"><span data-stu-id="493a6-140">Implementation</span></span>

<span data-ttu-id="493a6-141">In SignalR wird jede Nachricht über einen Nachrichtenbus gesendet.</span><span class="sxs-lookup"><span data-stu-id="493a6-141">In SignalR, every message is sent through a message bus.</span></span> <span data-ttu-id="493a6-142">Implementiert ein Nachrichtenbus der ["imessagebus"](https://msdn.microsoft.com/library/microsoft.aspnet.signalr.messaging.imessagebus(v=vs.100).aspx) -Schnittstelle, die eine Abstraktion zum Veröffentlichen/Abonnieren bereitstellt.</span><span class="sxs-lookup"><span data-stu-id="493a6-142">A message bus implements the [IMessageBus](https://msdn.microsoft.com/library/microsoft.aspnet.signalr.messaging.imessagebus(v=vs.100).aspx) interface, which provides a publish/subscribe abstraction.</span></span> <span data-ttu-id="493a6-143">Die Backplanes zu arbeiten, indem Sie den standardmäßigen ersetzen **"imessagebus"** mit einem Bus, die für diese Rückwandplatine konzipiert.</span><span class="sxs-lookup"><span data-stu-id="493a6-143">The backplanes work by replacing the default **IMessageBus** with a bus designed for that backplane.</span></span> <span data-ttu-id="493a6-144">Der Nachrichtenbus für Redis ist z. B. [RedisMessageBus](https://msdn.microsoft.com/library/microsoft.aspnet.signalr.redis.redismessagebus(v=vs.100).aspx), und nutzt die Redis [Pub/Sub-](http://redis.io/topics/pubsub) Mechanismus zum Senden und Empfangen von Nachrichten.</span><span class="sxs-lookup"><span data-stu-id="493a6-144">For example, the message bus for Redis is [RedisMessageBus](https://msdn.microsoft.com/library/microsoft.aspnet.signalr.redis.redismessagebus(v=vs.100).aspx), and it uses the Redis [pub/sub](http://redis.io/topics/pubsub) mechanism to send and receive messages.</span></span>

<span data-ttu-id="493a6-145">Jede Serverinstanz eine Verbindung mit der Rückwand über den Bus.</span><span class="sxs-lookup"><span data-stu-id="493a6-145">Each server instance connects to the backplane through the bus.</span></span> <span data-ttu-id="493a6-146">Wenn eine Nachricht gesendet wird, an die Backplane darin, und der Rückwand sendet sie an jedem Server.</span><span class="sxs-lookup"><span data-stu-id="493a6-146">When a message is sent, it goes to the backplane, and the backplane sends it to every server.</span></span> <span data-ttu-id="493a6-147">Wenn ein Server eine Nachricht von der Backplane empfängt, werden diese die Nachricht in ihrem lokalen Cache abgelegt.</span><span class="sxs-lookup"><span data-stu-id="493a6-147">When a server gets a message from the backplane, it puts the message in its local cache.</span></span> <span data-ttu-id="493a6-148">Der Server sendet dann Nachrichten für Clients aus dem lokalen Cache.</span><span class="sxs-lookup"><span data-stu-id="493a6-148">The server then delivers messages to clients from its local cache.</span></span>

<span data-ttu-id="493a6-149">Für jede Clientverbindung wird dem Client-Status im Lesen der Nachrichtenfolge nachverfolgt mithilfe eines Cursors.</span><span class="sxs-lookup"><span data-stu-id="493a6-149">For each client connection, the client's progress in reading the message stream is tracked using a cursor.</span></span> <span data-ttu-id="493a6-150">(Für ein Cursor stellt eine Position in den Nachrichtenstream dar.) Wenn ein Client die Verbindung trennt, und klicken Sie dann erneut eine Verbindung herstellt, fordert den Bus Nachrichten, die nach dem Clientstandort Cursorwert eingetroffen sind.</span><span class="sxs-lookup"><span data-stu-id="493a6-150">(A cursor represents a position in the message stream.) If a client disconnects and then reconnects, it asks the bus for any messages that arrived after the client's cursor value.</span></span> <span data-ttu-id="493a6-151">Das gleiche passiert, wenn eine Verbindung verwendet [lange](../getting-started/introduction-to-signalr.md#transports).</span><span class="sxs-lookup"><span data-stu-id="493a6-151">The same thing happens when a connection uses [long polling](../getting-started/introduction-to-signalr.md#transports).</span></span> <span data-ttu-id="493a6-152">Nachdem die Anforderung eine lange Abfrage abgeschlossen ist, wird der Client öffnet eine neue Verbindung und fragt nach Nachrichten, die nach dem Cursor eingetroffen sind.</span><span class="sxs-lookup"><span data-stu-id="493a6-152">After a long poll request completes, the client opens a new connection and asks for messages that arrived after the cursor.</span></span>

<span data-ttu-id="493a6-153">Der Cursor Mechanismus funktioniert auch, wenn ein Client auf einen anderen Server weitergeleitet wird erneut eine Verbindung herzustellen.</span><span class="sxs-lookup"><span data-stu-id="493a6-153">The cursor mechanism works even if a client is routed to a different server on reconnect.</span></span> <span data-ttu-id="493a6-154">Der Rückwand erkennt aller Server, und es spielt keine Rolle, welchen Server ein Client eine Verbindung herstellt.</span><span class="sxs-lookup"><span data-stu-id="493a6-154">The backplane is aware of all the servers, and it doesn't matter which server a client connects to.</span></span>

## <a name="limitations"></a><span data-ttu-id="493a6-155">Einschränkungen</span><span class="sxs-lookup"><span data-stu-id="493a6-155">Limitations</span></span>

<span data-ttu-id="493a6-156">Verwenden eine Rückwandplatine, ist der maximale Nachrichtendurchsatz niedriger als bei der Kommunikation von Clients direkt mit einem einzelnen Server-Knoten.</span><span class="sxs-lookup"><span data-stu-id="493a6-156">Using a backplane, the maximum message throughput is lower than it is when clients talk directly to a single server node.</span></span> <span data-ttu-id="493a6-157">Dies liegt daran der Rückwand leitet jede Nachricht auf jedem Knoten aus, damit der Rückwand Engpässe auftreten kann.</span><span class="sxs-lookup"><span data-stu-id="493a6-157">That's because the backplane forwards every message to every node, so the backplane can become a bottleneck.</span></span> <span data-ttu-id="493a6-158">Ob diese Einschränkung ein Problem aufgetreten ist, hängt von der Anwendung ab.</span><span class="sxs-lookup"><span data-stu-id="493a6-158">Whether this limitation is a problem depends on the application.</span></span> <span data-ttu-id="493a6-159">Hier sind z. B. einige typischen Szenarien für SignalR:</span><span class="sxs-lookup"><span data-stu-id="493a6-159">For example, here are some typical SignalR scenarios:</span></span>

- <span data-ttu-id="493a6-160">[Serverübertragung](../getting-started/tutorial-server-broadcast-with-signalr.md) (beispielsweise Börsenticker): Backplanes eignen sich gut für dieses Szenario, da der Server die Rate kontrolliert, an der Nachrichten gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="493a6-160">[Server broadcast](../getting-started/tutorial-server-broadcast-with-signalr.md) (e.g., stock ticker): Backplanes work well for this scenario, because the server controls the rate at which messages are sent.</span></span>
- <span data-ttu-id="493a6-161">[Client-zu-Client](../getting-started/tutorial-getting-started-with-signalr.md) (z. B. chat): In diesem Szenario wird möglicherweise der Rückwand einen Engpass, wenn die Anzahl der Nachrichten mit der Anzahl der Clients skaliert werden kann; d. h., wenn die Anzahl der Nachrichten wird verknüpfen proportional mehr Clients.</span><span class="sxs-lookup"><span data-stu-id="493a6-161">[Client-to-client](../getting-started/tutorial-getting-started-with-signalr.md) (e.g., chat): In this scenario, the backplane might be a bottleneck if the number of messages scales with the number of clients; that is, if the rate of messages grows proportionally as more clients join.</span></span>
- <span data-ttu-id="493a6-162">[Echtzeitnachrichten](../getting-started/tutorial-high-frequency-realtime-with-signalr.md) (z. B. in Echtzeit Spiele): Eine Rückwandplatine wird für dieses Szenario nicht empfohlen.</span><span class="sxs-lookup"><span data-stu-id="493a6-162">[High-frequency realtime](../getting-started/tutorial-high-frequency-realtime-with-signalr.md) (e.g., real-time games): A backplane is not recommended for this scenario.</span></span>

## <a name="enabling-tracing-for-signalr-scaleout"></a><span data-ttu-id="493a6-163">Aktivieren der Ablaufverfolgung für horizontale Skalierung in SignalR</span><span class="sxs-lookup"><span data-stu-id="493a6-163">Enabling Tracing For SignalR Scaleout</span></span>

<span data-ttu-id="493a6-164">Fügen Sie zum Aktivieren der Ablaufverfolgung für die Backplanes in den folgenden Abschnitten in der Datei web.config unter dem Stamm **Konfiguration** Element:</span><span class="sxs-lookup"><span data-stu-id="493a6-164">To enable tracing for the backplanes, add the following sections to the web.config file, under the root **configuration** element:</span></span>

[!code-html[Main](scaleout-in-signalr/samples/sample1.html)]
