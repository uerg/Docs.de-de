---
uid: signalr/overview/getting-started/real-time-web-applications-with-signalr
title: 'Praxisnahe Übung: Echtzeit-Webanwendungen mit SignalR | Microsoft-Dokumentation'
author: rick-anderson
description: Echtzeit-Webanwendungen bieten die Möglichkeit, serverseitige an verbundene Clients Inhalte, während es geschieht, können Sie in Echtzeit mithilfe von push. Für ASP.NET-Entwickler ASP...
ms.author: aspnetcontent
ms.date: 07/16/2014
ms.assetid: ba07958c-42e1-4da0-81db-ba6925ed6db0
msc.legacyurl: /signalr/overview/getting-started/real-time-web-applications-with-signalr
msc.type: authoredcontent
ms.openlocfilehash: 50ed2bed6b5b20684d00d7887494ee41346b5c3f
ms.sourcegitcommit: b28cd0313af316c051c2ff8549865bff67f2fbb4
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 07/05/2018
ms.locfileid: "37828908"
---
<a name="hands-on-lab-real-time-web-applications-with-signalr"></a><span data-ttu-id="1c61a-104">Praxisnahe Übung: Echtzeit-Webanwendungen mit SignalR</span><span class="sxs-lookup"><span data-stu-id="1c61a-104">Hands On Lab: Real-Time Web Applications with SignalR</span></span>
====================
<span data-ttu-id="1c61a-105">durch [Web Camps Team](https://twitter.com/webcamps)</span><span class="sxs-lookup"><span data-stu-id="1c61a-105">by [Web Camps Team](https://twitter.com/webcamps)</span></span>

[<span data-ttu-id="1c61a-106">Herunterladen Sie Web Camps Training Kit</span><span class="sxs-lookup"><span data-stu-id="1c61a-106">Download Web Camps Training Kit</span></span>](http://aka.ms/webcamps-training-kit)

> <span data-ttu-id="1c61a-107">Echtzeit-Webanwendungen bieten die Möglichkeit, serverseitige an verbundene Clients Inhalte, während es geschieht, können Sie in Echtzeit mithilfe von push.</span><span class="sxs-lookup"><span data-stu-id="1c61a-107">Real-time Web applications feature the ability to push server-side content to the connected clients as it happens, in real-time.</span></span> <span data-ttu-id="1c61a-108">Für ASP.NET-Entwickler **ASP.NET SignalR** ist eine Bibliothek in ihren Anwendungen echtzeitwebfunktionalität hinzu.</span><span class="sxs-lookup"><span data-stu-id="1c61a-108">For ASP.NET developers, **ASP.NET SignalR** is a library to add real-time web functionality to their applications.</span></span> <span data-ttu-id="1c61a-109">Es nutzt verschiedene Transporte, das automatische auswählen von den am besten verfügbaren Transport erhält der Client und am besten verfügbaren Transport-Servers.</span><span class="sxs-lookup"><span data-stu-id="1c61a-109">It takes advantage of several transports, automatically selecting the best available transport given the client and server's best available transport.</span></span> <span data-ttu-id="1c61a-110">Es nutzt **WebSocket**, eine HTML5-API, die bidirektionale Kommunikation zwischen Browser und Server ermöglicht.</span><span class="sxs-lookup"><span data-stu-id="1c61a-110">It takes advantage of **WebSocket**, an HTML5 API that enables bi-directional communication between the browser and server.</span></span>
> 
> <span data-ttu-id="1c61a-111">**SignalR** bietet auch eine einfache, allgemeine API für die Server, Client-RPC (Aufrufen von JavaScript-Funktionen in Ihrer Clients Browsern aus .NET-Code serverseitige) in Ihrer ASP.NET-Anwendung sowie nützliche Hooks für die verbindungsverwaltung, hinzufügen z. B. eine Verbindung herstellen/trennen-Ereignisse, Gruppierung Verbindungen und -Autorisierung.</span><span class="sxs-lookup"><span data-stu-id="1c61a-111">**SignalR** also provides a simple, high-level API for doing server to client RPC (call JavaScript functions in your clients' browsers from server-side .NET code) in your ASP.NET application, as well as adding useful hooks for connection management, such as connect/disconnect events, grouping connections, and authorization.</span></span>
> 
> <span data-ttu-id="1c61a-112">**SignalR** ist eine Abstraktion über einige der Transporte, die in Echtzeit Aufgaben zwischen Client und Server erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="1c61a-112">**SignalR** is an abstraction over some of the transports that are required to do real-time work between client and server.</span></span> <span data-ttu-id="1c61a-113">Ein **SignalR** Verbindung HTTP startet, und klicken Sie dann auf heraufgestuft wird eine **WebSocket** Verbindung, sofern verfügbar.</span><span class="sxs-lookup"><span data-stu-id="1c61a-113">A **SignalR** connection starts as HTTP, and is then promoted to a **WebSocket** connection if available.</span></span> <span data-ttu-id="1c61a-114">**WebSocket** ist der ideale Transport für **SignalR**, da die Nutzung des Serverarbeitsspeichers vereinfacht, die geringste Latenz und verfügt über die zugrunde liegenden Funktionen (z. B. Vollduplexkommunikation zwischen Client und Server), aber auch über die Anforderungen äußerst strikte: **WebSocket** erfordert, dass der Server verwenden **Windows Server 2012** oder **Windows 8**, zusammen mit **.NET Framework 4.5**.</span><span class="sxs-lookup"><span data-stu-id="1c61a-114">**WebSocket** is the ideal transport for **SignalR**, since it makes the most efficient use of server memory, has the lowest latency, and has the most underlying features (such as full duplex communication between client and server), but it also has the most stringent requirements: **WebSocket** requires the server to be using **Windows Server 2012** or **Windows 8**, along with **.NET Framework 4.5**.</span></span> <span data-ttu-id="1c61a-115">Wenn diese Anforderungen nicht erfüllt sind, **SignalR** wird versucht, andere Transporte verwenden, um die Verbindungen herstellen (z. B. *Ajax langer Abruf*).</span><span class="sxs-lookup"><span data-stu-id="1c61a-115">If these requirements are not met, **SignalR** will attempt to use other transports to make its connections (like *Ajax long polling*).</span></span>
> 
> <span data-ttu-id="1c61a-116">Die **SignalR** -API enthält zwei Modelle für die Kommunikation zwischen Clients und Servern: **dauerhafte Verbindungen** und **Hubs**.</span><span class="sxs-lookup"><span data-stu-id="1c61a-116">The **SignalR** API contains two models for communicating between clients and servers: **Persistent Connections** and **Hubs**.</span></span> <span data-ttu-id="1c61a-117">Ein **Verbindung** stellt einen einfachen Endpunkt dar, für die einzelnen-Empfänger senden gruppiert, oder Senden von Nachrichten.</span><span class="sxs-lookup"><span data-stu-id="1c61a-117">A **Connection** represents a simple endpoint for sending single-recipient, grouped, or broadcast messages.</span></span> <span data-ttu-id="1c61a-118">Ein **Hub** ist eine weitere allgemeine Pipeline, die auf den Verbindungs-API, die Ihre Client- und Methoden direkt aufeinander aufrufen können.</span><span class="sxs-lookup"><span data-stu-id="1c61a-118">A **Hub** is a more high-level pipeline built upon the Connection API that allows your client and server to call methods on each other directly.</span></span>
> 
> ![SignalR-Architektur](real-time-web-applications-with-signalr/_static/image1.png)
> 
> <span data-ttu-id="1c61a-120">Alle Beispielcode und Ausschnitte sind im Web Camps Training Kit unter enthalten [ http://aka.ms/webcamps-training-kit ](http://aka.ms/webcamps-training-kit).</span><span class="sxs-lookup"><span data-stu-id="1c61a-120">All sample code and snippets are included in the Web Camps Training Kit, available at [http://aka.ms/webcamps-training-kit](http://aka.ms/webcamps-training-kit).</span></span>


<a id="Overview"></a>
## <a name="overview"></a><span data-ttu-id="1c61a-121">Übersicht</span><span class="sxs-lookup"><span data-stu-id="1c61a-121">Overview</span></span>

<a id="Objectives"></a>
### <a name="objectives"></a><span data-ttu-id="1c61a-122">Ziele</span><span class="sxs-lookup"><span data-stu-id="1c61a-122">Objectives</span></span>

<span data-ttu-id="1c61a-123">In dieser praktischen Übungseinheit erfahren Sie, wie Sie:</span><span class="sxs-lookup"><span data-stu-id="1c61a-123">In this hands-on lab, you will learn how to:</span></span>

- <span data-ttu-id="1c61a-124">Senden von Benachrichtigungen vom Server an den Client, Verwendung von SignalR.</span><span class="sxs-lookup"><span data-stu-id="1c61a-124">Send notifications from server to client using SignalR.</span></span>
- <span data-ttu-id="1c61a-125">Skalieren Sie Ihre Anwendung mit SignalR **SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="1c61a-125">Scale Out your SignalR application using **SQL Server**.</span></span>

<a id="Prerequisites"></a>
### <a name="prerequisites"></a><span data-ttu-id="1c61a-126">Erforderliche Komponenten</span><span class="sxs-lookup"><span data-stu-id="1c61a-126">Prerequisites</span></span>

<span data-ttu-id="1c61a-127">Folgendes ist erforderlich, um diese praktische Übungseinheit auszuführen:</span><span class="sxs-lookup"><span data-stu-id="1c61a-127">The following is required to complete this hands-on lab:</span></span>

- <span data-ttu-id="1c61a-128">[Visual Studio Express 2013 für Web](https://www.microsoft.com/visualstudio/) oder höher</span><span class="sxs-lookup"><span data-stu-id="1c61a-128">[Visual Studio Express 2013 for Web](https://www.microsoft.com/visualstudio/) or greater</span></span>

<a id="Setup"></a>
### <a name="setup"></a><span data-ttu-id="1c61a-129">Setup</span><span class="sxs-lookup"><span data-stu-id="1c61a-129">Setup</span></span>

<span data-ttu-id="1c61a-130">Um die Übungen in dieser praktischen Übungseinheit auszuführen, müssen Sie zunächst die Umgebung einrichten.</span><span class="sxs-lookup"><span data-stu-id="1c61a-130">In order to run the exercises in this hands-on lab, you will need to set up your environment first.</span></span>

1. <span data-ttu-id="1c61a-131">Öffnen Sie ein Windows-Explorer-Fenster, und navigieren Sie zu des Labs die **Quelle** Ordner.</span><span class="sxs-lookup"><span data-stu-id="1c61a-131">Open a Windows Explorer window and browse to the lab's **Source** folder.</span></span>
2. <span data-ttu-id="1c61a-132">Mit der rechten Maustaste **"Setup.cmd"** , und wählen Sie **als Administrator ausführen** zum Starten des Setup-Prozesses, die die Umgebung konfigurieren, und installieren die Visual Studio-Codeausschnitte für diese Übung.</span><span class="sxs-lookup"><span data-stu-id="1c61a-132">Right-click **Setup.cmd** and select **Run as administrator** to launch the setup process that will configure your environment and install the Visual Studio code snippets for this lab.</span></span>
3. <span data-ttu-id="1c61a-133">Wenn das Dialogfeld "Benutzerkontensteuerung" angezeigt wird, bestätigen Sie die Aktion aus, um den Vorgang fortzusetzen.</span><span class="sxs-lookup"><span data-stu-id="1c61a-133">If the User Account Control dialog box is shown, confirm the action to proceed.</span></span>

> [!NOTE]
> <span data-ttu-id="1c61a-134">Stellen Sie sicher, dass Sie alle Abhängigkeiten für diese laborumgebung aktiviert haben, bevor Sie das Setup ausführen.</span><span class="sxs-lookup"><span data-stu-id="1c61a-134">Make sure you have checked all the dependencies for this lab before running the setup.</span></span>


<a id="CodeSnippets"></a>
### <a name="using-the-code-snippets"></a><span data-ttu-id="1c61a-135">Verwenden von Codeausschnitten</span><span class="sxs-lookup"><span data-stu-id="1c61a-135">Using the Code Snippets</span></span>

<span data-ttu-id="1c61a-136">In diesem Dokument Lab werden Sie aufgefordert, zum Einfügen von Codeblöcken.</span><span class="sxs-lookup"><span data-stu-id="1c61a-136">Throughout the lab document, you will be instructed to insert code blocks.</span></span> <span data-ttu-id="1c61a-137">Der Einfachheit halber die meisten dieser Code dient als Visual Studio-Codeausschnitten, die Sie in Visual Studio 2013, um zu vermeiden, müssen sie manuell hinzufügen aus zugreifen können.</span><span class="sxs-lookup"><span data-stu-id="1c61a-137">For your convenience, most of this code is provided as Visual Studio Code Snippets, which you can access from within Visual Studio 2013 to avoid having to add it manually.</span></span>

> [!NOTE]
> <span data-ttu-id="1c61a-138">Jede Übung umfasst eine ab Lösung befindet sich in der **beginnen** Ordner der Übung, mit dem Sie jede Übung unabhängig von den anderen verfolgen kann.</span><span class="sxs-lookup"><span data-stu-id="1c61a-138">Each exercise is accompanied by a starting solution located in the **Begin** folder of the exercise that allows you to follow each exercise independently of the others.</span></span> <span data-ttu-id="1c61a-139">Bedenken Sie bitte, dass die Codeausschnitte, die während der Übung hinzugefügt werden fehlen aus diesen Lösungen ab und funktioniert möglicherweise nicht, bis Sie in dieser Übung abgeschlossen haben.</span><span class="sxs-lookup"><span data-stu-id="1c61a-139">Please be aware that the code snippets that are added during an exercise are missing from these starting solutions and may not work until you have completed the exercise.</span></span> <span data-ttu-id="1c61a-140">In den Quellcode für eine Übung, finden Sie auch eine **End** Ordner, der Visual Studio-Projektmappe mit dem Code, die aus der Schritte in der entsprechenden Übung enthält.</span><span class="sxs-lookup"><span data-stu-id="1c61a-140">Inside the source code for an exercise, you will also find an **End** folder containing a Visual Studio solution with the code that results from completing the steps in the corresponding exercise.</span></span> <span data-ttu-id="1c61a-141">Sie können diese Lösungen als Leitfaden verwenden, wenn Sie zusätzliche Hilfe benötigen, wie Sie mithilfe dieser praktischen Übungseinheit arbeiten.</span><span class="sxs-lookup"><span data-stu-id="1c61a-141">You can use these solutions as guidance if you need additional help as you work through this hands-on lab.</span></span>


* * *

<a id="Exercises"></a>
## <a name="exercises"></a><span data-ttu-id="1c61a-142">Übungen</span><span class="sxs-lookup"><span data-stu-id="1c61a-142">Exercises</span></span>

<span data-ttu-id="1c61a-143">Dieser praktischen Übungseinheit enthält die folgenden Übungen:</span><span class="sxs-lookup"><span data-stu-id="1c61a-143">This hands-on lab includes the following exercises:</span></span>

1. [<span data-ttu-id="1c61a-144">Arbeiten mit Daten in Echtzeit mit SignalR</span><span class="sxs-lookup"><span data-stu-id="1c61a-144">Working with Real-Time Data Using SignalR</span></span>](#Exercise1)
2. [<span data-ttu-id="1c61a-145">Horizontales Skalieren mithilfe von SQLServer</span><span class="sxs-lookup"><span data-stu-id="1c61a-145">Scaling Out Using SQL Server</span></span>](#Exercise2)

<span data-ttu-id="1c61a-146">Geschätzte Zeit für diese testumgebung abzuschließen: **60 Minuten**</span><span class="sxs-lookup"><span data-stu-id="1c61a-146">Estimated time to complete this lab: **60 minutes**</span></span>

> [!NOTE]
> <span data-ttu-id="1c61a-147">Wenn Sie Visual Studio zum ersten Mal starten, müssen Sie eine der vordefinierten Einstellungen Sammlungen auswählen.</span><span class="sxs-lookup"><span data-stu-id="1c61a-147">When you first start Visual Studio, you must select one of the predefined settings collections.</span></span> <span data-ttu-id="1c61a-148">Jede vordefinierte Sammlung dient einem bestimmten Entwicklungsstil und bestimmt, Fensterlayouts, Editor-Verhalten, IntelliSense-Codeausschnitte und Dialogfeld "Optionen".</span><span class="sxs-lookup"><span data-stu-id="1c61a-148">Each predefined collection is designed to match a particular development style and determines window layouts, editor behavior, IntelliSense code snippets, and dialog box options.</span></span> <span data-ttu-id="1c61a-149">In dieser Übung wird beschrieben, die erforderlichen Aktionen zum Ausführen der jeweiligen Aufgabe in Visual Studio bei Verwendung der **allgemeine Entwicklungseinstellungen** Auflistung.</span><span class="sxs-lookup"><span data-stu-id="1c61a-149">The procedures in this lab describe the actions necessary to accomplish a given task in Visual Studio when using the **General Development Settings** collection.</span></span> <span data-ttu-id="1c61a-150">Wenn Sie eine Sammlung mit anderen Einstellungen für Ihre Entwicklungsumgebung auswählen, unter Umständen gibt es bestehen Unterschiede in den Schritten, die Sie berücksichtigen sollten.</span><span class="sxs-lookup"><span data-stu-id="1c61a-150">If you choose a different settings collection for your development environment, there may be differences in the steps that you should take into account.</span></span>


<a id="Exercise1"></a>
### <a name="exercise-1-working-with-real-time-data-using-signalr"></a><span data-ttu-id="1c61a-151">Übung 1: Arbeiten mit Daten in Echtzeit mit SignalR</span><span class="sxs-lookup"><span data-stu-id="1c61a-151">Exercise 1: Working with Real-Time Data Using SignalR</span></span>

<span data-ttu-id="1c61a-152">Beim Chat häufig als Beispiel verwendet wird, erreichen Sie insgesamt noch viel mehr mit Echtzeit-Webfunktionen.</span><span class="sxs-lookup"><span data-stu-id="1c61a-152">While chat is often used as an example, you can do a whole lot more with real-time Web functionality.</span></span> <span data-ttu-id="1c61a-153">Jedes Mal ein Benutzer eine Webseite, um neue Daten oder die Seite implementiert Ajax langer Abruf, um neue Daten abzurufen, finden Sie unter aktualisiert wird, können Sie SignalR verwenden.</span><span class="sxs-lookup"><span data-stu-id="1c61a-153">Any time a user refreshes a web page to see new data or the page implements Ajax long polling to retrieve new data, you can use SignalR.</span></span>

<span data-ttu-id="1c61a-154">SignalR unterstützt **Serverpush** oder **Broadcasting** Funktionen verbindungsverwaltung wird automatisch durchgeführt.</span><span class="sxs-lookup"><span data-stu-id="1c61a-154">SignalR supports **server push** or **broadcasting** functionality; it handles connection management automatically.</span></span> <span data-ttu-id="1c61a-155">Klicken Sie in klassischen HTTP-Verbindungen für die Kommunikation zwischen Client und Server-Verbindung wird wiederhergestellt, für jede Anforderung, aber SignalR stellt dauerhafte Verbindung zwischen Client und Server.</span><span class="sxs-lookup"><span data-stu-id="1c61a-155">In classic HTTP connections for client-server communication, connection is re-established for each request, but SignalR provides persistent connection between the client and server.</span></span> <span data-ttu-id="1c61a-156">In SignalR, die der Code in einen Clientcode im Browser aufrufen Remoteprozeduraufruf (RPC) aufruft, anstatt die Anforderungs-/ antwortmodells wissen wir noch heute.</span><span class="sxs-lookup"><span data-stu-id="1c61a-156">In SignalR the server code calls out to a client code in the browser using Remote Procedure Calls (RPC), rather than the request-response model we know today.</span></span>

<span data-ttu-id="1c61a-157">In dieser Übung konfigurieren Sie die **Meister Quiz** Anwendung SignalR zu verwenden, um das Dashboard Statistiken mit den aktualisierten Metriken ohne Aktualisierung der gesamten Seite anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="1c61a-157">In this exercise, you will configure the **Geek Quiz** application to use SignalR to display the Statistics dashboard with the updated metrics without the need to refresh the entire page.</span></span>

<a id="Ex1Task1"></a>
#### <a name="task-1--exploring-the-geek-quiz-statistics-page"></a><span data-ttu-id="1c61a-158">Aufgabe 1: untersuchen die Seite für die Streber Quiz Statistik</span><span class="sxs-lookup"><span data-stu-id="1c61a-158">Task 1 – Exploring the Geek Quiz Statistics Page</span></span>

<span data-ttu-id="1c61a-159">In dieser Aufgabe wird Sie der Anwendung durchlaufen und überprüfen Sie, wie die Seite Statistiken angezeigt wird, und wie Sie die Art der Informationen verbessern können werden aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="1c61a-159">In this task, you will go through the application and verify how the statistics page is shown and how you can improve the way the information is updated.</span></span>

1. <span data-ttu-id="1c61a-160">Öffnen Sie **Visual Studio Express 2013 für Web** , und öffnen Sie die **GeekQuiz.sln** Lösung befindet sich in der **Source\Ex1-WorkingWithRealTimeData\Begin** Ordner.</span><span class="sxs-lookup"><span data-stu-id="1c61a-160">Open **Visual Studio Express 2013 for Web** and open the **GeekQuiz.sln** solution located in the **Source\Ex1-WorkingWithRealTimeData\Begin** folder.</span></span>
2. <span data-ttu-id="1c61a-161">Drücken Sie **F5** um die Projektmappe auszuführen.</span><span class="sxs-lookup"><span data-stu-id="1c61a-161">Press **F5** to run the solution.</span></span> <span data-ttu-id="1c61a-162">Die **melden Sie sich bei** Seite sollte im Browser angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="1c61a-162">The **Log in** page should appear in the browser.</span></span>

    <span data-ttu-id="1c61a-163">![Ausführen der Projektmappe](real-time-web-applications-with-signalr/_static/image2.png "Ausführen der Lösung")</span><span class="sxs-lookup"><span data-stu-id="1c61a-163">![Running the solution](real-time-web-applications-with-signalr/_static/image2.png "Running the solution")</span></span>

    <span data-ttu-id="1c61a-164">*Ausführen der Lösung*</span><span class="sxs-lookup"><span data-stu-id="1c61a-164">*Running the solution*</span></span>
3. <span data-ttu-id="1c61a-165">Klicken Sie auf **registrieren** in oben rechts auf der Seite, um einen neuen Benutzer in der Anwendung zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="1c61a-165">Click **Register** in the upper-right corner of the page to create a new user in the application.</span></span>

    <span data-ttu-id="1c61a-166">![Registrieren von Link](real-time-web-applications-with-signalr/_static/image3.png "Link \"Register\"")</span><span class="sxs-lookup"><span data-stu-id="1c61a-166">![Register link](real-time-web-applications-with-signalr/_static/image3.png "Register link")</span></span>

    <span data-ttu-id="1c61a-167">*Link "Register"*</span><span class="sxs-lookup"><span data-stu-id="1c61a-167">*Register link*</span></span>
4. <span data-ttu-id="1c61a-168">In der **registrieren** geben eine **Benutzernamen** und **Kennwort**, und klicken Sie dann auf **registrieren**.</span><span class="sxs-lookup"><span data-stu-id="1c61a-168">In the **Register** page, enter a **User name** and **Password**, and then click **Register**.</span></span>

    <span data-ttu-id="1c61a-169">![Registrieren eines Benutzers](real-time-web-applications-with-signalr/_static/image4.png "Registrieren eines Benutzers")</span><span class="sxs-lookup"><span data-stu-id="1c61a-169">![Registering a user](real-time-web-applications-with-signalr/_static/image4.png "Registering a user")</span></span>

    <span data-ttu-id="1c61a-170">*Registrieren eines Benutzers*</span><span class="sxs-lookup"><span data-stu-id="1c61a-170">*Registering a user*</span></span>
5. <span data-ttu-id="1c61a-171">Die Anwendung registriert, das neue Konto und der Benutzer authentifiziert und wieder an die Startseite zeigt die erste Frage des Quiz umgeleitet wird.</span><span class="sxs-lookup"><span data-stu-id="1c61a-171">The application registers the new account and the user is authenticated and redirected back to the home page showing the first quiz question.</span></span>
6. <span data-ttu-id="1c61a-172">Öffnen der **Statistiken** Seite in einem neuen Fenster, und fügen Sie der **Startseite** Seite und **Statistiken** Seite von Seite-an-Seite.</span><span class="sxs-lookup"><span data-stu-id="1c61a-172">Open the **Statistics** page in a new window and put the **Home** page and **Statistics** page side-by-side.</span></span>

    <span data-ttu-id="1c61a-173">![Seite-an-Seite Windows](real-time-web-applications-with-signalr/_static/image5.png "Seite von Seite Windows")</span><span class="sxs-lookup"><span data-stu-id="1c61a-173">![Side-by-side windows](real-time-web-applications-with-signalr/_static/image5.png "Side by side windows")</span></span>

    <span data-ttu-id="1c61a-174">*Seite-an-Seite windows*</span><span class="sxs-lookup"><span data-stu-id="1c61a-174">*Side-by-side windows*</span></span>
7. <span data-ttu-id="1c61a-175">In der **Startseite** Seite, beantworten Sie die Frage, indem Sie eine der Optionen auf.</span><span class="sxs-lookup"><span data-stu-id="1c61a-175">In the **Home** page, answer the question by clicking one of the options.</span></span>

    <span data-ttu-id="1c61a-176">![Die Beantwortung einer Frage](real-time-web-applications-with-signalr/_static/image6.png "die Beantwortung einer Frage")</span><span class="sxs-lookup"><span data-stu-id="1c61a-176">![Answering a question](real-time-web-applications-with-signalr/_static/image6.png "Answering a question")</span></span>

    <span data-ttu-id="1c61a-177">*Die Beantwortung einer Frage*</span><span class="sxs-lookup"><span data-stu-id="1c61a-177">*Answering a question*</span></span>
8. <span data-ttu-id="1c61a-178">Nach dem Klicken auf eine der Schaltflächen, sollte die Antwort angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="1c61a-178">After clicking one of the buttons, the answer should appear.</span></span>

    <span data-ttu-id="1c61a-179">![Frage richtig beantwortet](real-time-web-applications-with-signalr/_static/image7.png "Frage richtig beantwortet")</span><span class="sxs-lookup"><span data-stu-id="1c61a-179">![Question answered correct](real-time-web-applications-with-signalr/_static/image7.png "Question answered correct")</span></span>

    <span data-ttu-id="1c61a-180">*Frage richtig beantwortet*</span><span class="sxs-lookup"><span data-stu-id="1c61a-180">*Question answered correctly*</span></span>
9. <span data-ttu-id="1c61a-181">Beachten Sie, dass die Informationen in die Seite Statistiken veraltet sind.</span><span class="sxs-lookup"><span data-stu-id="1c61a-181">Notice that the information provided in the Statistics page is outdated.</span></span> <span data-ttu-id="1c61a-182">Aktualisieren Sie die Seite, um die aktualisierten Ergebnisse anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="1c61a-182">Refresh the page in order to see the updated results.</span></span>

    <span data-ttu-id="1c61a-183">![Seite "Statistik"](real-time-web-applications-with-signalr/_static/image8.png "Seite Statistiken")</span><span class="sxs-lookup"><span data-stu-id="1c61a-183">![Statistics page](real-time-web-applications-with-signalr/_static/image8.png "Statistics page")</span></span>

    <span data-ttu-id="1c61a-184">*Seite "Statistik"*</span><span class="sxs-lookup"><span data-stu-id="1c61a-184">*Statistics page*</span></span>
10. <span data-ttu-id="1c61a-185">Wechseln Sie zurück zu Visual Studio, und beenden Sie des Debuggens.</span><span class="sxs-lookup"><span data-stu-id="1c61a-185">Go back to Visual Studio and stop debugging.</span></span>

<a id="Ex1Task2"></a>
#### <a name="task-2--adding-signalr-to-geek-quiz-to-show-online-charts"></a><span data-ttu-id="1c61a-186">Aufgabe 2: Hinzufügen von SignalR Meister Quiz zu Online-Diagrammen</span><span class="sxs-lookup"><span data-stu-id="1c61a-186">Task 2 – Adding SignalR to Geek Quiz to Show Online Charts</span></span>

<span data-ttu-id="1c61a-187">In dieser Aufgabe Sie SignalR zu Projektmappe hinzufügen und Updates für die Clients automatisch senden, wenn eine neue Antwort an den Server gesendet wird.</span><span class="sxs-lookup"><span data-stu-id="1c61a-187">In this task, you will add SignalR to the solution and send updates to the clients automatically when a new answer is sent to the server.</span></span>

1. <span data-ttu-id="1c61a-188">Von der **Tools** in Visual Studio, wählen Sie im Menü **Bibliothekspaket-Manager**, und klicken Sie dann auf **-Paket-Manager-Konsole**.</span><span class="sxs-lookup"><span data-stu-id="1c61a-188">From the **Tools** menu in Visual Studio, select **Library Package Manager**, and then click **Package Manager Console**.</span></span>
2. <span data-ttu-id="1c61a-189">In der **-Paket-Manager-Konsole** Fenster den folgenden Befehl ausführen:</span><span class="sxs-lookup"><span data-stu-id="1c61a-189">In the **Package Manager Console** window, execute the following command:</span></span>

    [!code-powershell[Main](real-time-web-applications-with-signalr/samples/sample1.ps1)]

    <span data-ttu-id="1c61a-190">![SignalR-Paketinstallation](real-time-web-applications-with-signalr/_static/image9.png "SignalR-Paketinstallation")</span><span class="sxs-lookup"><span data-stu-id="1c61a-190">![SignalR package installation](real-time-web-applications-with-signalr/_static/image9.png "SignalR package installation")</span></span>

    <span data-ttu-id="1c61a-191">*SignalR-Paketinstallation*</span><span class="sxs-lookup"><span data-stu-id="1c61a-191">*SignalR package installation*</span></span>

   > [!NOTE]
   > <span data-ttu-id="1c61a-192">Bei der Installation von **SignalR** Version der NuGet-Pakete 2.0.2 aus einer neuen MVC 5-Anwendung, Sie müssen manuell aktualisieren, **OWIN** -Paketen zur Version 2.0.1 (oder höher) vor der Installation von SignalR.</span><span class="sxs-lookup"><span data-stu-id="1c61a-192">When installing **SignalR** NuGet packages version 2.0.2 from a brand new MVC 5 application, you will need to manually update **OWIN** packages to version 2.0.1 (or higher) before installing SignalR.</span></span> <span data-ttu-id="1c61a-193">Sie können zu diesem Zweck das folgende Skript im Ausführen der **-Paket-Manager-Konsole**:</span><span class="sxs-lookup"><span data-stu-id="1c61a-193">To do this, you can execute the following script in the **Package Manager Console**:</span></span>
   > 
   > [!code-powershell[Main](real-time-web-applications-with-signalr/samples/sample2.ps1)]
   > 
   > <span data-ttu-id="1c61a-194">In einer zukünftigen Version von SignalR werden die OWIN-Abhängigkeiten automatisch aktualisiert werden.</span><span class="sxs-lookup"><span data-stu-id="1c61a-194">In a future release of SignalR, OWIN dependencies will be automatically updated.</span></span>
3. <span data-ttu-id="1c61a-195">In **Projektmappen-Explorer**, erweitern Sie die **Skripts** Ordner, die SignalR *Js* wurden die Dateien der Projektmappe hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="1c61a-195">In **Solution Explorer**, expand the **Scripts** folder and notice that the SignalR *js* files were added to the solution.</span></span>

    <span data-ttu-id="1c61a-196">![SignalR JavaScript verweist auf](real-time-web-applications-with-signalr/_static/image10.png "SignalR JavaScript verweist.")</span><span class="sxs-lookup"><span data-stu-id="1c61a-196">![SignalR JavaScript references](real-time-web-applications-with-signalr/_static/image10.png "SignalR JavaScript references")</span></span>

    <span data-ttu-id="1c61a-197">*SignalR-JavaScript-Referenzen*</span><span class="sxs-lookup"><span data-stu-id="1c61a-197">*SignalR JavaScript references*</span></span>
4. <span data-ttu-id="1c61a-198">In **Projektmappen-Explorer**, mit der rechten Maustaste die **GeekQuiz** -Projekt, wählen **hinzufügen** | **neuer Ordner**, und nennen Sie sie  **Hubs**.</span><span class="sxs-lookup"><span data-stu-id="1c61a-198">In **Solution Explorer**, right-click the **GeekQuiz** project, select **Add** | **New Folder**, and name it **Hubs**.</span></span>
5. <span data-ttu-id="1c61a-199">Mit der rechten Maustaste die **Hubs** Ordner, und wählen **hinzufügen | Neues Element**.</span><span class="sxs-lookup"><span data-stu-id="1c61a-199">Right-click the **Hubs** folder and select **Add | New Item**.</span></span>

    <span data-ttu-id="1c61a-200">![Neues Element hinzufügen](real-time-web-applications-with-signalr/_static/image11.png "neues Element hinzufügen")</span><span class="sxs-lookup"><span data-stu-id="1c61a-200">![Add new item](real-time-web-applications-with-signalr/_static/image11.png "Add new item")</span></span>

    <span data-ttu-id="1c61a-201">*Neues Element hinzufügen*</span><span class="sxs-lookup"><span data-stu-id="1c61a-201">*Add new item*</span></span>
6. <span data-ttu-id="1c61a-202">In der **neues Element hinzufügen** wählen Sie im Dialogfeld die **Visual c# | Web | SignalR** Knoten in den linken Bereich die Option **SignalR-Hubklasse (v2)** im mittleren Bereich aus, nennen Sie die Datei **StatisticsHub.cs** , und klicken Sie auf **hinzufügen**.</span><span class="sxs-lookup"><span data-stu-id="1c61a-202">In the **Add New Item** dialog box, select the **Visual C# | Web | SignalR** node in the left pane, select **SignalR Hub Class (v2)** from the center pane, name the file **StatisticsHub.cs** and click **Add**.</span></span>

    <span data-ttu-id="1c61a-203">![Im Dialogfeld für neues Element hinzufügen](real-time-web-applications-with-signalr/_static/image12.png "im Dialogfeld für neues Element hinzufügen")</span><span class="sxs-lookup"><span data-stu-id="1c61a-203">![Add new item dialog box](real-time-web-applications-with-signalr/_static/image12.png "Add new item dialog box")</span></span>

    <span data-ttu-id="1c61a-204">*Fügen Sie im Dialogfeld Neues Element hinzu.*</span><span class="sxs-lookup"><span data-stu-id="1c61a-204">*Add new item dialog box*</span></span>
7. <span data-ttu-id="1c61a-205">Ersetzen Sie den Code in die **StatisticsHub** Klasse durch den folgenden Code.</span><span class="sxs-lookup"><span data-stu-id="1c61a-205">Replace the code in the **StatisticsHub** class with the following code.</span></span>

    <span data-ttu-id="1c61a-206">(Codeausschnitt - *RealTimeSignalR - Ex1 - StatisticsHubClass*)</span><span class="sxs-lookup"><span data-stu-id="1c61a-206">(Code Snippet - *RealTimeSignalR - Ex1 - StatisticsHubClass*)</span></span>

    [!code-csharp[Main](real-time-web-applications-with-signalr/samples/sample3.cs)]
8. <span data-ttu-id="1c61a-207">Open **"Startup.cs"** und fügen Sie die folgende Zeile am Ende der **Konfiguration** Methode.</span><span class="sxs-lookup"><span data-stu-id="1c61a-207">Open **Startup.cs** and add the following line at the end of the **Configuration** method.</span></span>

    <span data-ttu-id="1c61a-208">(Codeausschnitt - *RealTimeSignalR - Ex1 - MapSignalR*)</span><span class="sxs-lookup"><span data-stu-id="1c61a-208">(Code Snippet - *RealTimeSignalR - Ex1 - MapSignalR*)</span></span>

    [!code-csharp[Main](real-time-web-applications-with-signalr/samples/sample4.cs)]
9. <span data-ttu-id="1c61a-209">Öffnen der **StatisticsService.cs** Seite innerhalb der **Services** Ordner, und fügen Sie die folgenden using-Direktiven.</span><span class="sxs-lookup"><span data-stu-id="1c61a-209">Open the **StatisticsService.cs** page inside the **Services** folder and add the following using directives.</span></span>

    <span data-ttu-id="1c61a-210">(Codeausschnitt - *RealTimeSignalR - Ex1 - UsingDirectives*)</span><span class="sxs-lookup"><span data-stu-id="1c61a-210">(Code Snippet - *RealTimeSignalR - Ex1 - UsingDirectives*)</span></span>

    [!code-csharp[Main](real-time-web-applications-with-signalr/samples/sample5.cs)]
10. <span data-ttu-id="1c61a-211">Um verbundene Clients Updates zu benachrichtigen, Sie rufen Sie zuerst eine **Kontext** Objekt für die aktuelle Verbindung.</span><span class="sxs-lookup"><span data-stu-id="1c61a-211">To notify connected clients of updates, you first retrieve a **Context** object for the current connection.</span></span> <span data-ttu-id="1c61a-212">Die **Hub** Objekt enthält Methoden zum Senden von Nachrichten an einen einzelnen Client oder broadcast an alle verbundenen Clients.</span><span class="sxs-lookup"><span data-stu-id="1c61a-212">The **Hub** object contains methods to send messages to a single client or broadcast to all connected clients.</span></span> <span data-ttu-id="1c61a-213">Fügen Sie die folgende Methode der **StatisticsService** Klasse, um die Statistikdaten zu übertragen.</span><span class="sxs-lookup"><span data-stu-id="1c61a-213">Add the following method to the **StatisticsService** class to broadcast the statistics data.</span></span>

    <span data-ttu-id="1c61a-214">(Codeausschnitt - *RealTimeSignalR - Ex1 - NotifyUpdatesMethod*)</span><span class="sxs-lookup"><span data-stu-id="1c61a-214">(Code Snippet - *RealTimeSignalR - Ex1 - NotifyUpdatesMethod*)</span></span>

    [!code-csharp[Main](real-time-web-applications-with-signalr/samples/sample6.cs)]

    > [!NOTE]
    > <span data-ttu-id="1c61a-215">Im obigen Code, verwenden Sie den Methodennamen eine beliebige zum Aufrufen einer Funktion auf dem Client (d. h.: *UpdateStatistics*).</span><span class="sxs-lookup"><span data-stu-id="1c61a-215">In the code above, you are using an arbitrary method name to call a function on the client (i.e.: *updateStatistics*).</span></span> <span data-ttu-id="1c61a-216">Der Name der Methode, die Sie angeben wird als ein dynamisches Objekt interpretiert, was bedeutet, dass es gibt keine IntelliSense oder der Kompilierzeit-Überprüfung für sie.</span><span class="sxs-lookup"><span data-stu-id="1c61a-216">The method name that you specify is interpreted as a dynamic object, which means there is no IntelliSense or compile-time validation for it.</span></span> <span data-ttu-id="1c61a-217">Der Ausdruck wird zur Laufzeit ausgewertet.</span><span class="sxs-lookup"><span data-stu-id="1c61a-217">The expression is evaluated at run time.</span></span> <span data-ttu-id="1c61a-218">Wenn der Methodenaufruf ausgeführt wird, sendet SignalR den Methodennamen und die Parameterwerte an den Client.</span><span class="sxs-lookup"><span data-stu-id="1c61a-218">When the method call executes, SignalR sends the method name and the parameter values to the client.</span></span> <span data-ttu-id="1c61a-219">Verfügt der Client eine Methode, die mit dem Namen übereinstimmt, wird diese Methode wird aufgerufen, und die Parameterwerte werden an sie übergeben.</span><span class="sxs-lookup"><span data-stu-id="1c61a-219">If the client has a method that matches the name, that method is called and the parameter values are passed to it.</span></span> <span data-ttu-id="1c61a-220">Wenn keine übereinstimmende Methode auf dem Client gefunden wird, wird kein Fehler ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="1c61a-220">If no matching method is found on the client, no error is raised.</span></span> <span data-ttu-id="1c61a-221">Weitere Informationen finden Sie unter [für die ASP.NET SignalR-Hubs-API](../guide-to-the-api/hubs-api-guide-server.md).</span><span class="sxs-lookup"><span data-stu-id="1c61a-221">For more information, refer to [ASP.NET SignalR Hubs API Guide](../guide-to-the-api/hubs-api-guide-server.md).</span></span>
11. <span data-ttu-id="1c61a-222">Öffnen der **TriviaController.cs** Seite innerhalb der **Controller** Ordner, und fügen Sie die folgenden using-Direktiven.</span><span class="sxs-lookup"><span data-stu-id="1c61a-222">Open the **TriviaController.cs** page inside the **Controllers** folder and add the following using directives.</span></span>

    [!code-csharp[Main](real-time-web-applications-with-signalr/samples/sample7.cs)]
12. <span data-ttu-id="1c61a-223">Fügen Sie den folgenden hervorgehobenen Code in die **Post** Aktionsmethode.</span><span class="sxs-lookup"><span data-stu-id="1c61a-223">Add the following highlighted code to the **Post** action method.</span></span>

    <span data-ttu-id="1c61a-224">(Codeausschnitt - *RealTimeSignalR - Ex1 - NotifyUpdatesCall*)</span><span class="sxs-lookup"><span data-stu-id="1c61a-224">(Code Snippet - *RealTimeSignalR - Ex1 - NotifyUpdatesCall*)</span></span>

    [!code-csharp[Main](real-time-web-applications-with-signalr/samples/sample8.cs)]
13. <span data-ttu-id="1c61a-225">Öffnen der **Statistics.cshtml** Seite innerhalb der **Ansichten | Startseite** Ordner.</span><span class="sxs-lookup"><span data-stu-id="1c61a-225">Open the **Statistics.cshtml** page inside the **Views | Home** folder.</span></span> <span data-ttu-id="1c61a-226">Suchen Sie die **Skripts** Abschnitt, und fügen Sie die folgenden Skriptverweise am Anfang des Abschnitts.</span><span class="sxs-lookup"><span data-stu-id="1c61a-226">Locate the **Scripts** section and add the following script references at the beginning of the section.</span></span>

    <span data-ttu-id="1c61a-227">(Codeausschnitt - *RealTimeSignalR - Ex1 - SignalRScriptReferences*)</span><span class="sxs-lookup"><span data-stu-id="1c61a-227">(Code Snippet - *RealTimeSignalR - Ex1 - SignalRScriptReferences*)</span></span>

    [!code-cshtml[Main](real-time-web-applications-with-signalr/samples/sample9.cshtml)]

    > [!NOTE]
    > <span data-ttu-id="1c61a-228">Wenn Sie SignalR und anderen JavaScript-Bibliotheken zu Ihrem Visual Studio-Projekt hinzufügen, kann der Paket-Manager eine Version der SignalR-Skriptdatei installieren, als die Version, die in diesem Thema gezeigten ist.</span><span class="sxs-lookup"><span data-stu-id="1c61a-228">When you add SignalR and other script libraries to your Visual Studio project, the Package Manager might install a version of the SignalR script file that is more recent than the version shown in this topic.</span></span> <span data-ttu-id="1c61a-229">Stellen Sie sicher, dass der Verweis auf das Skript in Ihrem Code mit der Version der Skriptbibliothek in Ihrem Projekt installiert übereinstimmt.</span><span class="sxs-lookup"><span data-stu-id="1c61a-229">Make sure that the script reference in your code matches the version of the script library installed in your project.</span></span>
14. <span data-ttu-id="1c61a-230">Fügen Sie folgenden hervorgehobenen Code zum Herstellen einer Verbindung den SignalR-Hub mit dem Client und die Statistikdaten zu aktualisieren, wenn eine neue Nachricht, aus dem Hub empfangen wird hinzu.</span><span class="sxs-lookup"><span data-stu-id="1c61a-230">Add the following highlighted code to connect the client to the SignalR hub and update the statistics data when a new message is received from the hub.</span></span>

    <span data-ttu-id="1c61a-231">(Codeausschnitt - *RealTimeSignalR - Ex1 - SignalRClientCode*)</span><span class="sxs-lookup"><span data-stu-id="1c61a-231">(Code Snippet - *RealTimeSignalR - Ex1 - SignalRClientCode*)</span></span>

    [!code-cshtml[Main](real-time-web-applications-with-signalr/samples/sample10.cshtml)]

    <span data-ttu-id="1c61a-232">In diesem Code wird eine Hubproxy-Klasse erstellen und registrieren einen Ereignishandler zum Lauschen auf Nachrichten, die vom Server gesendet wird.</span><span class="sxs-lookup"><span data-stu-id="1c61a-232">In this code, you are creating a Hub Proxy and registering an event handler to listen for messages sent by the server.</span></span> <span data-ttu-id="1c61a-233">In diesem Fall durch gesendete Nachrichten Abhören der *UpdateStatistics* Methode.</span><span class="sxs-lookup"><span data-stu-id="1c61a-233">In this case, you listen for messages sent through the *updateStatistics* method.</span></span>

<a id="Ex1Task3"></a>
#### <a name="task-3--running-the-solution"></a><span data-ttu-id="1c61a-234">Aufgabe 3: Ausführen der Lösung</span><span class="sxs-lookup"><span data-stu-id="1c61a-234">Task 3 – Running the Solution</span></span>

<span data-ttu-id="1c61a-235">In dieser Aufgabe führen Sie die Projektmappe, um sicherzustellen, dass die Statistiken Ansicht automatisch mit SignalR aktualisiert wird nach eine neue Frage zu beantworten.</span><span class="sxs-lookup"><span data-stu-id="1c61a-235">In this task, you will run the solution to verify that the statistics view is updated automatically using SignalR after answering a new question.</span></span>

1. <span data-ttu-id="1c61a-236">Drücken Sie **F5** um die Projektmappe auszuführen.</span><span class="sxs-lookup"><span data-stu-id="1c61a-236">Press **F5** to run the solution.</span></span>

    > [!NOTE]
    > <span data-ttu-id="1c61a-237">Wenn nicht bereits bei der Anwendung angemeldet, melden Sie sich mit dem Benutzer, die, den Sie in Aufgabe 1 erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="1c61a-237">If not already logged in to the application, log in with the user you created in Task 1.</span></span>
2. <span data-ttu-id="1c61a-238">Öffnen der **Statistiken** Seite in einem neuen Fenster, und fügen Sie der **Startseite** Seite und **Statistiken** Seite von Seite-an-Seite wie in Aufgabe 1.</span><span class="sxs-lookup"><span data-stu-id="1c61a-238">Open the **Statistics** page in a new window and put the **Home** page and **Statistics** page side-by-side as you did in Task 1.</span></span>
3. <span data-ttu-id="1c61a-239">In der **Startseite** Seite, beantworten Sie die Frage, indem Sie eine der Optionen auf.</span><span class="sxs-lookup"><span data-stu-id="1c61a-239">In the **Home** page, answer the question by clicking one of the options.</span></span>

    <span data-ttu-id="1c61a-240">![Eine weitere Frage beantworten](real-time-web-applications-with-signalr/_static/image13.png "eine weitere Frage beantworten")</span><span class="sxs-lookup"><span data-stu-id="1c61a-240">![Answering another question](real-time-web-applications-with-signalr/_static/image13.png "Answering another question")</span></span>

    <span data-ttu-id="1c61a-241">*Eine weitere Frage beantworten*</span><span class="sxs-lookup"><span data-stu-id="1c61a-241">*Answering another question*</span></span>
4. <span data-ttu-id="1c61a-242">Nach dem Klicken auf eine der Schaltflächen, sollte die Antwort angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="1c61a-242">After clicking one of the buttons, the answer should appear.</span></span> <span data-ttu-id="1c61a-243">Beachten Sie, dass die statistischen Informationen auf der Seite automatisch aktualisiert wird, nach der Beantwortung der jeweiligen Fragen mit den aktualisierten Informationen ohne die gesamte Seite aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="1c61a-243">Notice that the Statistics information on the page is updated automatically after answering the question with the updated information without the need to refresh the entire page.</span></span>

    <span data-ttu-id="1c61a-244">![Seite Statistiken aktualisiert werden, nach der Antwort](real-time-web-applications-with-signalr/_static/image14.png "Seite Statistiken aktualisiert werden, nach der Antwort")</span><span class="sxs-lookup"><span data-stu-id="1c61a-244">![Statistics page refreshed after answer](real-time-web-applications-with-signalr/_static/image14.png "Statistics page refreshed after answer")</span></span>

    <span data-ttu-id="1c61a-245">*Seite Statistiken, die nach der Antwort aktualisiert.*</span><span class="sxs-lookup"><span data-stu-id="1c61a-245">*Statistics page refreshed after answer*</span></span>

<a id="Exercise2"></a>
### <a name="exercise-2-scaling-out-using-sql-server"></a><span data-ttu-id="1c61a-246">Übung 2: Horizontales Skalieren mithilfe von SQLServer</span><span class="sxs-lookup"><span data-stu-id="1c61a-246">Exercise 2: Scaling Out Using SQL Server</span></span>

<span data-ttu-id="1c61a-247">Beim Skalieren einer Web-Anwendung in der Regel können Sie zwischen *hochskalieren* und *horizontales hochskalieren* Optionen.</span><span class="sxs-lookup"><span data-stu-id="1c61a-247">When scaling a web application, you can generally choose between *scaling up* and *scaling out* options.</span></span> <span data-ttu-id="1c61a-248">*Zentrales hochskalieren* bedeutet einen größeren Server, mit mehr Ressourcen (CPU, Arbeitsspeicher usw.) während *horizontal hochskalieren* bedeutet, dass weitere Server zur Bewältigung der Arbeitslast hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="1c61a-248">*Scale up* means using a larger server, with more resources (CPU, RAM, etc.) while *scale out* means adding more servers to handle the load.</span></span> <span data-ttu-id="1c61a-249">Das Problem mit dem zweiten ist, dass die Clients auf verschiedenen Servern weitergeleitet werden können.</span><span class="sxs-lookup"><span data-stu-id="1c61a-249">The problem with the latter is that the clients can get routed to different servers.</span></span> <span data-ttu-id="1c61a-250">Ein Client, der mit einem Server verbunden ist, erhalten keine Nachrichten von einem anderen Server gesendet.</span><span class="sxs-lookup"><span data-stu-id="1c61a-250">A client that is connected to one server will not receive messages sent from another server.</span></span>

<span data-ttu-id="1c61a-251">Sie können diese Probleme beheben, indem Sie mithilfe einer Komponente namens *Rückwandplatine*zum Weiterleiten von Nachrichten zwischen Servern.</span><span class="sxs-lookup"><span data-stu-id="1c61a-251">You can solve these issues by using a component called *backplane*, to forward messages between servers.</span></span> <span data-ttu-id="1c61a-252">Mit einer Rückwandplatine aktiviert ist jede Anwendungsinstanz sendet Nachrichten an die Backplane und der Rückwand an die anderen Anwendungsinstanzen weitergeleitet werden.</span><span class="sxs-lookup"><span data-stu-id="1c61a-252">With a backplane enabled, each application instance sends messages to the backplane, and the backplane forwards them to the other application instances.</span></span>

<span data-ttu-id="1c61a-253">Es gibt derzeit drei Typen von Backplanes für SignalR:</span><span class="sxs-lookup"><span data-stu-id="1c61a-253">There are currently three types of backplanes for SignalR:</span></span>

- <span data-ttu-id="1c61a-254">**Windows Azure-Servicebus**.</span><span class="sxs-lookup"><span data-stu-id="1c61a-254">**Windows Azure Service Bus**.</span></span> <span data-ttu-id="1c61a-255">Service Bus ist eine messaging-Infrastruktur, die Komponenten zum Senden von lose verbundenen Nachrichten ermöglicht.</span><span class="sxs-lookup"><span data-stu-id="1c61a-255">Service Bus is a messaging infrastructure that allows components to send loosely coupled messages.</span></span>
- <span data-ttu-id="1c61a-256">**SQLServer**.</span><span class="sxs-lookup"><span data-stu-id="1c61a-256">**SQL Server**.</span></span> <span data-ttu-id="1c61a-257">Die SQL Server-Rückwandplatine Nachrichten, die in SQL-Tabellen geschrieben wird.</span><span class="sxs-lookup"><span data-stu-id="1c61a-257">The SQL Server backplane writes messages to SQL tables.</span></span> <span data-ttu-id="1c61a-258">Der Rückwand verwendet Service Broker für effiziente messaging.</span><span class="sxs-lookup"><span data-stu-id="1c61a-258">The backplane uses Service Broker for efficient messaging.</span></span> <span data-ttu-id="1c61a-259">Es funktioniert jedoch auch, wenn Service Broker nicht aktiviert ist.</span><span class="sxs-lookup"><span data-stu-id="1c61a-259">However, it also works if Service Broker is not enabled.</span></span>
- <span data-ttu-id="1c61a-260">**Redis**.</span><span class="sxs-lookup"><span data-stu-id="1c61a-260">**Redis**.</span></span> <span data-ttu-id="1c61a-261">Redis ist ein Schlüssel-Wert-Speicher im Arbeitsspeicher.</span><span class="sxs-lookup"><span data-stu-id="1c61a-261">Redis is an in-memory key-value store.</span></span> <span data-ttu-id="1c61a-262">Redis unterstützt ein Muster zum Veröffentlichen/Abonnieren ("Pub/Sub") zum Senden von Nachrichten an.</span><span class="sxs-lookup"><span data-stu-id="1c61a-262">Redis supports a publish/subscribe ("pub/sub") pattern for sending messages.</span></span>

<span data-ttu-id="1c61a-263">Jede Nachricht wird über einen Nachrichtenbus gesendet.</span><span class="sxs-lookup"><span data-stu-id="1c61a-263">Every message is sent through a message bus.</span></span> <span data-ttu-id="1c61a-264">Implementiert ein Nachrichtenbus der ["imessagebus"](https://msdn.microsoft.com/library/microsoft.aspnet.signalr.messaging.imessagebus(v=vs.100).aspx) -Schnittstelle, die eine Abstraktion zum Veröffentlichen/Abonnieren bereitstellt.</span><span class="sxs-lookup"><span data-stu-id="1c61a-264">A message bus implements the [IMessageBus](https://msdn.microsoft.com/library/microsoft.aspnet.signalr.messaging.imessagebus(v=vs.100).aspx) interface, which provides a publish/subscribe abstraction.</span></span> <span data-ttu-id="1c61a-265">Die Backplanes zu arbeiten, indem Sie den standardmäßigen ersetzen **"imessagebus"** mit einem Bus, die für diese Rückwandplatine konzipiert.</span><span class="sxs-lookup"><span data-stu-id="1c61a-265">The backplanes work by replacing the default **IMessageBus** with a bus designed for that backplane.</span></span>

<span data-ttu-id="1c61a-266">Jede Serverinstanz eine Verbindung mit der Rückwand über den Bus.</span><span class="sxs-lookup"><span data-stu-id="1c61a-266">Each server instance connects to the backplane through the bus.</span></span> <span data-ttu-id="1c61a-267">Wenn eine Nachricht gesendet wird, an die Backplane darin, und der Rückwand sendet sie an jedem Server.</span><span class="sxs-lookup"><span data-stu-id="1c61a-267">When a message is sent, it goes to the backplane, and the backplane sends it to every server.</span></span> <span data-ttu-id="1c61a-268">Wenn ein Server eine Nachricht von der Backplane empfängt, speichert er die Nachricht in ihrem lokalen Cache.</span><span class="sxs-lookup"><span data-stu-id="1c61a-268">When a server receives a message from the backplane, it stores the message in its local cache.</span></span> <span data-ttu-id="1c61a-269">Der Server sendet dann Nachrichten für Clients aus dem lokalen Cache.</span><span class="sxs-lookup"><span data-stu-id="1c61a-269">The server then delivers messages to clients from its local cache.</span></span>

<span data-ttu-id="1c61a-270">Weitere Informationen zur Funktionsweise der SignalR-Backplane finden Sie in diesem [Artikel](../performance/scaleout-in-signalr.md).</span><span class="sxs-lookup"><span data-stu-id="1c61a-270">For more information about how the SignalR backplane works, read this [article](../performance/scaleout-in-signalr.md).</span></span>

> [!NOTE]
> <span data-ttu-id="1c61a-271">Es gibt einige Szenarien, in denen eine Rückwandplatine Engpässe auftreten können.</span><span class="sxs-lookup"><span data-stu-id="1c61a-271">There are some scenarios where a backplane can become a bottleneck.</span></span> <span data-ttu-id="1c61a-272">Hier sind einige typischen Szenarien für SignalR:</span><span class="sxs-lookup"><span data-stu-id="1c61a-272">Here are some typical SignalR scenarios:</span></span>
> 
> - <span data-ttu-id="1c61a-273">[Serverübertragung](tutorial-server-broadcast-with-signalr.md) (beispielsweise Börsenticker): Backplanes eignen sich gut für dieses Szenario, da der Server die Rate kontrolliert, an dem Nachrichten gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="1c61a-273">[Server broadcast](tutorial-server-broadcast-with-signalr.md) (e.g., stock ticker): Backplanes work well for this scenario, because the server controls the rate at which messages are sent.</span></span>
> - <span data-ttu-id="1c61a-274">[Client-zu-Client](tutorial-getting-started-with-signalr.md) (z. B. chat): In diesem Szenario kann einen Engpass von der Rückwand sein, wenn die Anzahl der Nachrichten mit der Anzahl der Clients skaliert werden kann, d. h., wenn die Anzahl der Nachrichten wird proportional mehr Clients verknüpfen.</span><span class="sxs-lookup"><span data-stu-id="1c61a-274">[Client-to-client](tutorial-getting-started-with-signalr.md) (e.g., chat): In this scenario, the backplane might be a bottleneck if the number of messages scales with the number of clients; that is, if the rate of messages grows proportionally as more clients join.</span></span>
> - <span data-ttu-id="1c61a-275">[Echtzeitnachrichten](tutorial-high-frequency-realtime-with-signalr.md) (z. B. in Echtzeit Spiele): eine Rückwandplatine wird für dieses Szenario nicht empfohlen.</span><span class="sxs-lookup"><span data-stu-id="1c61a-275">[High-frequency realtime](tutorial-high-frequency-realtime-with-signalr.md) (e.g., real-time games): A backplane is not recommended for this scenario.</span></span>


<span data-ttu-id="1c61a-276">In dieser Übung verwenden Sie **SQL Server** zum Verteilen von Nachrichten über die **Meister Quiz** Anwendung.</span><span class="sxs-lookup"><span data-stu-id="1c61a-276">In this exercise, you will use **SQL Server** to distribute messages across the **Geek Quiz** application.</span></span> <span data-ttu-id="1c61a-277">Führen Sie diese Aufgaben auf einem einzelnen Testcomputer zu erfahren, wie die Konfiguration einzurichten, sondern um den vollen Effekt zu erzielen, benötigen Sie zum Bereitstellen der SignalR-Anwendung mit zwei oder mehr Servern.</span><span class="sxs-lookup"><span data-stu-id="1c61a-277">You will run these tasks on a single test machine to learn how to set up the configuration, but in order to get the full effect, you will need to deploy the SignalR application to two or more servers.</span></span> <span data-ttu-id="1c61a-278">Sie müssen auch SQL Server auf einem der Server oder auf einem separaten dedizierten Server installieren.</span><span class="sxs-lookup"><span data-stu-id="1c61a-278">You must also install SQL Server on one of the servers, or on a separate dedicated server.</span></span>

![Scale Out mit SQL Server-Diagramm](real-time-web-applications-with-signalr/_static/image15.png)

<a id="Ex2Task1"></a>
#### <a name="task-1---understanding-the-scenario"></a><span data-ttu-id="1c61a-280">Aufgabe 1 – Grundlegendes zur das Szenario</span><span class="sxs-lookup"><span data-stu-id="1c61a-280">Task 1 - Understanding the Scenario</span></span>

<span data-ttu-id="1c61a-281">In dieser Aufgabe führen Sie 2 Instanzen **Meister Quiz** simulieren mehrere IIS-Instanzen auf dem lokalen Computer.</span><span class="sxs-lookup"><span data-stu-id="1c61a-281">In this task, you will run 2 instances of **Geek Quiz** simulating multiple IIS instances on your local machine.</span></span> <span data-ttu-id="1c61a-282">In diesem Szenario, bei der Beantwortung von Fragen Trivia, eine Anwendung wird nicht auf die Seite Statistiken der zweiten Instanz Update benachrichtigt werden.</span><span class="sxs-lookup"><span data-stu-id="1c61a-282">In this scenario, when answering trivia questions on one application, update won't be notified on the statistics page of the second instance.</span></span> <span data-ttu-id="1c61a-283">Dieser Simulation ähnelt eine Umgebung, in denen Ihre Anwendung auf mehreren Instanzen bereitgestellt ist, und mit einem Load Balancer mit ihnen kommunizieren.</span><span class="sxs-lookup"><span data-stu-id="1c61a-283">This simulation resembles an environment where your application is deployed on multiple instances and using a load balancer to communicate with them.</span></span>

1. <span data-ttu-id="1c61a-284">Öffnen der **Begin.sln** Lösung befindet sich in der **Quelle/Ex2-ScalingOutWithSQLServer/Anfang** Ordner.</span><span class="sxs-lookup"><span data-stu-id="1c61a-284">Open the **Begin.sln** solution located in the **Source/Ex2-ScalingOutWithSQLServer/Begin** folder.</span></span> <span data-ttu-id="1c61a-285">Nach dem Laden, werden Sie feststellen, auf die **Server-Explorer** , dass die Lösung besteht aus zwei Projekte mit identischer Strukturen aber unterschiedliche Namen.</span><span class="sxs-lookup"><span data-stu-id="1c61a-285">Once loaded, you will notice on the **Server Explorer** that the solution has two projects with identical structures but different names.</span></span> <span data-ttu-id="1c61a-286">Dies wird simulieren, zwei Instanzen der gleichen Anwendung auf Ihrem lokalen Computer ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="1c61a-286">This will simulate running two instances of the same application on your local machine.</span></span>

    <span data-ttu-id="1c61a-287">![Beginnen Sie Lösung 2 Instanzen Meister Quiz simulieren](real-time-web-applications-with-signalr/_static/image16.png "Lösung simulieren von 2 Instanzen Meister Quiz beginnen")</span><span class="sxs-lookup"><span data-stu-id="1c61a-287">![Begin Solution Simulating 2 Instances of Geek Quiz](real-time-web-applications-with-signalr/_static/image16.png "Begin Solution Simulating 2 Instances of Geek Quiz")</span></span>

    <span data-ttu-id="1c61a-288">*Beginnen Sie Lösung 2 Instanzen Meister Quiz simulieren*</span><span class="sxs-lookup"><span data-stu-id="1c61a-288">*Begin Solution Simulating 2 Instances of Geek Quiz*</span></span>
2. <span data-ttu-id="1c61a-289">Öffnen Sie die Seite "Eigenschaften" der Projektmappe, indem Sie mit der rechten Maustaste den Knoten "Projektmappe", und wählen **Eigenschaften**.</span><span class="sxs-lookup"><span data-stu-id="1c61a-289">Open the properties page of the solution by right-clicking the solution node and selecting **Properties**.</span></span> <span data-ttu-id="1c61a-290">Unter **Startprojekt**Option **mehrere Startprojekte** , und ändern Sie die **Aktion** Wert für beide Projekte in *starten*.</span><span class="sxs-lookup"><span data-stu-id="1c61a-290">Under **Startup Project**, select **Multiple startup projects** and change the **Action** value for both projects to *Start*.</span></span>

    <span data-ttu-id="1c61a-291">![Mehrere Projekte starten](real-time-web-applications-with-signalr/_static/image17.png "mehrere Projekte starten")</span><span class="sxs-lookup"><span data-stu-id="1c61a-291">![Starting Multiple Projects](real-time-web-applications-with-signalr/_static/image17.png "Starting Multiple Projects")</span></span>

    <span data-ttu-id="1c61a-292">*Mehrere Projekte starten*</span><span class="sxs-lookup"><span data-stu-id="1c61a-292">*Starting Multiple Projects*</span></span>
3. <span data-ttu-id="1c61a-293">Drücken Sie **F5** um die Projektmappe auszuführen.</span><span class="sxs-lookup"><span data-stu-id="1c61a-293">Press **F5** to run the solution.</span></span> <span data-ttu-id="1c61a-294">Starten der Anwendung werden zwei Instanzen von **Meister Quiz** in verschiedene Ports, simulieren Sie mehrere Instanzen der gleichen Anwendung.</span><span class="sxs-lookup"><span data-stu-id="1c61a-294">The application will launch two instances of **Geek Quiz** in different ports, simulating multiple instances of the same application.</span></span> <span data-ttu-id="1c61a-295">Heften Sie einen Browser auf der linken Seite und die andere auf der rechten Seite des Bildschirms.</span><span class="sxs-lookup"><span data-stu-id="1c61a-295">Pin one of the browsers on left and the other on the right of your screen.</span></span> <span data-ttu-id="1c61a-296">Melden Sie sich mit Ihren Anmeldeinformationen, oder registrieren Sie einen neuen Benutzer.</span><span class="sxs-lookup"><span data-stu-id="1c61a-296">Log in with your credentials or register a new user.</span></span> <span data-ttu-id="1c61a-297">Nach der Anmeldung auf der linken Seite die Trivia beizubehalten, und fahren Sie mit der **Statistiken** Seite im Browser auf der rechten Seite.</span><span class="sxs-lookup"><span data-stu-id="1c61a-297">Once logged in, keep the Trivia page on the left and go to the **Statistics** page in the browser on the right.</span></span>

    ![Meister Quiz nebeneinander](real-time-web-applications-with-signalr/_static/image18.png)

    <span data-ttu-id="1c61a-299">*Meister Quiz nebeneinander*</span><span class="sxs-lookup"><span data-stu-id="1c61a-299">*Geek Quiz Side by Side*</span></span>

    ![Meister Quiz in verschiedene Ports](real-time-web-applications-with-signalr/_static/image19.png)

    <span data-ttu-id="1c61a-301">*Meister Quiz in verschiedene Ports*</span><span class="sxs-lookup"><span data-stu-id="1c61a-301">*Geek Quiz in Different Ports*</span></span>
4. <span data-ttu-id="1c61a-302">Starten der Beantwortung von Fragen im linken Browser, und Sie werden feststellen, dass die **Statistiken** Seite in der richtigen Browser wird nicht aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="1c61a-302">Start answering questions in the left browser and you will notice that the **Statistics** page in the right browser is not being updated.</span></span> <span data-ttu-id="1c61a-303">Grund hierfür ist, **SignalR** verwendet eine lokale Zwischenspeichern, um Nachrichten auf ihren Clients verteilen und mehrere Instanzen dieses Szenario simuliert, daher der Cache wird nicht gemeinsam genutzt werden.</span><span class="sxs-lookup"><span data-stu-id="1c61a-303">This is because **SignalR** uses a local cache to distribute messages across their clients and this scenario is simulating multiple instances, therefore the cache is not shared between them.</span></span> <span data-ttu-id="1c61a-304">Sie können sicherstellen, dass **SignalR** testen die gleichen Schritte jedoch mithilfe einer einzigen Apps funktioniert.</span><span class="sxs-lookup"><span data-stu-id="1c61a-304">You can verify that **SignalR** is working by testing the same steps but using a single app.</span></span> <span data-ttu-id="1c61a-305">In den folgenden Aufgaben konfigurieren Sie eine Rückwandplatine, um die Nachrichten über Instanzen hinweg zu replizieren.</span><span class="sxs-lookup"><span data-stu-id="1c61a-305">In the following tasks you will configure a backplane to replicate the messages across instances.</span></span>
5. <span data-ttu-id="1c61a-306">Wechseln Sie zurück zu Visual Studio, und beenden Sie des Debuggens.</span><span class="sxs-lookup"><span data-stu-id="1c61a-306">Go back to Visual Studio and stop debugging.</span></span>

<a id="Ex2Task2"></a>
#### <a name="task-2--creating-the-sql-server-backplane"></a><span data-ttu-id="1c61a-307">Aufgabe 2: Erstellen der SQL Server-Rückwandplatine</span><span class="sxs-lookup"><span data-stu-id="1c61a-307">Task 2 – Creating the SQL Server Backplane</span></span>

<span data-ttu-id="1c61a-308">In dieser Aufgabe erstellen Sie eine Datenbank, die als eine Rückwandplatine für dient der **Meister Quiz** Anwendung.</span><span class="sxs-lookup"><span data-stu-id="1c61a-308">In this task, you will create a database that will serve as a backplane for the **Geek Quiz** application.</span></span> <span data-ttu-id="1c61a-309">Verwenden Sie **Objekt-Explorer von SQL Server** auf Ihrem Server suchen und Initialisieren der Datenbank.</span><span class="sxs-lookup"><span data-stu-id="1c61a-309">You will use **SQL Server Object Explorer** to browse your server and initialize the database.</span></span> <span data-ttu-id="1c61a-310">Aktivieren Sie darüber hinaus die **Service Broker**.</span><span class="sxs-lookup"><span data-stu-id="1c61a-310">Additionally, you will enable the **Service Broker**.</span></span>

1. <span data-ttu-id="1c61a-311">In **Visual Studio**, offene Menü **Ansicht** , und wählen Sie **Objekt-Explorer von SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="1c61a-311">In **Visual Studio**, open menu **View** and select **SQL Server Object Explorer**.</span></span>
2. <span data-ttu-id="1c61a-312">Verbinden mit der LocalDB-Instanz, indem Sie mit der rechten Maustaste die **SQL Server** und dann **SQL Server hinzufügen...**  Option.</span><span class="sxs-lookup"><span data-stu-id="1c61a-312">Connect to your LocalDB instance by right-clicking the **SQL Server** node and selecting **Add SQL Server...** option.</span></span>

    <span data-ttu-id="1c61a-313">![Hinzufügen einer SQL Server-Instanz](real-time-web-applications-with-signalr/_static/image20.png "Hinzufügen einer SQL Server-Instanz")</span><span class="sxs-lookup"><span data-stu-id="1c61a-313">![Adding a SQL Server Instance](real-time-web-applications-with-signalr/_static/image20.png "Adding a SQL Server Instance")</span></span>

    <span data-ttu-id="1c61a-314">*Hinzufügen von SQL Server-Instanz zu SQL Server-Objekt-Explorer*</span><span class="sxs-lookup"><span data-stu-id="1c61a-314">*Adding a SQL Server instance to SQL Server Object Explorer*</span></span>
3. <span data-ttu-id="1c61a-315">Legen Sie die **Servernamen** zu *(Localdb) \v11.0* und lassen Sie **Windows-Authentifizierung** als Authentifizierungsmodus.</span><span class="sxs-lookup"><span data-stu-id="1c61a-315">Set the **server name** to *(localdb)\v11.0* and leave **Windows Authentication** as your authentication mode.</span></span> <span data-ttu-id="1c61a-316">Klicken Sie auf **Connect** um den Vorgang fortzusetzen.</span><span class="sxs-lookup"><span data-stu-id="1c61a-316">Click **Connect** to continue.</span></span>

    <span data-ttu-id="1c61a-317">![Herstellen einer Verbindung mit LocalDB](real-time-web-applications-with-signalr/_static/image21.png "Herstellen einer Verbindung mit LocalDB")</span><span class="sxs-lookup"><span data-stu-id="1c61a-317">![Connecting to LocalDB](real-time-web-applications-with-signalr/_static/image21.png "Connecting to LocalDB")</span></span>

    <span data-ttu-id="1c61a-318">*Herstellen einer Verbindung mit LocalDB*</span><span class="sxs-lookup"><span data-stu-id="1c61a-318">*Connecting to LocalDB*</span></span>
4. <span data-ttu-id="1c61a-319">Nun, da Sie mit der LocalDB-Instanz verbunden sind, müssen Sie eine Datenbank zu erstellen, die die SQL Server-Rückwandplatine für SignalR darstellt.</span><span class="sxs-lookup"><span data-stu-id="1c61a-319">Now that you are connected to your LocalDB instance, you will need to create a database that will represent the SQL Server backplane for SignalR.</span></span> <span data-ttu-id="1c61a-320">Dazu, mit der Maustaste der **Datenbanken** Knoten, und wählen **neue Datenbank hinzufügen**.</span><span class="sxs-lookup"><span data-stu-id="1c61a-320">To do this, right-click the **Databases** node and select **Add New Database**.</span></span>

    <span data-ttu-id="1c61a-321">![Hinzufügen einer neuen Datenbank](real-time-web-applications-with-signalr/_static/image22.png "Hinzufügen einer neuen Datenbank")</span><span class="sxs-lookup"><span data-stu-id="1c61a-321">![Adding a new database](real-time-web-applications-with-signalr/_static/image22.png "Adding a new database")</span></span>

    <span data-ttu-id="1c61a-322">*Hinzufügen einer neuen Datenbank*</span><span class="sxs-lookup"><span data-stu-id="1c61a-322">*Adding a new database*</span></span>
5. <span data-ttu-id="1c61a-323">Legen Sie den Datenbanknamen *SignalR* , und klicken Sie auf **OK** , ihn zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="1c61a-323">Set the database name to *SignalR* and click **OK** to create it.</span></span>

    <span data-ttu-id="1c61a-324">![Erstellen der Datenbank SignalR](real-time-web-applications-with-signalr/_static/image23.png "die SignalR-Datenbank erstellen")</span><span class="sxs-lookup"><span data-stu-id="1c61a-324">![Creating the SignalR database](real-time-web-applications-with-signalr/_static/image23.png "Creating the SignalR database")</span></span>

    <span data-ttu-id="1c61a-325">*Erstellen der SignalR-Datenbank*</span><span class="sxs-lookup"><span data-stu-id="1c61a-325">*Creating the SignalR database*</span></span>

    > [!NOTE]
    > <span data-ttu-id="1c61a-326">Sie können einen beliebigen Namen für die Datenbank auswählen.</span><span class="sxs-lookup"><span data-stu-id="1c61a-326">You can choose any name for the database.</span></span>
6. <span data-ttu-id="1c61a-327">Um Updates von der Backplane effizienter zu erhalten, wird empfohlen, die Service Broker für die Datenbank zu aktivieren.</span><span class="sxs-lookup"><span data-stu-id="1c61a-327">To receive updates more efficiently from the backplane, it is recommended to enable Service Broker for the database.</span></span> <span data-ttu-id="1c61a-328">Service Broker bietet systemeigene Unterstützung für Messaging- und Warteschlangen in SQL Server.</span><span class="sxs-lookup"><span data-stu-id="1c61a-328">Service Broker provides native support for messaging and queuing in SQL Server.</span></span> <span data-ttu-id="1c61a-329">Der Rückwand funktioniert auch ohne Service Broker.</span><span class="sxs-lookup"><span data-stu-id="1c61a-329">The backplane also works without Service Broker.</span></span> <span data-ttu-id="1c61a-330">Öffnen Sie eine neue Abfrage, indem Sie mit der rechten Maustaste die Datenbank, und wählen **neue Abfrage**.</span><span class="sxs-lookup"><span data-stu-id="1c61a-330">Open a new query by right-clicking the database and select **New Query**.</span></span>

    <span data-ttu-id="1c61a-331">![Öffnen eine neue Abfrage](real-time-web-applications-with-signalr/_static/image24.png "eine neue Abfrage öffnen")</span><span class="sxs-lookup"><span data-stu-id="1c61a-331">![Opening a New Query](real-time-web-applications-with-signalr/_static/image24.png "Opening a New Query")</span></span>

    <span data-ttu-id="1c61a-332">*Öffnen eine neue Abfrage*</span><span class="sxs-lookup"><span data-stu-id="1c61a-332">*Opening a New Query*</span></span>
7. <span data-ttu-id="1c61a-333">Um zu überprüfen, ob Service Broker aktiviert ist, Abfragen der **ist\_Broker\_aktiviert** -Spalte in der **sys.databases** -Katalogsicht angezeigt.</span><span class="sxs-lookup"><span data-stu-id="1c61a-333">To check whether Service Broker is enabled, query the **is\_broker\_enabled** column in the **sys.databases** catalog view.</span></span> <span data-ttu-id="1c61a-334">Führen Sie das folgende Skript in der zuletzt geöffneten Abfragefenster ein.</span><span class="sxs-lookup"><span data-stu-id="1c61a-334">Execute the following script in the recently opened query window.</span></span>

    [!code-sql[Main](real-time-web-applications-with-signalr/samples/sample11.sql)]

    <span data-ttu-id="1c61a-335">![Abfragen des Status der Service Broker](real-time-web-applications-with-signalr/_static/image25.png "Abfragen des Service Broker-Status")</span><span class="sxs-lookup"><span data-stu-id="1c61a-335">![Querying the Service Broker Status](real-time-web-applications-with-signalr/_static/image25.png "Querying the Service Broker Status")</span></span>

    <span data-ttu-id="1c61a-336">*Abfragen des Service Broker-Status*</span><span class="sxs-lookup"><span data-stu-id="1c61a-336">*Querying the Service Broker Status*</span></span>
8. <span data-ttu-id="1c61a-337">Wenn der Wert des der **ist\_Broker\_aktiviert** Spalte in der Datenbank ist &quot;0&quot;, verwenden Sie den folgenden Befehl, um ihn zu aktivieren.</span><span class="sxs-lookup"><span data-stu-id="1c61a-337">If the value of the **is\_broker\_enabled** column in your database is &quot;0&quot;, use the following command to enable it.</span></span> <span data-ttu-id="1c61a-338">Ersetzen Sie dies **&lt;Ihre Datenbank&gt;** mit dem Namen, die Sie beim Erstellen der Datenbank festlegen (z. B.: SignalR).</span><span class="sxs-lookup"><span data-stu-id="1c61a-338">Replace **&lt;YOUR-DATABASE&gt;** with the name you set when creating the database (e.g.: SignalR).</span></span>

    [!code-sql[Main](real-time-web-applications-with-signalr/samples/sample12.sql)]

    <span data-ttu-id="1c61a-339">![Aktivieren von Service Broker](real-time-web-applications-with-signalr/_static/image26.png "Aktivieren von Service Broker")</span><span class="sxs-lookup"><span data-stu-id="1c61a-339">![Enabling Service Broker](real-time-web-applications-with-signalr/_static/image26.png "Enabling Service Broker")</span></span>

    <span data-ttu-id="1c61a-340">*Aktivieren von Service Broker*</span><span class="sxs-lookup"><span data-stu-id="1c61a-340">*Enabling Service Broker*</span></span>

    > [!NOTE]
    > <span data-ttu-id="1c61a-341">Wenn diese Abfrage angezeigt wird, ein Deadlock auftreten, stellen Sie sicher, dass keine Programme, die mit der Datenbank verbunden sind.</span><span class="sxs-lookup"><span data-stu-id="1c61a-341">If this query appears to deadlock, make sure there are no applications connected to the DB.</span></span>

<a id="Ex2Task3"></a>
#### <a name="task-3--configuring-the-signalr-application"></a><span data-ttu-id="1c61a-342">Aufgabe 3: Konfigurieren der SignalR-Anwendung</span><span class="sxs-lookup"><span data-stu-id="1c61a-342">Task 3 – Configuring the SignalR Application</span></span>

<span data-ttu-id="1c61a-343">In dieser Aufgabe Konfigurieren Sie **Meister Quiz** zur Verbindung mit der SQL Server-Rückwandplatine.</span><span class="sxs-lookup"><span data-stu-id="1c61a-343">In this task, you will configure **Geek Quiz** to connect to the SQL Server backplane.</span></span> <span data-ttu-id="1c61a-344">Fügen Sie zuerst die **SignalR.SqlServer** Zeichenfolge von NuGet-Paket und die Verbindung mit Ihrer Datenbank Backplane.</span><span class="sxs-lookup"><span data-stu-id="1c61a-344">You will first add the **SignalR.SqlServer** NuGet package and set the connection string to your backplane database.</span></span>

1. <span data-ttu-id="1c61a-345">Öffnen der **-Paket-Manager-Konsole** aus **Tools** | **Bibliothekspaket-Manager**.</span><span class="sxs-lookup"><span data-stu-id="1c61a-345">Open the **Package Manager Console** from **Tools** | **Library Package Manager**.</span></span> <span data-ttu-id="1c61a-346">Stellen Sie sicher, dass **GeekQuiz** Projekt ausgewählt ist, der **Standardprojekt** Dropdown-Liste.</span><span class="sxs-lookup"><span data-stu-id="1c61a-346">Make sure that **GeekQuiz** project is selected in the **Default project** drop-down list.</span></span> <span data-ttu-id="1c61a-347">Geben Sie den folgenden Befehl zum Installieren der **Microsoft.AspNet.SignalR.SqlServer** NuGet-Paket.</span><span class="sxs-lookup"><span data-stu-id="1c61a-347">Type the following command to install the **Microsoft.AspNet.SignalR.SqlServer** NuGet package.</span></span>

    [!code-powershell[Main](real-time-web-applications-with-signalr/samples/sample13.ps1)]
2. <span data-ttu-id="1c61a-348">Wiederholen Sie dieses Mal jedoch den vorherigen Schritt für Projekt **GeekQuiz2**.</span><span class="sxs-lookup"><span data-stu-id="1c61a-348">Repeat the previous step but this time for project **GeekQuiz2**.</span></span>
3. <span data-ttu-id="1c61a-349">Öffnen Sie zum Konfigurieren der SQL Server-Rückwandplatine der **"Startup.cs"** Datei mit den **GeekQuiz** Projekt, und fügen Sie den folgenden Code der **konfigurieren** Methode.</span><span class="sxs-lookup"><span data-stu-id="1c61a-349">To configure the SQL Server backplane, open the **Startup.cs** file of the **GeekQuiz** project and add the following code to the **Configure** method.</span></span> <span data-ttu-id="1c61a-350">Ersetzen Sie dies **&lt;Ihre Datenbank&gt;** durch Ihren Datenbanknamen, die Sie beim Erstellen der SQL Server-Rückwandplatine verwendet.</span><span class="sxs-lookup"><span data-stu-id="1c61a-350">Replace **&lt;YOUR-DATABASE&gt;** with your database name you used when creating the SQL Server backplane.</span></span> <span data-ttu-id="1c61a-351">Wiederholen Sie diesen Schritt für die **GeekQuiz2** Projekt.</span><span class="sxs-lookup"><span data-stu-id="1c61a-351">Repeat this step for the **GeekQuiz2** project.</span></span>

    <span data-ttu-id="1c61a-352">(Codeausschnitt - *RealTimeSignalR - Ex2 - StartupConfiguration*)</span><span class="sxs-lookup"><span data-stu-id="1c61a-352">(Code Snippet - *RealTimeSignalR - Ex2 - StartupConfiguration*)</span></span>

    [!code-csharp[Main](real-time-web-applications-with-signalr/samples/sample14.cs)]
4. <span data-ttu-id="1c61a-353">Nun, dass beide Projekte für die Verwendung der SQL Server-Rückwandplatine konfiguriert sind, drücken Sie die **F5** sie gleichzeitig ausführen.</span><span class="sxs-lookup"><span data-stu-id="1c61a-353">Now that both projects are configured to use the SQL Server backplane, press **F5** to run them simultaneously.</span></span>
5. <span data-ttu-id="1c61a-354">In diesem Fall **Visual Studio** startet nun zwei Instanzen von **Meister Quiz** in unterschiedlichen Ports.</span><span class="sxs-lookup"><span data-stu-id="1c61a-354">Again, **Visual Studio** will launch two instances of **Geek Quiz** in different ports.</span></span> <span data-ttu-id="1c61a-355">Heften Sie einer der Browser auf der linken Seite und der andere auf der rechten Seite des Bildschirms an, und melden Sie sich mit Ihren Anmeldeinformationen.</span><span class="sxs-lookup"><span data-stu-id="1c61a-355">Pin one of the browsers on the left and the other on the right of your screen and log in with your credentials.</span></span> <span data-ttu-id="1c61a-356">Halten Sie die Trivia-Seite auf der linken Seite, und wechseln Sie zu **Statistiken** Pagein der richtige Browser.</span><span class="sxs-lookup"><span data-stu-id="1c61a-356">Keep the Trivia page on the left and go to **Statistics** pagein the right browser.</span></span>
6. <span data-ttu-id="1c61a-357">Starten Sie die Beantwortung von Fragen im linken Browser.</span><span class="sxs-lookup"><span data-stu-id="1c61a-357">Start answering questions in the left browser.</span></span> <span data-ttu-id="1c61a-358">Dieses Mal die **Statistiken** Seite wird aktualisiert, Dank der Backplane.</span><span class="sxs-lookup"><span data-stu-id="1c61a-358">This time, the **Statistics** page is updated thanks to the backplane.</span></span> <span data-ttu-id="1c61a-359">Wechseln zwischen Anwendungen (**Statistiken** befindet sich jetzt auf der linken Seite und **Trivia** auf der rechten Seite), und wiederholen Sie den Test aus, um sicherzustellen, dass sie für beide Instanzen funktioniert.</span><span class="sxs-lookup"><span data-stu-id="1c61a-359">Switch between applications (**Statistics** is now on the left, and **Trivia** is on the right) and repeat the test to validate that it is working for both instances.</span></span> <span data-ttu-id="1c61a-360">Der Rückwand dient als ein *freigegebenen Cache* von Nachrichten für jeden verbundenen Server, und jeder Server speichert die Nachrichten in ihren eigenen lokalen Cache verbundenen Clients zu verteilen.</span><span class="sxs-lookup"><span data-stu-id="1c61a-360">The backplane serves as a *shared cache* of messages for each connected server, and each server will store the messages in their own local cache to distribute to connected clients.</span></span>
7. <span data-ttu-id="1c61a-361">Wechseln Sie zurück zu Visual Studio, und beenden Sie des Debuggens.</span><span class="sxs-lookup"><span data-stu-id="1c61a-361">Go back to Visual Studio and stop debugging.</span></span>
8. <span data-ttu-id="1c61a-362">Die SQL Server-Rückwandplatine-Komponente generiert automatisch die erforderlichen Tabellen für die angegebene Datenbank.</span><span class="sxs-lookup"><span data-stu-id="1c61a-362">The SQL Server backplane component automatically generates the necessary tables on the specified database.</span></span> <span data-ttu-id="1c61a-363">In der **Objekt-Explorer von SQL Server** Bereich, öffnen Sie die Datenbank, die Sie für die Rückwandplatine erstellt haben (z. B.: SignalR), und erweitern Sie die Tabellen.</span><span class="sxs-lookup"><span data-stu-id="1c61a-363">In the **SQL Server Object Explorer** panel, open the database you created for the backplane (e.g.: SignalR) and expand its tables.</span></span> <span data-ttu-id="1c61a-364">In den folgenden Tabellen sollte angezeigt werden:</span><span class="sxs-lookup"><span data-stu-id="1c61a-364">You should see the following tables:</span></span>

    ![Rückwand generiert Tabellen](real-time-web-applications-with-signalr/_static/image27.png)

    <span data-ttu-id="1c61a-366">*Rückwand generiert Tabellen*</span><span class="sxs-lookup"><span data-stu-id="1c61a-366">*Backplane Generated Tables*</span></span>
9. <span data-ttu-id="1c61a-367">Mit der rechten Maustaste die **SignalR.Messages\_0** Tabelle, und wählen Sie **Ansichtsdaten**.</span><span class="sxs-lookup"><span data-stu-id="1c61a-367">Right-click the **SignalR.Messages\_0** table and select **View Data**.</span></span>

    ![Tabelle für die SignalR-Backplane Nachrichten](real-time-web-applications-with-signalr/_static/image28.png)

    <span data-ttu-id="1c61a-369">*Tabelle für die SignalR-Backplane Nachrichten*</span><span class="sxs-lookup"><span data-stu-id="1c61a-369">*View SignalR Backplane Messages Table*</span></span>
10. <span data-ttu-id="1c61a-370">Sehen Sie die verschiedenen Nachrichten, die an die **Hub** , wenn die Trivia Fragen zu beantworten.</span><span class="sxs-lookup"><span data-stu-id="1c61a-370">You can see the different messages sent to the **Hub** when answering the trivia questions.</span></span> <span data-ttu-id="1c61a-371">Der Rückwand verteilt diese Nachrichten in einer beliebigen Instanz verbunden.</span><span class="sxs-lookup"><span data-stu-id="1c61a-371">The backplane distributes these messages to any connected instance.</span></span>

    ![Rückwand Nachrichten-Tabelle](real-time-web-applications-with-signalr/_static/image29.png)

    <span data-ttu-id="1c61a-373">*Rückwand Nachrichten-Tabelle*</span><span class="sxs-lookup"><span data-stu-id="1c61a-373">*Backplane Messages Table*</span></span>

* * *

<a id="Summary"></a>
## <a name="summary"></a><span data-ttu-id="1c61a-374">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="1c61a-374">Summary</span></span>

<span data-ttu-id="1c61a-375">In dieser praktischen Übungseinheit haben Sie gelernt, wie hinzuzufügende **SignalR** können Sie Ihre Anwendung "und" Send-Benachrichtigungen vom Server zu Ihren verbundenen Clients, die mithilfe **Hubs**.</span><span class="sxs-lookup"><span data-stu-id="1c61a-375">In this hands-on lab, you have learned how to add **SignalR** to your application and send notifications from the server to your connected clients using **Hubs**.</span></span> <span data-ttu-id="1c61a-376">Darüber hinaus haben Sie gelernt, skalieren Sie Ihre Anwendung mithilfe einer *Rückwandplatine* Komponente auf, wenn Ihre Anwendung in mehreren IIS-Instanzen bereitgestellt wird.</span><span class="sxs-lookup"><span data-stu-id="1c61a-376">Additionally, you learned how to scale out your application by using a *backplane* component when your application is deployed in multiple IIS instances.</span></span>
