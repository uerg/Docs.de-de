---
uid: web-forms/overview/older-versions-getting-started/master-pages/nested-master-pages-cs
title: Geschachtelte Masterseiten (c#) | Microsoft-Dokumentation
author: rick-anderson
description: Zeigt, wie eine Masterseite innerhalb einer anderen geschachtelt werden.
ms.author: aspnetcontent
ms.date: 07/28/2008
ms.assetid: 32b7fb6e-d74b-4048-91f8-70631b2523ee
msc.legacyurl: /web-forms/overview/older-versions-getting-started/master-pages/nested-master-pages-cs
msc.type: authoredcontent
ms.openlocfilehash: 71cefa603d1b54e8dbbeb0f6e7e3ef8e0c0a93f8
ms.sourcegitcommit: b28cd0313af316c051c2ff8549865bff67f2fbb4
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 07/05/2018
ms.locfileid: "37840644"
---
<a name="nested-master-pages-c"></a><span data-ttu-id="8f67a-103">Geschachtelte Masterseiten (c#)</span><span class="sxs-lookup"><span data-stu-id="8f67a-103">Nested Master Pages (C#)</span></span>
====================
<span data-ttu-id="8f67a-104">durch [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="8f67a-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="8f67a-105">[Code herunterladen](http://download.microsoft.com/download/d/6/6/d66ad554-afdd-409e-a5c3-201b774fbb31/ASPNET_MasterPages_Tutorial_10_CS.zip) oder [PDF-Datei herunterladen](http://download.microsoft.com/download/d/6/6/d66ad554-afdd-409e-a5c3-201b774fbb31/ASPNET_MasterPages_Tutorial_10_CS.pdf)</span><span class="sxs-lookup"><span data-stu-id="8f67a-105">[Download Code](http://download.microsoft.com/download/d/6/6/d66ad554-afdd-409e-a5c3-201b774fbb31/ASPNET_MasterPages_Tutorial_10_CS.zip) or [Download PDF](http://download.microsoft.com/download/d/6/6/d66ad554-afdd-409e-a5c3-201b774fbb31/ASPNET_MasterPages_Tutorial_10_CS.pdf)</span></span>

> <span data-ttu-id="8f67a-106">Zeigt, wie eine Masterseite innerhalb einer anderen geschachtelt werden.</span><span class="sxs-lookup"><span data-stu-id="8f67a-106">Shows how to nest one master page within another.</span></span>


## <a name="introduction"></a><span data-ttu-id="8f67a-107">Einführung</span><span class="sxs-lookup"><span data-stu-id="8f67a-107">Introduction</span></span>

<span data-ttu-id="8f67a-108">Im Laufe der vergangenen neun Tutorials haben wir gesehen, wie Sie einen websiteweiten Layouts mit Masterseiten implementieren.</span><span class="sxs-lookup"><span data-stu-id="8f67a-108">Over the course of the past nine tutorials we have seen how to implement a site-wide layout with master pages.</span></span> <span data-ttu-id="8f67a-109">Kurz gesagt, erlauben Sie Masterseiten, Entwickler der Seite, um allgemeine Markup auf der Masterseite sowie bestimmte Regionen zu definieren, die auf einer Inhaltsseite-Seite-an-Content-Basis angepasst werden kann.</span><span class="sxs-lookup"><span data-stu-id="8f67a-109">In a nutshell, master pages allow us, the page developer, to define common markup in the master page along with specific regions that can be customized on a content page-by-content page basis.</span></span> <span data-ttu-id="8f67a-110">Die ContentPlaceHolder-Steuerelemente auf einer Masterseite anzugeben, die anpassbare Regionen; das benutzerdefinierte Markup für die ContentPlaceHolder-Steuerelemente sind in der Inhaltsseite über ContentControl-Elemente definiert.</span><span class="sxs-lookup"><span data-stu-id="8f67a-110">The ContentPlaceHolder controls in a master page indicate the customizable regions; the customized markup for the ContentPlaceHolder controls are defined in the content page via Content controls.</span></span>

<span data-ttu-id="8f67a-111">Die Masterseite-Techniken, die bisher haben wir untersucht haben eignen sich hervorragend, wenn Sie einem einzelnen Layout für die gesamte Website verwendet haben.</span><span class="sxs-lookup"><span data-stu-id="8f67a-111">The master page techniques we've explored thus far are great if you have a single layout used across the entire site.</span></span> <span data-ttu-id="8f67a-112">Viele große Websites müssen jedoch ein Sitelayout, das angepasst wird, über die verschiedenen Abschnitte.</span><span class="sxs-lookup"><span data-stu-id="8f67a-112">However, many large websites have a site layout that is customized across various sections.</span></span> <span data-ttu-id="8f67a-113">Betrachten Sie beispielsweise eine health care-Anwendung durch Krankenhausmitarbeiter in zum Verwalten von Patientendaten, Aktivitäten und die Abrechnung verwendet.</span><span class="sxs-lookup"><span data-stu-id="8f67a-113">For example, consider a health care application used by hospital staff to manage patient information, activities, and billing.</span></span> <span data-ttu-id="8f67a-114">Möglicherweise gibt es drei Arten von Webseiten in dieser Anwendung:</span><span class="sxs-lookup"><span data-stu-id="8f67a-114">There may be three types of web pages in this application:</span></span>

- <span data-ttu-id="8f67a-115">Mitarbeiter Member-spezifische Seiten, in denen Mitarbeiter Verfügbarkeit aktualisieren können, Zeitpläne anzeigen, oder fordern Urlaub.</span><span class="sxs-lookup"><span data-stu-id="8f67a-115">Staff member-specific pages where staff members can update availability, view schedules, or request vacation time.</span></span>
- <span data-ttu-id="8f67a-116">Patienten-spezifische Seiten, in denen Mitarbeiter anzeigen oder Bearbeiten von Informationen für einen bestimmten Patienten.</span><span class="sxs-lookup"><span data-stu-id="8f67a-116">Patient-specific pages where staff members view or edit information for a specific patient.</span></span>
- <span data-ttu-id="8f67a-117">Abrechnung-spezifische Seiten, in dem Accountants aktuelle überprüfen, Anspruch Statusangaben und Finanzberichte.</span><span class="sxs-lookup"><span data-stu-id="8f67a-117">Billing-specific pages where accountants review current claim statuses and financial reports.</span></span>

<span data-ttu-id="8f67a-118">Ein gebräuchliches Layout, z. B. ein Menü im oberen Bereich und eine Reihe von häufig verwendeten Links am unteren Rand teilen jeder Seite.</span><span class="sxs-lookup"><span data-stu-id="8f67a-118">Every page might share a common layout, such as a menu across the top and a series of frequently used links along the bottom.</span></span> <span data-ttu-id="8f67a-119">Die Mitarbeiter, Patienten und Abrechnung-spezifische Seiten müssen jedoch möglicherweise diese allgemeinen Layouts anpassen.</span><span class="sxs-lookup"><span data-stu-id="8f67a-119">But the staff-, patient-, and billing-specific pages may need to customize this generic layout.</span></span> <span data-ttu-id="8f67a-120">Beispielsweise sollte z. B. alle Mitarbeiter-spezifische Seiten eine Calendar "und" Task-Liste, die mit der Verfügbarkeit und einen täglichen Zeitplan des aktuell angemeldeten Benutzers enthalten.</span><span class="sxs-lookup"><span data-stu-id="8f67a-120">For example, perhaps all staff-specific pages should include a calendar and task list showing the currently logged on user's availability and daily schedule.</span></span> <span data-ttu-id="8f67a-121">Möglicherweise müssen alle Patienten-spezifische Seiten angezeigt werden, der Name, Adresse und Informationen zur Versicherung für den Patienten, deren Informationen bearbeitet wird.</span><span class="sxs-lookup"><span data-stu-id="8f67a-121">Perhaps all patient-specific pages need to show the name, address, and insurance information for the patient whose information is being edited.</span></span>

<span data-ttu-id="8f67a-122">Es ist möglich, eine solche benutzerdefinierte Layouts erstellen, indem *geschachtelte Masterseiten*.</span><span class="sxs-lookup"><span data-stu-id="8f67a-122">It's possible to create such customized layouts by using *nested master pages*.</span></span> <span data-ttu-id="8f67a-123">Um das oben beschriebene Szenario zu implementieren, würden wir erstellen Sie zunächst eine Masterseite, die die websiteweite Inhalte Layout, das Menü und die Fußzeile mit ContentPlaceHolder-Steuerelemente die anpassbaren Bereiche definieren definiert.</span><span class="sxs-lookup"><span data-stu-id="8f67a-123">To implement the above scenario, we would start by creating a master page that defined the site-wide layout, the menu and footer content, with ContentPlaceHolders defining the customizable regions.</span></span> <span data-ttu-id="8f67a-124">Wir erstellen nun drei verschachtelte Gestaltungsvorlagen, eine für jede Webseite.</span><span class="sxs-lookup"><span data-stu-id="8f67a-124">We would then create three nested master pages, one for each type of web page.</span></span> <span data-ttu-id="8f67a-125">Jede geschachtelte Masterseite würde es sich um den Inhalt zwischen den Typ der Inhaltsseiten definieren, die die Masterseite verwenden.</span><span class="sxs-lookup"><span data-stu-id="8f67a-125">Each nested master page would define the content among the type of content pages that use the master page.</span></span> <span data-ttu-id="8f67a-126">Das heißt, würde die geschachtelten Masterseite für Inhaltsseiten Patienten-spezifische Markup und programmgesteuerte Logik für die Anzeige von Informationen zu den Patienten, die bearbeitet wird enthalten.</span><span class="sxs-lookup"><span data-stu-id="8f67a-126">In other words, the nested master page for patient-specific content pages would include markup and programmatic logic for displaying information about the patient being edited.</span></span> <span data-ttu-id="8f67a-127">Beim Erstellen einer neuen Patienten-spezifische Seite würden wir es an dieser geschachtelten Masterseite binden.</span><span class="sxs-lookup"><span data-stu-id="8f67a-127">When creating a new patient-specific page we would bind it to this nested master page.</span></span>

<span data-ttu-id="8f67a-128">In diesem Lernprogramm beginnt mit der die Vorteile der verschachtelte Gestaltungsvorlagen hervorheben.</span><span class="sxs-lookup"><span data-stu-id="8f67a-128">This tutorial starts by highlighting the benefits of nested master pages.</span></span> <span data-ttu-id="8f67a-129">Es veranschaulicht klicken Sie dann zum Erstellen und Verwenden von geschachtelten Masterseiten.</span><span class="sxs-lookup"><span data-stu-id="8f67a-129">It then shows how to create and use nested master pages.</span></span>

> [!NOTE]
> <span data-ttu-id="8f67a-130">Geschachtelte Masterseiten sind seit Version 2.0 von .NET Framework möglich.</span><span class="sxs-lookup"><span data-stu-id="8f67a-130">Nested master pages have been possible since version 2.0 of the .NET Framework.</span></span> <span data-ttu-id="8f67a-131">Visual Studio 2005 jedoch nicht in die entwurfszeitunterstützung für verschachtelte Gestaltungsvorlagen enthalten.</span><span class="sxs-lookup"><span data-stu-id="8f67a-131">However, Visual Studio 2005 did not include design-time support for nested master pages.</span></span> <span data-ttu-id="8f67a-132">Die gute Nachricht ist, dass umfassende Funktionen zur Entwurfszeit für verschachtelte Gestaltungsvorlagen, Visual Studio 2008 bietet.</span><span class="sxs-lookup"><span data-stu-id="8f67a-132">The good news is that Visual Studio 2008 offers a rich design-time experience for nested master pages.</span></span> <span data-ttu-id="8f67a-133">Wenn Sie mit geschachtelten Masterseiten möchten, aber weiterhin Visual Studio 2005 verwenden, sehen Sie sich [Scott Guthrie](https://weblogs.asp.net/scottgu/)Blogeintrag [Tipps für geschachtelte Masterseiten in Visual Studio 2005-Design-Time-](https://weblogs.asp.net/scottgu/archive/2005/11/11/430382.aspx).</span><span class="sxs-lookup"><span data-stu-id="8f67a-133">If you are interested in using nested master pages but are still using Visual Studio 2005, check out [Scott Guthrie](https://weblogs.asp.net/scottgu/)'s blog entry, [Tips for Nested Master Pages in VS 2005 Design-Time](https://weblogs.asp.net/scottgu/archive/2005/11/11/430382.aspx).</span></span>


## <a name="the-benefits-of-nested-master-pages"></a><span data-ttu-id="8f67a-134">Die Vorteile der geschachtelte Masterseiten</span><span class="sxs-lookup"><span data-stu-id="8f67a-134">The Benefits of Nested Master Pages</span></span>

<span data-ttu-id="8f67a-135">Viele Websites ist eine übergeordnete Design der Website sowie mehr benutzerdefinierte Designs für bestimmte Arten von Seiten.</span><span class="sxs-lookup"><span data-stu-id="8f67a-135">Many websites have an overarching site design as well as more customized designs specific to certain types of pages.</span></span> <span data-ttu-id="8f67a-136">Unsere Demo-Webanwendung haben wir beispielsweise eine rudimentäre Verwaltungsabschnitt erstellt (die Seiten in der `~/Admin` Ordner).</span><span class="sxs-lookup"><span data-stu-id="8f67a-136">For instance, in our demo web application we have created a rudimentary Administration section (the pages in the `~/Admin` folder).</span></span> <span data-ttu-id="8f67a-137">Derzeit den Webseiten in der `~/Admin` Ordner verwenden dieselbe Masterseite als diese Seiten nicht in den Verwaltungsabschnitt (nämlich `Site.master` oder `Alternate.master`, je nachdem, auf die Auswahl des Benutzers).</span><span class="sxs-lookup"><span data-stu-id="8f67a-137">Currently the web pages in the `~/Admin` folder use the same master page as those pages not in the administration section (namely, `Site.master` or `Alternate.master`, depending on the user's selection).</span></span>

> [!NOTE]
> <span data-ttu-id="8f67a-138">Nehmen Sie jetzt, dass Sie unsere Website nur eine Masterseite verfügt über `Site.master`.</span><span class="sxs-lookup"><span data-stu-id="8f67a-138">For now, pretend that our site has just one master page, `Site.master`.</span></span> <span data-ttu-id="8f67a-139">Wir behandeln die verschachtelte Gestaltungsvorlagen mit zwei (oder mehr) Masterseiten, beginnend mit "Verwenden einer geschachtelten Master für die Verwaltung Seitenabschnitt" weiter unten in diesem Tutorial verwenden.</span><span class="sxs-lookup"><span data-stu-id="8f67a-139">We'll address using nested master pages with two (or more) master pages starting with "Using a Nested Master Page for the Administration Section" later in this tutorial.</span></span>


<span data-ttu-id="8f67a-140">Angenommen Sie, wir aufgefordert wurden, passen Sie das Layout der Verwaltungsseiten sollen zusätzliche Informationen oder Links, die andernfalls nicht in den anderen Seiten der Website vorhanden wäre.</span><span class="sxs-lookup"><span data-stu-id="8f67a-140">Imagine that we were asked to customize the layout of the Administration pages to include additional information or links that would not otherwise be present in other pages in the site.</span></span> <span data-ttu-id="8f67a-141">Es gibt vier Verfahren zum Implementieren dieser Anforderung:</span><span class="sxs-lookup"><span data-stu-id="8f67a-141">There are four techniques to implement this requirement:</span></span>

1. <span data-ttu-id="8f67a-142">Manuell hinzufügen Verwaltung-spezifische Informationen und Links auf jeder Seite Inhalt in die `~/Admin` Ordner.</span><span class="sxs-lookup"><span data-stu-id="8f67a-142">Manually add the Administration-specific information and links to every content page in the `~/Admin` folder.</span></span>
2. <span data-ttu-id="8f67a-143">Update der `Site.master` Masterseite Verwaltung Abschnitt-spezifische Informationen und Links, und fügen Sie Code zur Masterseite anzeigen oder Ausblenden in diesen Abschnitten basierend an, ob eines der Verwaltungsseiten besucht wurde.</span><span class="sxs-lookup"><span data-stu-id="8f67a-143">Update the `Site.master` master page to include the Administration section-specific information and links, and then add code to the master page to show or hide these sections based on whether one of the Administration pages is being visited.</span></span>
3. <span data-ttu-id="8f67a-144">Erstellen Sie eine neue Masterseite speziell für den Verwaltungsabschnitt, kopieren Sie das Markup aus `Site.master`, fügen Sie die Verwaltung im Abschnitt-spezifische Informationen und Links, und aktualisieren Sie dann auf die Inhaltsseiten in die `~/Admin` Ordner mit diesem neuen Master Seite ".</span><span class="sxs-lookup"><span data-stu-id="8f67a-144">Create a new master page specifically for the Administration section, copy over the markup from `Site.master`, add the Administration section-specific information and links, and then update the content pages in the `~/Admin` folder to use this new master page.</span></span>
4. <span data-ttu-id="8f67a-145">Erstellen einer geschachtelten Masterseite, an die gebunden `Site.master` und die Inhaltsseiten der `~/Admin` Ordner verwenden, die diese neue von geschachtelten Masterseite.</span><span class="sxs-lookup"><span data-stu-id="8f67a-145">Create a nested master page that binds to `Site.master` and have the content pages in the `~/Admin` folder use this new nested master page.</span></span> <span data-ttu-id="8f67a-146">Diese geschachtelte Masterseite würde nur die zusätzliche Informationen und Links, die spezifisch für die Administration-Seiten enthalten und müssen nicht das Markup in bereits definiert. wiederholen die `Site.master`.</span><span class="sxs-lookup"><span data-stu-id="8f67a-146">This nested master page would include just the additional information and links specific to the Administration pages and would not need to repeat the markup already defined in `Site.master`.</span></span>

<span data-ttu-id="8f67a-147">Die erste Option ist die am wenigsten angenehm.</span><span class="sxs-lookup"><span data-stu-id="8f67a-147">The first option is the least palatable.</span></span> <span data-ttu-id="8f67a-148">Der ganze Sinn der Verwendung von Masterseiten werden Abkehr von müssen manuell kopieren und fügen die allgemeine Markup für ASP.NET-Seiten.</span><span class="sxs-lookup"><span data-stu-id="8f67a-148">The whole point of using master pages is to move away from having to manually copy and paste common markup to new ASP.NET pages.</span></span> <span data-ttu-id="8f67a-149">Die zweite Option ist akzeptabel, jedoch wird die Anwendung zu schlechter zu verwalten, wie es hebt Einrichten der master-Seiten mit Markup an, die nur gelegentlich angezeigt wird, und müssen Entwickler die Masterseite bearbeiten, umgehen dieses Markup und wann merken müssen, bestimmte Markup wird genau im Vergleich zu angezeigt, wenn es ausgeblendet ist.</span><span class="sxs-lookup"><span data-stu-id="8f67a-149">The second option is acceptable, but makes the application less maintainable as it bulks up the master pages with markup that is only occasionally displayed and requires developers editing the master page to work around this markup and to have to remember when, exactly, certain markup is displayed versus when it is hidden.</span></span> <span data-ttu-id="8f67a-150">Dieser Ansatz wäre weniger Hauptfeuerlöschpumpe Anpassungen von mehr Typen von Webseiten, die durch diese einzige masterdseite untergebracht werden musste.</span><span class="sxs-lookup"><span data-stu-id="8f67a-150">This approach would be less tenable as customizations from more and more types of web pages needed to be accommodated by this single master page.</span></span>

<span data-ttu-id="8f67a-151">Die dritte Option entfernt der Masse abheben und Komplexität Probleme bei der zweiten Option die eingeblendet.</span><span class="sxs-lookup"><span data-stu-id="8f67a-151">The third option removes the clutter and complexity issues the surfaced with the second option.</span></span> <span data-ttu-id="8f67a-152">Option drei der größte Nachteil ist jedoch, dass es erforderlich ist, kopieren Sie das allgemeine Layout von `Site.master` auf die neue Verwaltung Abschnitt-spezifische-Masterseite.</span><span class="sxs-lookup"><span data-stu-id="8f67a-152">However, option three's main drawback is that it requires us to copy and paste the common layout from `Site.master` to the new Administration section-specific master page.</span></span> <span data-ttu-id="8f67a-153">Wenn es sich später entscheiden, ändern Sie das Layout der Website-Ebene müssen wir denken Sie daran, die sie an zwei Orten zu ändern.</span><span class="sxs-lookup"><span data-stu-id="8f67a-153">If we later decide to change the site-wide layout we have to remember to change it in two places.</span></span>

<span data-ttu-id="8f67a-154">Die vierte Option, geschachtelte Masterseiten, senden Sie uns die besten Optionen für die zweite und dritte.</span><span class="sxs-lookup"><span data-stu-id="8f67a-154">The fourth option, nested master pages, give us the best of the second and third options.</span></span> <span data-ttu-id="8f67a-155">Die websiteweiten Layouts-Informationen werden in einer Datei: die Seite der obersten Ebene master - beibehalten, während die Inhalte, die spezifisch für bestimmte Regionen in verschiedene Dateien verteilt ist.</span><span class="sxs-lookup"><span data-stu-id="8f67a-155">The site-wide layout information is maintained in one file - the top-level master page - while the content specific to particular regions is separated out into different files.</span></span>

<span data-ttu-id="8f67a-156">Dieses Tutorial beginnt mit einem Blick auf das Erstellen und verwenden eine einfache geschachtelte Masterseite.</span><span class="sxs-lookup"><span data-stu-id="8f67a-156">This tutorial starts with a look at creating and using a simple nested master page.</span></span> <span data-ttu-id="8f67a-157">Wir erstellen eine völlig neue Masterseite der obersten Ebene, zwei geschachtelte Masterseiten und Inhaltsseiten für zwei.</span><span class="sxs-lookup"><span data-stu-id="8f67a-157">We create a brand new top-level master page, two nested master pages, and two content pages.</span></span> <span data-ttu-id="8f67a-158">Beginnend mit "Mithilfe einer geschachtelten Master Seite für die Verwaltungsabschnitt", betrachten wir aktualisieren unsere vorhandenen Masterseite-Architektur, um die Verwendung von geschachtelten Masterseiten einzuschließen.</span><span class="sxs-lookup"><span data-stu-id="8f67a-158">Starting with "Using a Nested Master Page for the Administration Section," we look at updating our existing master page architecture to include the use of nested master pages.</span></span> <span data-ttu-id="8f67a-159">Genauer gesagt erstellen wir eine geschachtelte Masterseite und verwenden, um die zusätzlichen benutzerdefinierten Inhalt für die Inhaltsseiten in umfassen die `~/Admin` Ordner.</span><span class="sxs-lookup"><span data-stu-id="8f67a-159">Specifically, we create a nested master page and use it to include additional custom content for the content pages in the `~/Admin` folder.</span></span>

## <a name="step-1-creating-a-simple-top-level-master-page"></a><span data-ttu-id="8f67a-160">Schritt 1: Erstellen einer einfachen auf oberster Ebene Masterseite</span><span class="sxs-lookup"><span data-stu-id="8f67a-160">Step 1: Creating a Simple Top-Level Master Page</span></span>

<span data-ttu-id="8f67a-161">Erstellen einem Masterauftrag für den geschachtelten basierend auf einer vorhandenen Master Pages und anschließendes Aktualisieren einer vorhandenen Inhalt Seite, um diese neue geschachtelte Masterseite anstelle der obersten Ebene Masterseite zu verwenden ist gewisse Komplexität verbunden, da die vorhandenen Inhaltsseiten bereits bestimmte erwarten, dass ContentPlaceHolder-Steuerelemente, die in der obersten Ebene Masterseite definiert.</span><span class="sxs-lookup"><span data-stu-id="8f67a-161">Creating a nested master based on one of the existing master pages and then updating an existing content page to use this new nested master page instead of the top-level master page entails some complexity because the existing content pages already expect certain ContentPlaceHolder controls defined in the top-level master page.</span></span> <span data-ttu-id="8f67a-162">Aus diesem Grund muss die geschachtelte Masterseite auch die gleichen ContentPlaceHolder-Steuerelemente mit den gleichen Namen enthalten.</span><span class="sxs-lookup"><span data-stu-id="8f67a-162">Therefore, the nested master page must also include the same ContentPlaceHolder controls with the same names.</span></span> <span data-ttu-id="8f67a-163">Darüber hinaus unsere demoanwendung bestimmten hat zwei Masterseiten (`Site.master` und `Alternate.master`) zugewiesen sind, dynamisch auf einer Inhaltsseite auf Grundlage von Präferenzen des Benutzers, die diese Komplexität weiter hinzufügt.</span><span class="sxs-lookup"><span data-stu-id="8f67a-163">Furthermore, our particular demo application has two master pages (`Site.master` and `Alternate.master`) that are dynamically assigned to a content page based on a user's preferences, which further adds to this complexity.</span></span> <span data-ttu-id="8f67a-164">Betrachten wir die vorhandene Anwendung mit geschachtelten Masterseiten weiter unten in diesem Tutorial wird aktualisiert, aber lassen Sie uns zuerst darauf konzentrieren, ein einfaches geschachtelte Masterseiten-Beispiel.</span><span class="sxs-lookup"><span data-stu-id="8f67a-164">We will look at updating the existing application to use nested master pages later in this tutorial, but let's first focus on a simple nested master pages example.</span></span>

<span data-ttu-id="8f67a-165">Erstellen Sie einen neuen Ordner namens `NestedMasterPages` und fügen Sie eine neue Masterseitendatei klicken Sie dann zu diesem Ordner mit dem Namen `Simple.master`.</span><span class="sxs-lookup"><span data-stu-id="8f67a-165">Create a new folder named `NestedMasterPages` and then add a new master page file to that folder named `Simple.master`.</span></span> <span data-ttu-id="8f67a-166">(Siehe Abbildung 1 für einen Screenshot des Projektmappen-Explorer nach dem dieser Ordner und die Datei hinzugefügt wurden.) Ziehen Sie die `AlternateStyles.css` Stylesheetdatei Projektmappen-Explorer auf den Designer.</span><span class="sxs-lookup"><span data-stu-id="8f67a-166">(See Figure 1 for a screen shot of the Solution Explorer after this folder and file have been added.) Drag the `AlternateStyles.css` style sheet file from the Solution Explorer onto the Designer.</span></span> <span data-ttu-id="8f67a-167">Dadurch wird eine `<link>` Element der Stylesheetdatei in der `<head>` Element, nach dem der Masterseite `<head>` der Elementknoten dem Elementmarkup sollte wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="8f67a-167">This adds a `<link>` element to the style sheet file in the `<head>` element, after which the master page's `<head>` element's markup should look like:</span></span>


[!code-aspx[Main](nested-master-pages-cs/samples/sample1.aspx)]

<span data-ttu-id="8f67a-168">Fügen Sie das folgende Markup im Web Form `Simple.master`:</span><span class="sxs-lookup"><span data-stu-id="8f67a-168">Next, add the following markup within the Web Form of `Simple.master`:</span></span>


[!code-aspx[Main](nested-master-pages-cs/samples/sample2.aspx)]

<span data-ttu-id="8f67a-169">Dieses Markup zeigt eine Verknüpfung mit dem Titel "Geschachtelte Masterseiten (einfach)" am oberen Rand der Seite in großer Schriftart auf dunkelblaue Hintergrund weiß.</span><span class="sxs-lookup"><span data-stu-id="8f67a-169">This markup displays a link titled "Nested Master Pages (Simple)" at the top of the page in a large white font on a navy background.</span></span> <span data-ttu-id="8f67a-170">Ist die `MainContent` ContentPlaceHolder.</span><span class="sxs-lookup"><span data-stu-id="8f67a-170">Beneath that is the `MainContent` ContentPlaceHolder.</span></span> <span data-ttu-id="8f67a-171">Abbildung 1 zeigt die `Simple.master` Masterseite, die beim Laden in Visual Studio-Designer.</span><span class="sxs-lookup"><span data-stu-id="8f67a-171">Figure 1 shows the `Simple.master` master page when loaded in the Visual Studio Designer.</span></span>


<span data-ttu-id="8f67a-172">[![Der geschachtelte Masterseite definiert Content speziell zu den Seiten im Bereich Verwaltung](nested-master-pages-cs/_static/image2.png)](nested-master-pages-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="8f67a-172">[![The Nested Master Page Defines Content Specific to the Pages in the Administration Section](nested-master-pages-cs/_static/image2.png)](nested-master-pages-cs/_static/image1.png)</span></span>

<span data-ttu-id="8f67a-173">**Abbildung 01**: die geschachtelte Master Seite definiert Inhalt für die Seiten im Bereich Verwaltung ([klicken Sie, um das Bild in voller Größe anzeigen](nested-master-pages-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="8f67a-173">**Figure 01**: The Nested Master Page Defines Content Specific to the Pages in the Administration Section ([Click to view full-size image](nested-master-pages-cs/_static/image3.png))</span></span>


## <a name="step-2-creating-a-simple-nested-master-page"></a><span data-ttu-id="8f67a-174">Schritt 2: Erstellen einer einfachen, geschachtelten Masterseite</span><span class="sxs-lookup"><span data-stu-id="8f67a-174">Step 2: Creating a Simple Nested Master Page</span></span>

<span data-ttu-id="8f67a-175">`Simple.master` enthält zwei ContentPlaceHolder-Steuerelemente: die `MainContent` ContentPlaceHolder, die wir hinzugefügt, in das Web Form zusammen mit den `head` ContentPlaceHolder in die `<head>` Element.</span><span class="sxs-lookup"><span data-stu-id="8f67a-175">`Simple.master` contains two ContentPlaceHolder controls: the `MainContent` ContentPlaceHolder we added within the Web Form along with the `head` ContentPlaceHolder in the `<head>` element.</span></span> <span data-ttu-id="8f67a-176">Wenn wir eine Inhaltsseite erstellen und binden Sie es an `Simple.master` Inhaltsseite müssten zwei Inhaltssteuerelemente, die zwei ContentPlaceHolder-Steuerelemente verweisen.</span><span class="sxs-lookup"><span data-stu-id="8f67a-176">If we were to create a content page and bind it to `Simple.master` the content page would have two Content controls referencing the two ContentPlaceHolders.</span></span> <span data-ttu-id="8f67a-177">Auf ähnliche Weise, wenn wir eine geschachtelte Masterseite zu erstellen und binden Sie es an `Simple.master` müssen die geschachtelten Masterseite zwei Inhaltssteuerelemente.</span><span class="sxs-lookup"><span data-stu-id="8f67a-177">Similarly, if we create a nested master page and bind it to `Simple.master` then the nested master page will have two Content controls.</span></span>

<span data-ttu-id="8f67a-178">Fügen Sie eine neue geschachtelte Masterseite, die `NestedMasterPages` Ordner mit dem Namen `SimpleNested.master`.</span><span class="sxs-lookup"><span data-stu-id="8f67a-178">Let's add a new nested master page to the `NestedMasterPages` folder named `SimpleNested.master`.</span></span> <span data-ttu-id="8f67a-179">Mit der rechten Maustaste auf die `NestedMasterPages` Ordner, und wählen Sie Neues Element hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="8f67a-179">Right-click on the `NestedMasterPages` folder and choose Add New Item.</span></span> <span data-ttu-id="8f67a-180">Dadurch wird das Dialogfeld "Neues Element hinzufügen" in Abbildung 2 dargestellt.</span><span class="sxs-lookup"><span data-stu-id="8f67a-180">This brings up the Add New Item dialog box shown in Figure 2.</span></span> <span data-ttu-id="8f67a-181">Wählen Sie die Masterseite Vorlagentyp und geben Sie den Namen der neuen Masterseite.</span><span class="sxs-lookup"><span data-stu-id="8f67a-181">Select the Master Page template type and type in the name of the new master page.</span></span> <span data-ttu-id="8f67a-182">Um anzugeben, dass die neue Masterseite einer geschachtelten Masterseite werden soll, überprüfen Sie das Kontrollkästchen "Masterseite auswählen".</span><span class="sxs-lookup"><span data-stu-id="8f67a-182">To indicate that the new master page should be a nested master page, check the "Select master page" checkbox.</span></span>

<span data-ttu-id="8f67a-183">Klicken Sie dann auf die Schaltfläche "hinzufügen".</span><span class="sxs-lookup"><span data-stu-id="8f67a-183">Next, click the Add button.</span></span> <span data-ttu-id="8f67a-184">Dadurch wird die gleiche SELECT-Anweisung eine Masterseite-Dialogfeld wird angezeigt, wenn die Bindung von einer Inhaltsseite auf eine Gestaltungsvorlage angezeigt (siehe Abbildung 3).</span><span class="sxs-lookup"><span data-stu-id="8f67a-184">This will display the same Select a Master Page dialog box you see when binding a content page to a master page (see Figure 3).</span></span> <span data-ttu-id="8f67a-185">Wählen Sie die `Simple.master` Masterseite in der `NestedMasterPages` Ordner, und klicken Sie auf OK.</span><span class="sxs-lookup"><span data-stu-id="8f67a-185">Choose the `Simple.master` master page in the `NestedMasterPages` folder and click OK.</span></span>

> [!NOTE]
> <span data-ttu-id="8f67a-186">Wenn Sie Ihre ASP.NET-Website das Webanwendungsprojekt-Modell verwenden, anstatt das Websiteprojekt-Modell erstellt haben, sehen Sie nicht das Kontrollkästchen "Masterseite auswählen", in das Dialogfeld "Neues Element hinzufügen" in Abbildung 2 dargestellt.</span><span class="sxs-lookup"><span data-stu-id="8f67a-186">If you created your ASP.NET website using the Web Application Project model instead of the Web Site Project model you will not see the "Select master page" checkbox in the Add New Item dialog box shown in Figure 2.</span></span> <span data-ttu-id="8f67a-187">Um eine geschachtelte Masterseite zu erstellen, wenn Sie das Webanwendungsprojekt-Modell verwenden, müssen Sie die geschachtelte Masterseite-Vorlage (anstelle der Masterseitenvorlage) auswählen.</span><span class="sxs-lookup"><span data-stu-id="8f67a-187">To create a nested master page when using the Web Application Project model you must choose the Nested Master Page template (instead of the Master Page template).</span></span> <span data-ttu-id="8f67a-188">Nach dem Auswählen der Masterseite geschachtelte Vorlage, und klicken Sie auf Hinzufügen, wählen Sie den gleichen eine Masterseite, die in Abbildung 3 dargestellte Dialogfeld angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="8f67a-188">After selecting the Nested Master Page template and clicking Add, the same Select a Master Page dialog box shown in Figure 3 will appear.</span></span>


<span data-ttu-id="8f67a-189">[![Überprüfen Sie die &quot;Masterseite auswählen&quot; Kontrollkästchen, um eine geschachtelte Masterseite hinzufügen](nested-master-pages-cs/_static/image5.png)](nested-master-pages-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="8f67a-189">[![Check the &quot;Select master page&quot; Checkbox to Add a Nested Master Page](nested-master-pages-cs/_static/image5.png)](nested-master-pages-cs/_static/image4.png)</span></span>

<span data-ttu-id="8f67a-190">**Abbildung 02**: Aktivieren Sie das Kontrollkästchen "Masterseite auswählen" zum Hinzufügen einer geschachtelten Masterseite ([klicken Sie, um das Bild in voller Größe anzeigen](nested-master-pages-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="8f67a-190">**Figure 02**: Check the "Select master page" Checkbox to Add a Nested Master Page ([Click to view full-size image](nested-master-pages-cs/_static/image6.png))</span></span>


<span data-ttu-id="8f67a-191">[![Binden Sie die geschachtelte Masterseite zur Simple.master Masterseite](nested-master-pages-cs/_static/image8.png)](nested-master-pages-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="8f67a-191">[![Bind the Nested Master Page to the Simple.master Master Page](nested-master-pages-cs/_static/image8.png)](nested-master-pages-cs/_static/image7.png)</span></span>

<span data-ttu-id="8f67a-192">**Abbildung 03**: Binden von geschachtelten Masterseite der `Simple.master` Masterseite ([klicken Sie, um das Bild in voller Größe anzeigen](nested-master-pages-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="8f67a-192">**Figure 03**: Bind the Nested Master Page to the `Simple.master` Master Page ([Click to view full-size image](nested-master-pages-cs/_static/image9.png))</span></span>


<span data-ttu-id="8f67a-193">Die geschachtelte Masterseite deklarativen Markup, wie unten beschrieben, enthält zwei Inhaltssteuerelemente verweisen auf der obersten Ebene der Masterseite zwei ContentPlaceHolder-Steuerelemente.</span><span class="sxs-lookup"><span data-stu-id="8f67a-193">The nested master page's declarative markup, shown below, contains two Content controls referencing the top-level master page's two ContentPlaceHolder controls.</span></span>


[!code-aspx[Main](nested-master-pages-cs/samples/sample3.aspx)]

<span data-ttu-id="8f67a-194">Mit Ausnahme der `<%@ Master %>` -Anweisung anfängliche deklarativen Markup für die geschachtelte Masterseite ist identisch mit das Markup, das ursprünglich generiert wird, wenn eine Inhaltsseite auf die obersten Ebene derselben Masterseite zu binden.</span><span class="sxs-lookup"><span data-stu-id="8f67a-194">Except for the `<%@ Master %>` directive, the nested master page's initial declarative markup is identical to the markup that is initially generated when binding a content page to the same top-level master page.</span></span> <span data-ttu-id="8f67a-195">Wie einer Inhaltsseite `<%@ Page %>` Richtlinie, die `<%@ Master %>` hier Richtlinie enthält eine `MasterPageFile` Attribut, das die geschachtelte Masterseite übergeordnete Masterseite angibt.</span><span class="sxs-lookup"><span data-stu-id="8f67a-195">Like a content page's `<%@ Page %>` directive, the `<%@ Master %>` directive here includes a `MasterPageFile` attribute that specifies the nested master page's parent master page.</span></span> <span data-ttu-id="8f67a-196">Der Hauptunterschied zwischen der geschachtelten Masterseite und einer Inhaltsseite auf die obersten Ebene derselben Masterseite gebunden ist, dass die geschachtelten Masterseite ContentPlaceHolder-Steuerelemente enthalten kann.</span><span class="sxs-lookup"><span data-stu-id="8f67a-196">The main difference between the nested master page and a content page bound to the same top-level master page is that the nested master page can include ContentPlaceHolder controls.</span></span> <span data-ttu-id="8f67a-197">Die geschachtelte Masterseite ContentPlaceHolder-Steuerelemente definieren, die Regionen, in denen die Inhaltsseiten der Markup anpassen können.</span><span class="sxs-lookup"><span data-stu-id="8f67a-197">The nested master page's ContentPlaceHolder controls define the regions where the content pages can customize the markup.</span></span>

<span data-ttu-id="8f67a-198">Aktualisieren Sie diese geschachtelten Masterseite, sodass es den Text "Hello, from SimpleNested!" anzeigt</span><span class="sxs-lookup"><span data-stu-id="8f67a-198">Update this nested master page so that it displays the text "Hello, from SimpleNested!"</span></span> <span data-ttu-id="8f67a-199">Klicken Sie in das Inhaltssteuerelement, das entspricht, dem `MainContent` ContentPlaceHolder-Steuerelement.</span><span class="sxs-lookup"><span data-stu-id="8f67a-199">in the Content control that corresponds to the `MainContent` ContentPlaceHolder control.</span></span>


[!code-aspx[Main](nested-master-pages-cs/samples/sample4.aspx)]

<span data-ttu-id="8f67a-200">Treffen Sie diese Erweiterung, und speichern Sie die geschachtelte Masterseite und dann eine neue Seite zum Hinzufügen der `NestedMasterPages` Ordner mit dem Namen `Default.aspx`, und binden Sie es an der `SimpleNested.master` Masterseite.</span><span class="sxs-lookup"><span data-stu-id="8f67a-200">After making this addition, save the nested master page and then add a new content page to the `NestedMasterPages` folder named `Default.aspx`, and bind it to the `SimpleNested.master` master page.</span></span> <span data-ttu-id="8f67a-201">Beim Hinzufügen von dieser Seite ist Sie möglicherweise überrascht, dass sie keine Inhaltssteuerelemente enthält (siehe Abbildung 4).</span><span class="sxs-lookup"><span data-stu-id="8f67a-201">Upon adding this page you may be surprised to see that it contains no Content controls (see Figure 4)!</span></span> <span data-ttu-id="8f67a-202">Eine Inhaltsseite kann nur Zugriff auf seine *übergeordneten* master-Seite ContentPlaceHolder-Steuerelemente.</span><span class="sxs-lookup"><span data-stu-id="8f67a-202">A content page can only access its *parent* master page's ContentPlaceHolders.</span></span> <span data-ttu-id="8f67a-203">`SimpleNested.master` enthält keine ContentPlaceHolder-Steuerelemente. aus diesem Grund kann keiner Inhaltsseite, die an diese Masterseite gebunden ContentControl-Elemente enthalten.</span><span class="sxs-lookup"><span data-stu-id="8f67a-203">`SimpleNested.master` does not contain any ContentPlaceHolder controls; therefore, any content page bound to this master page cannot contain any Content controls.</span></span>


<span data-ttu-id="8f67a-204">[![Die neue Seite enthält keine ContentControl-Elemente](nested-master-pages-cs/_static/image11.png)](nested-master-pages-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="8f67a-204">[![The New Content Page Contains No Content Controls](nested-master-pages-cs/_static/image11.png)](nested-master-pages-cs/_static/image10.png)</span></span>

<span data-ttu-id="8f67a-205">**Abbildung 04**: der neue Inhalt Seite enthält keine Inhaltssteuerelemente ([klicken Sie, um das Bild in voller Größe anzeigen](nested-master-pages-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="8f67a-205">**Figure 04**: The New Content Page Contains No Content Controls ([Click to view full-size image](nested-master-pages-cs/_static/image12.png))</span></span>


<span data-ttu-id="8f67a-206">Was wir tun müssen ist, aktualisieren Sie die geschachtelte Masterseite (`SimpleNested.master`) zu ContentPlaceHolder-Steuerelemente enthalten.</span><span class="sxs-lookup"><span data-stu-id="8f67a-206">What we need to do is update the nested master page (`SimpleNested.master`) to include ContentPlaceHolder controls.</span></span> <span data-ttu-id="8f67a-207">In der Regel sollten Ihre verschachtelten Gestaltungsvorlagen, die ein ContentPlaceHolder-Objekt für jede ContentPlaceHolder definiert, durch die übergeordnete Masterseite, wodurch dessen untergeordnete Masterseite oder Inhaltsseite auf die mit der obersten Ebene der Masterseite ContentPlaceHolder arbeiten müssen Sie -Steuerelemente.</span><span class="sxs-lookup"><span data-stu-id="8f67a-207">Typically you'll want your nested master pages to include a ContentPlaceHolder for each ContentPlaceHolder defined by its parent master page, thereby allowing its child master page or content page to work with any of the top-level master page's ContentPlaceHolder controls.</span></span>

<span data-ttu-id="8f67a-208">Update der `SimpleNested.master` Masterseite ein ContentPlaceHolder-Objekt in der zwei Inhaltssteuerelemente eingeschlossen werden sollen.</span><span class="sxs-lookup"><span data-stu-id="8f67a-208">Update the `SimpleNested.master` master page to include a ContentPlaceHolder in its two Content controls.</span></span> <span data-ttu-id="8f67a-209">Geben Sie die ContentPlaceHolder-Steuerelemente den gleichen Namen wie das ContentPlaceHolder-Steuerelement, auf die, dem Ihre Inhaltssteuerelement verweist.</span><span class="sxs-lookup"><span data-stu-id="8f67a-209">Give the ContentPlaceHolder controls the same name as the ContentPlaceHolder control their Content control refers to.</span></span> <span data-ttu-id="8f67a-210">Hinzufügen, also ein ContentPlaceHolder-Steuerelement namens `MainContent` steuern, auf den Inhalt `SimpleNested.master` , die auf die `MainContent` ContentPlaceHolder in `Simple.master`.</span><span class="sxs-lookup"><span data-stu-id="8f67a-210">That is, add a ContentPlaceHolder control named `MainContent` to the Content control in `SimpleNested.master` that references the `MainContent` ContentPlaceHolder in `Simple.master`.</span></span> <span data-ttu-id="8f67a-211">Führen Sie dieselben Schritte in das Inhaltssteuerelement, das verweist auf die `head` ContentPlaceHolder.</span><span class="sxs-lookup"><span data-stu-id="8f67a-211">Do the same thing in the Content control that references the `head` ContentPlaceHolder.</span></span>

> [!NOTE]
> <span data-ttu-id="8f67a-212">Ich würde Ihnen empfehlen, benennen die ContentPlaceHolder-Steuerelemente in der geschachtelten Masterseite identisch mit der ContentPlaceHolder-Steuerelemente auf der obersten Ebene Masterseite, ist diese Benennungskonvention Symmetrie nicht erforderlich.</span><span class="sxs-lookup"><span data-stu-id="8f67a-212">While I recommend naming the ContentPlaceHolder controls in the nested master page the same as the ContentPlaceHolders in the top-level master page, this naming symmetry is not required.</span></span> <span data-ttu-id="8f67a-213">Sie können die ContentPlaceHolder-Steuerelemente in Ihre geschachtelten Masterseite einen beliebigen Namen geben Sie die gewünschten.</span><span class="sxs-lookup"><span data-stu-id="8f67a-213">You can give the ContentPlaceHolder controls in your nested master page any name you like.</span></span> <span data-ttu-id="8f67a-214">Aber ich finde es leichter zu merken, was ContentPlaceHolder-Steuerelemente entsprechen in welchen Regionen Rand der Seite, wenn meine der obersten Ebene der Masterseite und geschachtelte Masterseiten die gleichen Namen verwenden.</span><span class="sxs-lookup"><span data-stu-id="8f67a-214">However, I find it easier to remember what ContentPlaceHolders correspond with what regions of the page if my top-level master page and nested master pages use the same names.</span></span>


<span data-ttu-id="8f67a-215">Nach dem Herstellen dieser Ergänzungen Ihrer `SimpleNested.master` der Masterseite deklaratives Markup sollte etwa wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="8f67a-215">After making these additions your `SimpleNested.master` master page's declarative markup should look similar to the following:</span></span>


[!code-aspx[Main](nested-master-pages-cs/samples/sample5.aspx)]

<span data-ttu-id="8f67a-216">Löschen der `Default.aspx` Inhaltsseite, die wir gerade erstellt haben, und klicken Sie dann erneut hinzufügen, binden an die `SimpleNested.master` Masterseite.</span><span class="sxs-lookup"><span data-stu-id="8f67a-216">Delete the `Default.aspx` content page we just created and then re-add it, binding it to the `SimpleNested.master` master page.</span></span> <span data-ttu-id="8f67a-217">Dieses Mal fügt Visual Studio zwei Inhaltssteuerelemente die `Default.aspx`, verweisen auf die ContentPlaceHolder-Steuerelemente nun im definiert `SimpleNested.master` (siehe Abbildung 6).</span><span class="sxs-lookup"><span data-stu-id="8f67a-217">This time Visual Studio adds two Content controls to the `Default.aspx`, referencing the ContentPlaceHolders now defined in `SimpleNested.master` (see Figure 6).</span></span> <span data-ttu-id="8f67a-218">Fügen Sie den Text, der "Hello, from" default.aspx "!"</span><span class="sxs-lookup"><span data-stu-id="8f67a-218">Add the text, "Hello, from Default.aspx!"</span></span> <span data-ttu-id="8f67a-219">in den Inhalt zu steuern, die auf die verwiesen wird `MainContent`.</span><span class="sxs-lookup"><span data-stu-id="8f67a-219">in the Content control that referenced `MainContent`.</span></span>

<span data-ttu-id="8f67a-220">Abbildung 5 zeigt die drei Entitäten, die zurück - `Simple.master`, `SimpleNested.master`, und `Default.aspx` – und wie diese miteinander in Beziehung stehen.</span><span class="sxs-lookup"><span data-stu-id="8f67a-220">Figure 5 shows the three entities involved here - `Simple.master`, `SimpleNested.master`, and `Default.aspx` - and how they relate to one another.</span></span> <span data-ttu-id="8f67a-221">Wie das Diagramm zeigt, implementiert die geschachtelten Masterseite ContentControl-Elemente des übergeordneten Elements ContentPlaceHolder.</span><span class="sxs-lookup"><span data-stu-id="8f67a-221">As the diagram shows, the nested master page implements Content controls for its parent's ContentPlaceHolder.</span></span> <span data-ttu-id="8f67a-222">Wenn diese Bereiche auf der Seite Inhalt zugreifen kann müssen, muss die geschachtelten Masterseite eigene ContentPlaceHolder-Steuerelemente an die Inhaltssteuerelemente hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="8f67a-222">If these regions need to be accessible to the content page, the nested master page must add its own ContentPlaceHolders to the Content controls.</span></span>


<span data-ttu-id="8f67a-223">[![Die obersten Ebene und geschachtelte Masterseiten bestimmt den Inhalt des Layouts einer Seite](nested-master-pages-cs/_static/image14.png)](nested-master-pages-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="8f67a-223">[![The Top-Level and Nested Master Pages Dictate the Content Page's Layout](nested-master-pages-cs/_static/image14.png)](nested-master-pages-cs/_static/image13.png)</span></span>

<span data-ttu-id="8f67a-224">**Abbildung 05**: die obersten Ebene und geschachtelte Masterseiten bestimmen die Inhaltsseite Layout ([klicken Sie, um das Bild in voller Größe anzeigen](nested-master-pages-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="8f67a-224">**Figure 05**: The Top-Level and Nested Master Pages Dictate the Content Page's Layout ([Click to view full-size image](nested-master-pages-cs/_static/image15.png))</span></span>


<span data-ttu-id="8f67a-225">Dieses Verhalten zeigt, wie eine Seite oder Masterseite nur die übergeordnete Masterseite kennen sollten.</span><span class="sxs-lookup"><span data-stu-id="8f67a-225">This behavior illustrates how a content page or master page is only cognizant of its parent master page.</span></span> <span data-ttu-id="8f67a-226">Dieses Verhalten wird auch durch Visual Studio-Designer angezeigt.</span><span class="sxs-lookup"><span data-stu-id="8f67a-226">This behavior is also indicated by the Visual Studio Designer.</span></span> <span data-ttu-id="8f67a-227">Abbildung 6 zeigt den Designer für `Default.aspx`.</span><span class="sxs-lookup"><span data-stu-id="8f67a-227">Figure 6 shows the Designer for `Default.aspx`.</span></span> <span data-ttu-id="8f67a-228">Während der Designer deutlich zeigt, in welchen Regionen auf der Seite Inhalt bearbeitet werden und was nicht, dass Teile sind, nicht es unterscheiden, was nicht bearbeitbare Bereiche der geschachtelten Masterseite sind und welche Bereiche der obersten Ebene Masterseite.</span><span class="sxs-lookup"><span data-stu-id="8f67a-228">While the Designer clearly shows what regions are editable from the content page and what portions aren't, it doesn't disambiguate what non-editable regions are from the nested master page and what regions are from the top-level master page.</span></span>


<span data-ttu-id="8f67a-229">[![Der Inhalt Seite nun enthält ContentControl-Elemente, für die geschachtelte Masterseite ContentPlaceHolder-Steuerelemente](nested-master-pages-cs/_static/image17.png)](nested-master-pages-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="8f67a-229">[![The Content Page Now Includes Content Controls for the Nested Master Page's ContentPlaceHolders](nested-master-pages-cs/_static/image17.png)](nested-master-pages-cs/_static/image16.png)</span></span>

<span data-ttu-id="8f67a-230">**Abbildung 06**: die Seite jetzt umfasst Inhalte Inhaltssteuerelemente für die geschachtelte Masterseites ContentPlaceHolder-Steuerelemente ([klicken Sie, um das Bild in voller Größe anzeigen](nested-master-pages-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="8f67a-230">**Figure 06**: The Content Page Now Includes Content Controls for the Nested Master Page's ContentPlaceHolders ([Click to view full-size image](nested-master-pages-cs/_static/image18.png))</span></span>


## <a name="step-3-adding-a-second-simple-nested-master-page"></a><span data-ttu-id="8f67a-231">Schritt 3: Hinzufügen einer zweiten, einfache, geschachtelte Masterseite</span><span class="sxs-lookup"><span data-stu-id="8f67a-231">Step 3: Adding a Second Simple Nested Master Page</span></span>

<span data-ttu-id="8f67a-232">Der Vorteil der verschachtelte Gestaltungsvorlagen ist offensichtlich, wenn es mehrere geschachtelte Masterseiten gibt.</span><span class="sxs-lookup"><span data-stu-id="8f67a-232">The benefit of nested master pages is more evident when there are multiple nested master pages.</span></span> <span data-ttu-id="8f67a-233">Um diesen Vorteil zu veranschaulichen, erstellen Sie einen anderen geschachtelten Masterseite in der `NestedMasterPages` Ordner; die Namen dieser neuen geschachtelten Masterseite `SimpleNestedAlternate.master` und binden Sie es an der `Simple.master` Masterseite.</span><span class="sxs-lookup"><span data-stu-id="8f67a-233">To illustrate this benefit, create another nested master page in the `NestedMasterPages` folder; name this new nested master page `SimpleNestedAlternate.master` and bind it to the `Simple.master` master page.</span></span> <span data-ttu-id="8f67a-234">Fügen Sie in der geschachtelten Masterseite zwei Inhaltssteuerelementen ContentPlaceHolder-Steuerelemente hinzu, wie in Schritt2.</span><span class="sxs-lookup"><span data-stu-id="8f67a-234">Add ContentPlaceHolder controls in the nested master page's two Content controls like we did in Step 2.</span></span> <span data-ttu-id="8f67a-235">Steigern Sie den Text "Hello, from SimpleNestedAlternate!"</span><span class="sxs-lookup"><span data-stu-id="8f67a-235">Also add the text, "Hello, from SimpleNestedAlternate!"</span></span> <span data-ttu-id="8f67a-236">Klicken Sie in das Inhaltssteuerelement, das der obersten Ebene der Masterseite entspricht `MainContent` ContentPlaceHolder.</span><span class="sxs-lookup"><span data-stu-id="8f67a-236">in the Content control that corresponds to the top-level master page's `MainContent` ContentPlaceHolder.</span></span> <span data-ttu-id="8f67a-237">Nach diesen Änderungen sollte die neue geschachtelte Masterseite der deklarativen Markup etwa wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="8f67a-237">After making these changes your new nested master page's declarative markup should look similar to the following:</span></span>


[!code-aspx[Main](nested-master-pages-cs/samples/sample6.aspx)]

<span data-ttu-id="8f67a-238">Erstellen Sie eine Inhaltsseite, die mit dem Namen `Alternate.aspx` in die `NestedMasterPages` Ordner und binden Sie es an der `SimpleNestedAlternate.master` geschachtelte Masterseite.</span><span class="sxs-lookup"><span data-stu-id="8f67a-238">Create a content page named `Alternate.aspx` in the `NestedMasterPages` folder and bind it to the `SimpleNestedAlternate.master` nested master page.</span></span> <span data-ttu-id="8f67a-239">Fügen Sie den Text, der "Hello, alternativer!"</span><span class="sxs-lookup"><span data-stu-id="8f67a-239">Add the text, "Hello, from Alternate!"</span></span> <span data-ttu-id="8f67a-240">Klicken Sie in das Inhaltssteuerelement, das entspricht `MainContent`.</span><span class="sxs-lookup"><span data-stu-id="8f67a-240">in the Content control that corresponds to `MainContent`.</span></span> <span data-ttu-id="8f67a-241">Abbildung 7 zeigt `Alternate.aspx` über Visual Studio-Designer angezeigt.</span><span class="sxs-lookup"><span data-stu-id="8f67a-241">Figure 7 shows `Alternate.aspx` when viewed through the Visual Studio Designer.</span></span>


<span data-ttu-id="8f67a-242">[![Alternate.aspx ist an der SimpleNestedAlternate.master Masterseite gebunden.](nested-master-pages-cs/_static/image20.png)](nested-master-pages-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="8f67a-242">[![Alternate.aspx is Bound to the SimpleNestedAlternate.master Master Page](nested-master-pages-cs/_static/image20.png)](nested-master-pages-cs/_static/image19.png)</span></span>

<span data-ttu-id="8f67a-243">**Abbildung 07**: `Alternate.aspx` gebunden ist, um die `SimpleNestedAlternate.master` Masterseite ([klicken Sie, um das Bild in voller Größe anzeigen](nested-master-pages-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="8f67a-243">**Figure 07**: `Alternate.aspx` is Bound to the `SimpleNestedAlternate.master` Master Page ([Click to view full-size image](nested-master-pages-cs/_static/image21.png))</span></span>


<span data-ttu-id="8f67a-244">Vergleichen Sie den Designer in Abbildung 7 in den Designer in Abbildung 6.</span><span class="sxs-lookup"><span data-stu-id="8f67a-244">Compare the Designer in Figure 7 to the Designer in Figure 6.</span></span> <span data-ttu-id="8f67a-245">Beide Inhaltsseiten gemeinsam nutzen, dasselbe Layout auf der obersten Ebene Masterseite definiert (`Simple.master`), und zwar auf den Titel "Nested Master Pages-Tutorial (einfach)".</span><span class="sxs-lookup"><span data-stu-id="8f67a-245">Both content pages share the same layout defined in the top-level master page (`Simple.master`), namely the "Nested Master Pages Tutorial (Simple)" title.</span></span> <span data-ttu-id="8f67a-246">Beide haben noch unterschiedliche Inhalte in ihrer übergeordneten Masterseiten - definiert den Text "Hello, from SimpleNested!"</span><span class="sxs-lookup"><span data-stu-id="8f67a-246">Yet both have distinct content defined in their parent master pages - the text "Hello, from SimpleNested!"</span></span> <span data-ttu-id="8f67a-247">in Abbildung 6 und "Hello, from SimpleNestedAlternate!"</span><span class="sxs-lookup"><span data-stu-id="8f67a-247">in Figure 6 and "Hello, from SimpleNestedAlternate!"</span></span> <span data-ttu-id="8f67a-248">in Abbildung 7.</span><span class="sxs-lookup"><span data-stu-id="8f67a-248">in Figure 7.</span></span> <span data-ttu-id="8f67a-249">Gewährt, diese Unterschiede sind einfach, aber Sie könnten dieses Beispiel, um aussagekräftigere unterschieden zählen erweitern.</span><span class="sxs-lookup"><span data-stu-id="8f67a-249">Granted, these differences here are trivial, but you could extend this example to include more meaningful differences.</span></span> <span data-ttu-id="8f67a-250">Z. B. die `SimpleNested.master` Seite sind zum Beispiel ein Menü mit Optionen, die spezifisch für die Inhaltsseiten, wohingegen `SimpleNestedAlternate.master` möglicherweise Informationen zu den Content-Seiten, die an ihn binden müssen.</span><span class="sxs-lookup"><span data-stu-id="8f67a-250">For instance, the `SimpleNested.master` page might include a menu with options specific to its content pages, whereas `SimpleNestedAlternate.master` might have information pertinent to the content pages that bind to it.</span></span>

<span data-ttu-id="8f67a-251">Stellen Sie sich nun vor, dass wir das Layout der übergeordnete Standort ändern mussten.</span><span class="sxs-lookup"><span data-stu-id="8f67a-251">Now, imagine that we needed to make a change to the overarching site layout.</span></span> <span data-ttu-id="8f67a-252">Angenommen Sie, dass wir eine Liste mit allgemeinen Links alle Inhaltsseiten hinzufügen möchten.</span><span class="sxs-lookup"><span data-stu-id="8f67a-252">For example, imagine that we wanted to add a list of common links to all content pages.</span></span> <span data-ttu-id="8f67a-253">Zu diesem aktualisieren wir die Masterseite der obersten Ebene, Zweck `Simple.master`.</span><span class="sxs-lookup"><span data-stu-id="8f67a-253">To accomplish this we update the top-level master page, `Simple.master`.</span></span> <span data-ttu-id="8f67a-254">Gibt es keine Änderungen werden sofort in der geschachtelten Masterseiten und durch Erweiterung, deren Inhaltsseiten dargestellt.</span><span class="sxs-lookup"><span data-stu-id="8f67a-254">Any changes there are immediately reflected in its nested master pages and, by extension, their content pages.</span></span>

<span data-ttu-id="8f67a-255">Um die einfache veranschaulichen, mit denen wir das Layout der übergeordnete Standort ändern können, öffnen Sie die `Simple.master` Masterseite, und fügen Sie das folgende Markup zwischen den `topContent` und `mainContent` `<div>` Elemente:</span><span class="sxs-lookup"><span data-stu-id="8f67a-255">To demonstrate the ease with which we can change the overarching site layout, open the `Simple.master` master page and add the following markup between the `topContent` and `mainContent` `<div>` elements:</span></span>


[!code-aspx[Main](nested-master-pages-cs/samples/sample7.aspx)]

<span data-ttu-id="8f67a-256">Dies fügt zwei Links an den Anfang jeder Seite, an die gebunden `Simple.master`, `SimpleNested.master`, oder `SimpleNestedAlternate.master`; diese Änderungen gelten für alle geschachtelten Masterseiten und ihre Inhaltsseiten sofort.</span><span class="sxs-lookup"><span data-stu-id="8f67a-256">This adds two links to the top of every page that binds to `Simple.master`, `SimpleNested.master`, or `SimpleNestedAlternate.master`; these changes apply to all nested master pages and their content pages immediately.</span></span> <span data-ttu-id="8f67a-257">Abbildung 8 zeigt `Alternate.aspx` über einen Browser angezeigt.</span><span class="sxs-lookup"><span data-stu-id="8f67a-257">Figure 8 shows `Alternate.aspx` when viewed through a browser.</span></span> <span data-ttu-id="8f67a-258">Beachten Sie die Verknüpfungen am oberen Rand der Seite "(im Vergleich mit Abbildung 7).</span><span class="sxs-lookup"><span data-stu-id="8f67a-258">Note the addition of the links at the top of the page (compared to Figure 7).</span></span>


<span data-ttu-id="8f67a-259">[![In die Masterseite der obersten Ebene geändert werden sofort in den geschachtelten Masterseiten und Inhaltsseiten für deren dargestellt.](nested-master-pages-cs/_static/image23.png)](nested-master-pages-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="8f67a-259">[![Changed to the Top-Level Master Page are Immediately Reflected in its Nested Master Pages and Their Content Pages](nested-master-pages-cs/_static/image23.png)](nested-master-pages-cs/_static/image22.png)</span></span>

<span data-ttu-id="8f67a-260">**Abbildung 08**: in die Masterseite der obersten Ebene geändert werden sofort in den geschachtelten Masterseiten und Inhaltsseiten für deren dargestellt ([klicken Sie, um das Bild in voller Größe anzeigen](nested-master-pages-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="8f67a-260">**Figure 08**: Changed to the Top-Level Master Page are Immediately Reflected in its Nested Master Pages and Their Content Pages ([Click to view full-size image](nested-master-pages-cs/_static/image24.png))</span></span>


## <a name="using-a-nested-master-page-for-the-administration-section"></a><span data-ttu-id="8f67a-261">Verwenden einer geschachtelten Masterseite für den Verwaltungsabschnitt</span><span class="sxs-lookup"><span data-stu-id="8f67a-261">Using a Nested Master Page for the Administration Section</span></span>

<span data-ttu-id="8f67a-262">An diesem Punkt haben Sie erfahren, die Vorteile des geschachtelten Master Seiten und haben gesehen, wie zum Erstellen und verwenden diese in einer ASP.NET-Anwendung.</span><span class="sxs-lookup"><span data-stu-id="8f67a-262">At this point we have looked at the advantages of nested master pages and have seen how to create and use them in an ASP.NET application.</span></span> <span data-ttu-id="8f67a-263">Die Beispiele in den Schritten 1, 2 und 3, verwendet jedoch erstellen eine neue auf oberster Ebene Masterseite, neue geschachtelte Masterseiten und Inhaltsseiten für neue.</span><span class="sxs-lookup"><span data-stu-id="8f67a-263">The examples in Steps 1, 2, and 3, however, involved creating a new top-level master page, new nested master pages, and new content pages.</span></span> <span data-ttu-id="8f67a-264">Hinzufügen von was eine neue geschachtelte Masterseite mit einer Website mit einer vorhandenen Masterseite der obersten Ebene und Inhaltsseiten?</span><span class="sxs-lookup"><span data-stu-id="8f67a-264">What about adding a new nested master page to a website with an existing top-level master page and content pages?</span></span>

<span data-ttu-id="8f67a-265">Eine geschachtelte Masterseite in einer vorhandenen Website zu integrieren und Zuordnen zu bestehenden Inhaltsseiten erfordert etwas mehr Aufwand als ganz von vorn beginnen.</span><span class="sxs-lookup"><span data-stu-id="8f67a-265">Integrating a nested master page into an existing website and associating it with existing content pages requires a bit more effort than starting from scratch.</span></span> <span data-ttu-id="8f67a-266">Die Schritte 4, 5, 6 und 7 untersuchen diese Herausforderungen, wie wir unsere demoanwendung, um eine neue geschachtelte Masterseite mit dem Namen enthalten erweitern `AdminNested.master` , dient die ASP.NET-Seiten in und enthält Anweisungen für den Administrator der `~/Admin` Ordner.</span><span class="sxs-lookup"><span data-stu-id="8f67a-266">Steps 4, 5, 6, and 7 explore these challenges as we augment our demo application to include a new nested master page named `AdminNested.master` that contains instructions for the administrator and is used by the ASP.NET pages in the `~/Admin` folder.</span></span>

<span data-ttu-id="8f67a-267">Die Integration von einer geschachtelten Masterseite in unsere demoanwendung werden die folgenden Hürden eingeführt:</span><span class="sxs-lookup"><span data-stu-id="8f67a-267">Integrating a nested master page into our demo application introduces the following hurdles:</span></span>

- <span data-ttu-id="8f67a-268">Der vorhandene Inhalt Webseiten die `~/Admin` Ordner haben bestimmte Erwartungen ihrer Masterseite.</span><span class="sxs-lookup"><span data-stu-id="8f67a-268">The existing content pages in the `~/Admin` folder have certain expectations from their master page.</span></span> <span data-ttu-id="8f67a-269">Zunächst einmal, erwarten sie bestimmte ContentPlaceHolder-Steuerelemente vorhanden sein.</span><span class="sxs-lookup"><span data-stu-id="8f67a-269">For starters, they expect certain ContentPlaceHolder controls to be present.</span></span> <span data-ttu-id="8f67a-270">Darüber hinaus die `~/Admin/AddProduct.aspx` und `~/Admin/Products.aspx` Seiten rufen Sie die Masterseite öffentlichen `RefreshRecentProductsGrid` legen Sie die Methode, die `GridMessageText` -Eigenschaft, oder über einen Ereignishandler für die `PricesDoubled` Ereignis.</span><span class="sxs-lookup"><span data-stu-id="8f67a-270">Furthermore, the `~/Admin/AddProduct.aspx` and `~/Admin/Products.aspx` pages call the master page's public `RefreshRecentProductsGrid` method, set its `GridMessageText` property, or have an event handler for its `PricesDoubled` event.</span></span> <span data-ttu-id="8f67a-271">Unsere geschachtelte Masterseite muss folglich die gleiche ContentPlaceHolder-Steuerelemente und die öffentlichen Member angeben.</span><span class="sxs-lookup"><span data-stu-id="8f67a-271">Consequently, our nested master page must provide the same ContentPlaceHolders and public members.</span></span>
- <span data-ttu-id="8f67a-272">In den vorherigen Tutorials, die wir verbessert die `BasePage` Klasse dynamisch Festlegen der `Page` des Objekts `MasterPageFile` -Eigenschaft basierend auf einer Sitzungsvariablen.</span><span class="sxs-lookup"><span data-stu-id="8f67a-272">In the preceding tutorial we enhanced the `BasePage` class to dynamically set the `Page` object's `MasterPageFile` property based on a Session variable.</span></span> <span data-ttu-id="8f67a-273">Wie unterstützt wir dynamisch bei Verwendung von geschachtelten Masterseiten?</span><span class="sxs-lookup"><span data-stu-id="8f67a-273">How to we support dynamic master pages when using nested master pages?</span></span>

<span data-ttu-id="8f67a-274">Geschachtelte Masterseite zu erstellen und in unsere vorhandenen Inhaltsseiten verwenden, werden diese Überprüfung in zwei Schritten auftreten.</span><span class="sxs-lookup"><span data-stu-id="8f67a-274">These two challenges will surface as we build the nested master page and use it from our existing content pages.</span></span> <span data-ttu-id="8f67a-275">Wir untersuchen und zeitzonenbarrieren diese Probleme, sobald sie auftreten.</span><span class="sxs-lookup"><span data-stu-id="8f67a-275">We'll investigate and surmount these issues as they arise.</span></span>

## <a name="step-4-creating-the-nested-master-page"></a><span data-ttu-id="8f67a-276">Schritt 4: Erstellen der geschachtelte Masterseite</span><span class="sxs-lookup"><span data-stu-id="8f67a-276">Step 4: Creating the Nested Master Page</span></span>

<span data-ttu-id="8f67a-277">Unsere erste Aufgabe ist die Erstellung die geschachtelten Masterseite, die von den Seiten im Bereich Verwaltung verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="8f67a-277">Our first task is to create the nested master page to be used by the pages in the Administration section.</span></span> <span data-ttu-id="8f67a-278">Wie in Schritt2 beschrieben bei Hinzufügen eines neuen Masterseite geschachtelten müssen wir die geschachtelten Masterseite übergeordnete Masterseite angeben.</span><span class="sxs-lookup"><span data-stu-id="8f67a-278">As we saw in Step 2, when adding a new nested master page we need to specify the nested master page's parent master page.</span></span> <span data-ttu-id="8f67a-279">Aber wir haben zwei der obersten Ebene Masterseiten: `Site.master` und `Alternate.master`.</span><span class="sxs-lookup"><span data-stu-id="8f67a-279">But we have two top-level master pages: `Site.master` and `Alternate.master`.</span></span> <span data-ttu-id="8f67a-280">Beachten Sie, den wir erstellt `Alternate.master` in den vorherigen Tutorials und Code geschrieben, der `BasePage` -Klasse, die des Page-Objekts festgelegt `MasterPageFile` Eigenschaft zur Laufzeit, um entweder `Site.master` oder `Alternate.master` abhängig vom Wert der `MyMasterPage` Sitzungs-Variable.</span><span class="sxs-lookup"><span data-stu-id="8f67a-280">Recall that we created `Alternate.master` in the preceding tutorial and wrote code in the `BasePage` class that set the Page object's `MasterPageFile` property at runtime to either `Site.master` or `Alternate.master` depending on the value of the `MyMasterPage` Session variable.</span></span>

<span data-ttu-id="8f67a-281">Wie konfigurieren wir unsere geschachtelte Masterseite, dass die entsprechenden auf oberster Ebene Masterseite verwendet?</span><span class="sxs-lookup"><span data-stu-id="8f67a-281">How do we configure our nested master page so that it uses the appropriate top-level master page?</span></span> <span data-ttu-id="8f67a-282">Wir haben zwei Möglichkeiten:</span><span class="sxs-lookup"><span data-stu-id="8f67a-282">We have two options:</span></span>

- <span data-ttu-id="8f67a-283">Erstellen Sie zwei verschachtelte Gestaltungsvorlagen, `AdminNestedSite.master` und `AdminNestedAlternate.master`, und binden diese an der obersten Ebene Masterseiten `Site.master` und `Alternate.master`bzw.</span><span class="sxs-lookup"><span data-stu-id="8f67a-283">Create two nested master pages, `AdminNestedSite.master` and `AdminNestedAlternate.master`, and bind them to the top-level master pages `Site.master` and `Alternate.master`, respectively.</span></span> <span data-ttu-id="8f67a-284">In `BasePage`, dann legen wir die `Page` des Objekts `MasterPageFile` auf die entsprechenden geschachtelten Masterseite.</span><span class="sxs-lookup"><span data-stu-id="8f67a-284">In `BasePage`, then, we'd set the `Page` object's `MasterPageFile` to the appropriate nested master page.</span></span>
- <span data-ttu-id="8f67a-285">Erstellen Sie eine einzelne geschachtelte Masterseite und verwenden Sie die Inhaltsseiten, die diese bestimmte Masterseite verwenden.</span><span class="sxs-lookup"><span data-stu-id="8f67a-285">Create a single nested master page and have the content pages use this particular master page.</span></span> <span data-ttu-id="8f67a-286">Klicken Sie dann zur Laufzeit müssen wir legen Sie der geschachtelte Masterseite `MasterPageFile` Eigenschaft, um die entsprechenden auf oberster Ebene Masterseite zur Laufzeit.</span><span class="sxs-lookup"><span data-stu-id="8f67a-286">Then, at runtime, we'd need to set the nested master page's `MasterPageFile` property to the appropriate top-level master page at runtime.</span></span> <span data-ttu-id="8f67a-287">(Wie Sie mittlerweile herausgefunden haben könnte, master Seiten verfügen auch über eine `MasterPageFile` Eigenschaft.)</span><span class="sxs-lookup"><span data-stu-id="8f67a-287">(As you might have figured out by now, master pages also have a `MasterPageFile` property.)</span></span>

<span data-ttu-id="8f67a-288">Wir verwenden die zweite Option.</span><span class="sxs-lookup"><span data-stu-id="8f67a-288">Let's use the second option.</span></span> <span data-ttu-id="8f67a-289">Erstellen Sie eine einzelne geschachtelte Masterseitendatei in die `~/Admin` Ordner mit dem Namen `AdminNested.master`.</span><span class="sxs-lookup"><span data-stu-id="8f67a-289">Create a single nested master page file in the `~/Admin` folder named `AdminNested.master`.</span></span> <span data-ttu-id="8f67a-290">Da beide `Site.master` und `Alternate.master` den gleichen Satz von ContentPlaceHolder-Steuerelemente haben, ist es unerheblich, welche Masterseite, binden zwar gerne damit binden `Site.master` aus Gründen der Konsistenz.</span><span class="sxs-lookup"><span data-stu-id="8f67a-290">Because both `Site.master` and `Alternate.master` have the same set of ContentPlaceHolder controls, it doesn't matter what master page you bind it to, although I encourage you to bind it to `Site.master` for consistency's sake.</span></span>


<span data-ttu-id="8f67a-291">[![Hinzufügen einer geschachtelten Masterseite in den Ordner ~/Admin an.](nested-master-pages-cs/_static/image26.png)](nested-master-pages-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="8f67a-291">[![Add a Nested Master Page to the ~/Admin Folder.](nested-master-pages-cs/_static/image26.png)](nested-master-pages-cs/_static/image25.png)</span></span>

<span data-ttu-id="8f67a-292">**Abbildung 09**: Hinzufügen einer geschachtelten Masterseite, die `~/Admin` Ordner.</span><span class="sxs-lookup"><span data-stu-id="8f67a-292">**Figure 09**: Add a Nested Master Page to the `~/Admin` Folder.</span></span> <span data-ttu-id="8f67a-293">([Klicken Sie, um das Bild in voller Größe anzeigen](nested-master-pages-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="8f67a-293">([Click to view full-size image](nested-master-pages-cs/_static/image27.png))</span></span>


<span data-ttu-id="8f67a-294">Da die geschachtelte Masterseite auf eine Gestaltungsvorlage mit vier ContentPlaceHolder-Steuerelemente gebunden ist, fügt Visual Studio vier Inhaltssteuerelemente zum anfänglichen Markup für die neue geschachtelte Masterseite-Datei.</span><span class="sxs-lookup"><span data-stu-id="8f67a-294">Because the nested master page is bound to a master page with four ContentPlaceHolder controls, Visual Studio adds four Content controls to the new nested master page file's initial markup.</span></span> <span data-ttu-id="8f67a-295">Wie in den Schritten 2 und 3 ein ContentPlaceHolder-Steuerelement in den einzelnen Steuerelementen Inhalt hinzufügen, gewähren sie den gleichen Namen wie der obersten Ebene der Masterseite ContentPlaceHolder-Steuerelement.</span><span class="sxs-lookup"><span data-stu-id="8f67a-295">Like we did in Steps 2 and 3, add a ContentPlaceHolder control in each Content control, giving it the same name as the top-level master page's ContentPlaceHolder control.</span></span> <span data-ttu-id="8f67a-296">Fügen Sie auch das folgende Markup an das Inhaltssteuerelement, das entspricht, dem `MainContent` ContentPlaceHolder:</span><span class="sxs-lookup"><span data-stu-id="8f67a-296">Also add the following markup to the Content control that corresponds to the `MainContent` ContentPlaceHolder:</span></span>


[!code-html[Main](nested-master-pages-cs/samples/sample8.html)]

<span data-ttu-id="8f67a-297">Als Nächstes definieren Sie die `instructions` CSS-Klasse der `Styles.css` und `AlternateStyles.css` CSS-Dateien.</span><span class="sxs-lookup"><span data-stu-id="8f67a-297">Next, define the `instructions` CSS class in the `Styles.css` and `AlternateStyles.css` CSS files.</span></span> <span data-ttu-id="8f67a-298">Die folgenden CSS-Regeln dazu führen, dass HTML-Elemente erstellt, in denen die `instructions` Klasse mit eine gelbe Hintergrundfarbe und ein schwarzer, durchgezogener Rahmen angezeigt werden:</span><span class="sxs-lookup"><span data-stu-id="8f67a-298">The following CSS rules cause HTML elements styled with the `instructions` class to be displayed with a light yellow background color and a black, solid border:</span></span>


[!code-css[Main](nested-master-pages-cs/samples/sample9.css)]

<span data-ttu-id="8f67a-299">Da dieses Markup der geschachtelten Masterseite hinzugefügt wurde, wird es nur auf diesen Seiten angezeigt, die diese geschachtelten Masterseite (d. h., die Seiten im Bereich Verwaltung) zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="8f67a-299">Because this markup has been added to the nested master page, it will only appear in those pages that use this nested master page (namely, the pages in the Administration section).</span></span>

<span data-ttu-id="8f67a-300">Nach dem Herstellen dieser Ergänzungen an Ihre geschachtelten Masterseite, sollte der deklarative Markup etwa wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="8f67a-300">After making these additions to your nested master page, its declarative markup should look similar to the following:</span></span>


[!code-aspx[Main](nested-master-pages-cs/samples/sample10.aspx)]

<span data-ttu-id="8f67a-301">Beachten Sie, dass jedes Inhaltssteuerelement ein ContentPlaceHolder-Steuerelement, und dass die ContentPlaceHolder-Steuerelemente `ID` Eigenschaften werden die gleichen Werte wie die entsprechenden ContentPlaceHolder-Steuerelemente auf der obersten Ebene Masterseite zugewiesen.</span><span class="sxs-lookup"><span data-stu-id="8f67a-301">Note that each Content control has a ContentPlaceHolder control and that the ContentPlaceHolder controls' `ID` properties are assigned the same values as the corresponding ContentPlaceHolder controls in the top-level master page.</span></span> <span data-ttu-id="8f67a-302">Darüber hinaus wird die Verwaltung Abschnitt-spezifische Markup in der `MainContent` ContentPlaceHolder.</span><span class="sxs-lookup"><span data-stu-id="8f67a-302">Moreover, the Administration section-specific markup appears in the `MainContent` ContentPlaceHolder.</span></span>

<span data-ttu-id="8f67a-303">Abbildung 10 zeigt die `AdminNested.master` geschachtelte Masterseite, wenn Sie über Visual Studio-Designer angezeigt.</span><span class="sxs-lookup"><span data-stu-id="8f67a-303">Figure 10 shows the `AdminNested.master` nested master page when viewed through Visual Studio's Designer.</span></span> <span data-ttu-id="8f67a-304">Sehen Sie die Anweisungen in das gelbe Feld am oberen Rand der `MainContent` Inhaltssteuerelement.</span><span class="sxs-lookup"><span data-stu-id="8f67a-304">You can see the instructions in the yellow box at the top of the `MainContent` Content control.</span></span>


<span data-ttu-id="8f67a-305">[![Der geschachtelte Masterseite erweitert die Masterseite enthält Anweisungen für den Administrator.](nested-master-pages-cs/_static/image29.png)](nested-master-pages-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="8f67a-305">[![The Nested Master Page Extends the Top-Level Master Page to Include Instructions for the Administrator.](nested-master-pages-cs/_static/image29.png)](nested-master-pages-cs/_static/image28.png)</span></span>

<span data-ttu-id="8f67a-306">**Abbildung 10**: die geschachtelte Masterseite erweitert die Masterseite enthält Anweisungen für den Administrator.</span><span class="sxs-lookup"><span data-stu-id="8f67a-306">**Figure 10**: The Nested Master Page Extends the Top-Level Master Page to Include Instructions for the Administrator.</span></span> <span data-ttu-id="8f67a-307">([Klicken Sie, um das Bild in voller Größe anzeigen](nested-master-pages-cs/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="8f67a-307">([Click to view full-size image](nested-master-pages-cs/_static/image30.png))</span></span>


## <a name="step-5-updating-the-existing-content-pages-to-use-the-new-nested-master-page"></a><span data-ttu-id="8f67a-308">Schritt 5: Aktualisieren von vorhandenen Inhaltsseiten um die neue geschachtelte Masterseite zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="8f67a-308">Step 5: Updating the Existing Content Pages to Use the New Nested Master Page</span></span>

<span data-ttu-id="8f67a-309">Jedes Mal, wenn wir im Bereich Verwaltung eine neue Seite hinzufügen müssen wir bindet, bindet es an der `AdminNested.master` Masterseite, die wir gerade erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="8f67a-309">Anytime we add a new content page to the Administration section we need to bind it to the `AdminNested.master` master page we just created.</span></span> <span data-ttu-id="8f67a-310">Aber wie sieht es mit den vorhandenen Inhaltsseiten?</span><span class="sxs-lookup"><span data-stu-id="8f67a-310">But what about the existing content pages?</span></span> <span data-ttu-id="8f67a-311">Alle Inhaltsseiten am Standort derzeit, leiten Sie von der `BasePage` -Klasse, die Masterseite der Inhaltsseite programmgesteuert zur Laufzeit festgelegt.</span><span class="sxs-lookup"><span data-stu-id="8f67a-311">Currently, all content pages in the site derive from the `BasePage` class, which programmatically sets the content page's master page at runtime.</span></span> <span data-ttu-id="8f67a-312">Dies ist nicht das Verhalten, die für die Inhaltsseiten im Bereich Verwaltung sollten.</span><span class="sxs-lookup"><span data-stu-id="8f67a-312">This is not the behavior we want for the content pages in the Administration section.</span></span> <span data-ttu-id="8f67a-313">Stattdessen möchten wir diese Inhaltsseiten, verwenden Sie immer die `AdminNested.master` Seite.</span><span class="sxs-lookup"><span data-stu-id="8f67a-313">Instead, we want these content pages to always use the `AdminNested.master` page.</span></span> <span data-ttu-id="8f67a-314">Es werden die Verantwortung für die geschachtelte Masterseite, die direkt auf oberster Ebene Inhaltsseite zur Laufzeit auszuwählen.</span><span class="sxs-lookup"><span data-stu-id="8f67a-314">It will be the responsibility of the nested master page to choose the right top-level content page at runtime.</span></span>

<span data-ttu-id="8f67a-315">Um die beste Methode zum erreichen dies gewünscht Verhalten ist zum Erstellen einer neuen benutzerdefinierten Basisseite-Klasse, die mit dem Namen `AdminBasePage` , reicht die `BasePage` Klasse.</span><span class="sxs-lookup"><span data-stu-id="8f67a-315">To best way to achieve this desired behavior is to create a new custom base page class named `AdminBasePage` that extends the `BasePage` class.</span></span> <span data-ttu-id="8f67a-316">`AdminBasePage` können überschreiben, klicken Sie dann die `SetMasterPageFile` und legen Sie die `Page` des Objekts `MasterPageFile` der hartcodierte Wert "~ / Admin/AdminNested.master".</span><span class="sxs-lookup"><span data-stu-id="8f67a-316">`AdminBasePage` can then override the `SetMasterPageFile` and set the `Page` object's `MasterPageFile` to the hard-coded value "~/Admin/AdminNested.master".</span></span> <span data-ttu-id="8f67a-317">Auf diese Weise einer beliebigen Seite, die abgeleitet `AdminBasePage` verwenden `AdminNested.master`, während einer beliebigen Seite, die abgeleitet `BasePage` müssen die `MasterPageFile` Eigenschaftensatz dynamisch entweder "~ / Site.master" oder "~ / Alternate.master" anhand des Werts von der `MyMasterPage` Sitzungsvariablen.</span><span class="sxs-lookup"><span data-stu-id="8f67a-317">In this way, any page that derives from `AdminBasePage` will use `AdminNested.master`, whereas any page that derives from `BasePage` will have its `MasterPageFile` property set dynamically to either "~/Site.master" or "~/Alternate.master" based on the value of the `MyMasterPage` Session variable.</span></span>

<span data-ttu-id="8f67a-318">Starten, indem eine neue Klassendatei zum Hinzufügen der `App_Code` Ordner mit dem Namen `AdminBasePage.cs`.</span><span class="sxs-lookup"><span data-stu-id="8f67a-318">Start by adding a new class file to the `App_Code` folder named `AdminBasePage.cs`.</span></span> <span data-ttu-id="8f67a-319">Haben `AdminBasePage` erweitern `BasePage` und überschreiben Sie dann die `SetMasterPageFile` Methode.</span><span class="sxs-lookup"><span data-stu-id="8f67a-319">Have `AdminBasePage` extend `BasePage` and then override the `SetMasterPageFile` method.</span></span> <span data-ttu-id="8f67a-320">Weisen Sie in dieser Methode die `MasterPageFile` den Wert "~ / Admin/AdminNested.master".</span><span class="sxs-lookup"><span data-stu-id="8f67a-320">In that method assign the `MasterPageFile` the value "~/Admin/AdminNested.master".</span></span> <span data-ttu-id="8f67a-321">Nach diesen Änderungen Ihrer Klasse sollte die Datei etwa wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="8f67a-321">After making these changes your class file should look similar to the following:</span></span>


[!code-csharp[Main](nested-master-pages-cs/samples/sample11.cs)]

<span data-ttu-id="8f67a-322">Jetzt müssen wir haben bei der Verwaltung Abschnitt leiten Sie von der bestehenden Inhaltsseiten `AdminBasePage` anstelle von `BasePage`.</span><span class="sxs-lookup"><span data-stu-id="8f67a-322">We now need to have the existing content pages in the Administration section derive from `AdminBasePage` instead of `BasePage`.</span></span> <span data-ttu-id="8f67a-323">Wechseln Sie zu die CodeBehind-Klassendatei für jede Seite Inhalt in die `~/Admin` Ordner und diese Änderung vornehmen.</span><span class="sxs-lookup"><span data-stu-id="8f67a-323">Go to the code-behind class file for each content page in the `~/Admin` folder and make this change.</span></span> <span data-ttu-id="8f67a-324">Z. B. in `~/Admin/Default.aspx` ändern Sie die Deklaration der CodeBehind-Klasse aus:</span><span class="sxs-lookup"><span data-stu-id="8f67a-324">For example, in `~/Admin/Default.aspx` you'd change the code-behind class declaration from:</span></span>


[!code-csharp[Main](nested-master-pages-cs/samples/sample12.cs)]

<span data-ttu-id="8f67a-325">Nach:</span><span class="sxs-lookup"><span data-stu-id="8f67a-325">To:</span></span>


[!code-csharp[Main](nested-master-pages-cs/samples/sample13.cs)]

<span data-ttu-id="8f67a-326">Abbildung 11 zeigt wie die obersten Ebene Masterseite (`Site.master` oder `Alternate.master`), die geschachtelte Masterseite (`AdminNested.master`), und die Inhaltsseiten für die Verwaltung im Abschnitt miteinander in Beziehung stehen.</span><span class="sxs-lookup"><span data-stu-id="8f67a-326">Figure 11 depicts how the top-level master page (`Site.master` or `Alternate.master`), the nested master page (`AdminNested.master`), and the Administration section content pages relate to one another.</span></span>


<span data-ttu-id="8f67a-327">[![Der geschachtelte Masterseite definiert Content speziell zu den Seiten im Bereich Verwaltung](nested-master-pages-cs/_static/image32.png)](nested-master-pages-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="8f67a-327">[![The Nested Master Page Defines Content Specific to the Pages in the Administration Section](nested-master-pages-cs/_static/image32.png)](nested-master-pages-cs/_static/image31.png)</span></span>

<span data-ttu-id="8f67a-328">**Abbildung 11**: die geschachtelte Master Seite definiert Inhalt für die Seiten im Bereich Verwaltung ([klicken Sie, um das Bild in voller Größe anzeigen](nested-master-pages-cs/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="8f67a-328">**Figure 11**: The Nested Master Page Defines Content Specific to the Pages in the Administration Section ([Click to view full-size image](nested-master-pages-cs/_static/image33.png))</span></span>


## <a name="step-6-mirroring-the-master-pages-public-methods-and-properties"></a><span data-ttu-id="8f67a-329">Schritt 6: Spiegelung, öffentliche Methoden und Eigenschaften der Masterseite</span><span class="sxs-lookup"><span data-stu-id="8f67a-329">Step 6: Mirroring the Master Page's Public Methods and Properties</span></span>

<span data-ttu-id="8f67a-330">Bedenken Sie, dass die `~/Admin/AddProduct.aspx` und `~/Admin/Products.aspx` Seiten interagiert programmgesteuert mit der Masterseite: `~/Admin/AddProduct.aspx` Aufrufe die Masterseite der öffentliche `RefreshRecentProductsGrid` -Methode und legt seine `GridMessageText` Eigenschaft `~/Admin/Products.aspx` verfügt über einen Ereignishandler für die `PricesDoubled` Ereignis.</span><span class="sxs-lookup"><span data-stu-id="8f67a-330">Recall that the `~/Admin/AddProduct.aspx` and `~/Admin/Products.aspx` pages interact programmatically with the master page: `~/Admin/AddProduct.aspx` calls the master page's public `RefreshRecentProductsGrid` method and sets its `GridMessageText` property; `~/Admin/Products.aspx` has an event handler for the `PricesDoubled` event.</span></span> <span data-ttu-id="8f67a-331">In den vorherigen Tutorials, die wir erstellt einer abstraktes `BaseMasterPage` Klasse, die diese öffentlichen Member definiert.</span><span class="sxs-lookup"><span data-stu-id="8f67a-331">In the preceding tutorial we created an abstract `BaseMasterPage` class that defined these public members.</span></span>

<span data-ttu-id="8f67a-332">Die `~/Admin/AddProduct.aspx` und `~/Admin/Products.aspx` Seiten wird davon ausgegangen, dass die Masterseite abgeleitet der `BaseMasterPage` Klasse.</span><span class="sxs-lookup"><span data-stu-id="8f67a-332">The `~/Admin/AddProduct.aspx` and `~/Admin/Products.aspx` pages assume that their master page derives from the `BaseMasterPage` class.</span></span> <span data-ttu-id="8f67a-333">Die `AdminNested.master` Seite jedoch derzeit noch erweitert die `System.Web.UI.MasterPage` Klasse.</span><span class="sxs-lookup"><span data-stu-id="8f67a-333">The `AdminNested.master` page, however, currently extends the `System.Web.UI.MasterPage` class.</span></span> <span data-ttu-id="8f67a-334">Als Ergebnis wird beim Zugriff auf `~/Admin/Products.aspx` ein `InvalidCastException` mit der folgenden Meldung ausgelöst: "wandelt ein Objekt vom Typ kann nicht ' ASP.admin\_Adminnested\_master" in den Typ "BaseMasterPage". "</span><span class="sxs-lookup"><span data-stu-id="8f67a-334">As a result, when visiting `~/Admin/Products.aspx` an `InvalidCastException` is thrown with the message: "Unable to cast object of type 'ASP.admin\_adminnested\_master' to type 'BaseMasterPage'."</span></span>

<span data-ttu-id="8f67a-335">Um dies zu beheben, wir haben müssen, die `AdminNested.master` Code-Behind-Klasse erweitern `BaseMasterPage`.</span><span class="sxs-lookup"><span data-stu-id="8f67a-335">To fix this we need to have the `AdminNested.master` code-behind class extend `BaseMasterPage`.</span></span> <span data-ttu-id="8f67a-336">Aktualisieren Sie die geschachtelte Masterseite Code-Behind-Klassendeklaration aus:</span><span class="sxs-lookup"><span data-stu-id="8f67a-336">Update the nested master page's code-behind class declaration from:</span></span>


[!code-csharp[Main](nested-master-pages-cs/samples/sample14.cs)]

<span data-ttu-id="8f67a-337">Nach:</span><span class="sxs-lookup"><span data-stu-id="8f67a-337">To:</span></span>


[!code-csharp[Main](nested-master-pages-cs/samples/sample15.cs)]

<span data-ttu-id="8f67a-338">Wir sind noch nicht fertig.</span><span class="sxs-lookup"><span data-stu-id="8f67a-338">We're not done yet.</span></span> <span data-ttu-id="8f67a-339">Da die `BaseMasterPage` Klasse ist abstrakt, müssen wir zum Überschreiben der `abstract` Elemente `RefreshRecentProductsGrid` und `GridMessageText`.</span><span class="sxs-lookup"><span data-stu-id="8f67a-339">Because the `BaseMasterPage` class is abstract, we need to override the `abstract` members, `RefreshRecentProductsGrid` and `GridMessageText`.</span></span> <span data-ttu-id="8f67a-340">Diese Elemente werden von der obersten Ebene Masterseiten verwendet, um ihren Benutzeroberflächen zu aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="8f67a-340">These members are used by the top-level master pages to update their user interfaces.</span></span> <span data-ttu-id="8f67a-341">(Eigentlich nur die `Site.master` Masterseite verwendet diese Methoden, obwohl beide auf oberster Ebene Masterseiten diese Methoden implementieren, da beide erweitern `BaseMasterPage`.)</span><span class="sxs-lookup"><span data-stu-id="8f67a-341">(Actually, only the `Site.master` master page uses these methods, although both top-level master pages implement these methods, since both extend `BaseMasterPage`.)</span></span>

<span data-ttu-id="8f67a-342">Wir müssen diese Member im implementieren `AdminNested.master`, diese Implementierungen müssen lediglich ist, rufen Sie das gleiche Element einfach in die obersten Ebene Masterseite, die von der geschachtelten Masterseite verwendet.</span><span class="sxs-lookup"><span data-stu-id="8f67a-342">While we need to implement these members in `AdminNested.master`, all these implementations need to do is simply call the same member in the top-level master page used by the nested master page.</span></span> <span data-ttu-id="8f67a-343">Z. B. wenn eine Seite im Bereich Verwaltung ruft der geschachtelten Masterseite `RefreshRecentProductsGrid` -Methode, die geschachtelte Masterseite muss, lediglich, wiederum, rufen Sie `Site.master` oder `Alternate.master`des `RefreshRecentProductsGrid` Methode.</span><span class="sxs-lookup"><span data-stu-id="8f67a-343">For instance, when a content page in the Administration section calls the nested master page's `RefreshRecentProductsGrid` method, all the nested master page needs to do is, in turn, call `Site.master` or `Alternate.master`'s `RefreshRecentProductsGrid` method.</span></span>

<span data-ttu-id="8f67a-344">Um dies zu erreichen, starten Sie durch Hinzufügen des folgenden `@MasterType` -Direktive am Anfang `AdminNested.master`:</span><span class="sxs-lookup"><span data-stu-id="8f67a-344">To achieve this, start by adding the following `@MasterType` directive to the top of `AdminNested.master`:</span></span>


[!code-aspx[Main](nested-master-pages-cs/samples/sample16.aspx)]

<span data-ttu-id="8f67a-345">Bedenken Sie, dass die `@MasterType` Richtlinie fügt eine stark typisierte-Eigenschaft für die Code-Behind-Klasse, die mit dem Namen `Master`.</span><span class="sxs-lookup"><span data-stu-id="8f67a-345">Recall that the `@MasterType` directive adds a strongly-typed property to the code-behind class named `Master`.</span></span> <span data-ttu-id="8f67a-346">Überschreiben Sie dann die `RefreshRecentProductsGrid` und `GridMessageText` Mitglieder und Delegieren Sie einfach den Aufruf der `Master`die entsprechende Methode:</span><span class="sxs-lookup"><span data-stu-id="8f67a-346">Then override the `RefreshRecentProductsGrid` and `GridMessageText` members and simply delegate the call to the `Master`'s corresponding method:</span></span>


[!code-csharp[Main](nested-master-pages-cs/samples/sample17.cs)]

<span data-ttu-id="8f67a-347">Mit diesem Code werden sollten Sie in der Lage zu besuchen und die Inhaltsseiten im Bereich Verwaltung verwenden.</span><span class="sxs-lookup"><span data-stu-id="8f67a-347">With this code in place, you should be able to visit and use the content pages in the Administration section.</span></span> <span data-ttu-id="8f67a-348">Abbildung 12 zeigt die `~/Admin/Products.aspx` Seite, wenn Sie über einen Browser angezeigt.</span><span class="sxs-lookup"><span data-stu-id="8f67a-348">Figure 12 shows the `~/Admin/Products.aspx` page when viewed through a browser.</span></span> <span data-ttu-id="8f67a-349">Wie Sie sehen, enthält die Seite das Kontrollkästchen Verwaltung-Anweisungen, die in der geschachtelten Masterseite definiert ist.</span><span class="sxs-lookup"><span data-stu-id="8f67a-349">As you can see, the page includes the Administration Instructions box, which is defined in the nested master page.</span></span>


<span data-ttu-id="8f67a-350">[![Die Inhaltsseiten im Bereich Verwaltung gehören Anweisungen am oberen Rand jeder Seite](nested-master-pages-cs/_static/image35.png)](nested-master-pages-cs/_static/image34.png)</span><span class="sxs-lookup"><span data-stu-id="8f67a-350">[![The Content Pages in the Administration Section Include Instructions at the Top of Each Page](nested-master-pages-cs/_static/image35.png)](nested-master-pages-cs/_static/image34.png)</span></span>

<span data-ttu-id="8f67a-351">**Abbildung 12**: die Inhaltsseiten in die Verwaltung im Abschnitt enthalten Anweisungen an die von jeder Seite der obersten ([klicken Sie, um das Bild in voller Größe anzeigen](nested-master-pages-cs/_static/image36.png))</span><span class="sxs-lookup"><span data-stu-id="8f67a-351">**Figure 12**: The Content Pages in the Administration Section Include Instructions at the Top of Each Page ([Click to view full-size image](nested-master-pages-cs/_static/image36.png))</span></span>


## <a name="step-7-using-the-appropriate-top-level-master-page-at-runtime"></a><span data-ttu-id="8f67a-352">Schritt 7: Verwenden der entsprechenden Masterseite zur Laufzeit</span><span class="sxs-lookup"><span data-stu-id="8f67a-352">Step 7: Using the Appropriate Top-Level Master Page at Runtime</span></span>

<span data-ttu-id="8f67a-353">Während alle Inhaltsseiten im Bereich Verwaltung voll funktionsfähig sind, wird sie alle auf oberster Ebene dieselbe Masterseite verwenden und ignorieren Sie die Masterseite, die vom Benutzer am ausgewählten `ChooseMasterPage.aspx`.</span><span class="sxs-lookup"><span data-stu-id="8f67a-353">While all the content pages in the Administration section are fully functional, they all use the same top-level master page and ignore the master page selected by the user at `ChooseMasterPage.aspx`.</span></span> <span data-ttu-id="8f67a-354">Dieses Verhalten ist darauf zurückzuführen, dass die geschachtelten Masterseite verfügt über seine `MasterPageFile` statisch-eigenschaftseinstellung `Site.master` in seine `<%@ Master %>` Richtlinie.</span><span class="sxs-lookup"><span data-stu-id="8f67a-354">This behavior is due to the fact that the nested master page has its `MasterPageFile` property statically set to `Site.master` in its `<%@ Master %>` directive.</span></span>

<span data-ttu-id="8f67a-355">Verwenden Sie die Seite die obersten Ebene master ausgewählt, durch den Endbenutzer wir festlegen müssen der `AdminNested.master`des `MasterPageFile` Eigenschaft, um den Wert in der `MyMasterPage` Sitzungsvariablen.</span><span class="sxs-lookup"><span data-stu-id="8f67a-355">To use the top-level master page selected by the end user we need to set the `AdminNested.master`'s `MasterPageFile` property to the value in the `MyMasterPage` Session variable.</span></span> <span data-ttu-id="8f67a-356">Da wir der Inhaltsseiten festgelegt `MasterPageFile` Eigenschaften in `BasePage`, Sie eventuell der Meinung, dass wir der geschachtelten Masterseite festgelegt wäre `MasterPageFile` -Eigenschaft in `BaseMasterPage` oder in der `AdminNested.master`des Code-Behind-Klasse.</span><span class="sxs-lookup"><span data-stu-id="8f67a-356">Because we set the content pages' `MasterPageFile` properties in `BasePage`, you may think that we would set the nested master page's `MasterPageFile` property in `BaseMasterPage` or in the `AdminNested.master`'s code-behind class.</span></span> <span data-ttu-id="8f67a-357">Dies wird nicht jedoch funktioniert, weil wir festgelegt haben müssen die `MasterPageFile` Eigenschaft am Ende der PreInit-Phase.</span><span class="sxs-lookup"><span data-stu-id="8f67a-357">This won't work, however, because we need to have set the `MasterPageFile` property by the end of the PreInit stage.</span></span> <span data-ttu-id="8f67a-358">Die früheste Uhrzeit an, die wir von einer Masterseite der Lebenszyklus der Seite programmgesteuert nutzen können, ist der Init-Phase (die nach der PreInit-Phase tritt auf,).</span><span class="sxs-lookup"><span data-stu-id="8f67a-358">The earliest time that we can programmatically tap into the page lifecycle from a master page is the Init stage (which occurs after the PreInit stage).</span></span>

<span data-ttu-id="8f67a-359">Aus diesem Grund müssen wir legen Sie der geschachtelte Masterseite `MasterPageFile` Eigenschaft aus der Content-Basis.</span><span class="sxs-lookup"><span data-stu-id="8f67a-359">Therefore, we need to set the nested master page's `MasterPageFile` property from the content pages.</span></span> <span data-ttu-id="8f67a-360">Der einzige Inhalt Seiten, die die `AdminNested.master` Masterseite ableiten `AdminBasePage`.</span><span class="sxs-lookup"><span data-stu-id="8f67a-360">The only content pages that use the `AdminNested.master` master page derive from `AdminBasePage`.</span></span> <span data-ttu-id="8f67a-361">Aus diesem Grund können wir diese Logik dort ablegen.</span><span class="sxs-lookup"><span data-stu-id="8f67a-361">Therefore, we can put this logic there.</span></span> <span data-ttu-id="8f67a-362">In Schritt 5 wir außer Kraft gesetzt den `SetMasterPageFile` Methode der `Page` des Objekts `MasterPageFile` Eigenschaft "~ / Admin/AdminNested.master".</span><span class="sxs-lookup"><span data-stu-id="8f67a-362">In Step 5 we overrode the `SetMasterPageFile` method, setting the `Page` object's `MasterPageFile` property to "~/Admin/AdminNested.master".</span></span> <span data-ttu-id="8f67a-363">Update `SetMasterPageFile` fest, dass auch der Masterseite `MasterPageFile` Eigenschaft, um das Ergebnis in der Sitzung gespeichert:</span><span class="sxs-lookup"><span data-stu-id="8f67a-363">Update `SetMasterPageFile` to also set the master page's `MasterPageFile` property to the result stored in Session:</span></span>


[!code-csharp[Main](nested-master-pages-cs/samples/sample18.cs)]

<span data-ttu-id="8f67a-364">Die `GetMasterPageFileFromSession` -Methode, die wir hinzugefügt haben die `BasePage` Klasse, die im vorherigen Tutorial Pfad der entsprechenden Masterseite auf den Wert der Variable Sitzung basierend gibt.</span><span class="sxs-lookup"><span data-stu-id="8f67a-364">The `GetMasterPageFileFromSession` method, which we added to the `BasePage` class in the preceding tutorial, returns the appropriate master page file path based on the Session variable value.</span></span>

<span data-ttu-id="8f67a-365">Mit dieser Änderung vorgenommen wurde führt die Auswahl des Benutzers Masterseite mit dem Abschnitt für die Verwaltung.</span><span class="sxs-lookup"><span data-stu-id="8f67a-365">With this change in place, the user's master page selection carries over to the Administration section.</span></span> <span data-ttu-id="8f67a-366">Abbildung 13 zeigt dieselbe Seite als Abbildung 12, aber erst nachdem der Benutzer die Masterseite Auswahl geändert hat `Alternate.master`.</span><span class="sxs-lookup"><span data-stu-id="8f67a-366">Figure 13 shows the same page as Figure 12, but after the user has changed their master page selection to `Alternate.master`.</span></span>


<span data-ttu-id="8f67a-367">[![Die geschachtelte Verwaltungsseite verwendet die Masterseite, die vom Benutzer ausgewählt](nested-master-pages-cs/_static/image38.png)](nested-master-pages-cs/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="8f67a-367">[![The Nested Administration Page Uses the Top-Level Master Page Selected by the User](nested-master-pages-cs/_static/image38.png)](nested-master-pages-cs/_static/image37.png)</span></span>

<span data-ttu-id="8f67a-368">**Abbildung 13**: die Nested-Verwaltungsseite wird verwendet, die obersten Ebene Master Seite vom Benutzer ausgewählten ([klicken Sie, um das Bild in voller Größe anzeigen](nested-master-pages-cs/_static/image39.png))</span><span class="sxs-lookup"><span data-stu-id="8f67a-368">**Figure 13**: The Nested Administration Page Uses the Top-Level Master Page Selected by the User ([Click to view full-size image](nested-master-pages-cs/_static/image39.png))</span></span>


## <a name="summary"></a><span data-ttu-id="8f67a-369">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="8f67a-369">Summary</span></span>

<span data-ttu-id="8f67a-370">Viele wie like Inhaltsseiten auf eine Gestaltungsvorlage gebunden werden können, es ist möglich, erstellen Sie geschachtelte Masterseiten, dass eine Masterseite untergeordnetes Element an eine übergeordnete Masterseite zu binden.</span><span class="sxs-lookup"><span data-stu-id="8f67a-370">Much like how content pages can bind to a master page, it is possible to create nested master pages by having a child master page bind to a parent master page.</span></span> <span data-ttu-id="8f67a-371">Die untergeordnete Masterseite kann ContentControl-Elemente aller übergeordneten ContentPlaceHolder-Steuerelemente definieren; Sie können eigene ContentPlaceHolder-Steuerelemente (sowie andere Markups) klicken Sie dann diese Inhaltssteuerelemente hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="8f67a-371">The child master page may define Content controls for each of its parent's ContentPlaceHolders; it can then add its own ContentPlaceHolder controls (as well as other markup) to these Content controls.</span></span> <span data-ttu-id="8f67a-372">Geschachtelte Masterseiten sind sehr nützlich in großen Webanwendungen, in dem alle Seiten gemeinsam eine allumfassende Aussehen und Verhalten, aber bestimmte Abschnitte des Standorts erfordern eindeutige Anpassungen.</span><span class="sxs-lookup"><span data-stu-id="8f67a-372">Nested master pages are quite useful in large web applications where all pages share an overarching look and feel, yet certain sections of the site require unique customizations.</span></span>

<span data-ttu-id="8f67a-373">Viel Spaß beim Programmieren!</span><span class="sxs-lookup"><span data-stu-id="8f67a-373">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="8f67a-374">Weiterführende Themen</span><span class="sxs-lookup"><span data-stu-id="8f67a-374">Further Reading</span></span>

<span data-ttu-id="8f67a-375">Weitere Informationen zu den Themen in diesem Tutorial erläutert finden Sie in den folgenden Ressourcen:</span><span class="sxs-lookup"><span data-stu-id="8f67a-375">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="8f67a-376">Geschachtelte Masterseiten mit ASP.NET</span><span class="sxs-lookup"><span data-stu-id="8f67a-376">Nested ASP.NET Master Pages</span></span>](https://msdn.microsoft.com/library/x2b3ktt7.aspx)
- [<span data-ttu-id="8f67a-377">Tipps für geschachtelte Masterseiten und zur Entwurfszeit für Visual Studio 2005</span><span class="sxs-lookup"><span data-stu-id="8f67a-377">Tips for Nested Master Pages and VS 2005 Design-Time</span></span>](https://weblogs.asp.net/scottgu/archive/2005/11/11/430382.aspx)
- [<span data-ttu-id="8f67a-378">Visual Studio 2008 geschachtelt, die Unterstützung der Master-Codepages</span><span class="sxs-lookup"><span data-stu-id="8f67a-378">VS 2008 Nested Master Page Support</span></span>](https://weblogs.asp.net/scottgu/archive/2007/07/09/vs-2008-nested-master-page-support.aspx)

### <a name="about-the-author"></a><span data-ttu-id="8f67a-379">Der Autor</span><span class="sxs-lookup"><span data-stu-id="8f67a-379">About the Author</span></span>

<span data-ttu-id="8f67a-380">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), Autor mehrerer Büchern zu ASP/ASP.NET und Gründer von 4GuysFromRolla.com, arbeitet mit Microsoft-Web-Technologien seit 1998.</span><span class="sxs-lookup"><span data-stu-id="8f67a-380">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="8f67a-381">Er ist als ein unabhängiger Berater, Schulungsleiter und Autor.</span><span class="sxs-lookup"><span data-stu-id="8f67a-381">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="8f67a-382">Sein neuestes Buch heißt [ *Sams Teach selbst ASP.NET 3.5 in 24 Stunden*](https://www.amazon.com/exec/obidos/ASIN/0672329972/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="8f67a-382">His latest book is [*Sams Teach Yourself ASP.NET 3.5 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672329972/4guysfromrollaco).</span></span> <span data-ttu-id="8f67a-383">Scott erreicht werden kann, zur [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com) oder über seinen Blog unter [http://ScottOnWriting.NET](http://scottonwriting.net/).</span><span class="sxs-lookup"><span data-stu-id="8f67a-383">Scott can be reached at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="8f67a-384">Besonderen Dank an</span><span class="sxs-lookup"><span data-stu-id="8f67a-384">Special Thanks To</span></span>

<span data-ttu-id="8f67a-385">Diese tutorialreihe wurde durch viele hilfreiche Reviewer überprüft.</span><span class="sxs-lookup"><span data-stu-id="8f67a-385">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="8f67a-386">Meine zukünftigen MSDN-Artikeln überprüfen möchten?</span><span class="sxs-lookup"><span data-stu-id="8f67a-386">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="8f67a-387">Wenn dies der Fall ist, löschen Sie mir eine Linie an [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="8f67a-387">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="8f67a-388">[Zurück](specifying-the-master-page-programmatically-cs.md)
> [Weiter](creating-a-site-wide-layout-using-master-pages-vb.md)</span><span class="sxs-lookup"><span data-stu-id="8f67a-388">[Previous](specifying-the-master-page-programmatically-cs.md)
[Next](creating-a-site-wide-layout-using-master-pages-vb.md)</span></span>
