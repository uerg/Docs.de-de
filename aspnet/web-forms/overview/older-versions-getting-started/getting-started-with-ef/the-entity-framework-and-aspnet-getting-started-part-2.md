---
uid: web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-2
title: Erste Schritte mit Entity Framework 4.0 Database First und ASP.NET 4 Web Forms - Teil 2 | Microsoft-Dokumentation
author: tdykstra
description: Die Contoso University-Beispielwebanwendung veranschaulicht, wie ASP.NET Web Forms-Anwendungen, die mithilfe von Entity Framework. Die beispielanwendung ist...
ms.author: riande
ms.date: 12/03/2010
ms.assetid: fb63a326-a4ae-4b0c-a4f5-412327197216
msc.legacyurl: /web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-2
msc.type: authoredcontent
ms.openlocfilehash: a0b4acca93deee4fb514fa1bc3e2bd13490cf10e
ms.sourcegitcommit: 45ac74e400f9f2b7dbded66297730f6f14a4eb25
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/16/2018
ms.locfileid: "41828078"
---
<a name="getting-started-with-entity-framework-40-database-first-and-aspnet-4-web-forms---part-2"></a><span data-ttu-id="f399c-104">Erste Schritte mit Entity Framework 4.0 Database First und ASP.NET 4 Web Forms - Teil 2</span><span class="sxs-lookup"><span data-stu-id="f399c-104">Getting Started with Entity Framework 4.0 Database First and ASP.NET 4 Web Forms - Part 2</span></span>
====================
<span data-ttu-id="f399c-105">durch [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="f399c-105">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

> <span data-ttu-id="f399c-106">Die Contoso University-Beispielwebanwendung veranschaulicht, wie ASP.NET Web Forms-Anwendungen, die mit dem Entity Framework 4.0 und Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="f399c-106">The Contoso University sample web application demonstrates how to create ASP.NET Web Forms applications using the Entity Framework 4.0 and Visual Studio 2010.</span></span> <span data-ttu-id="f399c-107">Weitere Informationen zu dieser tutorialreihe finden Sie unter [im ersten Tutorial der Reihe](the-entity-framework-and-aspnet-getting-started-part-1.md)</span><span class="sxs-lookup"><span data-stu-id="f399c-107">For information about the tutorial series, see [the first tutorial in the series](the-entity-framework-and-aspnet-getting-started-part-1.md)</span></span>


## <a name="the-entitydatasource-control"></a><span data-ttu-id="f399c-108">Das EntityDataSource-Steuerelement</span><span class="sxs-lookup"><span data-stu-id="f399c-108">The EntityDataSource Control</span></span>

<span data-ttu-id="f399c-109">Im vorherigen Tutorial haben Sie eine Website, eine Datenbank und einem Datenmodell erstellt.</span><span class="sxs-lookup"><span data-stu-id="f399c-109">In the previous tutorial you created a web site, a database, and a data model.</span></span> <span data-ttu-id="f399c-110">In diesem Tutorial arbeiten Sie mit der `EntityDataSource` -Steuerelement, das ASP.NET bietet, um die Arbeit mit einem Entity Framework-Datenmodell zu vereinfachen.</span><span class="sxs-lookup"><span data-stu-id="f399c-110">In this tutorial you work with the `EntityDataSource` control that ASP.NET provides in order to make it easy to work with an Entity Framework data model.</span></span> <span data-ttu-id="f399c-111">Erstellen Sie eine `GridView` Steuerelement zum Anzeigen und Bearbeiten von Studentendaten für Schüler und, eine `DetailsView` Steuerelement für das Hinzufügen von neuer Schüler/Students, und ein `DropDownList` Steuerelement zum Auswählen einer Abteilung (die Sie später verwenden werden für die Anzeige von zugeordneten Kurse).</span><span class="sxs-lookup"><span data-stu-id="f399c-111">You'll create a `GridView` control for displaying and editing student data, a `DetailsView` control for adding new students, and a `DropDownList` control for selecting a department (which you'll use later for displaying associated courses).</span></span>

<span data-ttu-id="f399c-112">[![Image20](the-entity-framework-and-aspnet-getting-started-part-2/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="f399c-112">[![Image20](the-entity-framework-and-aspnet-getting-started-part-2/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image1.png)</span></span>

<span data-ttu-id="f399c-113">[![Image09](the-entity-framework-and-aspnet-getting-started-part-2/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="f399c-113">[![Image09](the-entity-framework-and-aspnet-getting-started-part-2/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image3.png)</span></span>

<span data-ttu-id="f399c-114">[![Image18](the-entity-framework-and-aspnet-getting-started-part-2/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="f399c-114">[![Image18](the-entity-framework-and-aspnet-getting-started-part-2/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image5.png)</span></span>

<span data-ttu-id="f399c-115">Beachten Sie, dass in dieser Anwendung Sie wird nicht fügen eingabeüberprüfung zu Seiten, die die Datenbank zu aktualisieren, einige der Fehlerbehandlung werden nicht in der so stabil, wie in einer produktionsanwendung benötigt werden.</span><span class="sxs-lookup"><span data-stu-id="f399c-115">Note that in this application you won't be adding input validation to pages that update the database, and some of the error handling will not be as robust as would be required in a production application.</span></span> <span data-ttu-id="f399c-116">Das hält das Lernprogramm konzentriert sich auf Entity Framework und verhindert, dass er zu lang.</span><span class="sxs-lookup"><span data-stu-id="f399c-116">That keeps the tutorial focused on the Entity Framework and keeps it from getting too long.</span></span> <span data-ttu-id="f399c-117">Informationen dazu, wie Sie diese Features zu Ihrer Anwendung hinzufügen, finden Sie unter [Validieren der Benutzereingabe in ASP.NET-Webseiten](https://msdn.microsoft.com/library/7kh55542.aspx) und [Fehlerbehandlung in ASP.NET-Seiten und-Anwendungen](https://msdn.microsoft.com/library/w16865z6.aspx).</span><span class="sxs-lookup"><span data-stu-id="f399c-117">For details about how to add these features to your application, see [Validating User Input in ASP.NET Web Pages](https://msdn.microsoft.com/library/7kh55542.aspx) and [Error Handling in ASP.NET Pages and Applications](https://msdn.microsoft.com/library/w16865z6.aspx).</span></span>

## <a name="adding-and-configuring-the-entitydatasource-control"></a><span data-ttu-id="f399c-118">Hinzufügen und konfigurieren das EntityDataSource-Steuerelement</span><span class="sxs-lookup"><span data-stu-id="f399c-118">Adding and Configuring the EntityDataSource Control</span></span>

<span data-ttu-id="f399c-119">Beginnen Sie mit der Konfiguration einer `EntityDataSource` Steuerelement lesen `Person` Entitäten aus der `People` Entitätenmenge.</span><span class="sxs-lookup"><span data-stu-id="f399c-119">You'll begin by configuring an `EntityDataSource` control to read `Person` entities from the `People` entity set.</span></span>

<span data-ttu-id="f399c-120">Stellen Sie sicher, dass Sie Visual Studio geöffnet haben, und, dass Sie mit dem Projekt arbeiten, ist Sie in Teil 1 erstellt.</span><span class="sxs-lookup"><span data-stu-id="f399c-120">Make sure you have Visual Studio open and that you're working with the project you created in part 1.</span></span> <span data-ttu-id="f399c-121">Wenn Sie seit Sie das Datenmodell erstellt oder seit der letzten Änderung, die Sie an ihr vorgenommenen das Projekt erstellt haben, erstellen Sie jetzt das Projekt.</span><span class="sxs-lookup"><span data-stu-id="f399c-121">If you haven't built the project since you created the data model or since the last change you made to it, build the project now.</span></span> <span data-ttu-id="f399c-122">Änderungen am Datenmodell stehen nicht zur Verfügung in dem Designer, bis das Projekt erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="f399c-122">Changes to the data model are not made available to the designer until the project is built.</span></span>

<span data-ttu-id="f399c-123">Erstellen einer neuen Webseite mit den **Webformular mit Gestaltungsvorlage** Vorlage, und nennen Sie sie *Students.aspx*.</span><span class="sxs-lookup"><span data-stu-id="f399c-123">Create a new web page using the **Web Form using Master Page** template, and name it *Students.aspx*.</span></span>

<span data-ttu-id="f399c-124">[![Image23](the-entity-framework-and-aspnet-getting-started-part-2/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="f399c-124">[![Image23](the-entity-framework-and-aspnet-getting-started-part-2/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image7.png)</span></span>

<span data-ttu-id="f399c-125">Geben Sie *Site.Master* als Masterseite.</span><span class="sxs-lookup"><span data-stu-id="f399c-125">Specify *Site.Master* as the master page.</span></span> <span data-ttu-id="f399c-126">Alle Seiten, die Sie für diese Tutorials erstellen werden diese Masterseite verwenden.</span><span class="sxs-lookup"><span data-stu-id="f399c-126">All of the pages you create for these tutorials will use this master page.</span></span>

<span data-ttu-id="f399c-127">[![image24](the-entity-framework-and-aspnet-getting-started-part-2/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="f399c-127">[![Image24](the-entity-framework-and-aspnet-getting-started-part-2/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image9.png)</span></span>

<span data-ttu-id="f399c-128">In **Quelle** anzeigen, Hinzufügen einer `h2` Spaltenüberschrift, um die `Content` Steuerelement mit dem Namen `Content2`, wie im folgenden Beispiel gezeigt:</span><span class="sxs-lookup"><span data-stu-id="f399c-128">In **Source** view, add an `h2` heading to the `Content` control named `Content2`, as shown in the following example:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample1.aspx)]

<span data-ttu-id="f399c-129">Von der **Daten** Registerkarte die **Toolbox**, ziehen Sie ein `EntityDataSource` auf der Seite zu steuern, legen Sie es unter der Überschrift und ändern Sie die ID, die `StudentsEntityDataSource`:</span><span class="sxs-lookup"><span data-stu-id="f399c-129">From the **Data** tab of the **Toolbox**, drag an `EntityDataSource` control to the page, drop it below the heading, and change the ID to `StudentsEntityDataSource`:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample2.aspx)]

<span data-ttu-id="f399c-130">Wechseln Sie zur **Entwurf** anzuzeigen, klicken Sie auf das Datenquellensteuerelement Smarttag, und klicken Sie dann auf **Konfigurieren von Datenquellen** zum Starten der **Konfigurieren von Datenquellen** Assistenten.</span><span class="sxs-lookup"><span data-stu-id="f399c-130">Switch to **Design** view, click the data source control's smart tag, and then click **Configure Data Source** to launch the **Configure Data Source** wizard.</span></span>

<span data-ttu-id="f399c-131">[![Image01 abgerufen wird](the-entity-framework-and-aspnet-getting-started-part-2/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="f399c-131">[![Image01](the-entity-framework-and-aspnet-getting-started-part-2/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image11.png)</span></span>

<span data-ttu-id="f399c-132">In der **ObjectContext konfigurieren** Assistentenschritt, select **SchoolEntities** als Wert für **Verbindung mit dem Namen**, und wählen Sie **SchoolEntities**als die **DefaultContainerName** Wert.</span><span class="sxs-lookup"><span data-stu-id="f399c-132">In the **Configure ObjectContext** wizard step, select **SchoolEntities** as the value for **Named Connection**, and select **SchoolEntities** as the **DefaultContainerName** value.</span></span> <span data-ttu-id="f399c-133">Klicken Sie dann auf **Weiter**.</span><span class="sxs-lookup"><span data-stu-id="f399c-133">Then click **Next**.</span></span>

<span data-ttu-id="f399c-134">[![Image02](the-entity-framework-and-aspnet-getting-started-part-2/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="f399c-134">[![Image02](the-entity-framework-and-aspnet-getting-started-part-2/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image13.png)</span></span>

<span data-ttu-id="f399c-135">Hinweis: Wenn Sie das folgende Dialogfeld an diesem Punkt erhalten, müssen Sie zum Erstellen des Projekts, bevor Sie fortfahren.</span><span class="sxs-lookup"><span data-stu-id="f399c-135">Note: If you get the following dialog box at this point, you have to build the project before proceeding.</span></span>

<span data-ttu-id="f399c-136">[![image25](the-entity-framework-and-aspnet-getting-started-part-2/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="f399c-136">[![Image25](the-entity-framework-and-aspnet-getting-started-part-2/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image15.png)</span></span>

<span data-ttu-id="f399c-137">In der **Datenauswahl konfigurieren** Schritt select **Personen** als Wert für **EntitySetName**.</span><span class="sxs-lookup"><span data-stu-id="f399c-137">In the **Configure Data Selection** step, select **People** as the value for **EntitySetName**.</span></span> <span data-ttu-id="f399c-138">Unter **wählen**, stellen Sie sicher, dass die **wählen Sie ein** alle Kontrollkästchen aktiviert ist.</span><span class="sxs-lookup"><span data-stu-id="f399c-138">Under **Select**, make sure the **Select A** ll check box is selected.</span></span> <span data-ttu-id="f399c-139">Wählen Sie dann die Optionen zum Aktivieren von aktualisieren und löschen.</span><span class="sxs-lookup"><span data-stu-id="f399c-139">Then select the options to enable update and delete.</span></span> <span data-ttu-id="f399c-140">Wenn Sie fertig sind, klicken Sie auf **Fertig stellen**.</span><span class="sxs-lookup"><span data-stu-id="f399c-140">When you're done, click **Finish**.</span></span>

<span data-ttu-id="f399c-141">[![Image03](the-entity-framework-and-aspnet-getting-started-part-2/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="f399c-141">[![Image03](the-entity-framework-and-aspnet-getting-started-part-2/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image17.png)</span></span>

## <a name="configuring-database-rules-to-allow-deletion"></a><span data-ttu-id="f399c-142">Konfigurieren von Datenbankregeln für zu löschen</span><span class="sxs-lookup"><span data-stu-id="f399c-142">Configuring Database Rules to Allow Deletion</span></span>

<span data-ttu-id="f399c-143">Erstellen Sie eine Seite, die Benutzer löschen von Schülern und Studenten kann die `Person` -Tabelle, die drei Beziehungen mit anderen Tabellen verfügt (`Course`, `StudentGrade`, und `OfficeAssignment`).</span><span class="sxs-lookup"><span data-stu-id="f399c-143">You'll be creating a page that lets users delete students from the `Person` table, which has three relationships with other tables (`Course`, `StudentGrade`, and `OfficeAssignment`).</span></span> <span data-ttu-id="f399c-144">In der Standardeinstellung die Datenbank ist es nicht das Löschen einer Zeile im `Person` Wenn verknüpfte Zeilen in einem der anderen Tabellen vorhanden sind.</span><span class="sxs-lookup"><span data-stu-id="f399c-144">By default, the database will prevent you from deleting a row in `Person` if there are related rows in one of the other tables.</span></span> <span data-ttu-id="f399c-145">Sie können die zugehörigen Zeilen manuell zuerst löschen, oder Sie können die Datenbank so konfigurieren sie automatisch gelöscht, wenn Sie löschen eine `Person` Zeile.</span><span class="sxs-lookup"><span data-stu-id="f399c-145">You can manually delete the related rows first, or you can configure the database to delete them automatically when you delete a `Person` row.</span></span> <span data-ttu-id="f399c-146">Für die Studentendatensätze für Schüler und in diesem Tutorial konfigurieren Sie die Datenbank, um die verwandten Daten automatisch gelöscht.</span><span class="sxs-lookup"><span data-stu-id="f399c-146">For student records in this tutorial, you'll configure the database to delete the related data automatically.</span></span> <span data-ttu-id="f399c-147">Da der Schüler/Studenten Zeilen verknüpft haben, können nur in der `StudentGrade` Tabelle müssen Sie nur eine der drei Beziehungen konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="f399c-147">Because students can have related rows only in the `StudentGrade` table, you need to configure only one of the three relationships.</span></span>

<span data-ttu-id="f399c-148">Bei Verwendung der *School.mdf* Datei, die Sie aus dem Projekt heruntergeladen haben, die in diesem Tutorial geht, können Sie diesen Abschnitt überspringen, da diese Änderungen an der Konfiguration bereits erfolgt sind.</span><span class="sxs-lookup"><span data-stu-id="f399c-148">If you're using the *School.mdf* file that you downloaded from the project that goes with this tutorial, you can skip this section because these configuration changes have already been done.</span></span> <span data-ttu-id="f399c-149">Wenn Sie die Datenbank durch Ausführen eines Skripts erstellt haben, können konfigurieren Sie die Datenbank durch Ausführen der folgenden Prozeduren.</span><span class="sxs-lookup"><span data-stu-id="f399c-149">If you created the database by running a script, configure the database by performing the following procedures.</span></span>

<span data-ttu-id="f399c-150">In **Server-Explorer**, öffnen Sie das Datenbankdiagramm ein, die Sie in Teil 1 erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="f399c-150">In **Server Explorer**, open the database diagram that you created in part 1.</span></span> <span data-ttu-id="f399c-151">Mit der rechten Maustaste in der Beziehung zwischen `Person` und `StudentGrade` (die Zeile, die zwischen Tabellen), und wählen Sie dann **Eigenschaften**.</span><span class="sxs-lookup"><span data-stu-id="f399c-151">Right-click the relationship between `Person` and `StudentGrade` (the line between tables), and then select **Properties**.</span></span>

<span data-ttu-id="f399c-152">[![Image04](the-entity-framework-and-aspnet-getting-started-part-2/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="f399c-152">[![Image04](the-entity-framework-and-aspnet-getting-started-part-2/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image19.png)</span></span>

<span data-ttu-id="f399c-153">In der **Eigenschaften** Fenster erweitern **INSERT- und UPDATE-Spezifikation** und legen Sie die **DeleteRule** Eigenschaft **Cascade**.</span><span class="sxs-lookup"><span data-stu-id="f399c-153">In the **Properties** window, expand **INSERT and UPDATE Specification** and set the **DeleteRule** property to **Cascade**.</span></span>

<span data-ttu-id="f399c-154">[![Image05](the-entity-framework-and-aspnet-getting-started-part-2/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="f399c-154">[![Image05](the-entity-framework-and-aspnet-getting-started-part-2/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image21.png)</span></span>

<span data-ttu-id="f399c-155">Speichern Sie und schließen Sie das Diagramm.</span><span class="sxs-lookup"><span data-stu-id="f399c-155">Save and close the diagram.</span></span> <span data-ttu-id="f399c-156">Wenn Sie aufgefordert werden, ob Sie die Datenbank aktualisieren möchten, klicken Sie auf **Ja**.</span><span class="sxs-lookup"><span data-stu-id="f399c-156">If you're asked whether you want to update the database, click **Yes**.</span></span>

<span data-ttu-id="f399c-157">Um sicherzustellen, dass das Modell Entitäten, die im Arbeitsspeicher, die abgestimmt werden verfolgt, die Datenbank Wozu dient sind, müssen Sie die entsprechende Regeln im Datenmodell festlegen.</span><span class="sxs-lookup"><span data-stu-id="f399c-157">To make sure that the model keeps entities that are in memory in sync with what the database is doing, you must set corresponding rules in the data model.</span></span> <span data-ttu-id="f399c-158">Open *SchoolModel.edmx*, mit der rechten Maustaste der Zuordnungslinie zwischen `Person` und `StudentGrade`, und wählen Sie dann **Eigenschaften**.</span><span class="sxs-lookup"><span data-stu-id="f399c-158">Open *SchoolModel.edmx*, right-click the association line between `Person` and `StudentGrade`, and then select **Properties**.</span></span>

<span data-ttu-id="f399c-159">[![Image21](the-entity-framework-and-aspnet-getting-started-part-2/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="f399c-159">[![Image21](the-entity-framework-and-aspnet-getting-started-part-2/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image23.png)</span></span>

<span data-ttu-id="f399c-160">In der **Eigenschaften** legen **End1 OnDelete** zu **Cascade**.</span><span class="sxs-lookup"><span data-stu-id="f399c-160">In the **Properties** window, set **End1 OnDelete** to **Cascade**.</span></span>

<span data-ttu-id="f399c-161">[![Image22](the-entity-framework-and-aspnet-getting-started-part-2/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="f399c-161">[![Image22](the-entity-framework-and-aspnet-getting-started-part-2/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image25.png)</span></span>

<span data-ttu-id="f399c-162">Speichern und schließen Sie die *SchoolModel.edmx* Datei, und klicken Sie dann das Projekt neu erstellen.</span><span class="sxs-lookup"><span data-stu-id="f399c-162">Save and close the *SchoolModel.edmx* file, and then rebuild the project.</span></span>

<span data-ttu-id="f399c-163">Wenn die Datenbank geändert wird, haben Sie in der Regel mehrere Optionen für das Modell zu synchronisieren:</span><span class="sxs-lookup"><span data-stu-id="f399c-163">In general, when the database changes, you have several choices for how to sync up the model:</span></span>

- <span data-ttu-id="f399c-164">Für bestimmte Arten von Änderungen (z. B. hinzufügen oder Aktualisieren von Tabellen, Sichten oder gespeicherte Prozeduren), mit der rechten Maustaste im Designer, und wählen Sie **Modell aus der Datenbank aktualisieren** damit der Designer stellen die Änderungen automatisch.</span><span class="sxs-lookup"><span data-stu-id="f399c-164">For certain kinds of changes (such as adding or refreshing tables, views, or stored procedures), right-click in the designer and select **Update Model from Database** to have the designer make the changes automatically.</span></span>
- <span data-ttu-id="f399c-165">Generieren Sie das Datenmodell.</span><span class="sxs-lookup"><span data-stu-id="f399c-165">Regenerate the data model.</span></span>
- <span data-ttu-id="f399c-166">Stellen Sie die manuelle Updates dieser Art.</span><span class="sxs-lookup"><span data-stu-id="f399c-166">Make manual updates like this one.</span></span>

<span data-ttu-id="f399c-167">In diesem Fall Sie konnte das Modell generiert haben, oder aktualisiert die Tabellen, die von der Änderung betroffen sind, aber dann müssten Sie die Feldnamen Änderung erneut vorgenommen werden (von `FirstName` zu `FirstMidName`).</span><span class="sxs-lookup"><span data-stu-id="f399c-167">In this case, you could have regenerated the model or refreshed the tables affected by the relationship change, but then you'd have to make the field-name change again (from `FirstName` to `FirstMidName`).</span></span>

## <a name="using-a-gridview-control-to-read-and-update-entities"></a><span data-ttu-id="f399c-168">Verwenden ein GridView-Steuerelement zum Lesen und Aktualisieren von Entitäten</span><span class="sxs-lookup"><span data-stu-id="f399c-168">Using a GridView Control to Read and Update Entities</span></span>

<span data-ttu-id="f399c-169">In diesem Abschnitt verwenden Sie eine `GridView` Steuerelement zum Anzeigen, aktualisieren oder Löschen der Schüler/Studenten.</span><span class="sxs-lookup"><span data-stu-id="f399c-169">In this section you'll use a `GridView` control to display, update, or delete students.</span></span>

<span data-ttu-id="f399c-170">Öffnen oder wechseln Sie zur *Students.aspx* und wechseln Sie zur **Entwurf** anzeigen.</span><span class="sxs-lookup"><span data-stu-id="f399c-170">Open or switch to *Students.aspx* and switch to **Design** view.</span></span> <span data-ttu-id="f399c-171">Von der **Daten** Registerkarte die **Toolbox**, ziehen Sie eine `GridView` Steuerelement rechts neben der `EntityDataSource` steuern, nennen Sie es `StudentsGridView`, klicken Sie auf das Smarttag, und wählen Sie dann  **StudentsEntityDataSource** als Datenquelle.</span><span class="sxs-lookup"><span data-stu-id="f399c-171">From the **Data** tab of the **Toolbox**, drag a `GridView` control to the right of the `EntityDataSource` control, name it `StudentsGridView`, click the smart tag, and then select **StudentsEntityDataSource** as the data source.</span></span>

<span data-ttu-id="f399c-172">[![Image06](the-entity-framework-and-aspnet-getting-started-part-2/_static/image28.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="f399c-172">[![Image06](the-entity-framework-and-aspnet-getting-started-part-2/_static/image28.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image27.png)</span></span>

<span data-ttu-id="f399c-173">Klicken Sie auf **Schema aktualisieren** (klicken Sie auf **Ja** Wenn Sie aufgefordert werden, um zu bestätigen), klicken Sie dann auf **Paging aktivieren**, **Sortieren aktivieren**, **Bearbeitung aktivieren**, und **löschen aktivieren**.</span><span class="sxs-lookup"><span data-stu-id="f399c-173">Click **Refresh Schema** (click **Yes** if you're prompted to confirm), then click **Enable Paging**, **Enable Sorting**, **Enable Editing**, and **Enable Deleting**.</span></span>

<span data-ttu-id="f399c-174">Klicken Sie auf **Spalten bearbeiten**.</span><span class="sxs-lookup"><span data-stu-id="f399c-174">Click **Edit Columns**.</span></span>

<span data-ttu-id="f399c-175">[![Image10](the-entity-framework-and-aspnet-getting-started-part-2/_static/image30.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="f399c-175">[![Image10](the-entity-framework-and-aspnet-getting-started-part-2/_static/image30.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image29.png)</span></span>

<span data-ttu-id="f399c-176">In der **ausgewählte Felder** löschen **PersonID**, **"LastName"**, und **HireDate**.</span><span class="sxs-lookup"><span data-stu-id="f399c-176">In the **Selected fields** box, delete **PersonID**, **LastName**, and **HireDate**.</span></span> <span data-ttu-id="f399c-177">Sie nicht in der Regel eine Datensatzschlüssel für Benutzer anzeigen, Einstellungsdatum ist nicht relevant für Schüler/Studenten und fügen Sie beide Teile des Namens in einem Feld, benötigen Sie nur eines der Namensfelder.)</span><span class="sxs-lookup"><span data-stu-id="f399c-177">You typically don't display a record key to users, hire date is not relevant to students, and you'll put both parts of the name in one field, so you only need one of the name fields.)</span></span>

<span data-ttu-id="f399c-178">[![Image11](the-entity-framework-and-aspnet-getting-started-part-2/_static/image32.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="f399c-178">[![Image11](the-entity-framework-and-aspnet-getting-started-part-2/_static/image32.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image31.png)</span></span>

<span data-ttu-id="f399c-179">Wählen Sie die **"firstmidname"** ein, und klicken Sie dann auf **dieses Feld in ein TemplateField konvertieren**.</span><span class="sxs-lookup"><span data-stu-id="f399c-179">Select the **FirstMidName** field and then click **Convert this field into a TemplateField**.</span></span>

<span data-ttu-id="f399c-180">Gleiches gilt für **EnrollmentDate**.</span><span class="sxs-lookup"><span data-stu-id="f399c-180">Do the same for **EnrollmentDate**.</span></span>

<span data-ttu-id="f399c-181">[![Image13](the-entity-framework-and-aspnet-getting-started-part-2/_static/image34.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image33.png)</span><span class="sxs-lookup"><span data-stu-id="f399c-181">[![Image13](the-entity-framework-and-aspnet-getting-started-part-2/_static/image34.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image33.png)</span></span>

<span data-ttu-id="f399c-182">Klicken Sie auf **OK** und wechseln Sie zur **Quelle** anzeigen.</span><span class="sxs-lookup"><span data-stu-id="f399c-182">Click **OK** and then switch to **Source** view.</span></span> <span data-ttu-id="f399c-183">Die verbleibenden Änderungen werden einfacher, direkt im Markup.</span><span class="sxs-lookup"><span data-stu-id="f399c-183">The remaining changes will be easier to do directly in markup.</span></span> <span data-ttu-id="f399c-184">Die `GridView` Markup sieht wie im folgenden Beispiel zu steuern.</span><span class="sxs-lookup"><span data-stu-id="f399c-184">The `GridView` control markup now looks like the following example.</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample3.aspx)]

<span data-ttu-id="f399c-185">Die erste Spalte nach Befehlsfeld ein Vorlagenfeld, die derzeit ist zeigt den Vornamen an.</span><span class="sxs-lookup"><span data-stu-id="f399c-185">The first column after the command field is a template field that currently displays the first name.</span></span> <span data-ttu-id="f399c-186">Ändern Sie das Markup für dieses Vorlagenfeld wie im folgenden Beispiel aussehen:</span><span class="sxs-lookup"><span data-stu-id="f399c-186">Change the markup for this template field to look like the following example:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample4.aspx)]

<span data-ttu-id="f399c-187">Im Anzeigemodus zwei `Label` Steuerelemente zeigen Sie die erste und letzte Bezeichnung.</span><span class="sxs-lookup"><span data-stu-id="f399c-187">In display mode, two `Label` controls display the first and last name.</span></span> <span data-ttu-id="f399c-188">Im Bearbeitungsmodus befindet werden zwei Textfelder bereitgestellt, damit Sie den ersten und letzten Namen ändern können.</span><span class="sxs-lookup"><span data-stu-id="f399c-188">In edit mode, two text boxes are provided so you can change the first and last name.</span></span> <span data-ttu-id="f399c-189">Wie bei der `Label` Steuerelemente im Anzeigemodus, den Sie verwenden `Bind` und `Eval` Ausdrücke, wie Sie mit ASP.NET Datenquellen-Steuerelemente, die direkt mit Datenbanken verbinden würden.</span><span class="sxs-lookup"><span data-stu-id="f399c-189">As with the `Label` controls in display mode, you use `Bind` and `Eval` expressions exactly as you would with ASP.NET data source controls that connect directly to databases.</span></span> <span data-ttu-id="f399c-190">Der einzige besteht Unterschied darin, dass Sie die Eigenschaften der Entität anstatt Datenbankspalten angegeben sind.</span><span class="sxs-lookup"><span data-stu-id="f399c-190">The only difference is that you're specifying entity properties instead of database columns.</span></span>

<span data-ttu-id="f399c-191">Die letzte Spalte ist eine Vorlagenfeld, das die Anmeldedatum zeigt.</span><span class="sxs-lookup"><span data-stu-id="f399c-191">The last column is a template field that displays the enrollment date.</span></span> <span data-ttu-id="f399c-192">Ändern Sie das Markup für dieses Feld, wie im folgenden Beispiel aussehen:</span><span class="sxs-lookup"><span data-stu-id="f399c-192">Change the markup for this field to look like the following example:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample5.aspx)]

<span data-ttu-id="f399c-193">In beiden anzuzeigen, und in den Bearbeitungsmodus die Formatzeichenfolge "{0, d}" führt dazu, dass das Datum im Format "kurzes Datum" angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="f399c-193">In both display and edit mode, the format string "{0,d}" causes the date to be displayed in the "short date" format.</span></span> <span data-ttu-id="f399c-194">(Ihren Computer möglicherweise konfiguriert werden, um dieses Format anders als die Bilder in diesem Tutorial gezeigt anzuzeigen.)</span><span class="sxs-lookup"><span data-stu-id="f399c-194">(Your computer might be configured to display this format differently from the screen images shown in this tutorial.)</span></span>

<span data-ttu-id="f399c-195">Beachten Sie, dass in jedem dieser Felder für die Vorlage, die der Designer verwendet eine `Bind` Ausdruck, durch die standardmäßige, aber Sie geändert haben, um eine `Eval` Ausdruck in der `ItemTemplate` Elemente.</span><span class="sxs-lookup"><span data-stu-id="f399c-195">Notice that in each of these template fields, the designer used a `Bind` expression by default, but you've changed that to an `Eval` expression in the `ItemTemplate` elements.</span></span> <span data-ttu-id="f399c-196">Die `Bind` Ausdruck werden die Daten in verfügbar `GridView` Steuerelementeigenschaften, falls Sie auf die Daten im Code zugreifen müssen.</span><span class="sxs-lookup"><span data-stu-id="f399c-196">The `Bind` expression makes the data available in `GridView` control properties in case you need to access the data in code.</span></span> <span data-ttu-id="f399c-197">Auf dieser Seite, die Sie auf diese Daten im Code, damit Sie verwenden können, müssen keine `Eval`, dies ist effizienter.</span><span class="sxs-lookup"><span data-stu-id="f399c-197">In this page you don't need to access this data in code, so you can use `Eval`, which is more efficient.</span></span> <span data-ttu-id="f399c-198">Weitere Informationen finden Sie unter [Abrufen Ihrer Daten aus den Datensteuerelementen](https://weblogs.asp.net/davidfowler/archive/2008/12/12/getting-your-data-out-of-the-data-controls.aspx).</span><span class="sxs-lookup"><span data-stu-id="f399c-198">For more information, see [Getting your data out of the data controls](https://weblogs.asp.net/davidfowler/archive/2008/12/12/getting-your-data-out-of-the-data-controls.aspx).</span></span>

## <a name="revising-entitydatasource-control-markup-to-improve-performance"></a><span data-ttu-id="f399c-199">Überarbeiten EntityDataSource-Steuerelement-Markup zur Verbesserung der Leistung</span><span class="sxs-lookup"><span data-stu-id="f399c-199">Revising EntityDataSource Control Markup to Improve Performance</span></span>

<span data-ttu-id="f399c-200">Im Markup für die `EntityDataSource` steuern, entfernen Sie die `ConnectionString` und `DefaultContainerName` Attribute aus, und Ersetzen Sie sie durch eine `ContextTypeName="ContosoUniversity.DAL.SchoolEntities"` Attribut.</span><span class="sxs-lookup"><span data-stu-id="f399c-200">In the markup for the `EntityDataSource` control, remove the `ConnectionString` and `DefaultContainerName` attributes and replace them with a `ContextTypeName="ContosoUniversity.DAL.SchoolEntities"` attribute.</span></span> <span data-ttu-id="f399c-201">Dies ist eine Änderung, Sie stellen jedes Mal, wenn Sie erstellen, eine `EntityDataSource` zu steuern, es sei denn, Sie müssen eine Verbindung zu verwenden, die sich von dem unterscheidet, die in der Objektkontextklasse hartcodiert ist.</span><span class="sxs-lookup"><span data-stu-id="f399c-201">This is a change you should make every time you create an `EntityDataSource` control, unless you need to use a connection that is different from the one that's hard-coded in the object context class.</span></span> <span data-ttu-id="f399c-202">Mithilfe der `ContextTypeName` Attribut bietet die folgenden Vorteile:</span><span class="sxs-lookup"><span data-stu-id="f399c-202">Using the `ContextTypeName` attribute provides the following benefits:</span></span>

- <span data-ttu-id="f399c-203">Bessere Leistung.</span><span class="sxs-lookup"><span data-stu-id="f399c-203">Better performance.</span></span> <span data-ttu-id="f399c-204">Wenn die `EntityDataSource` Steuerelement initialisiert, das Modell mithilfe der `ConnectionString` und `DefaultContainerName` Attribute, es werden zusätzliche Aufgaben zum Laden von Metadaten für jede Anforderung ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="f399c-204">When the `EntityDataSource` control initializes the data model using the `ConnectionString` and `DefaultContainerName` attributes, it performs additional work to load metadata on every request.</span></span> <span data-ttu-id="f399c-205">Dies ist nicht erforderlich, wenn Sie angeben, die `ContextTypeName` Attribut.</span><span class="sxs-lookup"><span data-stu-id="f399c-205">This isn't necessary if you specify the `ContextTypeName` attribute.</span></span>
- <span data-ttu-id="f399c-206">Lazy Loading ist standardmäßig aktiviert, in der generierten Objektkontextklassen (z. B. `SchoolEntities` in diesem Tutorial) im Entity Framework 4.0.</span><span class="sxs-lookup"><span data-stu-id="f399c-206">Lazy loading is turned on by default in generated object context classes (such as `SchoolEntities` in this tutorial) in Entity Framework 4.0.</span></span> <span data-ttu-id="f399c-207">Dies bedeutet, dass Navigationseigenschaften mit verbundenen Daten automatisch geladen werden bei Bedarf.</span><span class="sxs-lookup"><span data-stu-id="f399c-207">This means that navigation properties are loaded with related data automatically right when you need it.</span></span> <span data-ttu-id="f399c-208">Lazy Loading wird später in diesem Lernprogramm ausführlicher erläutert.</span><span class="sxs-lookup"><span data-stu-id="f399c-208">Lazy loading is explained in more detail later in this tutorial.</span></span>
- <span data-ttu-id="f399c-209">Alle Anpassungen, die Sie auf die Objektkontextklasse angewendet haben (in diesem Fall die `SchoolEntities` Klasse) stehen für Steuerelemente, mit denen die `EntityDataSource` Steuerelement.</span><span class="sxs-lookup"><span data-stu-id="f399c-209">Any customizations that you've applied to the object context class (in this case, the `SchoolEntities` class) will be available to controls that use the `EntityDataSource` control.</span></span> <span data-ttu-id="f399c-210">Anpassen der Objektkontextklasse ist ein Thema für fortgeschrittene, die in diesem Tutorial nicht behandelt wird.</span><span class="sxs-lookup"><span data-stu-id="f399c-210">Customizing the object context class is an advanced topic that is not covered in this tutorial series.</span></span> <span data-ttu-id="f399c-211">Weitere Informationen finden Sie unter [Erweitern von Entity Framework generierten Typen](https://msdn.microsoft.com/library/dd456844.aspx).</span><span class="sxs-lookup"><span data-stu-id="f399c-211">For more information, see [Extending Entity Framework Generated Types](https://msdn.microsoft.com/library/dd456844.aspx).</span></span>

<span data-ttu-id="f399c-212">Das Markup wird nun im folgende Beispiel aussehen (die Reihenfolge der Eigenschaften möglicherweise unterschiedliche):</span><span class="sxs-lookup"><span data-stu-id="f399c-212">The markup will now resemble the following example (the order of the properties might be different):</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample6.aspx)]

<span data-ttu-id="f399c-213">Die `EnableFlattening` -Attribut verweist auf eine Funktion, die in früheren Versionen von Entity Framework benötigt wurde, da die foreign Key-Spalten nicht als Entitätseigenschaften verfügbar gemacht wurden.</span><span class="sxs-lookup"><span data-stu-id="f399c-213">The `EnableFlattening` attribute refers to a feature that was needed in earlier versions of the Entity Framework because foreign key columns were not exposed as entity properties.</span></span> <span data-ttu-id="f399c-214">Die aktuelle Version ist es möglich, *fremdschlüsselzuordnungen*, was bedeutet, dass Fremdschlüsseleigenschaften werden verfügbar gemacht werden, für alle außer m: n-Zuordnungen.</span><span class="sxs-lookup"><span data-stu-id="f399c-214">The current version makes it possible to use *foreign key associations*, which means foreign key properties are exposed for all but many-to-many associations.</span></span> <span data-ttu-id="f399c-215">Wenn Ihre Entitäten Fremdschlüsseleigenschaften und keine [komplexe Typen](https://msdn.microsoft.com/library/bb738472.aspx), lassen Sie dieses Attribut auf `False`.</span><span class="sxs-lookup"><span data-stu-id="f399c-215">If your entities have foreign key properties and no [complex types](https://msdn.microsoft.com/library/bb738472.aspx), you can leave this attribute set to `False`.</span></span> <span data-ttu-id="f399c-216">Das Attribut nicht aus dem Markup, entfernt werden, da der Standardwert ist `True`.</span><span class="sxs-lookup"><span data-stu-id="f399c-216">Don't remove the attribute from the markup, because the default value is `True`.</span></span> <span data-ttu-id="f399c-217">Weitere Informationen finden Sie unter [vereinfachen Objekte (EntityDataSource)](https://msdn.microsoft.com/library/ee404746.aspx).</span><span class="sxs-lookup"><span data-stu-id="f399c-217">For more information, see [Flattening Objects (EntityDataSource)](https://msdn.microsoft.com/library/ee404746.aspx).</span></span>

<span data-ttu-id="f399c-218">Führen Sie die Seite, und Sie sehen eine Liste der Studierenden und Mitarbeiter (Sie werden für nur Schüler und Studenten im nächsten Tutorial Filtern).</span><span class="sxs-lookup"><span data-stu-id="f399c-218">Run the page and you see a list of students and employees (you'll filter for just students in the next tutorial).</span></span> <span data-ttu-id="f399c-219">Der Vorname und Nachname werden zusammen angezeigt.</span><span class="sxs-lookup"><span data-stu-id="f399c-219">The first name and last name are displayed together.</span></span>

<span data-ttu-id="f399c-220">[![Image07](the-entity-framework-and-aspnet-getting-started-part-2/_static/image36.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="f399c-220">[![Image07](the-entity-framework-and-aspnet-getting-started-part-2/_static/image36.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image35.png)</span></span>

<span data-ttu-id="f399c-221">Um die Anzeige zu sortieren, klicken Sie auf einen Spaltennamen an.</span><span class="sxs-lookup"><span data-stu-id="f399c-221">To sort the display, click a column name.</span></span>

<span data-ttu-id="f399c-222">Klicken Sie auf **bearbeiten** in einer Zeile.</span><span class="sxs-lookup"><span data-stu-id="f399c-222">Click **Edit** in any row.</span></span> <span data-ttu-id="f399c-223">Textfelder werden angezeigt, in dem Sie den ersten und letzten Namen ändern können.</span><span class="sxs-lookup"><span data-stu-id="f399c-223">Text boxes are displayed where you can change the first and last name.</span></span>

<span data-ttu-id="f399c-224">[![Image08](the-entity-framework-and-aspnet-getting-started-part-2/_static/image38.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="f399c-224">[![Image08](the-entity-framework-and-aspnet-getting-started-part-2/_static/image38.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image37.png)</span></span>

<span data-ttu-id="f399c-225">Die **löschen** Schaltfläche auch funktioniert.</span><span class="sxs-lookup"><span data-stu-id="f399c-225">The **Delete** button also works.</span></span> <span data-ttu-id="f399c-226">Klicken Sie auf "löschen", um eine Zeile mit einer Registrierungsdatum und die Zeile nicht mehr angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="f399c-226">Click delete for a row that has an enrollment date and the row disappears.</span></span> <span data-ttu-id="f399c-227">(Zeilen ohne Registrierungsdatum darstellen, Dozenten und erhalten Sie möglicherweise einen Fehler der referenziellen Integrität.</span><span class="sxs-lookup"><span data-stu-id="f399c-227">(Rows without an enrollment date represent instructors and you may get a referential integrity error.</span></span> <span data-ttu-id="f399c-228">Im nächsten Tutorial müssen Sie diese Liste, um nur Schüler und Studenten einzubeziehen filtern.)</span><span class="sxs-lookup"><span data-stu-id="f399c-228">In the next tutorial you'll filter this list to include just students.)</span></span>

## <a name="displaying-data-from-a-navigation-property"></a><span data-ttu-id="f399c-229">Anzeigen von Daten von einer Navigationseigenschaft</span><span class="sxs-lookup"><span data-stu-id="f399c-229">Displaying Data from a Navigation Property</span></span>

<span data-ttu-id="f399c-230">Jetzt wird angenommen, Sie möchten wissen, wie viele Kurse jeder Schüler/Student bei registriert.</span><span class="sxs-lookup"><span data-stu-id="f399c-230">Now suppose you want to know how many courses each student is enrolled in.</span></span> <span data-ttu-id="f399c-231">Das Entity Framework enthält diese Informationen in den `StudentGrades` Navigationseigenschaft der `Person` Entität.</span><span class="sxs-lookup"><span data-stu-id="f399c-231">The Entity Framework provides that information in the `StudentGrades` navigation property of the `Person` entity.</span></span> <span data-ttu-id="f399c-232">Da ein Schüler/Student einen Kurs registriert werden, ohne dass eine Grade-Eigenschaft zugewiesen von Entwurf der Datenbank nicht möglich ist, für dieses Tutorial können Sie davon ausgehen, dass durch eine Zeile der `StudentGrade` Tabellenzeile, die mit einem Kurs zugewiesen ist entspricht, das in diesem Kurs registriert.</span><span class="sxs-lookup"><span data-stu-id="f399c-232">Because the database design does not allow a student to be enrolled in a course without having a grade assigned, for this tutorial you can assume that having a row in the `StudentGrade` table row that is associated with a course is the same as being enrolled in the course.</span></span> <span data-ttu-id="f399c-233">(Die `Courses` Navigationseigenschaft ist nur für Dozenten.)</span><span class="sxs-lookup"><span data-stu-id="f399c-233">(The `Courses` navigation property is only for instructors.)</span></span>

<span data-ttu-id="f399c-234">Bei Verwendung der `ContextTypeName` Attribut der `EntityDataSource` -Steuerelement, das Entity Framework automatisch Ruft Informationen für eine Navigationseigenschaft beim Zugriff auf diese Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="f399c-234">When you use the `ContextTypeName` attribute of the `EntityDataSource` control, the Entity Framework automatically retrieves information for a navigation property when you access that property.</span></span> <span data-ttu-id="f399c-235">Dies wird als bezeichnet *Lazy Load*.</span><span class="sxs-lookup"><span data-stu-id="f399c-235">This is called *lazy loading*.</span></span> <span data-ttu-id="f399c-236">Dies kann jedoch ineffizient sein, da es einen separaten Aufruf von der Datenbank führt, die jedes Mal zusätzliche Informationen benötigt werden.</span><span class="sxs-lookup"><span data-stu-id="f399c-236">However, this can be inefficient, because it results in a separate call to the database each time additional information is needed.</span></span> <span data-ttu-id="f399c-237">Wenn Sie Daten aus der Navigationseigenschaft für jede zurückgegebene Entität benötigen die `EntityDataSource` -Steuerelement, ist es effizienter sein, um die verknüpften Daten zusammen mit der Entität selbst in einem einzigen Aufruf in der Datenbank abzurufen.</span><span class="sxs-lookup"><span data-stu-id="f399c-237">If you need data from the navigation property for every entity returned by the `EntityDataSource` control, it's more efficient to retrieve the related data along with the entity itself in a single call to the database.</span></span> <span data-ttu-id="f399c-238">Dies wird als bezeichnet *Eager Load*, und geben Sie eager Loading für eine Navigationseigenschaft, durch Festlegen der `Include` Eigenschaft der `EntityDataSource` Steuerelement.</span><span class="sxs-lookup"><span data-stu-id="f399c-238">This is called *eager loading*, and you specify eager loading for a navigation property by setting the `Include` property of the `EntityDataSource` control.</span></span>

<span data-ttu-id="f399c-239">In *Students.aspx*, die Anzahl der Kurse für alle Schüler/Studenten angezeigt werden sollen, also eager Loading ist die beste Wahl.</span><span class="sxs-lookup"><span data-stu-id="f399c-239">In *Students.aspx*, you want to show the number of courses for every student, so eager loading is the best choice.</span></span> <span data-ttu-id="f399c-240">Wenn Sie alle Schüler/Studenten anzeigen, aber mit der Anzahl der Kurse wurden kann nur für einige davon (die Schreiben von Code neben dem Markup erfordern würden), Lazy Load eine bessere Wahl sein.</span><span class="sxs-lookup"><span data-stu-id="f399c-240">If you were displaying all students but showing the number of courses only for a few of them (which would require writing some code in addition to the markup), lazy loading might be a better choice.</span></span>

<span data-ttu-id="f399c-241">Öffnen, oder wechseln Sie zur *Students.aspx*, wechseln Sie zur **Entwurf** Ansicht `StudentsEntityDataSource`, und klicken Sie in der **Eigenschaften** legen die **Include**Eigenschaft **StudentGrades**.</span><span class="sxs-lookup"><span data-stu-id="f399c-241">Open or switch to *Students.aspx*, switch to **Design** view, select `StudentsEntityDataSource`, and in the **Properties** window set the **Include** property to **StudentGrades**.</span></span> <span data-ttu-id="f399c-242">(Wenn Sie mehrere Navigationseigenschaften abrufen möchten, geben Sie Namen durch Kommas getrennt, z. B. **StudentGrades, Kursen**.)</span><span class="sxs-lookup"><span data-stu-id="f399c-242">(If you wanted to get multiple navigation properties, you could specify their names separated by commas — for example, **StudentGrades, Courses**.)</span></span>

<span data-ttu-id="f399c-243">[![Image19](the-entity-framework-and-aspnet-getting-started-part-2/_static/image40.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image39.png)</span><span class="sxs-lookup"><span data-stu-id="f399c-243">[![Image19](the-entity-framework-and-aspnet-getting-started-part-2/_static/image40.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image39.png)</span></span>

<span data-ttu-id="f399c-244">Wechseln Sie zur **Quelle** anzeigen.</span><span class="sxs-lookup"><span data-stu-id="f399c-244">Switch to **Source** view.</span></span> <span data-ttu-id="f399c-245">In der `StudentsGridView` -Steuerelement, nach dem letzten `asp:TemplateField` -Element, das folgende neue Vorlagenfeld hinzufügen:</span><span class="sxs-lookup"><span data-stu-id="f399c-245">In the `StudentsGridView` control, after the last `asp:TemplateField` element, add the following new template field:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample7.aspx)]

<span data-ttu-id="f399c-246">In der `Eval` Ausdruck können Sie die Navigationseigenschaft verweisen `StudentGrades`.</span><span class="sxs-lookup"><span data-stu-id="f399c-246">In the `Eval` expression, you can reference the navigation property `StudentGrades`.</span></span> <span data-ttu-id="f399c-247">Da diese Eigenschaft eine Auflistung enthält, hat eine `Count` -Eigenschaft, die Sie verwenden können, um die Anzahl der Kurse anzuzeigen, in dem der Student, der registriert wird.</span><span class="sxs-lookup"><span data-stu-id="f399c-247">Because this property contains a collection, it has a `Count` property that you can use to display the number of courses in which the student is enrolled.</span></span> <span data-ttu-id="f399c-248">In einem späteren Tutorial sehen Sie, wie Sie zum Anzeigen von Daten von Navigationseigenschaften, die einzelne Entitäten anstelle von Sammlungen enthalten.</span><span class="sxs-lookup"><span data-stu-id="f399c-248">In a later tutorial you'll see how to display data from navigation properties that contain single entities instead of collections.</span></span> <span data-ttu-id="f399c-249">(Beachten Sie, dass Sie können nicht `BoundField` Elemente zum Anzeigen von Daten von Navigationseigenschaften.)</span><span class="sxs-lookup"><span data-stu-id="f399c-249">(Note that you cannot use `BoundField` elements to display data from navigation properties.)</span></span>

<span data-ttu-id="f399c-250">Führen Sie die Seite, und Sie jetzt sehen, wie viele Kurse für Schüler und Studenten registriert ist.</span><span class="sxs-lookup"><span data-stu-id="f399c-250">Run the page and you now see how many courses each student is enrolled in.</span></span>

<span data-ttu-id="f399c-251">[![Image20](the-entity-framework-and-aspnet-getting-started-part-2/_static/image42.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image41.png)</span><span class="sxs-lookup"><span data-stu-id="f399c-251">[![Image20](the-entity-framework-and-aspnet-getting-started-part-2/_static/image42.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image41.png)</span></span>

## <a name="using-a-detailsview-control-to-insert-entities"></a><span data-ttu-id="f399c-252">Verwenden von einem DetailsView-Steuerelement zum Einfügen von Entitäten</span><span class="sxs-lookup"><span data-stu-id="f399c-252">Using a DetailsView Control to Insert Entities</span></span>

<span data-ttu-id="f399c-253">Der nächste Schritt ist die Erstellung eine Seite, die eine `DetailsView` Steuerelement, mit denen Sie die neue Studenten hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="f399c-253">The next step is to create a page that has a `DetailsView` control that will let you add new students.</span></span> <span data-ttu-id="f399c-254">Schließen Sie den Browser, und klicken Sie dann erstellen Sie eine neue Webseite mit den *Site.Master* Masterseite.</span><span class="sxs-lookup"><span data-stu-id="f399c-254">Close the browser and then create a new web page using the *Site.Master* master page.</span></span> <span data-ttu-id="f399c-255">Nennen Sie die Seite *StudentsAdd.aspx*, und wechseln Sie zur **Quelle** anzeigen.</span><span class="sxs-lookup"><span data-stu-id="f399c-255">Name the page *StudentsAdd.aspx*, and then switch to **Source** view.</span></span>

<span data-ttu-id="f399c-256">Fügen Sie das folgende Markup zum Ersetzen Sie des vorhandenen Markups für die `Content` Steuerelement mit dem Namen `Content2`:</span><span class="sxs-lookup"><span data-stu-id="f399c-256">Add the following markup to replace the existing markup for the `Content` control named `Content2`:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample8.aspx)]

<span data-ttu-id="f399c-257">Dieses Markup erstellt eine `EntityDataSource` Steuerelement, das ähnlich dem im erstellten *Students.aspx*, es sei denn sie einfügen kann.</span><span class="sxs-lookup"><span data-stu-id="f399c-257">This markup creates an `EntityDataSource` control that is similar to the one you created in *Students.aspx*, except it enables insertion.</span></span> <span data-ttu-id="f399c-258">Wie bei der `GridView` zu steuern, die gebundene Felder der `DetailsView` Steuerelement codiert werden, genau wie bei der für ein Steuerelement, das direkt mit einer Datenbank, verbunden mit dem Unterschied, dass sie die Eigenschaften der Entität verweisen.</span><span class="sxs-lookup"><span data-stu-id="f399c-258">As with the `GridView` control, the bound fields of the `DetailsView` control are coded exactly as they would be for a data control that connects directly to a database, except that they reference entity properties.</span></span> <span data-ttu-id="f399c-259">In diesem Fall die `DetailsView` Steuerelement wird verwendet, nur für das Einfügen von Zeilen, aus, damit Sie den Standardmodus, um eingerichtet haben `Insert`.</span><span class="sxs-lookup"><span data-stu-id="f399c-259">In this case, the `DetailsView` control is used only for inserting rows, so you have set the default mode to `Insert`.</span></span>

<span data-ttu-id="f399c-260">Führen Sie die Seite, und fügen Sie einen neuen Studenten hinzu.</span><span class="sxs-lookup"><span data-stu-id="f399c-260">Run the page and add a new student.</span></span>

<span data-ttu-id="f399c-261">[![Image09](the-entity-framework-and-aspnet-getting-started-part-2/_static/image44.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image43.png)</span><span class="sxs-lookup"><span data-stu-id="f399c-261">[![Image09](the-entity-framework-and-aspnet-getting-started-part-2/_static/image44.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image43.png)</span></span>

<span data-ttu-id="f399c-262">"Nothing" erfolgt, nachdem Sie einen neuen Studenten eingefügt, aber wenn Sie jetzt ausführen *Students.aspx*, sehen Sie die Informationen des neuen für Schüler und Studenten.</span><span class="sxs-lookup"><span data-stu-id="f399c-262">Nothing will happen after you insert a new student, but if you now run *Students.aspx*, you'll see the new student information.</span></span>

## <a name="displaying-data-in-a-drop-down-list"></a><span data-ttu-id="f399c-263">Anzeigen von Daten in einem Dropdown-Liste</span><span class="sxs-lookup"><span data-stu-id="f399c-263">Displaying Data in a Drop-Down List</span></span>

<span data-ttu-id="f399c-264">In den folgenden Schritten müssen Sie die Databind eine `DropDownList` Steuerelement eine Entitätenmenge, die mit einem `EntityDataSource` Steuerelement.</span><span class="sxs-lookup"><span data-stu-id="f399c-264">In the following steps you'll databind a `DropDownList` control to an entity set using an `EntityDataSource` control.</span></span> <span data-ttu-id="f399c-265">In diesem Teil des Tutorials nicht Sie viel mit dieser Liste.</span><span class="sxs-lookup"><span data-stu-id="f399c-265">In this part of the tutorial, you won't do much with this list.</span></span> <span data-ttu-id="f399c-266">Im weiteren Verlauf werden Sie die Liste jedoch verwenden, können Benutzer die Auswahl einer Abteilung zum Anzeigen der Kurse, die die Abteilung zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="f399c-266">In subsequent parts, though, you'll use the list to let users select a department to display courses associated with the department.</span></span>

<span data-ttu-id="f399c-267">Erstellen einer neuen Webseite mit dem Namen *Courses.aspx*.</span><span class="sxs-lookup"><span data-stu-id="f399c-267">Create a new web page named *Courses.aspx*.</span></span> <span data-ttu-id="f399c-268">In **Quelle** anzuzeigen, fügen Sie eine Spaltenüberschrift, um die `Content` Steuerelement mit dem Namen `Content2`:</span><span class="sxs-lookup"><span data-stu-id="f399c-268">In **Source** view, add a heading to the `Content` control that's named `Content2`:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample9.aspx)]

<span data-ttu-id="f399c-269">In **Entwurf** anzeigen, Hinzufügen einer `EntityDataSource` Steuerelement auf der Seite wie zuvor, außer dass diesmal fußballfanartikel `DepartmentsEntityDataSource`.</span><span class="sxs-lookup"><span data-stu-id="f399c-269">In **Design** view, add an `EntityDataSource` control to the page as you did before, except this time name it `DepartmentsEntityDataSource`.</span></span> <span data-ttu-id="f399c-270">Wählen Sie **Abteilungen** als die **EntitySetName** Wert ein, und wählen Sie nur die **"DepartmentID"** und **Namen** Eigenschaften.</span><span class="sxs-lookup"><span data-stu-id="f399c-270">Select **Departments** as the **EntitySetName** value, and select only the **DepartmentID** and **Name** properties.</span></span>

<span data-ttu-id="f399c-271">[![Image15](the-entity-framework-and-aspnet-getting-started-part-2/_static/image46.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image45.png)</span><span class="sxs-lookup"><span data-stu-id="f399c-271">[![Image15](the-entity-framework-and-aspnet-getting-started-part-2/_static/image46.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image45.png)</span></span>

<span data-ttu-id="f399c-272">Aus der **Standard** Registerkarte die **Toolbox**, ziehen Sie eine `DropDownList` die Steuerung an die Seite, nennen Sie es `DepartmentsDropDownList`, klicken Sie auf das Smarttag, und wählen **Datenquelle auswählen** auf Starten Sie den **DataSource-Konfigurations-Assistenten**.</span><span class="sxs-lookup"><span data-stu-id="f399c-272">From the **Standard** tab of the **Toolbox**, drag a `DropDownList` control to the page, name it `DepartmentsDropDownList`, click the smart tag, and select **Choose Data Source** to start the **DataSource Configuration Wizard**.</span></span>

<span data-ttu-id="f399c-273">[![Image16](the-entity-framework-and-aspnet-getting-started-part-2/_static/image48.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image47.png)</span><span class="sxs-lookup"><span data-stu-id="f399c-273">[![Image16](the-entity-framework-and-aspnet-getting-started-part-2/_static/image48.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image47.png)</span></span>

<span data-ttu-id="f399c-274">In der **Auswählen einer Datenquelle** Schritt select **DepartmentsEntityDataSource** als Datenquelle, klicken Sie auf **Schema aktualisieren**, und wählen Sie dann **Namen** wie das Datenfeld angezeigt und **"DepartmentID"** als Datenfeld Wert.</span><span class="sxs-lookup"><span data-stu-id="f399c-274">In the **Choose a Data Source** step, select **DepartmentsEntityDataSource** as the data source, click **Refresh Schema**, and then select **Name** as the data field to display and **DepartmentID** as the value data field.</span></span> <span data-ttu-id="f399c-275">Klicken Sie auf **OK**.</span><span class="sxs-lookup"><span data-stu-id="f399c-275">Click **OK**.</span></span>

<span data-ttu-id="f399c-276">[![Image17](the-entity-framework-and-aspnet-getting-started-part-2/_static/image50.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image49.png)</span><span class="sxs-lookup"><span data-stu-id="f399c-276">[![Image17](the-entity-framework-and-aspnet-getting-started-part-2/_static/image50.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image49.png)</span></span>

<span data-ttu-id="f399c-277">Die Methode man das Steuerelement mit dem Entity Framework entspricht derjenigen mit anderen ASP.NET-Daten Datenquellen-Steuerelemente, außer dass Sie Entitäten und Eigenschaften der Entität angeben.</span><span class="sxs-lookup"><span data-stu-id="f399c-277">The method you use to databind the control using the Entity Framework is the same as with other ASP.NET data source controls except you're specifying entities and entity properties.</span></span>

<span data-ttu-id="f399c-278">Wechseln Sie zur **Quelle** anzeigen und hinzufügen "Wählen Sie einen Fachbereich:" direkt vor der `DropDownList` Steuerelement.</span><span class="sxs-lookup"><span data-stu-id="f399c-278">Switch to **Source** view and add "Select a department:" immediately before the `DropDownList` control.</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample10.aspx)]

<span data-ttu-id="f399c-279">Zur Erinnerung: Ändern Sie das Markup für die `EntityDataSource` Steuerelement an diesem Punkt durch Ersetzen der `ConnectionString` und `DefaultContainerName` Attribute mit einem `ContextTypeName="ContosoUniversity.DAL.SchoolEntities"` Attribut.</span><span class="sxs-lookup"><span data-stu-id="f399c-279">As a reminder, change the markup for the `EntityDataSource` control at this point by replacing the `ConnectionString` and `DefaultContainerName` attributes with a `ContextTypeName="ContosoUniversity.DAL.SchoolEntities"` attribute.</span></span> <span data-ttu-id="f399c-280">Es ist oft sinnvoll, zu warten, bis Sie die vom datengebundenen Steuerelement erstellt haben, die mit den Datenquellen-Steuerelement verknüpft ist, bevor Sie ändern die `EntityDataSource` Markup zu steuern, da nach dem vornehmen der Änderung der Designer keine Ihnen wird ein **aktualisieren Schema** Option im datengebundenen Steuerelement.</span><span class="sxs-lookup"><span data-stu-id="f399c-280">It's often best to wait until after you've created the data-bound control that is linked to the data source control before you change the `EntityDataSource` control markup, because after you make the change, the designer will not provide you with a **Refresh Schema** option in the data-bound control.</span></span>

<span data-ttu-id="f399c-281">Führen Sie die Seite, und Sie können eine Abteilung auswählen, aus der Dropdown-Liste.</span><span class="sxs-lookup"><span data-stu-id="f399c-281">Run the page and you can select a department from the drop-down list.</span></span>

<span data-ttu-id="f399c-282">[![Image18](the-entity-framework-and-aspnet-getting-started-part-2/_static/image52.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image51.png)</span><span class="sxs-lookup"><span data-stu-id="f399c-282">[![Image18](the-entity-framework-and-aspnet-getting-started-part-2/_static/image52.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image51.png)</span></span>

<span data-ttu-id="f399c-283">Dies schließt die Einführung in die Verwendung der `EntityDataSource` Steuerelement.</span><span class="sxs-lookup"><span data-stu-id="f399c-283">This completes the introduction to using the `EntityDataSource` control.</span></span> <span data-ttu-id="f399c-284">Arbeiten mit diesem Steuerelement unterscheidet sich in der Regel nicht von der Arbeit mit anderen ASP.NET-Daten-Datenquellen-Steuerelemente, mit dem Unterschied, dass Sie Entitäten und Eigenschaften anstelle von Tabellen und Spalten verweisen.</span><span class="sxs-lookup"><span data-stu-id="f399c-284">Working with this control is generally no different from working with other ASP.NET data source controls, except that you reference entities and properties instead of tables and columns.</span></span> <span data-ttu-id="f399c-285">Die einzige Ausnahme ist, wenn Sie Navigationseigenschaften zugreifen möchten.</span><span class="sxs-lookup"><span data-stu-id="f399c-285">The only exception is when you want to access navigation properties.</span></span> <span data-ttu-id="f399c-286">Im nächsten Tutorial sehen Sie, dass Sie die Syntax mit verwenden `EntityDataSource` Steuerelement möglicherweise auch unterscheiden sich von anderen Datenquellen-Steuerelemente, wenn Sie filtern, gruppieren und Sortieren von Daten.</span><span class="sxs-lookup"><span data-stu-id="f399c-286">In the next tutorial you'll see that the syntax you use with `EntityDataSource` control might also differ from other data source controls when you filter, group, and order data.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="f399c-287">[Zurück](the-entity-framework-and-aspnet-getting-started-part-1.md)
> [Weiter](the-entity-framework-and-aspnet-getting-started-part-3.md)</span><span class="sxs-lookup"><span data-stu-id="f399c-287">[Previous](the-entity-framework-and-aspnet-getting-started-part-1.md)
[Next](the-entity-framework-and-aspnet-getting-started-part-3.md)</span></span>
