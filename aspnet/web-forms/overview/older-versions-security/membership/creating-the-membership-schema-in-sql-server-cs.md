---
uid: web-forms/overview/older-versions-security/membership/creating-the-membership-schema-in-sql-server-cs
title: Erstellen des Mitgliedschaftsschemas in SQL-Server (c#) | Microsoft-Dokumentation
author: rick-anderson
description: In diesem Tutorial wird anhand der Verfahren für das erforderliche Schema in der Datenbank hinzufügen, um die SqlMembershipProvider verwenden gestartet. Danach wir WLAN...
ms.author: aspnetcontent
manager: wpickett
ms.date: 01/18/2008
ms.topic: article
ms.assetid: b4ac129d-1b8e-41ca-a38f-9b19d7c7bb0e
ms.technology: dotnet-webforms
msc.legacyurl: /web-forms/overview/older-versions-security/membership/creating-the-membership-schema-in-sql-server-cs
msc.type: authoredcontent
ms.openlocfilehash: e1aec1ffbb052901fe34389943b5bb1db58348a9
ms.sourcegitcommit: 953ff9ea4369f154d6fd0239599279ddd3280009
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 07/03/2018
ms.locfileid: "37400041"
---
<a name="creating-the-membership-schema-in-sql-server-c"></a><span data-ttu-id="9fb5c-104">Erstellen des Mitgliedschaftsschemas in SQL-Server (c#)</span><span class="sxs-lookup"><span data-stu-id="9fb5c-104">Creating the Membership Schema in SQL Server (C#)</span></span>
====================
<span data-ttu-id="9fb5c-105">durch [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="9fb5c-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="9fb5c-106">[Code herunterladen](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/ASPNET_Security_Tutorial_04_CS.zip) oder [PDF-Datei herunterladen](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/aspnet_tutorial04_MembershipSetup_cs.pdf)</span><span class="sxs-lookup"><span data-stu-id="9fb5c-106">[Download Code](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/ASPNET_Security_Tutorial_04_CS.zip) or [Download PDF](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/aspnet_tutorial04_MembershipSetup_cs.pdf)</span></span>

> <span data-ttu-id="9fb5c-107">In diesem Tutorial wird anhand der Verfahren für das erforderliche Schema in der Datenbank hinzufügen, um die SqlMembershipProvider verwenden gestartet.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-107">This tutorial starts by examining techniques for adding the necessary schema to the database in order to use the SqlMembershipProvider.</span></span> <span data-ttu-id="9fb5c-108">Danach wird untersuchen Sie die wichtigsten Tabellen im Schema und erläutert deren Zweck und die Wichtigkeit.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-108">Following that, we will examine the key tables in the schema and discuss their purpose and importance.</span></span> <span data-ttu-id="9fb5c-109">In diesem Tutorial endet mit einem Blick auf das von einer ASP.NET-Anwendung erfahren, welche Provider das mitgliedschaftsframework verwenden soll.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-109">This tutorial ends with a look at how to tell an ASP.NET application which provider the Membership framework should use.</span></span>


## <a name="introduction"></a><span data-ttu-id="9fb5c-110">Einführung</span><span class="sxs-lookup"><span data-stu-id="9fb5c-110">Introduction</span></span>

<span data-ttu-id="9fb5c-111">Die vorherigen beiden Tutorials, die untersucht, unter Verwendung der Formularauthentifizierung zum Identifizieren von Websitebesucher.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-111">The previous two tutorials examined using forms authentication to identify website visitors.</span></span> <span data-ttu-id="9fb5c-112">Das Forms-Authentifizierung-Framework erleichtert das für Entwickler, die einen Benutzer bei einer Website anmelden und diese auf der Seite besuchen, durch die Verwendung von Authentifizierungstickets merken müssen.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-112">The forms authentication framework makes it easy for developers to log a user into a website and to remember them across page visits through the use of authentication tickets.</span></span> <span data-ttu-id="9fb5c-113">Die `FormsAuthentication` Klasse enthält Methoden zum Generieren des Tickets und des Besuchers Cookies hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-113">The `FormsAuthentication` class includes methods for generating the ticket and adding it to the visitor's cookies.</span></span> <span data-ttu-id="9fb5c-114">Die `FormsAuthenticationModule` untersucht alle eingehende Anforderungen, für Personen mit einem gültigen Authentifizierungsticket, erstellt und ordnet einen `GenericPrincipal` und `FormsIdentity` Objekt mit der aktuellen Anforderung.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-114">The `FormsAuthenticationModule` examines all incoming requests and, for those with a valid authentication ticket, creates and associates a `GenericPrincipal` and a `FormsIdentity` object with the current request.</span></span> <span data-ttu-id="9fb5c-115">Die Formularauthentifizierung ist lediglich einen Mechanismus zum Gewähren des ein Authentifizierungsticket für einem Besucher, bei der Anmeldung in und, bei nachfolgenden Anforderungen, Analysieren dieses Ticket, um die Identität des Benutzers zu bestimmen.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-115">Forms authentication is merely a mechanism for granting an authentication ticket to a visitor when logging in and, on subsequent requests, parsing that ticket to determine the user's identity.</span></span> <span data-ttu-id="9fb5c-116">Für eine Webanwendung, um Benutzerkonten zu unterstützen müssen wir noch Implementierung eines Benutzerspeichers und Hinzufügen von Funktionen, um Anmeldeinformationen zu überprüfen, neue Benutzer, und die unzähligen anderen Aufgaben im Zusammenhang mit Konto von Benutzer zu registrieren.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-116">For a web application to support user accounts, we still need to implement a user store and add functionality to validate credentials, register new users, and the myriad of other user account-related tasks.</span></span>

<span data-ttu-id="9fb5c-117">Vor ASP.NET 2.0 befanden sich Entwickler auf der Hook für das implementieren alle diese Benutzer-Konto-bezogene Aufgaben.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-117">Prior to ASP.NET 2.0, developers were on the hook for implementing all of these user account-related tasks.</span></span> <span data-ttu-id="9fb5c-118">Glücklicherweise ist das ASP.NET-Team dieser Mangel erkannt und das mitgliedschaftsframework mit ASP.NET 2.0 eingeführt.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-118">Fortunately the ASP.NET team recognized this shortcoming and introduced the Membership framework with ASP.NET 2.0.</span></span> <span data-ttu-id="9fb5c-119">Das mitgliedschaftsframework ist eine Reihe von Klassen in .NET Framework, die eine programmgesteuerte Schnittstelle zum Ausführen von Aufgaben im Zusammenhang mit Konto für Core Benutzer bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-119">The Membership framework is a set of classes in the .NET Framework that provide a programmatic interface for accomplishing core user account-related tasks.</span></span> <span data-ttu-id="9fb5c-120">Dieses Framework basiert auf der [Anbietermodell](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx), wodurch Entwickler eine benutzerdefinierte Implementierung in einer standardisierten API integrieren können.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-120">This framework is built atop the [provider model](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx), which allows developers to plug a customized implementation into a standardized API.</span></span>

<span data-ttu-id="9fb5c-121">Siehe die <a id="Tutorial1"> </a> [ *Grundlagen der Sicherheit und Unterstützung für ASP.NET* ](../introduction/security-basics-and-asp-net-support-cs.md) Tutorial .NET Framework ausgeliefert wird, mit zwei integrierten Anbietern von Mitgliedschaft: [ `ActiveDirectoryMembershipProvider` ](https://msdn.microsoft.com/library/system.web.security.activedirectorymembershipprovider.aspx) und [ `SqlMembershipProvider` ](https://msdn.microsoft.com/library/system.web.security.sqlmembershipprovider.aspx).</span><span class="sxs-lookup"><span data-stu-id="9fb5c-121">As discussed in the <a id="Tutorial1"></a>[*Security Basics and ASP.NET Support*](../introduction/security-basics-and-asp-net-support-cs.md) tutorial, the .NET Framework ships with two built-in Membership providers: [`ActiveDirectoryMembershipProvider`](https://msdn.microsoft.com/library/system.web.security.activedirectorymembershipprovider.aspx) and [`SqlMembershipProvider`](https://msdn.microsoft.com/library/system.web.security.sqlmembershipprovider.aspx).</span></span> <span data-ttu-id="9fb5c-122">Wie der Name schon sagt, den `SqlMembershipProvider` verwendet eine Microsoft SQL Server-Datenbank als Speicher des Benutzers.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-122">As its name implies, the `SqlMembershipProvider` uses a Microsoft SQL Server database as the user store.</span></span> <span data-ttu-id="9fb5c-123">Um diesen Anbieter in einer Anwendung verwenden zu können, müssen es um dem Anbieter mitzuteilen, welche Datenbank als Speicher verwendet.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-123">In order to use this provider in an application, we need to tell the provider what database to use as the store.</span></span> <span data-ttu-id="9fb5c-124">Wie Sie sich vorstellen können, die `SqlMembershipProvider` erwartet, dass die Benutzer-Speicherdatenbank um bestimmte Datenbanktabellen, Ansichten und gespeicherte Prozeduren zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-124">As you might imagine, the `SqlMembershipProvider` expects the user store database to have certain database tables, views, and stored procedures.</span></span> <span data-ttu-id="9fb5c-125">Wir müssen diese erwartete Schema der ausgewählten Datenbank hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-125">We need to add this expected schema to the selected database.</span></span>

<span data-ttu-id="9fb5c-126">Dieses Tutorial beginnt, mithilfe von Techniken für das erforderliche Schema in der Datenbank hinzufügen, um verwenden die `SqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-126">This tutorial starts by examining techniques for adding the necessary schema to the database in order to use the `SqlMembershipProvider`.</span></span> <span data-ttu-id="9fb5c-127">Danach wird untersuchen Sie die wichtigsten Tabellen im Schema und erläutert deren Zweck und die Wichtigkeit.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-127">Following that, we will examine the key tables in the schema and discuss their purpose and importance.</span></span> <span data-ttu-id="9fb5c-128">In diesem Tutorial endet mit einem Blick auf das von einer ASP.NET-Anwendung erfahren, welche Provider das mitgliedschaftsframework verwenden soll.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-128">This tutorial ends with a look at how to tell an ASP.NET application which provider the Membership framework should use.</span></span>

<span data-ttu-id="9fb5c-129">Fangen wir an!</span><span class="sxs-lookup"><span data-stu-id="9fb5c-129">Let's get started!</span></span>

## <a name="step-1-deciding-where-to-place-the-user-store"></a><span data-ttu-id="9fb5c-130">Schritt 1: Entscheiden, wo die Benutzer-Store</span><span class="sxs-lookup"><span data-stu-id="9fb5c-130">Step 1: Deciding Where to Place the User Store</span></span>

<span data-ttu-id="9fb5c-131">Daten von einer ASP.NET-Anwendung ist häufig in eine Reihe von Tabellen in einer Datenbank gespeichert.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-131">An ASP.NET application's data is commonly stored in a number of tables in a database.</span></span> <span data-ttu-id="9fb5c-132">Bei der Implementierung der `SqlMembershipProvider` Datenbankschema müssen wir entscheiden, ob das Schema für die Mitgliedschaft in der gleichen Datenbank wie die Anwendungsdaten oder in einer anderen Datenbank zu speichern.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-132">When implementing the `SqlMembershipProvider` database schema we must decide whether to place the Membership schema in the same database as the application data or in an alternate database.</span></span>

<span data-ttu-id="9fb5c-133">Ich empfehle, suchen das Schema für die Mitgliedschaft in der gleichen Datenbank wie die Anwendungsdaten aus den folgenden Gründen:</span><span class="sxs-lookup"><span data-stu-id="9fb5c-133">I recommend locating the Membership schema in the same database as the application data for the following reasons:</span></span>

- <span data-ttu-id="9fb5c-134">**Verwaltbarkeit** eine Anwendung, deren Daten in einer Datenbank gekapselt, ist einfacher zu verstehen, verwalten und Bereitstellen als eine Anwendung mit zwei separate Datenbanken.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-134">**Maintainability** � an application whose data is encapsulated in one database is easier to understand, maintain, and deploy than an application that has two separate databases.</span></span>
- <span data-ttu-id="9fb5c-135">**Relationale Integrität** durch die Mitgliedschaft bezogenen Tabellen in der gleichen Datenbank zu suchen, wie die Anwendung diese Tabellen ist möglich, herstellen [foreign Key-Einschränkungen](http://en.wikipedia.org/wiki/Foreign_key) zwischen den Primärschlüsseln in den Mitgliedschaft-bezogenen und verwandte Application-Tabellen.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-135">**Relational Integrity** � by locating the Membership-related tables in the same database as the application tables it is possible to establish [foreign key constraints](http://en.wikipedia.org/wiki/Foreign_key) between the primary keys in the Membership-related tables and related application tables.</span></span>

<span data-ttu-id="9fb5c-136">Entkopplung von Benutzerdaten speichern und Anwendung auf unterschiedliche Datenbanken ist nur sinnvoll, wenn Sie über mehrere Anwendungen verfügen, dass jeweils separate Datenbanken verwenden, aber einen allgemeiner Store für Benutzer freigeben möchten.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-136">Decoupling the user store and application data into separate databases only makes sense if you have multiple applications that each use separate databases, but need to share a common user store.</span></span>

### <a name="creating-a-database"></a><span data-ttu-id="9fb5c-137">Erstellen einer Datenbank</span><span class="sxs-lookup"><span data-stu-id="9fb5c-137">Creating a Database</span></span>

<span data-ttu-id="9fb5c-138">Die Anwendung, die wir erstellen müssen, da das zweite Tutorial eine Datenbank noch nicht erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-138">The application we have been building since the second tutorial has not yet needed a database.</span></span> <span data-ttu-id="9fb5c-139">Wir benötigen einen jetzt jedoch für den Speicher des Benutzers.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-139">We need one now, however, for the user store.</span></span> <span data-ttu-id="9fb5c-140">Wir erstellen, und klicken Sie dann hinzufügen, das Schema erforderlich, durch die `SqlMembershipProvider` Anbieter (Siehe Schritt2).</span><span class="sxs-lookup"><span data-stu-id="9fb5c-140">Let's create one and then add to it the schema required by the `SqlMembershipProvider` provider (see Step 2).</span></span>

> [!NOTE]
> <span data-ttu-id="9fb5c-141">In dieser tutorialreihe verwenden wir eine [Microsoft SQL Server 2005 Express Edition](https://msdn.microsoft.com/sql/Aa336346.aspx) Datenbank zum Speichern von unserer Anwendungstabellen und die `SqlMembershipProvider` Schema.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-141">Throughout this tutorial series we will be using a [Microsoft SQL Server 2005 Express Edition](https://msdn.microsoft.com/sql/Aa336346.aspx) database to store our application tables and the `SqlMembershipProvider` schema.</span></span> <span data-ttu-id="9fb5c-142">Diese Entscheidung wurde getroffen, aus zwei Gründen: zuerst aufgrund der Kosten – free – die Express Edition ist die am häufigsten readably barrierefreie Version des SQL Server 2005; Andererseits können SQL Server 2005 Express Edition-Datenbanken platziert werden, direkt in der Webanwendung `App_Data` Ordner, sodass ein Kinderspiel, Packen die Datenbank und-Webanwendung zusammen in einer ZIP-Datei und es spezielle Einrichtung ohne erneute Bereitstellung oder Konfigurationsoptionen.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-142">This decision was made for two reasons: first, due to its cost - free - the Express Edition is the most readably accessible version of SQL Server 2005; second, SQL Server 2005 Express Edition databases can be placed directly in the web application's `App_Data` folder, making it a cinch to package the database and web application together in one ZIP file and to redeploy it without any special setup instructions or configuration options.</span></span> <span data-ttu-id="9fb5c-143">Wenn Sie mit einer nicht - Express Edition-Version von SQL Server nachvollziehen möchten, können.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-143">If you'd prefer to follow along using a non-Express Edition version of SQL Server, feel free.</span></span> <span data-ttu-id="9fb5c-144">Die Schritte sind nahezu identisch.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-144">The steps are virtually identical.</span></span> <span data-ttu-id="9fb5c-145">Die `SqlMembershipProvider` Schema arbeitet mit einer beliebigen Version von Microsoft SQL Server 2000 und einrichten.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-145">The `SqlMembershipProvider` schema will work with any version of Microsoft SQL Server 2000 and up.</span></span>


<span data-ttu-id="9fb5c-146">Im Projektmappen-Explorer mit der Maustaste auf die `App_Data` Ordner, und wählen Sie auf Neues Element hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-146">From the Solution Explorer, right-click on the `App_Data` folder and choose to Add New Item.</span></span> <span data-ttu-id="9fb5c-147">(Wenn Sie nicht sehen ein `App_Data` Ordner in Ihrem Projekt mit der rechten Maustaste auf das Projekt im Projektmappen-Explorer, wählen Sie ASP.NET-Ordner hinzufügen und auswählen `App_Data`.) Wählen Sie im Dialogfeld "Neues Element hinzufügen" zum Hinzufügen einer neuen SQL-Datenbank, die mit dem Namen `SecurityTutorials.mdf`.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-147">(If you do not see an `App_Data` folder in your project, right-click on the project in Solution Explorer, select Add ASP.NET Folder, and pick `App_Data`.) From the Add New Item dialog box, choose to add a new SQL Database named `SecurityTutorials.mdf`.</span></span> <span data-ttu-id="9fb5c-148">In diesem Tutorial fügen wir die `SqlMembershipProvider` Schema auf diese Datenbank, in den nachfolgenden Tutorials wir zusätzliche erstellen Tabellen, um die Anwendungsdaten zu erfassen.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-148">In this tutorial we will add the `SqlMembershipProvider` schema to this database; in subsequent tutorials we will create additional tables to capture our application data.</span></span>


<span data-ttu-id="9fb5c-149">[![Hinzufügen einer neuen SQL-Datenbank, die mit dem Namen SecurityTutorials.mdf-Datenbank, in dem Ordner "App_Data"](creating-the-membership-schema-in-sql-server-cs/_static/image2.png)](creating-the-membership-schema-in-sql-server-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="9fb5c-149">[![Add a New SQL Database Named SecurityTutorials.mdf Database to the App_Data Folder](creating-the-membership-schema-in-sql-server-cs/_static/image2.png)](creating-the-membership-schema-in-sql-server-cs/_static/image1.png)</span></span>

<span data-ttu-id="9fb5c-150">**Abbildung 1**: Hinzufügen einer neuen SQL-Datenbank mit dem Namen `SecurityTutorials.mdf` -Datenbank in die `App_Data` Ordner ([klicken Sie, um das Bild in voller Größe anzeigen](creating-the-membership-schema-in-sql-server-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="9fb5c-150">**Figure 1**: Add a New SQL Database Named `SecurityTutorials.mdf` Database to the `App_Data` Folder ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image3.png))</span></span>


<span data-ttu-id="9fb5c-151">Hinzufügen einer Datenbank, die `App_Data` Ordner enthält es automatisch in der Datenbank-Explorer-Ansicht.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-151">Adding a database to the `App_Data` folder automatically includes it in the Database Explorer view.</span></span> <span data-ttu-id="9fb5c-152">(In der nicht - Express Edition-Version von Visual Studio wird die Datenbank-Explorer den Server-Explorer bezeichnet.) Wechseln Sie zu der Datenbank-Explorer, und erweitern Sie den gerade hinzugefügten `SecurityTutorials` Datenbank.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-152">(In the non-Express Edition version of Visual Studio, the Database Explorer is called the Server Explorer.) Go to the Database Explorer and expand the just-added `SecurityTutorials` database.</span></span> <span data-ttu-id="9fb5c-153">Wenn Sie Datenbank-Explorer nicht auf dem Bildschirm angezeigt werden, finden Sie unter dem Menü "Ansicht" und Datenbank-Explorer auswählen oder Strg + Alt + S drücken.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-153">If you do not see the Database Explorer on screen, go to the View menu and choose Database Explorer, or hit Ctrl+Alt+S.</span></span> <span data-ttu-id="9fb5c-154">Wie in Abbildung 2 gezeigt, die `SecurityTutorials` -Datenbank ist leer: er enthält keine Tabellen keine Ansichten und keine gespeicherten Prozeduren.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-154">As Figure 2 shows, the `SecurityTutorials` database is empty - it contains no tables, no views, and no stored procedures.</span></span>


<span data-ttu-id="9fb5c-155">[![Die SecurityTutorials-Datenbank ist derzeit leer.](creating-the-membership-schema-in-sql-server-cs/_static/image5.png)](creating-the-membership-schema-in-sql-server-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="9fb5c-155">[![The SecurityTutorials Database is Currently Empty](creating-the-membership-schema-in-sql-server-cs/_static/image5.png)](creating-the-membership-schema-in-sql-server-cs/_static/image4.png)</span></span>

<span data-ttu-id="9fb5c-156">**Abbildung 2**: die `SecurityTutorials` Datenbank ist derzeit leer ([klicken Sie, um das Bild in voller Größe anzeigen](creating-the-membership-schema-in-sql-server-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="9fb5c-156">**Figure 2**: The `SecurityTutorials` Database is Currently Empty ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image6.png))</span></span>


## <a name="step-2-adding-thesqlmembershipproviderschema-to-the-database"></a><span data-ttu-id="9fb5c-157">Schritt 2: Hinzufügen der`SqlMembershipProvider`Schema in der Datenbank</span><span class="sxs-lookup"><span data-stu-id="9fb5c-157">Step 2: Adding the`SqlMembershipProvider`Schema to the Database</span></span>

<span data-ttu-id="9fb5c-158">Die `SqlMembershipProvider` erfordert einen bestimmten Satz von Tabellen, Sichten und gespeicherten Prozeduren in der Benutzerdatenbank für den Store installiert werden.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-158">The `SqlMembershipProvider` requires a particular set of tables, views, and stored procedures to be installed in the user store database.</span></span> <span data-ttu-id="9fb5c-159">Diese erforderlichen Datenbankobjekte können hinzugefügt werden, mithilfe der [ `aspnet_regsql.exe` Tool](https://msdn.microsoft.com/library/ms229862.aspx).</span><span class="sxs-lookup"><span data-stu-id="9fb5c-159">These requisite database objects can be added using the [`aspnet_regsql.exe` tool](https://msdn.microsoft.com/library/ms229862.aspx).</span></span> <span data-ttu-id="9fb5c-160">Diese Datei befindet sich der `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\` Ordner.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-160">This file is located in the `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\` folder.</span></span>

> [!NOTE]
> <span data-ttu-id="9fb5c-161">Die `aspnet_regsql.exe` Tool bietet sowohl eine grafische Benutzeroberfläche als auch über die Befehlszeilenfunktionalität.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-161">The `aspnet_regsql.exe` tool offers both command line functionality and a graphical user interface.</span></span> <span data-ttu-id="9fb5c-162">Die grafische Oberfläche ist Benutzerfreundlicher und was wir in diesem Tutorial untersucht.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-162">The graphical interface is more user friendly and is what we will examine in this tutorial.</span></span> <span data-ttu-id="9fb5c-163">Die Befehlszeilenschnittstelle ist nützlich, wenn das Hinzufügen der `SqlMembershipProvider` Schema muss automatisiert werden, z. B. in Build Skripts oder automatisierte Testszenarien.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-163">The command line interface is useful when the addition of the `SqlMembershipProvider` schema needs to be automated, such as in build scripts or automated testing scenarios.</span></span>


<span data-ttu-id="9fb5c-164">Die `aspnet_regsql.exe` Tool wird verwendet, um das Hinzufügen oder Entfernen von *ASP.NET-Anwendungsdienste* in eine angegebene SQL Server-Datenbank.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-164">The `aspnet_regsql.exe` tool is used to add or remove *ASP.NET application services* to a specified SQL Server database.</span></span> <span data-ttu-id="9fb5c-165">Die ASP.NET-Anwendungsdienste umfassen die Schemas für die `SqlMembershipProvider` und `SqlRoleProvider`, zusammen mit den für die SQL-basierten Anbieter für andere Frameworks ASP.NET 2.0.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-165">The ASP.NET application services encompass the schemas for the `SqlMembershipProvider` and `SqlRoleProvider`, along with the schemas for the SQL-based providers for other ASP.NET 2.0 frameworks.</span></span> <span data-ttu-id="9fb5c-166">Wir müssen zwei Bits an Informationen zum Angeben der `aspnet_regsql.exe` Tool:</span><span class="sxs-lookup"><span data-stu-id="9fb5c-166">We need to provide two bits of information to the `aspnet_regsql.exe` tool:</span></span>

- <span data-ttu-id="9fb5c-167">Gibt an, ob beim Hinzufügen oder Entfernen von Anwendungsdiensten, werden sollten und</span><span class="sxs-lookup"><span data-stu-id="9fb5c-167">Whether we want to add or remove application services, and</span></span>
- <span data-ttu-id="9fb5c-168">Die Datenbank aus dem Hinzufügen oder entfernen Sie die Anwendung services-schema</span><span class="sxs-lookup"><span data-stu-id="9fb5c-168">The database from which to add or remove the application services schema</span></span>

<span data-ttu-id="9fb5c-169">Dass aufgefordert wird, für die Datenbank zu verwenden, die `aspnet_regsql.exe` Tool fordert uns, Sie geben den Namen des Servers, die Datenbank, auf die Sicherheitsanmeldeinformationen befindet für die Verbindung mit der Datenbank, und der Name der Datenbank.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-169">In prompting for the database to use, the `aspnet_regsql.exe` tool asks us to provide the name of the server the database resides on, the security credentials for connecting to the database, and the database name.</span></span> <span data-ttu-id="9fb5c-170">Wenn Sie den nicht - Express-Edition von SQL Server verwenden, sollten Sie diese Informationen bereits wissen, wie die gleichen Informationen, die Sie über eine Verbindungszeichenfolge angeben müssen, bei der Arbeit mit der Datenbank mithilfe einer ASP.NET-Webseite.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-170">If you are using the non-Express Edition of SQL Server, you should already know this information, as it is the same information you must provide through a connection string when working with the database through an ASP.NET web page.</span></span> <span data-ttu-id="9fb5c-171">Bestimmen der Namen des Servers und der Datenbank bei Verwendung einer SQL Server 2005 Express Edition-Datenbank in der `App_Data` Ordner ist jedoch etwas komplizierter.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-171">Determining the server and database name when using a SQL Server 2005 Express Edition database in the `App_Data` folder, however, is a bit more involved.</span></span>

<span data-ttu-id="9fb5c-172">Im folgenden Abschnitt werden eine einfache Möglichkeit zum Angeben des Namens Server und die Datenbank für eine SQL Server 2005 Express Edition-Datenbank in der `App_Data` Ordner.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-172">The following section examines a straightforward way for specifying the server and database name for a SQL Server 2005 Express Edition database in the `App_Data` folder.</span></span> <span data-ttu-id="9fb5c-173">Wenn Sie nicht gerne zu überspringenden, das Installieren von SQL Server 2005 Express Edition verwenden, werden im Abschnitt für Anwendungsdienste.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-173">If you are not using SQL Server 2005 Express Edition feel free to skip ahead to the Installing the Application Services section.</span></span>

### <a name="determining-the-server-and-database-name-for-a-sql-server-2005-express-edition-database-in-theappdatafolder"></a><span data-ttu-id="9fb5c-174">Bestimmen die Server- und Datenbanknamen für SQL Server 2005 Express Edition-Datenbank in der`App_Data`Ordner</span><span class="sxs-lookup"><span data-stu-id="9fb5c-174">Determining the Server and Database Name for a SQL Server 2005 Express Edition Database in the`App_Data`Folder</span></span>

<span data-ttu-id="9fb5c-175">Zum Verwenden der `aspnet_regsql.exe` Tool, das wir wissen, Server-und Datenbank.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-175">In order to use the `aspnet_regsql.exe` tool we need to know the server and database names.</span></span> <span data-ttu-id="9fb5c-176">Der Servername ist `localhost\InstanceName`.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-176">The server name is `localhost\InstanceName`.</span></span> <span data-ttu-id="9fb5c-177">Höchstwahrscheinlich wird die *InstanceName* ist `SQLExpress`.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-177">Most likely, the *InstanceName* is `SQLExpress`.</span></span> <span data-ttu-id="9fb5c-178">Aber wenn Sie SQL Server 2005 Express Edition manuell installiert haben (d. h., Sie nicht installiert haben sie automatisch bei der Installation von Visual Studio), ist es möglich, dass Sie einen anderen Instanznamen ausgewählt.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-178">However, if you installed SQL Server 2005 Express Edition manually (that is, you did not install it automatically while installing Visual Studio), then it is possible that you selected a different instance name.</span></span>

<span data-ttu-id="9fb5c-179">Der Name der Datenbank ist etwas schwieriger ist, um zu bestimmen.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-179">The database name is a bit trickier to determine.</span></span> <span data-ttu-id="9fb5c-180">Datenbanken in der `App_Data` Ordner verfügen in der Regel einen Datenbanknamen an, die enthält eine [global eindeutigen Bezeichner](http://en.wikipedia.org/wiki/Globally_Unique_Identifier) zusammen mit dem Pfad zur Datei.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-180">Databases in the `App_Data` folder typically have a database name that includes a [globally unique identifier](http://en.wikipedia.org/wiki/Globally_Unique_Identifier) along with the path to the database file.</span></span> <span data-ttu-id="9fb5c-181">Wir müssen diesen Datenbanknamen zu bestimmen, um die Anwendung Dienstschema durch Hinzufügen `aspnet_regsql.exe`.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-181">We need to determine this database name in order to add the application services schema through `aspnet_regsql.exe`.</span></span>

<span data-ttu-id="9fb5c-182">Die einfachste Möglichkeit zum Ermitteln der Name der Datenbank werden über SQL Server Management Studio untersucht werden.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-182">The easiest way to ascertain the database name is to examine it through SQL Server Management Studio.</span></span> <span data-ttu-id="9fb5c-183">SQL Server Management Studio bietet eine grafische Benutzeroberfläche zum Verwalten von SQL Server 2005-Datenbanken, aber es wird nicht mit der Express Edition von SQL Server 2005 geliefert.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-183">SQL Server Management Studio provides a graphical interface for managing SQL Server 2005 databases, but it does not ship with the Express Edition of SQL Server 2005.</span></span> <span data-ttu-id="9fb5c-184">Die gute Nachricht ist, die [download](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en) die kostenlose Express-Edition von SQL Server Management Studio.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-184">The good news is that [you can download](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en) the free Express Edition of SQL Server Management Studio.</span></span>

> [!NOTE]
> <span data-ttu-id="9fb5c-185">Wenn Sie sich auch um eine nicht - Express Edition-Version von SQL Server 2005 auf dem Desktop installiert haben, ist die Vollversion von Management Studio wahrscheinlich installiert.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-185">If you also have a non-Express Edition version of SQL Server 2005 installed on your desktop then the full version of Management Studio is likely installed.</span></span> <span data-ttu-id="9fb5c-186">Die vollständige Version können um der Name der Datenbank zu bestimmen, die gleichen Schritte wie unten kurz umrissen, für die Express Edition.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-186">You can use the full version to determine the database name, following the same steps as outlined below for the Express Edition.</span></span>


<span data-ttu-id="9fb5c-187">Beginnen Sie, indem das Schließen von Visual Studio, um sicherzustellen, dass alle Sperren, die von Visual Studio auf die Datenbankdatei auferlegt werden geschlossen.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-187">Start by closing Visual Studio to ensure that any locks imposed by Visual Studio on the database file are closed.</span></span> <span data-ttu-id="9fb5c-188">Als Nächstes starten Sie SQL Server Management Studio und Herstellen einer Verbindung mit der `localhost\InstanceName` -Datenbank für SQL Server 2005 Express Edition.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-188">Next, launch SQL Server Management Studio and connect to the `localhost\InstanceName` database for SQL Server 2005 Express Edition.</span></span> <span data-ttu-id="9fb5c-189">Wie bereits erwähnt, wahrscheinlich werden der Instanzname ist `SQLExpress`.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-189">As noted earlier, chances are the instance name is `SQLExpress`.</span></span> <span data-ttu-id="9fb5c-190">Wählen Sie für die Authentifizierungsoption Windows-Authentifizierung.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-190">For the Authentication option, select Windows Authentication.</span></span>


<span data-ttu-id="9fb5c-191">[![Verbinden Sie mit SQL Server 2005 Express Edition-Instanz](creating-the-membership-schema-in-sql-server-cs/_static/image8.png)](creating-the-membership-schema-in-sql-server-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="9fb5c-191">[![Connect to the SQL Server 2005 Express Edition Instance](creating-the-membership-schema-in-sql-server-cs/_static/image8.png)](creating-the-membership-schema-in-sql-server-cs/_static/image7.png)</span></span>

<span data-ttu-id="9fb5c-192">**Abbildung 3**: Verbinden mit der SQL Server 2005 Express Edition-Instanz ([klicken Sie, um das Bild in voller Größe anzeigen](creating-the-membership-schema-in-sql-server-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="9fb5c-192">**Figure 3**: Connect to the SQL Server 2005 Express Edition Instance ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image9.png))</span></span>


<span data-ttu-id="9fb5c-193">Nach dem Herstellen einer Verbindung mit der SQL Server 2005 Express Edition-Instanz, zeigt Management Studio den Ordner für die Datenbanken, die Sicherheitseinstellungen, die Serverobjekte und So weiter.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-193">After connecting to the SQL Server 2005 Express Edition instance, Management Studio displays folders for the Databases, the Security settings, the Server Objects, and so on.</span></span> <span data-ttu-id="9fb5c-194">Wenn Sie die Registerkarte "Datenbanken" erweitern, sehen Sie, die die `SecurityTutorials.mdf` Datenbank *nicht* wir zuerst anfügen die Datenbank müssen in der Datenbankinstanz – erfasst.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-194">If you expand the Databases tab you will see that the `SecurityTutorials.mdf` database is *not* registered in the database instance - we need to attach the database first.</span></span>

<span data-ttu-id="9fb5c-195">Mit der rechten Maustaste auf den Ordner "Datenbanken" aus, und wählen Sie im Kontextmenü anfügen.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-195">Right-click on the Databases folder and choose Attach from the context menu.</span></span> <span data-ttu-id="9fb5c-196">Dadurch wird das Dialogfeld Anfügen von Datenbanken angezeigt.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-196">This will display the Attach Databases dialog box.</span></span> <span data-ttu-id="9fb5c-197">Von hier aus, klicken Sie auf die Schaltfläche "hinzufügen", navigieren Sie zu der `SecurityTutorials.mdf` Datenbank, und klicken Sie auf OK.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-197">From here, click the Add button, browse to the `SecurityTutorials.mdf` database, and click OK.</span></span> <span data-ttu-id="9fb5c-198">Abbildung 4 zeigt das Dialogfeld Datenbanken anfügen, nachdem die `SecurityTutorials.mdf` Datenbank ausgewählt wurde.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-198">Figure 4 shows the Attach Databases dialog box after the `SecurityTutorials.mdf` database has been selected.</span></span> <span data-ttu-id="9fb5c-199">Abbildung 5 zeigt die Objekt-Explorer von Management Studio, nachdem die Datenbank wurde erfolgreich angefügt wurde.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-199">Figure 5 shows Management Studio's Object Explorer after the database has been successfully attached.</span></span>


<span data-ttu-id="9fb5c-200">[![Fügen Sie die Datenbank SecurityTutorials.mdf](creating-the-membership-schema-in-sql-server-cs/_static/image11.png)](creating-the-membership-schema-in-sql-server-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="9fb5c-200">[![Attach the SecurityTutorials.mdf Database](creating-the-membership-schema-in-sql-server-cs/_static/image11.png)](creating-the-membership-schema-in-sql-server-cs/_static/image10.png)</span></span>

<span data-ttu-id="9fb5c-201">**Abbildung 4**: Fügen Sie der `SecurityTutorials.mdf` Datenbank ([klicken Sie, um das Bild in voller Größe anzeigen](creating-the-membership-schema-in-sql-server-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="9fb5c-201">**Figure 4**: Attach the `SecurityTutorials.mdf` Database ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image12.png))</span></span>


<span data-ttu-id="9fb5c-202">[![Die SecurityTutorials.mdf-Datenbank wird im Ordner "Datenbanken" angezeigt.](creating-the-membership-schema-in-sql-server-cs/_static/image14.png)](creating-the-membership-schema-in-sql-server-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="9fb5c-202">[![The SecurityTutorials.mdf Database Appears in the Databases Folder](creating-the-membership-schema-in-sql-server-cs/_static/image14.png)](creating-the-membership-schema-in-sql-server-cs/_static/image13.png)</span></span>

<span data-ttu-id="9fb5c-203">**Abbildung 5**: die `SecurityTutorials.mdf` Datenbank wird in den Ordner "Datenbanken" angezeigt ([klicken Sie, um das Bild in voller Größe anzeigen](creating-the-membership-schema-in-sql-server-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="9fb5c-203">**Figure 5**: The `SecurityTutorials.mdf` Database Appears in the Databases Folder ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image15.png))</span></span>


<span data-ttu-id="9fb5c-204">Wie in Abbildung 5 gezeigt, die `SecurityTutorials.mdf` Datenbank verfügt über einen eher abstruse Namen.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-204">As Figure 5 shows, the `SecurityTutorials.mdf` database has a rather abstruse name.</span></span> <span data-ttu-id="9fb5c-205">Ändern Sie es in einen einprägsameren (und lässt sich einfacher eingeben) Namen.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-205">Let's change it to a more memorable (and easier to type) name.</span></span> <span data-ttu-id="9fb5c-206">Mit der rechten Maustaste auf die Datenbank, wählen Sie im Kontextmenü der Umbenennung, und benennen Sie sie `SecurityTutorialsDatabase`.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-206">Right-click on the database, choose Rename from the context menu, and rename it `SecurityTutorialsDatabase`.</span></span> <span data-ttu-id="9fb5c-207">Dadurch wird der Dateiname nicht geändert, nur der Namen der Datenbank verwendet, um sich mit SQL Server zu identifizieren.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-207">This does not change the filename, just the name the database uses to identify itself to SQL Server.</span></span>


<span data-ttu-id="9fb5c-208">[![Die Datenbank in SecurityTutorialsDatabase umbenennen](creating-the-membership-schema-in-sql-server-cs/_static/image17.png)](creating-the-membership-schema-in-sql-server-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="9fb5c-208">[![Rename the Database to SecurityTutorialsDatabase](creating-the-membership-schema-in-sql-server-cs/_static/image17.png)](creating-the-membership-schema-in-sql-server-cs/_static/image16.png)</span></span>

<span data-ttu-id="9fb5c-209">**Abbildung 6**: Benennen Sie die Datenbank in `SecurityTutorialsDatabase`([klicken Sie, um das Bild in voller Größe anzeigen](creating-the-membership-schema-in-sql-server-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="9fb5c-209">**Figure 6**: Rename the Database to `SecurityTutorialsDatabase`([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image18.png))</span></span>


<span data-ttu-id="9fb5c-210">An diesem Punkt wissen wir die Server- und Namen für die `SecurityTutorials.mdf` Datenbankdatei: `localhost\InstanceName` und `SecurityTutorialsDatabase`bzw.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-210">At this point we know the server and database names for the `SecurityTutorials.mdf` database file: `localhost\InstanceName` and `SecurityTutorialsDatabase`, respectively.</span></span> <span data-ttu-id="9fb5c-211">Wir sind jetzt bereit zum Installieren der Anwendungsdienste über das `aspnet_regsql.exe` Tool.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-211">We are now ready to install the application services through the `aspnet_regsql.exe` tool.</span></span>

### <a name="installing-the-application-services"></a><span data-ttu-id="9fb5c-212">Installation der Anwendungsdienste</span><span class="sxs-lookup"><span data-stu-id="9fb5c-212">Installing the Application Services</span></span>

<span data-ttu-id="9fb5c-213">Zum Starten der `aspnet_regsql.exe` tool, wechseln Sie im Startmenü, und wählen Sie ausführen.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-213">To launch the `aspnet_regsql.exe` tool, go to the start menu and choose Run.</span></span> <span data-ttu-id="9fb5c-214">Geben Sie `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\aspnet_regsql.exe` in das Textfeld ein, und klicken Sie auf OK.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-214">Enter `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\aspnet_regsql.exe` into the textbox and click OK.</span></span> <span data-ttu-id="9fb5c-215">Alternativ können Sie Windows-Explorer verwenden, um einen Drilldown zum entsprechenden Ordner, und doppelklicken Sie auf die `aspnet_regsql.exe` Datei.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-215">Alternatively, you can use Windows Explorer to drill down to the appropriate folder and double-click the `aspnet_regsql.exe` file.</span></span> <span data-ttu-id="9fb5c-216">Beide Ansätze werden die gleichen Ergebnisse net.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-216">Either approach will net the same results.</span></span>

<span data-ttu-id="9fb5c-217">Ausführen der `aspnet_regsql.exe` Tool ohne Befehlszeilenargumente wird die grafische Benutzeroberfläche für die ASP.NET SQL Server-Setup-Assistent gestartet.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-217">Running the `aspnet_regsql.exe` tool without any command line arguments launches the ASP.NET SQL Server Setup Wizard graphical user interface.</span></span> <span data-ttu-id="9fb5c-218">Der Assistent erleichtert das Hinzufügen oder entfernen die ASP.NET-Anwendungsdienste für eine angegebene Datenbank.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-218">The wizard makes it easy to add or remove the ASP.NET application services on a specified database.</span></span> <span data-ttu-id="9fb5c-219">Im erste Bildschirm des Assistenten dargestellt in Abbildung 7: Beschreibt den Zweck des Tools.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-219">The first screen of the wizard, shown in Figure 7, describes the purpose of the tool.</span></span>


<span data-ttu-id="9fb5c-220">[![Verwenden Sie die ASP.NET SQL Server-Setup-Assistent erleichtert des Mitgliedschaftsschemas hinzufügen](creating-the-membership-schema-in-sql-server-cs/_static/image20.png)](creating-the-membership-schema-in-sql-server-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="9fb5c-220">[![Use the ASP.NET SQL Server Setup Wizard Makes to Add the Membership Schema](creating-the-membership-schema-in-sql-server-cs/_static/image20.png)](creating-the-membership-schema-in-sql-server-cs/_static/image19.png)</span></span>

<span data-ttu-id="9fb5c-221">**Abbildung 7**: Verwenden Sie die ASP.NET SQL Server-Setup-Assistent macht des Mitgliedschaftsschemas hinzufügen ([klicken Sie, um das Bild in voller Größe anzeigen](creating-the-membership-schema-in-sql-server-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="9fb5c-221">**Figure 7**: Use the ASP.NET SQL Server Setup Wizard Makes to Add the Membership Schema ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image21.png))</span></span>


<span data-ttu-id="9fb5c-222">Der zweite Schritt im Assistenten werden wir gefragt, gibt an, ob wir die Anwendungsdienste hinzufügen oder entfernen möchten.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-222">The second step in the wizard asks us whether we want to add the application services or remove them.</span></span> <span data-ttu-id="9fb5c-223">Da wir die Tabellen, Sichten und gespeicherte Prozeduren, die für möchten die `SqlMembershipProvider`, konfigurieren Sie SQL Server-Dienste-Option "Anwendung" auswählen.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-223">Since we want to add the tables, views, and stored procedures necessary for the `SqlMembershipProvider`, choose the Configure SQL Server for application services option.</span></span> <span data-ttu-id="9fb5c-224">Später, wenn Sie dieses Schema aus der Datenbank entfernen möchten, führen Sie diesen Assistenten erneut aus, aber stattdessen wählen Sie Anwendungsinformationen Services entfernen aus einer vorhandenen Datenbankoption aus.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-224">Later, if you want to remove this schema from your database, re-run this wizard, but instead choose the Remove application services information from an existing database option.</span></span>


<span data-ttu-id="9fb5c-225">[![Wählen Sie die Konfiguration von SQLServer für die Anwendung der Option "Services"](creating-the-membership-schema-in-sql-server-cs/_static/image23.png)](creating-the-membership-schema-in-sql-server-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="9fb5c-225">[![Choose the Configure SQL Server for Application Services Option](creating-the-membership-schema-in-sql-server-cs/_static/image23.png)](creating-the-membership-schema-in-sql-server-cs/_static/image22.png)</span></span>

<span data-ttu-id="9fb5c-226">**Abbildung 8**: Wählen Sie das Konfigurieren von SQL Server für die Anwendung der Option "Services" ([klicken Sie, um das Bild in voller Größe anzeigen](creating-the-membership-schema-in-sql-server-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="9fb5c-226">**Figure 8**: Choose the Configure SQL Server for Application Services Option ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image24.png))</span></span>


<span data-ttu-id="9fb5c-227">Der dritte Schritt aufgefordert, die Datenbankinformationen: den Namen des Servers, Authentifizierungsinformationen und der Name der Datenbank.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-227">The third step prompts for the database information: the server name, authentication information, and the database name.</span></span> <span data-ttu-id="9fb5c-228">Wenn Sie für dieses Tutorial folgt wurde haben und hinzugefügt haben, die `SecurityTutorials.mdf` -Datenbank einen `App_Data`, angefügt, damit `localhost\InstanceName`, und umbenannt `SecurityTutorialsDatabase`, verwenden Sie dann die folgenden Werte:</span><span class="sxs-lookup"><span data-stu-id="9fb5c-228">If you have been following along with this tutorial and have added the `SecurityTutorials.mdf` database to `App_Data`, attached it to `localhost\InstanceName`, and renamed it to `SecurityTutorialsDatabase`, then use the following values:</span></span>

- <span data-ttu-id="9fb5c-229">Server: `localhost\InstanceName`</span><span class="sxs-lookup"><span data-stu-id="9fb5c-229">Server: `localhost\InstanceName`</span></span>
- <span data-ttu-id="9fb5c-230">Windows-Authentifizierung</span><span class="sxs-lookup"><span data-stu-id="9fb5c-230">Windows authentication</span></span>
- <span data-ttu-id="9fb5c-231">Datenbank: `SecurityTutorialsDatabase`</span><span class="sxs-lookup"><span data-stu-id="9fb5c-231">Database: `SecurityTutorialsDatabase`</span></span>


<span data-ttu-id="9fb5c-232">[![Geben Sie die Datenbankinformationen](creating-the-membership-schema-in-sql-server-cs/_static/image26.png)](creating-the-membership-schema-in-sql-server-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="9fb5c-232">[![Enter the Database Information](creating-the-membership-schema-in-sql-server-cs/_static/image26.png)](creating-the-membership-schema-in-sql-server-cs/_static/image25.png)</span></span>

<span data-ttu-id="9fb5c-233">**Abbildung 9**: Geben Sie die Datenbankinformationen ([klicken Sie, um das Bild in voller Größe anzeigen](creating-the-membership-schema-in-sql-server-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="9fb5c-233">**Figure 9**: Enter the Database Information ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image27.png))</span></span>


<span data-ttu-id="9fb5c-234">Nach dem Eingeben der Informationen zur Datenbank, klicken Sie auf "Weiter".</span><span class="sxs-lookup"><span data-stu-id="9fb5c-234">After entering the database information, click Next.</span></span> <span data-ttu-id="9fb5c-235">Der letzte Schritt ist zusammengefasst, die ausgeführt werden soll.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-235">The final step summarizes the steps that will be taken.</span></span> <span data-ttu-id="9fb5c-236">Klicken Sie auf "Weiter", um die Anwendungsdienste zu installieren und dann auf Fertig stellen, um den Assistenten abzuschließen.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-236">Click Next to install the application services and then Finish to complete the wizard.</span></span>

> [!NOTE]
> <span data-ttu-id="9fb5c-237">Wenn Sie Management Studio verwendet haben, fügen Sie die Datenbank, und benennen Sie die Datenbankdatei, achten Sie darauf, dass Sie die Datenbank trennen, und schließen Sie Management Studio vor Visual Studio öffnen.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-237">If you used Management Studio to attach the database and rename the database file, be sure to detach the database and close Management Studio before reopening Visual Studio.</span></span> <span data-ttu-id="9fb5c-238">Trennen der `SecurityTutorialsDatabase` Datenbank, mit der rechten Maustaste auf den Datenbanknamen, und wählen Sie im Aufgabenmenü trennen.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-238">To detach the `SecurityTutorialsDatabase` database, right-click on the database name and, from the Tasks menu, choose Detach.</span></span>


<span data-ttu-id="9fb5c-239">Nach Abschluss des Assistenten zu Visual Studio zurück, und navigieren Sie zu der Datenbank-Explorer.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-239">Upon completion of the wizard, return to Visual Studio and navigate to the Database Explorer.</span></span> <span data-ttu-id="9fb5c-240">Erweitern Sie den Ordner "Tabellen".</span><span class="sxs-lookup"><span data-stu-id="9fb5c-240">Expand the Tables folder.</span></span> <span data-ttu-id="9fb5c-241">Daraufhin sollte eine Reihe von Tabellen, deren Namen mit dem Präfix beginnen `aspnet_`.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-241">You should see a series of tables whose names start with the prefix `aspnet_`.</span></span> <span data-ttu-id="9fb5c-242">Ebenso kann eine Vielzahl von Ansichten und gespeicherte Prozeduren in den Ansichten und gespeicherte Prozeduren Ordnern gefunden werden.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-242">Likewise, a variety of views and stored procedures can be found under the Views and Stored Procedures folders.</span></span> <span data-ttu-id="9fb5c-243">Diese Datenbankobjekte bilden zusammen das Dienstschema für die Anwendung.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-243">These database objects make up the application services schema.</span></span> <span data-ttu-id="9fb5c-244">Untersuchen wir die Mitgliedschaft und Rollen-spezifischer Datenbankobjekte in Schritt 3.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-244">We will examine the membership- and role-specific database objects in Step 3.</span></span>


<span data-ttu-id="9fb5c-245">[![Eine Vielzahl von Tabellen, Sichten und gespeicherten Prozeduren der Datenbank hinzugefügt wurden](creating-the-membership-schema-in-sql-server-cs/_static/image29.png)](creating-the-membership-schema-in-sql-server-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="9fb5c-245">[![A Variety of Tables, Views, and Stored Procedures Have Been Added to the Database](creating-the-membership-schema-in-sql-server-cs/_static/image29.png)](creating-the-membership-schema-in-sql-server-cs/_static/image28.png)</span></span>

<span data-ttu-id="9fb5c-246">**Abbildung 10**: eine Reihe von Tabellen, Sichten und gespeicherten Prozeduren wurden hinzugefügt, die Datenbank ([klicken Sie, um das Bild in voller Größe anzeigen](creating-the-membership-schema-in-sql-server-cs/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="9fb5c-246">**Figure 10**: A Variety of Tables, Views, and Stored Procedures Have Been Added to the Database ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image30.png))</span></span>


> [!NOTE]
> <span data-ttu-id="9fb5c-247">Die `aspnet_regsql.exe` grafische Benutzeroberfläche des Tools wird das Dienstschema für die gesamte Anwendung installiert.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-247">The `aspnet_regsql.exe` tool's graphical user interface installs the entire application services schema.</span></span> <span data-ttu-id="9fb5c-248">Aber beim Ausführen `aspnet_regsql.exe` über die Befehlszeile können Sie angeben, welche bestimmten Anwendung services-Komponenten zu installieren (oder entfernen).</span><span class="sxs-lookup"><span data-stu-id="9fb5c-248">But when executing `aspnet_regsql.exe` from the command-line you can specify what particular application services components to install (or remove).</span></span> <span data-ttu-id="9fb5c-249">Aus diesem Grund sollten Sie nur die Tabellen, Ansichten, und gespeicherte Prozeduren, die für die `SqlMembershipProvider` und `SqlRoleProvider` Anbieter führen `aspnet_regsql.exe` über die Befehlszeile.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-249">Therefore, if you want to add just the tables, views, and stored procedures necessary for the `SqlMembershipProvider` and `SqlRoleProvider` providers, run `aspnet_regsql.exe` from the command-line.</span></span> <span data-ttu-id="9fb5c-250">Alternativ Sie können manuell ausführen, die entsprechende Teilmenge von T-SQL-Skripts, die von verwendet erstellen `aspnet_regsql.exe`.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-250">Alternatively, you can manually run the appropriate subset of T-SQL create scripts used by `aspnet_regsql.exe`.</span></span> <span data-ttu-id="9fb5c-251">Diese Skripts befinden sich in der `WINDIR%\Microsoft.Net\Framework\v2.0.50727\` Ordner mit Namen wie z. B. `InstallCommon.sql`,`InstallMembership.sql`,`InstallRoles.sql`, `InstallProfile.sql`,`InstallSqlState.sql`und so weiter.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-251">These scripts are located in the `WINDIR%\Microsoft.Net\Framework\v2.0.50727\` folder with names like `InstallCommon.sql`,`InstallMembership.sql`,`InstallRoles.sql`, `InstallProfile.sql`,`InstallSqlState.sql`, and so on.</span></span>


<span data-ttu-id="9fb5c-252">Wir haben an diesem Punkt die erforderlichen Datenbankobjekte erstellt die `SqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-252">At this point we have created the database objects needed by the `SqlMembershipProvider`.</span></span> <span data-ttu-id="9fb5c-253">Aber wir benötigen, um dem mitgliedschaftsframework anzuweisen, verwendet werden soll die `SqlMembershipProvider` (im Vergleich zu, z. B., wird die `ActiveDirectoryMembershipProvider`) und die `SqlMembershipProvider` sollten die `SecurityTutorials` Datenbank.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-253">However, we still need to instruct the Membership framework that it should use the `SqlMembershipProvider` (versus, say, the `ActiveDirectoryMembershipProvider`) and that the `SqlMembershipProvider` should use the `SecurityTutorials` database.</span></span> <span data-ttu-id="9fb5c-254">Wie an welchen Anbieter verwenden und Anpassen von Einstellungen für den ausgewählten Anbieter in Schritt 4 näher.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-254">We'll look at how to specify what provider to use and how to customize the selected provider's settings in Step 4.</span></span> <span data-ttu-id="9fb5c-255">Zuerst wird aber werfen wir einen tieferen Einblick in die Datenbankobjekte, die gerade erstellt wurden.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-255">But first, let's take a deeper look at the database objects that were just created.</span></span>

## <a name="step-3-a-look-at-the-schemas-core-tables"></a><span data-ttu-id="9fb5c-256">Schritt 3: Einen Blick auf die Haupttabellen des Schemas</span><span class="sxs-lookup"><span data-stu-id="9fb5c-256">Step 3: A Look at the Schema's Core Tables</span></span>

<span data-ttu-id="9fb5c-257">Bei der Arbeit mit den Frameworks Mitgliedschaften und Rollen in einer ASP.NET-Anwendung werden die Details der Implementierung durch den Anbieter gekapselt.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-257">When working with the Membership and Roles frameworks in an ASP.NET application, the implementation details are encapsulated by the provider.</span></span> <span data-ttu-id="9fb5c-258">In Zukunft wir eine mit dieser Frameworks über die .NET Framework Verbindung werden Tutorials `Membership` und `Roles` Klassen.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-258">In future tutorials we will interface with these frameworks via the .NET Framework's `Membership` and `Roles` classes.</span></span> <span data-ttu-id="9fb5c-259">Wenn Sie diese APIs auf höherer Ebene verwenden wir müssen nicht befassen uns mit den Low-Level-Details, wie z. B. welche Abfragen ausgeführt werden oder welche Tabellen geändert werden, indem die `SqlMembershipProvider` und `SqlRoleProvider`.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-259">When using these high-level APIs we do not need to concern ourselves with the low-level details, like what queries are executed or what tables are modified by the `SqlMembershipProvider` and `SqlRoleProvider`.</span></span>

<span data-ttu-id="9fb5c-260">Angesichts konnte wir zuverlässig die Mitgliedschaft und Rollen Frameworks verwenden, ohne dass untersucht das Datenbankschema, die in Schritt2 erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-260">Given this, we could confidently use the Membership and Roles frameworks without having explored the database schema created in Step 2.</span></span> <span data-ttu-id="9fb5c-261">Beim Erstellen der Tabellen zum Speichern von Anwendungsdaten müssen wir jedoch Entitäten zu erstellen, die Benutzern oder Rollen beziehen.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-261">However, when creating the tables to store application data we may need to create entities that relate to users or roles.</span></span> <span data-ttu-id="9fb5c-262">Werden kann, Vertrautheit mit der `SqlMembershipProvider` und `SqlRoleProvider` Schemas beim Herstellen der foreign key Einschränkungen zwischen der Anwendung von Datentabellen und diese Tabellen, die in Schritt2 erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-262">It helps to have a familiarity with the `SqlMembershipProvider` and `SqlRoleProvider` schemas when establishing foreign key constraints between the application data tables and those tables created in Step 2.</span></span> <span data-ttu-id="9fb5c-263">Darüber hinaus in bestimmten seltenen Fällen müssen wir möglicherweise die Benutzeroberfläche und die Webrolle speichert, direkt auf Datenbankebene (statt über die `Membership` oder `Roles` Klassen).</span><span class="sxs-lookup"><span data-stu-id="9fb5c-263">Moreover, in certain rare circumstances we may need to interface with the user and role stores directly at the database level (instead of through the `Membership` or `Roles` classes).</span></span>

### <a name="partitioning-the-user-store-into-applications"></a><span data-ttu-id="9fb5c-264">Partitionieren die Benutzer-Store in Anwendungen</span><span class="sxs-lookup"><span data-stu-id="9fb5c-264">Partitioning the User Store Into Applications</span></span>

<span data-ttu-id="9fb5c-265">Die Mitgliedschaft und Rollen Frameworks sind so entworfen, dass viele verschiedene Anwendungen ein einzelnen Benutzer und die Rolle der Speicher freigegeben werden kann.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-265">The Membership and Roles frameworks are designed such that a single user and role store can be shared among many different applications.</span></span> <span data-ttu-id="9fb5c-266">Eine ASP.NET-Anwendung, die die Mitgliedschaft oder Rollen-Frameworks verwendet, muss zu verwenden, welche Anwendungspartition angeben.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-266">An ASP.NET application that uses the Membership or Roles frameworks must specify what application partition to use.</span></span> <span data-ttu-id="9fb5c-267">Kurz gesagt, können sich mehrere Webanwendungen auf den gleichen Speicher für Benutzer und die Rolle aus.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-267">In short, multiple web applications can use the same user and role stores.</span></span> <span data-ttu-id="9fb5c-268">Abbildung 11 zeigt Benutzer und die Rolle speichert, die in drei Anwendungen partitioniert sind: HRSite CustomerSite und SalesSite.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-268">Figure 11 depicts user and role stores that are partitioned into three applications: HRSite, CustomerSite, and SalesSite.</span></span> <span data-ttu-id="9fb5c-269">Diese drei Webanwendungen, jeweils ihre eigenen eindeutigen Benutzer und Rollen haben, aber physisch speichern sie alle ihre Benutzer-Konto und die entsprechende Informationen in den gleichen Datenbanktabellen.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-269">These three web applications each have their own unique users and roles, yet they all physically store their user account and role information in the same database tables.</span></span>


<span data-ttu-id="9fb5c-270">[![Benutzerkonten können über mehrere Anwendungen hinweg partitioniert werden](creating-the-membership-schema-in-sql-server-cs/_static/image32.png)](creating-the-membership-schema-in-sql-server-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="9fb5c-270">[![User Accounts May Be Partitioned Across Multiple Applications](creating-the-membership-schema-in-sql-server-cs/_static/image32.png)](creating-the-membership-schema-in-sql-server-cs/_static/image31.png)</span></span>

<span data-ttu-id="9fb5c-271">**Abbildung 11**: Benutzerkonten möglicherweise werden partitioniert, über mehrere Anwendungen ([klicken Sie, um das Bild in voller Größe anzeigen](creating-the-membership-schema-in-sql-server-cs/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="9fb5c-271">**Figure 11**: User Accounts May Be Partitioned Across Multiple Applications ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image33.png))</span></span>


<span data-ttu-id="9fb5c-272">Die `aspnet_Applications` Tabelle ist, was diese Partitionen definiert.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-272">The `aspnet_Applications` table is what defines these partitions.</span></span> <span data-ttu-id="9fb5c-273">Jede Anwendung, die die Datenbank zum Speichern von Informationen für das Benutzerkonto verwendet, wird durch eine Zeile in dieser Tabelle dargestellt.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-273">Each application that uses the database to store user account information is represented by a row in this table.</span></span> <span data-ttu-id="9fb5c-274">Die `aspnet_Applications` Tabelle weist vier Spalten: `ApplicationId`, `ApplicationName`, `LoweredApplicationName`, und `Description`.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-274">The `aspnet_Applications` table has four columns: `ApplicationId`, `ApplicationName`, `LoweredApplicationName`, and `Description`.</span></span> <span data-ttu-id="9fb5c-275">`ApplicationId` ist vom Typ [ `uniqueidentifier` ](https://msdn.microsoft.com/library/ms187942.aspx) und ist der Primärschlüssel der Tabelle `ApplicationName` stellt einen eindeutigen Benutzerfreundlicher Namen für jede Anwendung bereit.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-275">`ApplicationId` is of type [`uniqueidentifier`](https://msdn.microsoft.com/library/ms187942.aspx) and is the table's primary key; `ApplicationName` provides a unique human-friendly name for each application.</span></span>

<span data-ttu-id="9fb5c-276">Die anderen Mitgliedschaft und Rollen-bezogenen Tabellen zu verknüpfen, an die `ApplicationId` Feld `aspnet_Applications`.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-276">The other Membership- and Role-related tables link back to the `ApplicationId` field in `aspnet_Applications`.</span></span> <span data-ttu-id="9fb5c-277">Z. B. die `aspnet_Users` -Tabelle, die einen Datensatz für jedes erstellte Benutzerkonto enthält, verfügt über eine `ApplicationId` Fremdschlüsselfeld; dasselbe gilt für die `aspnet_Roles` Tabelle.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-277">For example, the `aspnet_Users` table, which contains a record for each user account, has an `ApplicationId` foreign key field; ditto for the `aspnet_Roles` table.</span></span> <span data-ttu-id="9fb5c-278">Die `ApplicationId` Feld in diesen Tabellen gibt das Benutzerkonto, das an der Anwendungspartition oder Rolle gehört.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-278">The `ApplicationId` field in these tables specifies the application partition the user account or role belongs to.</span></span>

### <a name="storing-user-account-information"></a><span data-ttu-id="9fb5c-279">Das Speichern von Benutzerkontoinformationen</span><span class="sxs-lookup"><span data-stu-id="9fb5c-279">Storing User Account Information</span></span>

<span data-ttu-id="9fb5c-280">Informationen für das Benutzerkonto wird in zwei Tabellen mit einem: `aspnet_Users` und `aspnet_Membership`.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-280">User account information is housed in two tables: `aspnet_Users` and `aspnet_Membership`.</span></span> <span data-ttu-id="9fb5c-281">Die `aspnet_Users` Tabelle enthält Felder, die die grundlegende Informationen zum Benutzerkonto enthalten.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-281">The `aspnet_Users` table contains fields that hold the essential user account information.</span></span> <span data-ttu-id="9fb5c-282">Die drei wichtigsten Spalten sind:</span><span class="sxs-lookup"><span data-stu-id="9fb5c-282">The three most pertinent columns are:</span></span>

- `UserId`
- `UserName`
- `ApplicationId`

<span data-ttu-id="9fb5c-283">`UserId` ist der primäre Schlüssel (und vom Typ `uniqueidentifier`).</span><span class="sxs-lookup"><span data-stu-id="9fb5c-283">`UserId` is the primary key (and of type `uniqueidentifier`).</span></span> <span data-ttu-id="9fb5c-284">`UserName` ist vom Typ `nvarchar(256)` und, zusammen mit dem Kennwort die Anmeldeinformationen des Benutzers besteht.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-284">`UserName` is of type `nvarchar(256)` and, along with the password, makes up the user's credentials.</span></span> <span data-ttu-id="9fb5c-285">(Das Kennwort eines Benutzers befindet sich in der `aspnet_Membership` Tabelle.) `ApplicationId` verknüpft das Benutzerkonto, das auf eine bestimmte Anwendung in `aspnet_Applications`.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-285">(A user's password is stored in the `aspnet_Membership` table.) `ApplicationId` links the user account to a particular application in `aspnet_Applications`.</span></span> <span data-ttu-id="9fb5c-286">Es ist eine Zusammensetzung [ `UNIQUE` Einschränkung](https://msdn.microsoft.com/library/ms191166.aspx) auf die `UserName` und `ApplicationId` Spalten.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-286">There is a composite [`UNIQUE` constraint](https://msdn.microsoft.com/library/ms191166.aspx) on the `UserName` and `ApplicationId` columns.</span></span> <span data-ttu-id="9fb5c-287">Dadurch wird sichergestellt, dass in einer bestimmten Anwendung alle Benutzernamen eindeutig ist, aber es, für den gleichen ermöglicht `UserName` in verschiedenen Anwendungen verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-287">This ensures that in a given application each UserName is unique, yet it allows for the same `UserName` to be used in different applications.</span></span>

<span data-ttu-id="9fb5c-288">Die `aspnet_Membership` Tabelle enthält zusätzliche Benutzerkontoinformationen, z. B. das Kennwort des Benutzers, e-Mail-Adresse, die letzte Anmeldedatum und Zeit und So weiter.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-288">The `aspnet_Membership` table includes additional user account information, like the user's password, email address, the last login date and time, and so forth.</span></span> <span data-ttu-id="9fb5c-289">Besteht eine 1: 1-Entsprechung zwischen Datensätzen in der `aspnet_Users` und `aspnet_Membership` Tabellen.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-289">There is a one-to-one correspondence between records in the `aspnet_Users` and `aspnet_Membership` tables.</span></span> <span data-ttu-id="9fb5c-290">Diese Beziehung wird durch die sichergestellt, dass die `UserId` Feld `aspnet_Membership`, der als Primärschlüssel der Tabelle dient.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-290">This relationship is ensured by the `UserId` field in `aspnet_Membership`, which serves as the table's primary key.</span></span> <span data-ttu-id="9fb5c-291">Wie die `aspnet_Users` Tabelle `aspnet_Membership` enthält ein `ApplicationId` Feld, das diese Informationen, um eine bestimmte Anwendungspartition gebunden.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-291">Like the `aspnet_Users` table, `aspnet_Membership` includes an `ApplicationId` field that ties this information to a particular application partition.</span></span>

### <a name="securing-passwords"></a><span data-ttu-id="9fb5c-292">Schützen von Kennwörtern</span><span class="sxs-lookup"><span data-stu-id="9fb5c-292">Securing Passwords</span></span>

<span data-ttu-id="9fb5c-293">Informationen zum Kennwort befindet sich in der `aspnet_Membership` Tabelle.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-293">Password information is stored in the `aspnet_Membership` table.</span></span> <span data-ttu-id="9fb5c-294">Die `SqlMembershipProvider` für Kennwörter in der Datenbank, die mit einer der folgenden drei Methoden gespeichert werden können:</span><span class="sxs-lookup"><span data-stu-id="9fb5c-294">The `SqlMembershipProvider` allows for passwords to be stored in the database using one of the following three techniques:</span></span>

- <span data-ttu-id="9fb5c-295">**Klare** -das Kennwort wird in der Datenbank als nur-Text gespeichert.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-295">**Clear** - the password is stored in the database as plain-text.</span></span> <span data-ttu-id="9fb5c-296">Ich Raten dringend ab, mit dieser Option.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-296">I strongly discourage using this option.</span></span> <span data-ttu-id="9fb5c-297">Wenn die Datenbank beschädigt ist es von einem Hacker werden, findet eine Hintertür oder ein verärgerter Mitarbeiter, wer Datenbankzugriff hat - - sind Anmeldeinformationen für jeden einzelnen Benutzer es nehmen.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-297">If the database is compromised - be it by a hacker who finds a back door or a disgruntled employee who has database access - every single user's credentials are there for the taking.</span></span>
- <span data-ttu-id="9fb5c-298">**Gehasht** --Kennwörter werden mithilfe eines unidirektionalen Hashalgorithmus und eines zufällig generierten Saltwerts.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-298">**Hashed** - passwords are hashed using a one-way hash algorithm and a randomly generated salt value.</span></span> <span data-ttu-id="9fb5c-299">Dieser Hashwert (zusammen mit den Salt-Wert) wird in der Datenbank gespeichert.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-299">This hashed value (along with the salt) is stored in the database.</span></span>
- <span data-ttu-id="9fb5c-300">**Verschlüsselt** -eine verschlüsselte Version des Kennworts in der Datenbank gespeichert ist.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-300">**Encrypted** - an encrypted version of the password is stored in the database.</span></span>

<span data-ttu-id="9fb5c-301">Das Kennwort-Speicher-Verfahren verwendet, hängt die `SqlMembershipProvider` in angegebenen Einstellungen `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-301">The password storage technique used depends on the `SqlMembershipProvider` settings specified in `Web.config`.</span></span> <span data-ttu-id="9fb5c-302">Wir sehen uns das Anpassen der `SqlMembershipProvider` Einstellungen werden in Schritt 4.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-302">We will look at customizing the `SqlMembershipProvider` settings in Step 4.</span></span> <span data-ttu-id="9fb5c-303">Das Standardverhalten ist zum Speichern der Hash des Kennworts.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-303">The default behavior is to store the hash of the password.</span></span>

<span data-ttu-id="9fb5c-304">Die Spalten, die verantwortlich für das Speichern des Kennworts sind `Password`, `PasswordFormat`, und `PasswordSalt`.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-304">The columns responsible for storing the password are `Password`, `PasswordFormat`, and `PasswordSalt`.</span></span> <span data-ttu-id="9fb5c-305">`PasswordFormat` ist ein Feld vom Typ `int` , deren Wert angibt, das Verfahren zum Speichern des Kennworts: 0 für deaktivieren; 1 für Hashed; 2 für verschlüsselt.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-305">`PasswordFormat` is a field of type `int` whose value indicates the technique used for storing the password: 0 for Clear; 1 for Hashed; 2 for Encrypted.</span></span> <span data-ttu-id="9fb5c-306">`PasswordSalt` wird eine zufällig generierte Zeichenfolge unabhängig vom verwendeten Verfahren Storage Kennwort zugewiesen. der Wert des `PasswordSalt` wird nur verwendet, bei der Berechnung der Hash des Kennworts.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-306">`PasswordSalt` is assigned a randomly generated string regardless of the password storage technique used; the value of `PasswordSalt` is only used when computing the hash of the password.</span></span> <span data-ttu-id="9fb5c-307">Zum Schluss die `Password` Spalte enthält die tatsächlichen Daten, z. B. auf das nur-Text-Kennwort angegeben haben, wird der Hash des Kennworts oder das verschlüsselte Kennwort.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-307">Finally, the `Password` column contains the actual password data, be it the plain-text password, the hash of the password, or the encrypted password.</span></span>

<span data-ttu-id="9fb5c-308">Tabelle 1 wird veranschaulicht, wie diese drei Spalten für die verschiedenen Speicher-Techniken aussehen könnte beim Speichern des Kennworts MeinGeheimnis!</span><span class="sxs-lookup"><span data-stu-id="9fb5c-308">Table 1 illustrates what these three columns might look like for the various storage techniques when storing the password MySecret!</span></span> <span data-ttu-id="9fb5c-309">sein.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-309">.</span></span>

| <span data-ttu-id="9fb5c-310">**Speicher-Technik&lt;\_o3a\_p /&gt;**</span><span class="sxs-lookup"><span data-stu-id="9fb5c-310">**Storage Technique&lt;\_o3a\_p /&gt;**</span></span> | <span data-ttu-id="9fb5c-311">**Kennwort&lt;\_o3a\_p /&gt;**</span><span class="sxs-lookup"><span data-stu-id="9fb5c-311">**Password&lt;\_o3a\_p /&gt;**</span></span> | <span data-ttu-id="9fb5c-312">**PasswordFormat&lt;\_o3a\_p /&gt;**</span><span class="sxs-lookup"><span data-stu-id="9fb5c-312">**PasswordFormat&lt;\_o3a\_p /&gt;**</span></span> | <span data-ttu-id="9fb5c-313">**PasswordSalt&lt;\_o3a\_p /&gt;**</span><span class="sxs-lookup"><span data-stu-id="9fb5c-313">**PasswordSalt&lt;\_o3a\_p /&gt;**</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="9fb5c-314">Clear</span><span class="sxs-lookup"><span data-stu-id="9fb5c-314">Clear</span></span> | <span data-ttu-id="9fb5c-315">MeinGeheimnis!</span><span class="sxs-lookup"><span data-stu-id="9fb5c-315">MySecret!</span></span> | <span data-ttu-id="9fb5c-316">0</span><span class="sxs-lookup"><span data-stu-id="9fb5c-316">0</span></span> | <span data-ttu-id="9fb5c-317">tTnkPlesqissc2y2SMEygA==</span><span class="sxs-lookup"><span data-stu-id="9fb5c-317">tTnkPlesqissc2y2SMEygA==</span></span> |
| <span data-ttu-id="9fb5c-318">Hashwert</span><span class="sxs-lookup"><span data-stu-id="9fb5c-318">Hashed</span></span> | <span data-ttu-id="9fb5c-319">2oXm6sZHWbTHFgjgkGQsc2Ec9ZM=</span><span class="sxs-lookup"><span data-stu-id="9fb5c-319">2oXm6sZHWbTHFgjgkGQsc2Ec9ZM=</span></span> | <span data-ttu-id="9fb5c-320">1</span><span class="sxs-lookup"><span data-stu-id="9fb5c-320">1</span></span> | <span data-ttu-id="9fb5c-321">wFgjUfhdUFOCKQiI61vtiQ==</span><span class="sxs-lookup"><span data-stu-id="9fb5c-321">wFgjUfhdUFOCKQiI61vtiQ==</span></span> |
| <span data-ttu-id="9fb5c-322">Verschlüsselt</span><span class="sxs-lookup"><span data-stu-id="9fb5c-322">Encrypted</span></span> | <span data-ttu-id="9fb5c-323">62RZgDvhxykkqsMchZ0Yly7HS6onhpaoCYaRxV8g0F4CW56OXUU3e7Inza9j9BKp</span><span class="sxs-lookup"><span data-stu-id="9fb5c-323">62RZgDvhxykkqsMchZ0Yly7HS6onhpaoCYaRxV8g0F4CW56OXUU3e7Inza9j9BKp</span></span> | <span data-ttu-id="9fb5c-324">2</span><span class="sxs-lookup"><span data-stu-id="9fb5c-324">2</span></span> | <span data-ttu-id="9fb5c-325">LSRzhGS/aa/oqAXGLHJNBw==</span><span class="sxs-lookup"><span data-stu-id="9fb5c-325">LSRzhGS/aa/oqAXGLHJNBw==</span></span> |

<span data-ttu-id="9fb5c-326">**Tabelle 1**: Beispielwerte für die Kennwort-bezogene Felder beim Speichern der Kennwort-MeinGeheimnis!</span><span class="sxs-lookup"><span data-stu-id="9fb5c-326">**Table 1**: Example Values for the Password-Related Fields When Storing the Password MySecret!</span></span>

> [!NOTE]
> <span data-ttu-id="9fb5c-327">Die bestimmten Verschlüsselung oder von verwendeten Hashalgorithmus die `SqlMembershipProvider` richtet sich nach den Einstellungen in der `<machineKey>` Element.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-327">The particular encryption or hashing algorithm used by the `SqlMembershipProvider` is determined by the settings in the `<machineKey>` element.</span></span> <span data-ttu-id="9fb5c-328">Dieses Konfigurationselement in Schritt 3 des erörtert die <a id="Tutorial3"> </a> [ *Konfiguration der Formularauthentifizierung und Weiterführende Themen* ](../introduction/forms-authentication-configuration-and-advanced-topics-cs.md) Tutorial.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-328">We discussed this configuration element in Step 3 of the <a id="Tutorial3"></a>[*Forms Authentication Configuration and Advanced Topics*](../introduction/forms-authentication-configuration-and-advanced-topics-cs.md) tutorial.</span></span>


### <a name="storing-roles-and-role-associations"></a><span data-ttu-id="9fb5c-329">Das Speichern von Rollen und die Rollenzuordnungen</span><span class="sxs-lookup"><span data-stu-id="9fb5c-329">Storing Roles and Role Associations</span></span>

<span data-ttu-id="9fb5c-330">Die Rollen-Framework kann Entwickler eine Reihe von Rollen zu definieren und angeben, welche Benutzer welche Rollen angehören.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-330">The Roles framework allows developers to define a set of roles and specify what users belong to what roles.</span></span> <span data-ttu-id="9fb5c-331">Diese Informationen werden erfasst, in der Datenbank über zwei Tabellen: `aspnet_Roles` und `aspnet_UsersInRoles`.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-331">This information is captured in the database through two tables: `aspnet_Roles` and `aspnet_UsersInRoles`.</span></span> <span data-ttu-id="9fb5c-332">Jeder Datensatz in die `aspnet_Roles` Tabelle stellt eine Rolle für eine bestimmte Anwendung dar.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-332">Each record in the `aspnet_Roles` table represents a role for a particular application.</span></span> <span data-ttu-id="9fb5c-333">Ähnlich wie die `aspnet_Users` Tabelle, die `aspnet_Roles` Tabelle enthält drei Spalten, die für unsere Diskussion relevant sind:</span><span class="sxs-lookup"><span data-stu-id="9fb5c-333">Much like the `aspnet_Users` table, the `aspnet_Roles` table has three columns pertinent to our discussion:</span></span>

- `RoleId`
- `RoleName`
- `ApplicationId`

<span data-ttu-id="9fb5c-334">`RoleId` ist der primäre Schlüssel (und vom Typ `uniqueidentifier`).</span><span class="sxs-lookup"><span data-stu-id="9fb5c-334">`RoleId` is the primary key (and of type `uniqueidentifier`).</span></span> <span data-ttu-id="9fb5c-335">`RoleName` ist vom Typ `nvarchar(256)`.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-335">`RoleName` is of type `nvarchar(256)`.</span></span> <span data-ttu-id="9fb5c-336">Und `ApplicationId` verknüpft das Benutzerkonto, das auf eine bestimmte Anwendung in `aspnet_Applications`.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-336">And `ApplicationId` links the user account to a particular application in `aspnet_Applications`.</span></span> <span data-ttu-id="9fb5c-337">Es ist eine Zusammensetzung `UNIQUE` -Einschränkung für die `RoleName` und `ApplicationId` Spalten, die sicherstellen, dass in einer bestimmten Anwendung jeder Rollenname eindeutig ist.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-337">There is a composite `UNIQUE` constraint on the `RoleName` and `ApplicationId` columns, ensuring that in a given application each role name is unique.</span></span>

<span data-ttu-id="9fb5c-338">Die `aspnet_UsersInRoles` Tabelle dient als eine Zuordnung zwischen Benutzern und Rollen.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-338">The `aspnet_UsersInRoles` table serves as a mapping between users and roles.</span></span> <span data-ttu-id="9fb5c-339">Es gibt nur zwei Spalten – `UserId` und `RoleId` – und sie bilden zusammen einen zusammengesetzten Primärschlüssel.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-339">There are only two columns - `UserId` and `RoleId` - and together they make up a composite primary key.</span></span>

## <a name="step-4-specifying-the-provider-and-customizing-its-settings"></a><span data-ttu-id="9fb5c-340">Schritt 4: Angeben des Anbieters und Anpassung der Einstellungen</span><span class="sxs-lookup"><span data-stu-id="9fb5c-340">Step 4: Specifying the Provider and Customizing Its Settings</span></span>

<span data-ttu-id="9fb5c-341">Alle von den Frameworks, die Unterstützung für das Providermodell – z. B. die Mitgliedschaft und Rollen Frameworks - Implementierungsdetails selbst fehlt und stattdessen diese Aufgabe delegieren, auf eine Anbieterklasse.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-341">All of the frameworks that support the provider model - such as the Membership and Roles frameworks - lack implementation details themselves and instead delegate that responsibility to a provider class.</span></span> <span data-ttu-id="9fb5c-342">Im Fall von das mitgliedschaftsframework der `Membership` Klasse definiert die API zum Verwalten von Benutzerkonten, aber es interagiert nicht direkt mit jedem Benutzerspeicher.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-342">In the case of the Membership framework, the `Membership` class defines the API for managing user accounts, but it does not interact directly with any user store.</span></span> <span data-ttu-id="9fb5c-343">Vielmehr die `Membership` die Anforderung an den konfigurierten Anbieter - Klasse Methoden übergeben wir verwenden die `SqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-343">Rather, the `Membership` class's methods hand off the request to the configured provider - we will be using the `SqlMembershipProvider`.</span></span> <span data-ttu-id="9fb5c-344">Wenn wir Aufrufen einer der Methoden in der `Membership` -Klasse, wie das mitgliedschaftsframework weiß, delegieren den Aufruf der `SqlMembershipProvider`?</span><span class="sxs-lookup"><span data-stu-id="9fb5c-344">When we invoke one of the methods in the `Membership` class, how does the Membership framework know to delegate the call to the `SqlMembershipProvider`?</span></span>

<span data-ttu-id="9fb5c-345">Die `Membership` -Klasse verfügt über eine [ `Providers` Eigenschaft](https://msdn.microsoft.com/library/system.web.security.membership.providers.aspx) , die einen Verweis auf alle registrierten Anbieterklassen verfügbar, für die Verwendung durch das mitgliedschaftsframework enthält.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-345">The `Membership` class has a [`Providers` property](https://msdn.microsoft.com/library/system.web.security.membership.providers.aspx) that contains a reference to all of the registered provider classes available for use by the Membership framework.</span></span> <span data-ttu-id="9fb5c-346">Jeder registrierter Anbieter verfügt über einen zugeordneten Namen und Typ.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-346">Each registered provider has an associated name and type.</span></span> <span data-ttu-id="9fb5c-347">Der Name bietet eine Möglichkeit Benutzerfreundlicher auf einen bestimmten Anbieter in der `Providers` Sammlung, während Sie den Typ die Provider-Klasse angibt.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-347">The name offers a human-friendly way to reference a particular provider in the `Providers` collection, while the type identifies the provider class.</span></span> <span data-ttu-id="9fb5c-348">Darüber hinaus kann jedes registrierter Anbieter-Konfigurationseinstellungen enthalten.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-348">Moreover, each registered provider may include configuration settings.</span></span> <span data-ttu-id="9fb5c-349">Konfigurationseinstellungen für das mitgliedschaftsframework `passwordFormat` und `requiresUniqueEmail`, unter anderem.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-349">Configuration settings for the Membership framework include `passwordFormat` and `requiresUniqueEmail`, among many others.</span></span> <span data-ttu-id="9fb5c-350">Finden Sie in Tabelle 2 für eine vollständige Liste der von verwendeten Konfigurationseinstellungen die `SqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-350">See Table 2 for a complete list of configuration settings used by the `SqlMembershipProvider`.</span></span>

<span data-ttu-id="9fb5c-351">Die `Providers` Inhalt Eigenschaft angegeben sind, über die Konfigurationseinstellungen für die Webanwendung.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-351">The `Providers` property's contents are specified through the web application's configuration settings.</span></span> <span data-ttu-id="9fb5c-352">Standardmäßig alle Webanwendungen verfügen über einen Anbieter, die mit dem Namen `AspNetSqlMembershipProvider` des Typs `SqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-352">By default, all web applications have a provider named `AspNetSqlMembershipProvider` of type `SqlMembershipProvider`.</span></span> <span data-ttu-id="9fb5c-353">In diesem Standard-Mitgliedschaftsanbieter registriert ist `machine.config` (am `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\CONFIG)`:</span><span class="sxs-lookup"><span data-stu-id="9fb5c-353">This default Membership provider is registered in `machine.config` (located at `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\CONFIG)`:</span></span>

[!code-xml[Main](creating-the-membership-schema-in-sql-server-cs/samples/sample1.xml)]

<span data-ttu-id="9fb5c-354">Als Markup oben dargestellt die [ `<membership>` Element](https://msdn.microsoft.com/library/1b9hw62f.aspx) definiert die Konfigurationseinstellungen für das mitgliedschaftsframework während der [ `<providers>` untergeordnetes Element](https://msdn.microsoft.com/library/6d4936ht.aspx) gibt an, den registrierten Anbieter.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-354">As the markup above shows, the [`<membership>` element](https://msdn.microsoft.com/library/1b9hw62f.aspx) defines the configuration settings for the Membership framework while the [`<providers>` child element](https://msdn.microsoft.com/library/6d4936ht.aspx) specifies the registered providers.</span></span> <span data-ttu-id="9fb5c-355">Anbieter können hinzugefügt oder entfernt werden mithilfe der [ `<add>` ](https://msdn.microsoft.com/library/whae3t94.aspx) oder [ `<remove>` ](https://msdn.microsoft.com/library/aykw9a6d.aspx) Elemente; verwenden Sie stattdessen die [ `<clear>` ](https://msdn.microsoft.com/library/t062y6yc.aspx) Elements, das alle derzeit entfernt registrierten Anbieter.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-355">Providers may be added or removed using the [`<add>`](https://msdn.microsoft.com/library/whae3t94.aspx) or [`<remove>`](https://msdn.microsoft.com/library/aykw9a6d.aspx) elements; use the [`<clear>`](https://msdn.microsoft.com/library/t062y6yc.aspx) element to remove all currently registered providers.</span></span> <span data-ttu-id="9fb5c-356">Als Markup oben dargestellt `machine.config` Fügt einen Anbieter mit dem Namen `AspNetSqlMembershipProvider` des Typs `SqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-356">As the markup above shows, `machine.config` adds a provider named `AspNetSqlMembershipProvider` of type `SqlMembershipProvider`.</span></span>

<span data-ttu-id="9fb5c-357">Zusätzlich zu den `name` und `type` Attribute, die `<add>` Element enthält Attribute, die die Werte für verschiedene Konfigurationseinstellungen zu definieren.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-357">In addition to the `name` and `type` attributes, the `<add>` element contains attributes that define the values for various configuring settings.</span></span> <span data-ttu-id="9fb5c-358">Tabelle 2 werden die verfügbaren `SqlMembershipProvider`-bestimmte Konfigurationseinstellungen festgelegt werden, zusammen mit einer Beschreibung der einzelnen.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-358">Table 2 lists the available `SqlMembershipProvider`-specific configuration settings, along with a description of each.</span></span>

> [!NOTE]
> <span data-ttu-id="9fb5c-359">In Tabelle 2 notiert haben Standardwerte finden Sie auf die Standardwerte definiert, der `SqlMembershipProvider` Klasse.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-359">Any default values noted in Table 2 refer to the default values defined in the `SqlMembershipProvider` class.</span></span> <span data-ttu-id="9fb5c-360">Beachten Sie, dass nicht alle Konfigurationseinstellungen in `AspNetSqlMembershipProvider` entsprechen die Standardwerte für die `SqlMembershipProvider` Klasse.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-360">Note that not all of the configuration settings in `AspNetSqlMembershipProvider` correspond to the default values of the `SqlMembershipProvider` class.</span></span> <span data-ttu-id="9fb5c-361">Angenommen, nicht in einen Mitgliedschaftsanbieter angegeben die `requiresUniqueEmail` standardmäßig auf "true" festlegen.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-361">For example, if not specified in a Membership provider, the `requiresUniqueEmail` setting defaults to true.</span></span> <span data-ttu-id="9fb5c-362">Allerdings die `AspNetSqlMembershipProvider` überschreibt diesen Wert durch explizite Angabe der Wert `false`.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-362">However, the `AspNetSqlMembershipProvider` overrides this default value by explicitly specifying a value of `false`.</span></span>


| <span data-ttu-id="9fb5c-363">**Festlegen von&lt;\_o3a\_p /&gt;**</span><span class="sxs-lookup"><span data-stu-id="9fb5c-363">**Setting&lt;\_o3a\_p /&gt;**</span></span> | <span data-ttu-id="9fb5c-364">**Beschreibung&lt;\_o3a\_p /&gt;**</span><span class="sxs-lookup"><span data-stu-id="9fb5c-364">**Description&lt;\_o3a\_p /&gt;**</span></span> |
| --- | --- |
| `ApplicationName` | <span data-ttu-id="9fb5c-365">Denken Sie daran, dass das mitgliedschaftsframework für einen einzelnen Benutzerspeicher über mehrere Anwendungen hinweg partitioniert werden kann.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-365">Recall that the Membership framework allows for a single user store to be partitioned across multiple applications.</span></span> <span data-ttu-id="9fb5c-366">Diese Einstellung gibt an, den Namen der Anwendungspartition vom Mitgliedschaftsanbieter verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-366">This setting indicates the name of the application partition used by the Membership provider.</span></span> <span data-ttu-id="9fb5c-367">Wenn dieser Wert nicht explizit angegeben ist, festgelegt ist, zur Laufzeit, um den Wert der virtuelle Stammpfad der Anwendung.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-367">If this value is not explicitly specified, it is set, at runtime, to the value of the application's virtual root path.</span></span> |
| `commandTimeout` | <span data-ttu-id="9fb5c-368">Gibt den Timeoutwert für SQL-Befehl (in Sekunden) an.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-368">Specifies the SQL command timeout value (in seconds).</span></span> <span data-ttu-id="9fb5c-369">Der Standardwert ist 30.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-369">The default value is 30.</span></span> |
| `connectionStringName` | <span data-ttu-id="9fb5c-370">Der Name der Verbindungszeichenfolge in der `<connectionStrings>` Element, das für die Verbindung mit der Geschäftsdatenbank Benutzer verwendet.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-370">The name of the connection string in the `<connectionStrings>` element to use to connect to the user store database.</span></span> <span data-ttu-id="9fb5c-371">Dieser Wert ist erforderlich.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-371">This value is required.</span></span> |
| `description` | <span data-ttu-id="9fb5c-372">Enthält eine Beschreibung Benutzerfreundlicher, von der registrierten Anbieter.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-372">Provides a human-friendly description of the registered provider.</span></span> |
| `enablePasswordRetrieval` | <span data-ttu-id="9fb5c-373">Gibt an, ob Benutzer, deren Kennwort vergessen haben abrufen können.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-373">Specifies whether users may retrieve their forgotten password.</span></span> <span data-ttu-id="9fb5c-374">Der Standardwert ist `false`.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-374">The default value is `false`.</span></span> |
| `enablePasswordReset` | <span data-ttu-id="9fb5c-375">Gibt an, ob Benutzer zum Zurücksetzen des Kennworts zulässig sind.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-375">Indicates whether users are allowed to reset their password.</span></span> <span data-ttu-id="9fb5c-376">Wird standardmäßig auf `true` festgelegt.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-376">Defaults to `true`.</span></span> |
| `maxInvalidPasswordAttempts` | <span data-ttu-id="9fb5c-377">Die maximale Anzahl nicht erfolgreicher Anmeldeversuche, die für einen bestimmten Benutzer, während des angegebenen auftreten können `passwordAttemptWindow` bevor der Benutzer gesperrt wird. Der Standardwert ist 5.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-377">The maximum number of unsuccessful login attempts that may occur for a given user during the specified `passwordAttemptWindow` before the user is locked out. The default value is 5.</span></span> |
| `minRequiredNonalphanumericCharacters` | <span data-ttu-id="9fb5c-378">Die minimale Anzahl von nicht-alphanumerische Zeichen, die in das Kennwort eines Benutzers angezeigt werden müssen.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-378">The minimum number of non-alphanumeric characters that must appear in a user's password.</span></span> <span data-ttu-id="9fb5c-379">Dieser Wert muss zwischen 0 und 128 liegen; Der Standardwert ist 1.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-379">This value must be between 0 and 128; the default is 1.</span></span> |
| `minRequiredPasswordLength` | <span data-ttu-id="9fb5c-380">Die minimale Anzahl von Zeichen im Kennwort erforderlich.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-380">The minimum number of characters required in a password.</span></span> <span data-ttu-id="9fb5c-381">Dieser Wert muss zwischen 0 und 128 liegen; Der Standardwert ist 7.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-381">This value must be between 0 and 128; the default is 7.</span></span> |
| `name` | <span data-ttu-id="9fb5c-382">Der Name des der registrierten Anbieter.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-382">The name of the registered provider.</span></span> <span data-ttu-id="9fb5c-383">Dieser Wert ist erforderlich.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-383">This value is required.</span></span> |
| `passwordAttemptWindow` | <span data-ttu-id="9fb5c-384">Die Anzahl der Minuten, während der Fehler bei der Anmeldung, die versuchen, nachverfolgt werden.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-384">The number of minutes during which failed login attempts are tracked.</span></span> <span data-ttu-id="9fb5c-385">Wenn ein Benutzer ungültige Anmeldeinformationen bereitstellt `maxInvalidPasswordAttempts` Zeiträume in diesem Fenster, die sie gesperrt werden. Der Standardwert ist 10.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-385">If a user supplies invalid login credentials `maxInvalidPasswordAttempts` times within this specified window, they are locked out. The default value is 10.</span></span> |
| `PasswordFormat` | <span data-ttu-id="9fb5c-386">Das Speicherformat Kennwort: `Clear`, `Hashed`, oder `Encrypted`.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-386">The password storage format: `Clear`, `Hashed`, or `Encrypted`.</span></span> <span data-ttu-id="9fb5c-387">Die Standardeinstellung ist `Hashed`.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-387">The default is `Hashed`.</span></span> |
| `passwordStrengthRegularExpression` | <span data-ttu-id="9fb5c-388">Wenn angegeben, wird dieser reguläre Ausdruck verwendet, die Stärke des ausgewählten Kennwort des Benutzers, beim Erstellen eines neuen Kontos oder ausgewertet, wenn Sie ihr Kennwort zu ändern.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-388">If provided, this regular expression is used to evaluate the strength of the user's selected password when creating a new account or when changing their password.</span></span> <span data-ttu-id="9fb5c-389">Der Standardwert ist eine leere Zeichenfolge.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-389">The default value is an empty string.</span></span> |
| `requiresQuestionAndAnswer` | <span data-ttu-id="9fb5c-390">Gibt an, ob ein Benutzer auf seine Sicherheitsfrage, die beim Abrufen oder Zurücksetzen seines Kennworts beantworten muss.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-390">Specifies whether a user must answer his security question when retrieving or resetting his password.</span></span> <span data-ttu-id="9fb5c-391">Der Standardwert ist `true`.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-391">The default value is `true`.</span></span> |
| `requiresUniqueEmail` | <span data-ttu-id="9fb5c-392">Gibt an, ob alle Benutzerkonten in einer bestimmten Anwendungspartition eine eindeutige e-Mail-Adresse verfügen müssen.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-392">Indicates whether all user accounts in a given application partition must have a unique email address.</span></span> <span data-ttu-id="9fb5c-393">Der Standardwert ist `true`.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-393">The default value is `true`.</span></span> |
| `type` | <span data-ttu-id="9fb5c-394">Gibt den Typ des Anbieters.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-394">Specifies the type of the provider.</span></span> <span data-ttu-id="9fb5c-395">Dieser Wert ist erforderlich.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-395">This value is required.</span></span> |

<span data-ttu-id="9fb5c-396">**Tabelle 2**: Mitgliedschaft und `SqlMembershipProvider` -Konfigurationseinstellungen</span><span class="sxs-lookup"><span data-stu-id="9fb5c-396">**Table 2**: Membership and `SqlMembershipProvider` Configuration Settings</span></span>

<span data-ttu-id="9fb5c-397">Zusätzlich zu `AspNetSqlMembershipProvider`, andere Mitgliedschaftsanbieter können auf Basis von Anwendung registriert werden, durch das Hinzufügen von-Markup ähnlich dem `Web.config` Datei.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-397">In addition to `AspNetSqlMembershipProvider`, other Membership providers may be registered on an application-by-application basis by adding similar markup to the `Web.config` file.</span></span>

> [!NOTE]
> <span data-ttu-id="9fb5c-398">Im Wesentlichen die gleiche Weise funktioniert das Framework-Rollen: Es gibt einen registrierten Standardrollenanbieter in `machine.config` und registrierten Anbieter können angepasst werden, auf der Grundlage von Anwendung in `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-398">The Roles framework works in much the same way: there is a default registered role provider in `machine.config` and the registered providers may be customized on an application-by-application basis in `Web.config`.</span></span> <span data-ttu-id="9fb5c-399">Wir werden in einem späteren Tutorial das Rollen-Framework und dessen konfigurationsmarkup im Detail untersuchen.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-399">We will examine the Roles framework and its configuration markup in detail in a future tutorial.</span></span>


### <a name="customizing-thesqlmembershipprovidersettings"></a><span data-ttu-id="9fb5c-400">Anpassen der`SqlMembershipProvider`Einstellungen</span><span class="sxs-lookup"><span data-stu-id="9fb5c-400">Customizing the`SqlMembershipProvider`Settings</span></span>

<span data-ttu-id="9fb5c-401">Der Standardwert `SqlMembershipProvider` (`AspNetSqlMembershipProvider`) verfügt über seine `connectionStringName` -Attributsatz auf `LocalSqlServer`.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-401">The default `SqlMembershipProvider` (`AspNetSqlMembershipProvider`) has its `connectionStringName` attribute set to `LocalSqlServer`.</span></span> <span data-ttu-id="9fb5c-402">Wie die `AspNetSqlMembershipProvider` -Anbieter, der Name der Verbindungszeichenfolge `LocalSqlServer` ist definiert `machine.config`.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-402">Like the `AspNetSqlMembershipProvider` provider, the connection string name `LocalSqlServer` is defined in `machine.config`.</span></span>

[!code-xml[Main](creating-the-membership-schema-in-sql-server-cs/samples/sample2.xml)]

<span data-ttu-id="9fb5c-403">Wie Sie sehen können, definiert diese Verbindungszeichenfolge steht eine SQL 2005 Express Edition-Datenbank sich befindet | DataDirectory|aspnetdb. mdf befindet.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-403">As you can see, this connection string defines a SQL 2005 Express Edition database located at |DataDirectory|aspnetdb.mdf�.</span></span> <span data-ttu-id="9fb5c-404">Die Zeichenfolge | "DataDirectory" | wird zur Laufzeit, um zu zeigen übersetzt die `~/App_Data/` Verzeichnis, also den Datenbankpfad | DataDirectory|aspnetdb. mdf befindet"übersetzt in `~/App_Data` / `aspnet.mdf`.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-404">The string |DataDirectory|� is translated at runtime to point to the `~/App_Data/` directory, so the database path |DataDirectory|aspnetdb.mdf" translates to `~/App_Data`/`aspnet.mdf`.</span></span>

<span data-ttu-id="9fb5c-405">Wenn wir keine Anbieterinformationen zur Mitgliedschaft in der Anwendung angegeben haben `Web.config` -Datei, die Anwendung verwendet die registrierten Standardmitgliedschaftsanbieter, `AspNetSqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-405">If we did not specify any Membership provider information in our application's `Web.config` file, the application uses the default registered Membership provider, `AspNetSqlMembershipProvider`.</span></span> <span data-ttu-id="9fb5c-406">Wenn die `~/App_Data/aspnet.mdf` Datenbank ist nicht vorhanden, die ASP.NET-Laufzeit automatisch erstellt, und fügen Sie das Schema der Application-Dienste.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-406">If the `~/App_Data/aspnet.mdf` database does not exist, the ASP.NET runtime will automatically create it and add the application services schema.</span></span> <span data-ttu-id="9fb5c-407">Aber wir möchten nicht verwenden die `aspnet.mdf` Datenbank; stattdessen verwendet werden soll die `SecurityTutorials.mdf` Datenbank, die wir in Schritt2 erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-407">However, we don't want to use the `aspnet.mdf` database; rather, we want to use the `SecurityTutorials.mdf` database we created in Step 2.</span></span> <span data-ttu-id="9fb5c-408">Diese Änderung kann auf zwei Arten erfolgen:</span><span class="sxs-lookup"><span data-stu-id="9fb5c-408">This modification can be accomplished in one of two ways:</span></span>

- <span data-ttu-id="9fb5c-409"><strong>Geben Sie einen Wert für die</strong><strong>`LocalSqlServer`</strong><strong>Namen der Verbindungszeichenfolge der</strong><strong>`Web.config`</strong><strong>.</strong></span><span class="sxs-lookup"><span data-stu-id="9fb5c-409"><strong>Specify a value for the</strong><strong>`LocalSqlServer`</strong><strong>connection string name in</strong><strong>`Web.config`</strong><strong>.</strong></span></span> <span data-ttu-id="9fb5c-410">Durch Überschreiben der `LocalSqlServer` Name für Verbindungszeichenfolgenwert in `Web.config`, wir können den registriert Standardmitgliedschaftsanbieter verwenden (`AspNetSqlMembershipProvider`), damit er ordnungsgemäß funktioniert mit der `SecurityTutorials.mdf` Datenbank.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-410">By overwriting the `LocalSqlServer` connection string name value in `Web.config`, we can use the default registered Membership provider (`AspNetSqlMembershipProvider`) and have it correctly work with the `SecurityTutorials.mdf` database.</span></span> <span data-ttu-id="9fb5c-411">Dieser Ansatz ist in Ordnung, wenn Sie mit den Konfigurationseinstellungen, die anhand des Inhalts sind `AspNetSqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-411">This approach is fine if you are content with the configuration settings specified by `AspNetSqlMembershipProvider`.</span></span> <span data-ttu-id="9fb5c-412">Weitere Informationen zu dieser Technik finden Sie unter [Scott Guthrie](https://weblogs.asp.net/scottgu/)Blogbeitrag [Konfigurieren von ASP.NET 2.0-Anwendungsdienste für Verwenden von SQL Server 2000 oder SQL Server 2005](https://weblogs.asp.net/scottgu/archive/2005/08/25/423703.aspx).</span><span class="sxs-lookup"><span data-stu-id="9fb5c-412">For more information on this technique, see [Scott Guthrie](https://weblogs.asp.net/scottgu/)'s blog post, [Configuring ASP.NET 2.0 Application Services to Use SQL Server 2000 or SQL Server 2005](https://weblogs.asp.net/scottgu/archive/2005/08/25/423703.aspx).</span></span>
- <span data-ttu-id="9fb5c-413"><strong>Fügen Sie einen neuen registrierten Anbieter vom Typ</strong><strong>`SqlMembershipProvider`</strong><strong>und konfigurieren Sie die</strong><strong>`connectionStringName`</strong><strong>Einstellung aus, um auf dieverweisen</strong> <strong>`SecurityTutorials.mdf`</strong> <strong>Datenbank.</strong></span><span class="sxs-lookup"><span data-stu-id="9fb5c-413"><strong>Add a new registered provider of type</strong><strong>`SqlMembershipProvider`</strong><strong>and configure its</strong><strong>`connectionStringName`</strong><strong>setting to point to the</strong><strong>`SecurityTutorials.mdf`</strong><strong>database.</strong></span></span> <span data-ttu-id="9fb5c-414">Dieser Ansatz ist hilfreich in Szenarien, in dem Sie anderen Konfigurationseigenschaften, zusätzlich zu der Datenbank-Verbindungszeichenfolge anpassen möchten.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-414">This approach is useful in scenarios where you want to customize other configuration properties in addition to the database connection string.</span></span> <span data-ttu-id="9fb5c-415">In meinen eigenen Projekten verwenden ich diesen Ansatz immer aufgrund seiner Flexibilität und besseren Lesbarkeit.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-415">In my own projects I always use this approach because of its flexibility and readability.</span></span>

<span data-ttu-id="9fb5c-416">Bevor wir einen neuen registrierten Anbieter hinzufügen können, die verweist die `SecurityTutorials.mdf` -Datenbank, müssen wir zuerst eine geeignete Verbindungszeichenfolgenwert in Hinzufügen der `<connectionStrings>` im Abschnitt `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-416">Before we can add a new registered provider that references the `SecurityTutorials.mdf` database, we first need to add an appropriate connection string value in the `<connectionStrings>` section in `Web.config`.</span></span> <span data-ttu-id="9fb5c-417">Das folgende Markup Fügt eine neue Verbindungszeichenfolge, die mit dem Namen `SecurityTutorialsConnectionString` , die auf der SQL Server 2005 Express Edition `SecurityTutorials.mdf` -Datenbank in die `App_Data` Ordner.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-417">The following markup adds a new connection string named `SecurityTutorialsConnectionString` that references the SQL Server 2005 Express Edition `SecurityTutorials.mdf` database in the `App_Data` folder.</span></span>

[!code-xml[Main](creating-the-membership-schema-in-sql-server-cs/samples/sample3.xml)]

> [!NOTE]
> <span data-ttu-id="9fb5c-418">Wenn Sie eine andere Datenbank-Datei verwenden, aktualisieren Sie die Verbindungszeichenfolge.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-418">If you are using an alternate database file, update the connection string as needed.</span></span> <span data-ttu-id="9fb5c-419">Weitere Informationen dazu, die die richtige Verbindungszeichenfolge bilden, finden Sie unter [ConnectionStrings.com](http://www.connectionstrings.com/).</span><span class="sxs-lookup"><span data-stu-id="9fb5c-419">For more information on forming the correct connection string, refer to [ConnectionStrings.com](http://www.connectionstrings.com/).</span></span>

<span data-ttu-id="9fb5c-420">Fügen Sie das folgende konfigurationsmarkup von Mitgliedschaft, um die `Web.config` Datei.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-420">Next, add the following Membership configuration markup to the `Web.config` file.</span></span> <span data-ttu-id="9fb5c-421">Dieses Markup registriert einen neuen Anbieter mit dem Namen `SecurityTutorialsSqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-421">This markup registers a new provider named `SecurityTutorialsSqlMembershipProvider`.</span></span>

[!code-xml[Main](creating-the-membership-schema-in-sql-server-cs/samples/sample4.xml)]

<span data-ttu-id="9fb5c-422">Neben der Registrierung der `SecurityTutorialsSqlMembershipProvider` -Anbieter, das obenstehende Markup definiert die `SecurityTutorialsSqlMembershipProvider` als Standardanbieter (über die `defaultProvider` -Attribut in der `<membership>` Element).</span><span class="sxs-lookup"><span data-stu-id="9fb5c-422">In addition to registering the `SecurityTutorialsSqlMembershipProvider` provider, the above markup defines the `SecurityTutorialsSqlMembershipProvider` as the default provider (via the `defaultProvider` attribute in the `<membership>` element).</span></span> <span data-ttu-id="9fb5c-423">Denken Sie daran, dass das mitgliedschaftsframework mehrere registrierte Anbieter haben kann.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-423">Recall that the Membership framework can have multiple registered providers.</span></span> <span data-ttu-id="9fb5c-424">Da `AspNetSqlMembershipProvider` registriert, ist als der erste Anbieter in `machine.config`, er dient als Standardanbieter, es sei denn, es anders angegeben.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-424">Since `AspNetSqlMembershipProvider` is registered as the first provider in `machine.config`, it serves as the default provider unless we indicate otherwise.</span></span>

<span data-ttu-id="9fb5c-425">Derzeit ist unsere Anwendung zwei registrierten Anbieter: `AspNetSqlMembershipProvider` und `SecurityTutorialsSqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-425">Currently, our application has two registered providers: `AspNetSqlMembershipProvider` and `SecurityTutorialsSqlMembershipProvider`.</span></span> <span data-ttu-id="9fb5c-426">Jedoch vor der Registrierung der `SecurityTutorialsSqlMembershipProvider` Anbieter, die wir haben Sie alle zuvor deaktiviert könnten registrierten Anbieter durch das Hinzufügen einer [ `<clear />` Element](https://msdn.microsoft.com/library/t062y6yc.aspx) unmittelbar vor unserer `<add>` Element.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-426">However, before registering the `SecurityTutorialsSqlMembershipProvider` provider we could have cleared out all previously registered providers by adding a [`<clear />` element](https://msdn.microsoft.com/library/t062y6yc.aspx) immediately before our `<add>` element.</span></span> <span data-ttu-id="9fb5c-427">Diese möchten, deaktivieren Sie die `AspNetSqlMembershipProvider` aus der Liste der registrierten Anbieter, was bedeutet, dass die `SecurityTutorialsSqlMembershipProvider` wäre, die nur registrierte Mitgliedschaftsanbieter.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-427">This would clear out the `AspNetSqlMembershipProvider` from the list of registered providers, meaning that the `SecurityTutorialsSqlMembershipProvider` would be the only registered Membership provider.</span></span> <span data-ttu-id="9fb5c-428">Wenn wir diesen Ansatz verwendet, müssen wir nicht markieren die `SecurityTutorialsSqlMembershipProvider` als Standardanbieter, da es wäre, die nur registrierten Mitgliedschaftsanbieter.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-428">If we used this approach, then we would not need to mark the `SecurityTutorialsSqlMembershipProvider` as the default provider, since it would be the only registered Membership provider.</span></span> <span data-ttu-id="9fb5c-429">Weitere Informationen zur Verwendung von `<clear />`, finden Sie unter [Using `<clear />` beim Hinzufügen von Anbietern](https://weblogs.asp.net/scottgu/archive/2006/11/20/common-gotcha-don-t-forget-to-clear-when-adding-providers.aspx).</span><span class="sxs-lookup"><span data-stu-id="9fb5c-429">For more information on using `<clear />`, see [Using `<clear />` When Adding Providers](https://weblogs.asp.net/scottgu/archive/2006/11/20/common-gotcha-don-t-forget-to-clear-when-adding-providers.aspx).</span></span>

<span data-ttu-id="9fb5c-430">Beachten Sie, dass die `SecurityTutorialsSqlMembershipProvider`des `connectionStringName` Festlegen von verweisen die gerade hinzugefügte `SecurityTutorialsConnectionString` Name der Verbindungszeichenfolge, und dass die `applicationName` Einstellung auf einen Wert von SecurityTutorials festgelegt wurde.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-430">Note that the `SecurityTutorialsSqlMembershipProvider`'s `connectionStringName` setting references the just-added `SecurityTutorialsConnectionString` connection string name, and that its `applicationName` setting has been set to a value of SecurityTutorials.</span></span> <span data-ttu-id="9fb5c-431">Darüber hinaus die `requiresUniqueEmail` Einstellung festgelegt wurde `true`.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-431">Additionally, the `requiresUniqueEmail` setting has been set to `true`.</span></span> <span data-ttu-id="9fb5c-432">Alle anderen Konfigurationsoptionen sind identisch mit den Werten in `AspNetSqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-432">All other configuration options are identical to the values in `AspNetSqlMembershipProvider`.</span></span> <span data-ttu-id="9fb5c-433">Gerne hier keine konfigurationsänderungen vornehmen, wenn Sie möchten.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-433">Feel free to make any configuration modifications here, if you wish.</span></span> <span data-ttu-id="9fb5c-434">Sie können z. B. die kennwortsicherheit durch zwei nicht-alphanumerischen Zeichen anstelle eines anfordern oder erhöhen die Länge des Kennworts auf acht Zeichen anstelle von sieben anziehen.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-434">For example, you could tighten the password strength by requiring two non-alphanumeric characters instead of one, or by increasing the password length to eight characters instead of seven.</span></span>

> [!NOTE]
> <span data-ttu-id="9fb5c-435">Denken Sie daran, dass das mitgliedschaftsframework für einen einzelnen Benutzerspeicher über mehrere Anwendungen hinweg partitioniert werden kann.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-435">Recall that the Membership framework allows for a single user store to be partitioned across multiple applications.</span></span> <span data-ttu-id="9fb5c-436">Des Mitgliedschaftsanbieters `applicationName` Einstellung gibt an, welche Anwendung den Anbieter verwendet, bei der Arbeit mit den Speicher des Benutzers.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-436">The Membership provider's `applicationName` setting indicates what application the provider uses when working with the user store.</span></span> <span data-ttu-id="9fb5c-437">Es ist wichtig, dass Sie explizit einen Wert für die `applicationName` Konfiguration festlegen, da Wenn die `applicationName` nicht explizit festgelegt ist, wird die Webanwendung der virtuelle Stammpfad zur Laufzeit zugewiesen wird.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-437">It is important that you explicitly set a value for the `applicationName` configuration setting because if the `applicationName` is not explicitly set, it is assigned to the web application's virtual root path at runtime.</span></span> <span data-ttu-id="9fb5c-438">Dies funktioniert gut, solange der virtuelle Stammpfad der Anwendung nicht ändert, aber wenn Sie die Anwendung in einen anderen Pfad ein, Verschieben der `applicationName` Einstellung zu ändern ist.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-438">This works fine as long as the application's virtual root path doesn't change, but if you move the application to a different path, the `applicationName` setting will change too.</span></span> <span data-ttu-id="9fb5c-439">In diesem Fall wird der Mitgliedschaftsanbieter arbeiten mit einer anderen Anwendungspartition als zuvor verwendet wurde.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-439">When this happens, the Membership provider will start working with a different application partition than was previously used.</span></span> <span data-ttu-id="9fb5c-440">Benutzerkonten, die vor der Verschiebung erstellt in einer anderen Anwendungspartition befinden, und diese Benutzer werden nicht mehr in der Lage, sich bei der Site anmelden.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-440">User accounts created prior to the move will reside in a different application partition and those users will no longer be able to log into the site.</span></span> <span data-ttu-id="9fb5c-441">Eine ausführlichere Erläuterung dieser Angelegenheit, finden Sie unter [immer Festlegen der `applicationName` Eigenschaft beim Konfigurieren von ASP.NET 2.0 Mitgliedschaft und andere Anbieter](https://weblogs.asp.net/scottgu/443634).</span><span class="sxs-lookup"><span data-stu-id="9fb5c-441">For a more in-depth discussion on this matter, see [Always Set the `applicationName` Property When Configuring ASP.NET 2.0 Membership and Other Providers](https://weblogs.asp.net/scottgu/443634).</span></span>


## <a name="summary"></a><span data-ttu-id="9fb5c-442">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="9fb5c-442">Summary</span></span>

<span data-ttu-id="9fb5c-443">An diesem Punkt haben wir eine Datenbank mit der konfigurierten Anwendungsdienste (`SecurityTutorials.mdf`) und unserer Webanwendung konfiguriert haben, sodass das mitgliedschaftsframework verwendet die `SecurityTutorialsSqlMembershipProvider` Anbieter, die wir gerade registriert.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-443">At this point we have a database with the configured application services (`SecurityTutorials.mdf`) and have configured our web application so that the Membership framework uses the `SecurityTutorialsSqlMembershipProvider` provider we just registered.</span></span> <span data-ttu-id="9fb5c-444">Dieser registrierter Anbieter ist vom Typ `SqlMembershipProvider` und verfügt über seine `connectionStringName` legen Sie auf die entsprechende Verbindungszeichenfolge (`SecurityTutorialsConnectionString`) und die zugehörige `applicationName` Wert explizit festgelegt.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-444">This registered provider is of type `SqlMembershipProvider` and has its `connectionStringName` set to the appropriate connection string (`SecurityTutorialsConnectionString`) and its `applicationName` value explicitly set.</span></span>

<span data-ttu-id="9fb5c-445">Wir können nun das mitgliedschaftsframework aus unserer Anwendung verwenden.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-445">We are now ready to use the Membership framework from our application.</span></span> <span data-ttu-id="9fb5c-446">Im nächsten Tutorial untersuchen wir die neue Benutzerkonten erstellen.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-446">In the next tutorial we will examine how to create new user accounts.</span></span> <span data-ttu-id="9fb5c-447">Danach wird näher eingegangen wird, Authentifizieren von Benutzern, Benutzerbasierte Autorisierung durchführen und zusätzliche benutzerbezogenen Informationen in der Datenbank gespeichert.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-447">Following that we will explore authenticating users, performing user-based authorization, and storing additional user-related information in the database.</span></span>

<span data-ttu-id="9fb5c-448">Viel Spaß beim Programmieren!</span><span class="sxs-lookup"><span data-stu-id="9fb5c-448">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="9fb5c-449">Weiterführende Themen</span><span class="sxs-lookup"><span data-stu-id="9fb5c-449">Further Reading</span></span>

<span data-ttu-id="9fb5c-450">Weitere Informationen zu den Themen in diesem Tutorial erläutert finden Sie in den folgenden Ressourcen:</span><span class="sxs-lookup"><span data-stu-id="9fb5c-450">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="9fb5c-451">Legen Sie immer die `applicationName` Eigenschaft beim Konfigurieren von ASP.NET 2.0 Mitgliedschaft und anderen Anbietern</span><span class="sxs-lookup"><span data-stu-id="9fb5c-451">Always Set the `applicationName` Property When Configuring ASP.NET 2.0 Membership and Other Providers</span></span>](https://weblogs.asp.net/scottgu/443634)
- [<span data-ttu-id="9fb5c-452">Konfigurieren von ASP.NET 2.0 Services-Anwendung zum Verwenden von SQLServer 2000 oder SQLServer 2005</span><span class="sxs-lookup"><span data-stu-id="9fb5c-452">Configuring ASP.NET 2.0 Application Services to Use SQL Server 2000 or SQL Server 2005</span></span>](https://weblogs.asp.net/scottgu/archive/2005/08/25/423703.aspx)
- [<span data-ttu-id="9fb5c-453">Herunterladen von SQL Server Management Studio Express Edition</span><span class="sxs-lookup"><span data-stu-id="9fb5c-453">Download SQL Server Management Studio Express Edition</span></span>](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en)
- [<span data-ttu-id="9fb5c-454">Untersuchen von ASP.NET 2.0 s Mitgliedschaft, Rollen und Profile</span><span class="sxs-lookup"><span data-stu-id="9fb5c-454">Examining ASP.NET 2.0�s Membership, Roles, and Profile</span></span>](http://aspnet.4guysfromrolla.com/articles/120705-1.aspx)
- [<span data-ttu-id="9fb5c-455">Die `<add>` -Element für Providers für Membership</span><span class="sxs-lookup"><span data-stu-id="9fb5c-455">The `<add>` Element for Providers for Membership</span></span>](https://msdn.microsoft.com/library/whae3t94.aspx)
- [<span data-ttu-id="9fb5c-456">Die `<membership>` Element</span><span class="sxs-lookup"><span data-stu-id="9fb5c-456">The `<membership>` Element</span></span>](https://msdn.microsoft.com/library/1b9hw62f.aspx)
- [<span data-ttu-id="9fb5c-457">Die `<providers>` -Element für Mitgliedschaft</span><span class="sxs-lookup"><span data-stu-id="9fb5c-457">The `<providers>` Element for Membership</span></span>](https://msdn.microsoft.com/library/6d4936ht.aspx)
- [<span data-ttu-id="9fb5c-458">Mithilfe von `<clear />` beim Anbieter hinzufügen</span><span class="sxs-lookup"><span data-stu-id="9fb5c-458">Using `<clear />` When Adding Providers</span></span>](https://weblogs.asp.net/scottgu/archive/2006/11/20/common-gotcha-don-t-forget-to-clear-when-adding-providers.aspx)
- [<span data-ttu-id="9fb5c-459">Direktes Arbeiten mit der `SqlMembershipProvider`</span><span class="sxs-lookup"><span data-stu-id="9fb5c-459">Working Directly with the `SqlMembershipProvider`</span></span>](http://aspnet.4guysfromrolla.com/articles/091207-1.aspx)

### <a name="video-training-on-topics-contained-in-this-tutorial"></a><span data-ttu-id="9fb5c-460">In den Themen in diesem Tutorial-Videotraining</span><span class="sxs-lookup"><span data-stu-id="9fb5c-460">Video Training on Topics Contained in this Tutorial</span></span>

- [<span data-ttu-id="9fb5c-461">Grundlegendes zu ASP.NET-Mitgliedschaften</span><span class="sxs-lookup"><span data-stu-id="9fb5c-461">Understanding ASP.NET Memberships</span></span>](../../../videos/authentication/understanding-aspnet-memberships.md)
- [<span data-ttu-id="9fb5c-462">Konfigurieren von SQL für die Arbeit mit Mitgliedschaftsschemas</span><span class="sxs-lookup"><span data-stu-id="9fb5c-462">Configuring SQL To Work with Membership Schemas</span></span>](../../../videos/authentication/configuring-sql-to-work-with-membership-schemas.md)
- [<span data-ttu-id="9fb5c-463">Ändern der Mitgliedschaftseinstellungen im Mitgliedschaftsschema</span><span class="sxs-lookup"><span data-stu-id="9fb5c-463">Changing Membership Settings in the Default Membership Schema</span></span>](../../../videos/authentication/changing-membership-settings-in-the-default-membership-schema.md)

### <a name="about-the-author"></a><span data-ttu-id="9fb5c-464">Der Autor</span><span class="sxs-lookup"><span data-stu-id="9fb5c-464">About the Author</span></span>

<span data-ttu-id="9fb5c-465">Scott Mitchell, Autor von mehreren Büchern zu ASP/ASP.NET und Gründer von 4GuysFromRolla.com, ist seit 1998 mit Microsoft-Web-Technologien gearbeitet.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-465">Scott Mitchell, author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="9fb5c-466">Er ist als ein unabhängiger Berater, Schulungsleiter und Autor.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-466">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="9fb5c-467">Sein neueste Buch wird *[Sams Schulen selbst ASP.NET 2.0 in 24 Stunden](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-467">His latest book is *[Sams Teach Yourself ASP.NET 2.0 in 24 Hours](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*.</span></span> <span data-ttu-id="9fb5c-468">Scott erreicht werden kann, zur [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com) oder über seinen Blog unter [http://ScottOnWriting.NET](http://scottonwriting.net/).</span><span class="sxs-lookup"><span data-stu-id="9fb5c-468">Scott can be reached at [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="9fb5c-469">Besonderen Dank an</span><span class="sxs-lookup"><span data-stu-id="9fb5c-469">Special Thanks To</span></span>

<span data-ttu-id="9fb5c-470">Diese tutorialreihe wurde durch viele hilfreiche Reviewer überprüft.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-470">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="9fb5c-471">Führendes Prüfer für dieses Tutorial wurde Alicja Maziarz.</span><span class="sxs-lookup"><span data-stu-id="9fb5c-471">Lead reviewer for this tutorial was Alicja Maziarz.</span></span> <span data-ttu-id="9fb5c-472">Meine zukünftigen MSDN-Artikeln überprüfen möchten?</span><span class="sxs-lookup"><span data-stu-id="9fb5c-472">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="9fb5c-473">Wenn dies der Fall ist, löschen Sie mir eine Linie an [ mitchell@4GuysFromRolla.com ](mailto:mitchell@4guysfromrolla.com).</span><span class="sxs-lookup"><span data-stu-id="9fb5c-473">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4guysfromrolla.com).</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="9fb5c-474">Nächste</span><span class="sxs-lookup"><span data-stu-id="9fb5c-474">Next</span></span>](creating-user-accounts-cs.md)
