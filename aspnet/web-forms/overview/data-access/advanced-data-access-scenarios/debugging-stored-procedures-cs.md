---
uid: web-forms/overview/data-access/advanced-data-access-scenarios/debugging-stored-procedures-cs
title: Debuggen von gespeicherten Prozeduren (c#) | Microsoft-Dokumentation
author: rick-anderson
description: Visual Studio Professional und Team System-Editionen können Sie Haltepunkte setzen und springen, um gespeicherte Prozeduren in SQL Server, zu debuggen gespeichert...
ms.author: riande
ms.date: 08/03/2007
ms.assetid: c655c324-2ffa-4c21-8265-a254d79a693d
msc.legacyurl: /web-forms/overview/data-access/advanced-data-access-scenarios/debugging-stored-procedures-cs
msc.type: authoredcontent
ms.openlocfilehash: a377dde0c4ed25aed549ca1f3b8eeeecece79517
ms.sourcegitcommit: 45ac74e400f9f2b7dbded66297730f6f14a4eb25
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/16/2018
ms.locfileid: "41823865"
---
<a name="debugging-stored-procedures-c"></a><span data-ttu-id="7f568-103">Debuggen von gespeicherten Prozeduren (c#)</span><span class="sxs-lookup"><span data-stu-id="7f568-103">Debugging Stored Procedures (C#)</span></span>
====================
<span data-ttu-id="7f568-104">durch [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="7f568-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="7f568-105">[Code herunterladen](http://download.microsoft.com/download/3/9/f/39f92b37-e92e-4ab3-909e-b4ef23d01aa3/ASPNET_Data_Tutorial_74_CS.zip) oder [PDF-Datei herunterladen](debugging-stored-procedures-cs/_static/datatutorial74cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="7f568-105">[Download Code](http://download.microsoft.com/download/3/9/f/39f92b37-e92e-4ab3-909e-b4ef23d01aa3/ASPNET_Data_Tutorial_74_CS.zip) or [Download PDF](debugging-stored-procedures-cs/_static/datatutorial74cs1.pdf)</span></span>

> <span data-ttu-id="7f568-106">Visual Studio Professional und Team System-Editionen können Sie Haltepunkte setzen und springen, um zu gespeicherten Prozeduren in SQL Server, wodurch das Debuggen von gespeicherter Prozeduren, die so einfach wie das Debuggen von Anwendungscode.</span><span class="sxs-lookup"><span data-stu-id="7f568-106">Visual Studio Professional and Team System editions allow you to set breakpoints and step in to stored procedures within SQL Server, making debugging stored procedures as easy as debugging application code.</span></span> <span data-ttu-id="7f568-107">Dieses Tutorial veranschaulicht das direkte datenbankdebugging und Debuggen der Anwendung von gespeicherten Prozeduren.</span><span class="sxs-lookup"><span data-stu-id="7f568-107">This tutorial demonstrates direct database debugging and application debugging of stored procedures.</span></span>


## <a name="introduction"></a><span data-ttu-id="7f568-108">Einführung</span><span class="sxs-lookup"><span data-stu-id="7f568-108">Introduction</span></span>

<span data-ttu-id="7f568-109">Visual Studio bietet eine umfassende Debugleistung.</span><span class="sxs-lookup"><span data-stu-id="7f568-109">Visual Studio provides a rich debugging experience.</span></span> <span data-ttu-id="7f568-110">Mit wenigen Tastaturanschlägen oder Mausklicks es möglich, verwenden Sie zum Beenden der Ausführung eines Programms, und überprüfen die Übertragung und Haltepunkte.</span><span class="sxs-lookup"><span data-stu-id="7f568-110">With a few keystrokes or clicks of the mouse, it s possible to use breakpoints to stop execution of a program and examine its state and control flow.</span></span> <span data-ttu-id="7f568-111">Zusammen mit Debuggen von Anwendungscode, bietet Visual Studio unterstützt das Debuggen von gespeicherter Prozeduren von SQL Server.</span><span class="sxs-lookup"><span data-stu-id="7f568-111">Along with debugging application code, Visual Studio offers support for debugging stored procedures from within SQL Server.</span></span> <span data-ttu-id="7f568-112">Genau wie Haltepunkte können, im Code eines ASP.NET Code-Behind-Klasse oder Business Logic Layer-Klasse festgelegt werden, damit auch sie platziert werden können, innerhalb von gespeicherten Prozeduren.</span><span class="sxs-lookup"><span data-stu-id="7f568-112">Just like breakpoints can be set within the code of an ASP.NET code-behind class or Business Logic Layer class, so too can they be placed within stored procedures.</span></span>

<span data-ttu-id="7f568-113">In diesem Tutorial betrachten wir Einzelschritt in gespeicherte Prozeduren im Server-Explorer in Visual Studio auch zum Festlegen von Haltepunkten, die erreicht werden, wenn die gespeicherte Prozedur von der ausgeführten ASP.NET-Anwendung aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="7f568-113">In this tutorial we will look at stepping into stored procedures from the Server Explorer within Visual Studio as well as how to set breakpoints that are hit when the stored procedure is called from the running ASP.NET application.</span></span>

> [!NOTE]
> <span data-ttu-id="7f568-114">Leider gespeicherte Prozeduren können nur werden in das gesprungen und über die Professional und Team-Systeme Versionen von Visual Studio debuggt.</span><span class="sxs-lookup"><span data-stu-id="7f568-114">Unfortunately, stored procedures can only be stepped into and debugged through the Professional and Team Systems versions of Visual Studio.</span></span> <span data-ttu-id="7f568-115">Wenn Sie Visual Web Developer oder die standard-Version von Visual Studio verwenden, können Sie Willkommen zusammen zu lesen, durchlaufen wir die erforderlichen Schritte zum Debuggen von gespeicherter Prozeduren, aber Sie werden nicht in der Lage, diese Schritte auf Ihrem Computer replizieren.</span><span class="sxs-lookup"><span data-stu-id="7f568-115">If you are using Visual Web Developer or the standard version of Visual Studio, you are welcome to read along as we walk through the steps necessary to debug stored procedures, but you will not be able to replicate these steps on your machine.</span></span>


## <a name="sql-server-debugging-concepts"></a><span data-ttu-id="7f568-116">Debuggen von SQL Server-Konzepte</span><span class="sxs-lookup"><span data-stu-id="7f568-116">SQL Server Debugging Concepts</span></span>

<span data-ttu-id="7f568-117">Microsoft SQL Server 2005 wurde entworfen, um die Integration in die [Common Language Runtime (CLR)](https://msdn.microsoft.com/netframework/aa497266.aspx), die Laufzeit, die von allen Assemblys für .NET verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="7f568-117">Microsoft SQL Server 2005 was designed to provide integration with the [Common Language Runtime (CLR)](https://msdn.microsoft.com/netframework/aa497266.aspx), which is the runtime used by all .NET assemblies.</span></span> <span data-ttu-id="7f568-118">Daher unterstützt SQL Server 2005 verwalteten Datenbankobjekte.</span><span class="sxs-lookup"><span data-stu-id="7f568-118">Consequently, SQL Server 2005 supports managed database objects.</span></span> <span data-ttu-id="7f568-119">Das heißt, können Sie Datenbankobjekte wie gespeicherte Prozeduren und benutzerdefinierten Funktionen (UDFs) als Methoden in einer C#-Klasse erstellen.</span><span class="sxs-lookup"><span data-stu-id="7f568-119">That is, you can create database objects like stored procedures and User-Defined Functions (UDFs) as methods in a C# class.</span></span> <span data-ttu-id="7f568-120">Dadurch können diese gespeicherten Prozeduren und benutzerdefinierte Funktionen, Funktionen, die in .NET Framework und von Ihren eigenen benutzerdefinierten Klassen nutzen können.</span><span class="sxs-lookup"><span data-stu-id="7f568-120">This enables these stored procedures and UDFs to utilize functionality in the .NET Framework and from your own custom classes.</span></span> <span data-ttu-id="7f568-121">Natürlich ist es möglich, bietet SQL Server 2005 auch Unterstützung für T-SQL-Datenbankobjekte.</span><span class="sxs-lookup"><span data-stu-id="7f568-121">Of course, SQL Server 2005 also provides support for T-SQL database objects.</span></span>

<span data-ttu-id="7f568-122">SQL Server 2005 bietet Unterstützung für Remotedebuggen für T-SQL und verwalteter Datenbankobjekte.</span><span class="sxs-lookup"><span data-stu-id="7f568-122">SQL Server 2005 offers debugging support for both T-SQL and managed database objects.</span></span> <span data-ttu-id="7f568-123">Allerdings können diese Objekte über die Editionen Visual Studio 2005 Professional und Team-Systeme nur gedebuggt werden.</span><span class="sxs-lookup"><span data-stu-id="7f568-123">However, these objects can only be debugged through Visual Studio 2005 Professional and Team Systems editions.</span></span> <span data-ttu-id="7f568-124">In diesem Tutorial untersuchen wir Debuggen T-SQL-Datenbankobjekte.</span><span class="sxs-lookup"><span data-stu-id="7f568-124">In this tutorial we will examine debugging T-SQL database objects.</span></span> <span data-ttu-id="7f568-125">Das nachfolgende Lernprogramm untersucht Debuggen verwalteter Datenbankobjekte.</span><span class="sxs-lookup"><span data-stu-id="7f568-125">The subsequent tutorial looks at debugging managed database objects.</span></span>

<span data-ttu-id="7f568-126">Die [Übersicht über die von T-SQL und CLR-Debuggen in SQL Server 2005](https://blogs.msdn.com/sqlclr/archive/2006/06/29/651644.aspx) Blogeintrag aus der [CLR-Integration für SQL Server 2005-Team](https://blogs.msdn.com/sqlclr/default.aspx) werden die drei Möglichkeiten zum Debuggen von SQL Server 2005-Objekte aus Visual Studio:</span><span class="sxs-lookup"><span data-stu-id="7f568-126">The [Overview of T-SQL and CLR Debugging in SQL Server 2005](https://blogs.msdn.com/sqlclr/archive/2006/06/29/651644.aspx) blog entry from the [SQL Server 2005 CLR Integration team](https://blogs.msdn.com/sqlclr/default.aspx) highlights the three ways to debug SQL Server 2005 objects from Visual Studio:</span></span>

- <span data-ttu-id="7f568-127">**Leiten Sie die Datenbank-Debuggen (DDD)** : Klicken Sie in Server-Explorer, die wir einen in T-SQL-Datenbankobjekte wie gespeicherte Prozeduren und benutzerdefinierte Funktionen Einzelschritt.</span><span class="sxs-lookup"><span data-stu-id="7f568-127">**Direct Database Debugging (DDD)** - from Server Explorer we can step into any T-SQL database object, such as stored procedures and UDFs.</span></span> <span data-ttu-id="7f568-128">Untersuchen wir DDD in Schritt 1.</span><span class="sxs-lookup"><span data-stu-id="7f568-128">We will examine DDD in Step 1.</span></span>
- <span data-ttu-id="7f568-129">**Debuggen der Anwendung** – wir Festlegen von Haltepunkten in einem Datenbankobjekt und führen Sie dann auf unsere ASP.NET-Anwendung.</span><span class="sxs-lookup"><span data-stu-id="7f568-129">**Application Debugging** - we can set breakpoints within a database object and then run our ASP.NET application.</span></span> <span data-ttu-id="7f568-130">Wenn das Datenbankobjekt, das ausgeführt wird, wird der Haltepunkt erreicht, und an den Debugger umgedreht Steuerelement.</span><span class="sxs-lookup"><span data-stu-id="7f568-130">When the database object is executed, the breakpoint will be hit and control turned over to the debugger.</span></span> <span data-ttu-id="7f568-131">Beachten Sie, dass beim Anwendungsdebuggen wir in ein Datenbankobjekt aus dem Anwendungscode wechseln können.</span><span class="sxs-lookup"><span data-stu-id="7f568-131">Note that with application debugging we cannot step into a database object from application code.</span></span> <span data-ttu-id="7f568-132">Wir müssen explizit legen Sie Haltepunkte in diesen gespeicherten Prozeduren oder benutzerdefinierte Funktionen möchten wir, in denen den Debugger anhält.</span><span class="sxs-lookup"><span data-stu-id="7f568-132">We must explicitly set breakpoints in those stored procedures or UDFs where we want the debugger to stop.</span></span> <span data-ttu-id="7f568-133">Anwendungsdebuggen wird untersucht, in Schritt2 ab.</span><span class="sxs-lookup"><span data-stu-id="7f568-133">Application debugging is examined starting in Step 2.</span></span>
- <span data-ttu-id="7f568-134">**Aus einem SQL Server-Projekt Debuggen** -Editionen von Visual Studio Professional und Team-Systeme sind einen SQL Server-Projekt-Typ, der häufig verwendet wird, um Datenbankobjekte zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="7f568-134">**Debugging from a SQL Server Project** - Visual Studio Professional and Team Systems editions include a SQL Server Project type that is commonly used to create managed database objects.</span></span> <span data-ttu-id="7f568-135">Wir werden untersuchen, verwenden SQL Server-Projekte und Debuggen ihre Inhalte im nächsten Tutorial.</span><span class="sxs-lookup"><span data-stu-id="7f568-135">We will examine using SQL Server Projects and debugging their contents in the next tutorial.</span></span>

<span data-ttu-id="7f568-136">Visual Studio kann gespeicherte Prozeduren für SQL Server-Instanzen für lokale und remote Debuggen.</span><span class="sxs-lookup"><span data-stu-id="7f568-136">Visual Studio can debug stored procedures on local and remote SQL Server instances.</span></span> <span data-ttu-id="7f568-137">Eine lokale SQL Server-Instanz ist eine, die auf dem gleichen Computer wie Visual Studio installiert ist.</span><span class="sxs-lookup"><span data-stu-id="7f568-137">A local SQL Server instance is one that is installed on the same machine as Visual Studio.</span></span> <span data-ttu-id="7f568-138">Wenn SQL Server-Datenbank, die Sie verwenden nicht auf dem Entwicklungscomputer befindet, wird er eine remote-Instanz behandelt.</span><span class="sxs-lookup"><span data-stu-id="7f568-138">If the SQL Server database you are using is not located on your development machine, then it is considered a remote instance.</span></span> <span data-ttu-id="7f568-139">Für diese Tutorials haben wir lokale SQL Server-Instanzen verwendet wurden.</span><span class="sxs-lookup"><span data-stu-id="7f568-139">For these tutorials we have been using local SQL Server instances.</span></span> <span data-ttu-id="7f568-140">Debuggen von gespeicherten Prozeduren in SQL Server-Remoteinstanz erfordert weitere Konfigurationsschritte erforderlich als beim Debuggen von gespeicherten Prozeduren in einer lokalen Instanz.</span><span class="sxs-lookup"><span data-stu-id="7f568-140">Debugging stored procedures on a remote SQL server instance requires more configuration steps than when debugging stored procedures on a local instance.</span></span>

<span data-ttu-id="7f568-141">Wenn Sie eine lokale SQL Server-Instanz verwenden, können Sie beginnen Sie mit Schritt 1 und am Ende dieses Tutorials durcharbeiten.</span><span class="sxs-lookup"><span data-stu-id="7f568-141">If you are using a local SQL Server instance, you can start with Step 1 and work through this tutorial to the end.</span></span> <span data-ttu-id="7f568-142">Bei Verwendung eine Remoteinstanz von SQL Server werden jedoch, Sie müssen zunächst, um sicherzustellen, dass beim Debuggen auf Ihren Entwicklungscomputer mit einem Windows-Benutzerkonto an, die eine SQL Server-Anmeldung auf der Remoteinstanz angemeldet sind.</span><span class="sxs-lookup"><span data-stu-id="7f568-142">If you are using a remote SQL Server instance, however, you will first need to ensure that when debugging you are logged to your development machine with a Windows user account that has a SQL Server login on the remote instance.</span></span> <span data-ttu-id="7f568-143">Moveover, sowohl für diese datenbankanmeldung als auch für die datenbankanmeldung, die von der ausgeführten ASP.NET-Anwendung eine Verbindung mit der Datenbank verwendet, muss Mitglied der `sysadmin` Rolle.</span><span class="sxs-lookup"><span data-stu-id="7f568-143">Moveover, both this database login and the database login used to connect to the database from the running ASP.NET application must be members of the `sysadmin` role.</span></span> <span data-ttu-id="7f568-144">Finden Sie das Debuggen von T-SQL-Datenbankobjekte auf Remoteinstanzen im Abschnitt am Ende dieses Tutorials für Weitere Informationen zum Konfigurieren von Visual Studio und SQL Server, um eine remote-Instanz zu debuggen.</span><span class="sxs-lookup"><span data-stu-id="7f568-144">See the Debugging T-SQL Database Objects on Remote Instances section at the end of this tutorial for more information on configuring Visual Studio and SQL Server to debug a remote instance.</span></span>

<span data-ttu-id="7f568-145">Verstehen Sie schließlich, dass debugging-Unterstützung für T-SQL-Datenbankobjekte nicht als Features wie debugging-Unterstützung für .NET-Anwendungen bietet.</span><span class="sxs-lookup"><span data-stu-id="7f568-145">Finally, understand that debugging support for T-SQL database objects is not as feature rich as debugging support for .NET applications.</span></span> <span data-ttu-id="7f568-146">Z. B. haltepunktbedingungen und-Filter werden nicht unterstützt, nur eine Teilmenge der Debugfenster verfügbar, Sie können nicht verwenden, bearbeiten und fortfahren, das "Direktfenster" nutzlos usw. gerendert wird.</span><span class="sxs-lookup"><span data-stu-id="7f568-146">For example, breakpoint conditions and filters are not supported, only a subset of the debugging windows are available, you cannot use Edit and Continue, the Immediate window is rendered useless, and so forth.</span></span> <span data-ttu-id="7f568-147">Finden Sie unter [Einschränkungen von Debuggerbefehlen und Funktionen](https://msdn.microsoft.com/library/ms165035(VS.80).aspx) für Weitere Informationen.</span><span class="sxs-lookup"><span data-stu-id="7f568-147">See [Limitations on Debugger Commands and Features](https://msdn.microsoft.com/library/ms165035(VS.80).aspx) for more information.</span></span>

## <a name="step-1-directly-stepping-into-a-stored-procedure"></a><span data-ttu-id="7f568-148">Schritt 1: Direkte Schrittweises Ausführen einer gespeicherten Prozedur</span><span class="sxs-lookup"><span data-stu-id="7f568-148">Step 1: Directly Stepping Into a Stored Procedure</span></span>

<span data-ttu-id="7f568-149">Visual Studio erleichtert das direkte Debuggen eines Datenbankobjekts.</span><span class="sxs-lookup"><span data-stu-id="7f568-149">Visual Studio makes it easy to directly debug a database object.</span></span> <span data-ttu-id="7f568-150">S betrachten, wie Sie mit der direkten Datenbank Debuggen (DDD)-Funktion in Einzelschritten können die `Products_SelectByCategoryID` gespeicherten Prozedur in der Northwind-Datenbank.</span><span class="sxs-lookup"><span data-stu-id="7f568-150">Let s look at how to use the Direct Database Debugging (DDD) feature to step into the `Products_SelectByCategoryID` stored procedure in the Northwind database.</span></span> <span data-ttu-id="7f568-151">Wie der Name schon sagt, `Products_SelectByCategoryID` gibt Produktinformationen für eine bestimmte Kategorie; es erstellt wurde die [vorhandene gespeicherte Prozeduren verwenden, für die typisierte DataSet-s TableAdapters](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs.md) Tutorial.</span><span class="sxs-lookup"><span data-stu-id="7f568-151">As its name implies, `Products_SelectByCategoryID` returns product information for a particular category; it was created in the [Using Existing Stored Procedures for the Typed DataSet s TableAdapters](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs.md) tutorial.</span></span> <span data-ttu-id="7f568-152">Navigieren Sie zum Server-Explorer, und erweitern Sie den Knoten der Northwind-Datenbank.</span><span class="sxs-lookup"><span data-stu-id="7f568-152">Start by going to the Server Explorer and expand the Northwind database node.</span></span> <span data-ttu-id="7f568-153">Als Nächstes Drilldown in den Ordner gespeicherte Prozeduren, mit der rechten Maustaste auf die `Products_SelectByCategoryID` gespeicherte Prozedur aus, und wählen Sie die Option Schritt in gespeicherte Prozedur aus dem Kontextmenü.</span><span class="sxs-lookup"><span data-stu-id="7f568-153">Next, drill down into the Stored Procedures folder, right-click on the `Products_SelectByCategoryID` stored procedure, and choose the Step Into Stored Procedure option from the context menu.</span></span> <span data-ttu-id="7f568-154">Dadurch wird den Debugger gestartet.</span><span class="sxs-lookup"><span data-stu-id="7f568-154">This will start the debugger.</span></span>

<span data-ttu-id="7f568-155">Da die `Products_SelectByCategoryID` gespeicherte Prozedur erwartet, dass eine `@CategoryID` Eingabeparameter, wir werden aufgefordert, diesen Wert anzugeben.</span><span class="sxs-lookup"><span data-stu-id="7f568-155">Since the `Products_SelectByCategoryID` stored procedure expects a `@CategoryID` input parameter, we are asked to provide this value.</span></span> <span data-ttu-id="7f568-156">Geben Sie 1 an, die Informationen zu den Getränke zurückgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="7f568-156">Enter 1, which will return information about the beverages.</span></span>


![Verwenden Sie den Wert 1 für die @CategoryID Parameter](debugging-stored-procedures-cs/_static/image1.png)

<span data-ttu-id="7f568-158">**Abbildung 1**: Verwenden Sie den Wert 1 für die `@CategoryID` Parameter</span><span class="sxs-lookup"><span data-stu-id="7f568-158">**Figure 1**: Use the Value 1 for the `@CategoryID` Parameter</span></span>


<span data-ttu-id="7f568-159">Nach dem Bereitstellen des Werts für die `@CategoryID` Parameter der gespeicherten Prozedur ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="7f568-159">After supplying the value for the `@CategoryID` parameter, the stored procedure is executed.</span></span> <span data-ttu-id="7f568-160">Anstatt bis zum Abschluss ausgeführt, jedoch hält der Debugger die Ausführung bei der ersten Anweisung.</span><span class="sxs-lookup"><span data-stu-id="7f568-160">Rather than running to completion, though, the debugger halts execution on the first statement.</span></span> <span data-ttu-id="7f568-161">Beachten Sie den gelben Pfeil in den Rand, der angibt, der aktuellen Position in der gespeicherten Prozedur.</span><span class="sxs-lookup"><span data-stu-id="7f568-161">Note the yellow arrow in the margin, indicating the current location in the stored procedure.</span></span> <span data-ttu-id="7f568-162">Sie können anzeigen und Bearbeiten von Parameterwerten, die über das Fenster "überwachen" oder mit dem Mauszeiger auf den Parameternamen in der gespeicherten Prozedur.</span><span class="sxs-lookup"><span data-stu-id="7f568-162">You can view and edit parameter values through the Watch window or by hovering over the parameter name in the stored procedure.</span></span>


<span data-ttu-id="7f568-163">[![Der Debugger wurde für die erste Anweisung der gespeicherten Prozedur angehalten.](debugging-stored-procedures-cs/_static/image3.png)](debugging-stored-procedures-cs/_static/image2.png)</span><span class="sxs-lookup"><span data-stu-id="7f568-163">[![The Debugger has Halted on the First Statement of the Stored Procedure](debugging-stored-procedures-cs/_static/image3.png)](debugging-stored-procedures-cs/_static/image2.png)</span></span>

<span data-ttu-id="7f568-164">**Abbildung 2**: der Debugger wurde angehalten, für die erste Anweisung der gespeicherten Prozedur ([klicken Sie, um das Bild in voller Größe anzeigen](debugging-stored-procedures-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="7f568-164">**Figure 2**: The Debugger has Halted on the First Statement of the Stored Procedure ([Click to view full-size image](debugging-stored-procedures-cs/_static/image4.png))</span></span>


<span data-ttu-id="7f568-165">Um einen über die gespeicherte Prozedur eine Anweisung zu einem Zeitpunkt durchzuführen, klicken Sie auf die Schaltfläche "Step Over" in der Symbolleiste, oder drücken Sie die F10-TASTE.</span><span class="sxs-lookup"><span data-stu-id="7f568-165">To step through the stored procedure one statement at a time, click the Step Over button in the Toolbar or hit the F10 key.</span></span> <span data-ttu-id="7f568-166">Die `Products_SelectByCategoryID` gespeicherte Prozedur enthält ein einzelnes `SELECT` Anweisung, daher Drücken von F10 die einzige Anweisung überspringen wird und schließen Sie die Ausführung der gespeicherten Prozedur.</span><span class="sxs-lookup"><span data-stu-id="7f568-166">The `Products_SelectByCategoryID` stored procedure contains a single `SELECT` statement, so hitting F10 will Step over the single statement and complete the execution of the stored procedure.</span></span> <span data-ttu-id="7f568-167">Nachdem die gespeicherte Prozedur abgeschlossen wurde, wird die Ausgabe im Ausgabefenster angezeigt, und der Debugger wird beendet.</span><span class="sxs-lookup"><span data-stu-id="7f568-167">After the stored procedure has completed, its output will appear in the Output window and the debugger will terminate.</span></span>

> [!NOTE]
> <span data-ttu-id="7f568-168">T-SQL-debugging erfolgt auf der Anweisungsebene Sie können nicht schrittweise ein `SELECT` Anweisung.</span><span class="sxs-lookup"><span data-stu-id="7f568-168">T-SQL debugging occurs at the statement level; you cannot Step into a `SELECT` statement.</span></span>


## <a name="step-2-configuring-the-website-for-application-debugging"></a><span data-ttu-id="7f568-169">Schritt 2: Konfigurieren der Website für das Debuggen der Anwendung</span><span class="sxs-lookup"><span data-stu-id="7f568-169">Step 2: Configuring the Website for Application Debugging</span></span>

<span data-ttu-id="7f568-170">Beim Debuggen einer gespeicherten Prozedur direkt über den Server-Explorer ist, sind in vielen Szenarien wir weitere Informationen über die gespeicherte Prozedur Debuggen, wenn sie von unserem ASP.NET-Anwendung aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="7f568-170">While debugging a stored procedure directly from the Server Explorer is handy, in many scenarios we are more interested in debugging the stored procedure when it is called from our ASP.NET application.</span></span> <span data-ttu-id="7f568-171">Wir können Haltepunkte hinzufügen, um eine gespeicherte Prozedur in Visual Studio, und starten Sie die ASP.NET-Anwendung debuggen.</span><span class="sxs-lookup"><span data-stu-id="7f568-171">We can add breakpoints to a stored procedure from within Visual Studio and then start debugging the ASP.NET application.</span></span> <span data-ttu-id="7f568-172">Wenn eine gespeicherte Prozedur mit Haltepunkten aus der Anwendung aufgerufen wird, wird die Ausführung am Haltepunkt angehalten, und wir können anzeigen und ändern Sie die Parameterwerte der gespeicherten Prozedur s und durchlaufen Sie die Anweisungen, wie wir in Schritt 1.</span><span class="sxs-lookup"><span data-stu-id="7f568-172">When a stored procedure with breakpoints is invoked from the application, execution will halt at the breakpoint and we can view and change the stored procedure s parameter values and step through its statements, just like we did in Step 1.</span></span>

<span data-ttu-id="7f568-173">Bevor wir mit dem Debuggen von gespeicherten Prozeduren, die aufgerufen wird, von der Anwendung beginnen können, müssen wir die ASP.NET-Webanwendung für die Integration von SQL Server-Debugger anweisen.</span><span class="sxs-lookup"><span data-stu-id="7f568-173">Before we can start debugging stored procedures called from the application, we need to instruct the ASP.NET web application to integrate with the SQL Server debugger.</span></span> <span data-ttu-id="7f568-174">Starten, indem Sie mit der rechten Maustaste auf den Namen der Website im Projektmappen-Explorer (`ASPNET_Data_Tutorial_74_CS`).</span><span class="sxs-lookup"><span data-stu-id="7f568-174">Start by right-clicking on the website name in the Solution Explorer (`ASPNET_Data_Tutorial_74_CS`).</span></span> <span data-ttu-id="7f568-175">Wählen Sie die Eigenschaftenseiten-Option im Kontextmenü, wählen Sie das Element "Startoptionen" auf der linken Seite und aktivieren Sie das SQL Server-Kontrollkästchen im Abschnitt Debugger (siehe Abbildung 3).</span><span class="sxs-lookup"><span data-stu-id="7f568-175">Choose the Property Pages option from the context menu, select the Start Options item on the left, and check the SQL Server checkbox in the Debuggers section (see Figure 3).</span></span>


<span data-ttu-id="7f568-176">[![Aktivieren Sie das SQL Server-Kontrollkästchen in der Anwendung s-Eigenschaftenseiten](debugging-stored-procedures-cs/_static/image6.png)](debugging-stored-procedures-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="7f568-176">[![Check the SQL Server Checkbox in the Application s Property Pages](debugging-stored-procedures-cs/_static/image6.png)](debugging-stored-procedures-cs/_static/image5.png)</span></span>

<span data-ttu-id="7f568-177">**Abbildung 3**: Aktivieren Sie das SQL Server-Kontrollkästchen in der Anwendung-s-Eigenschaftenseiten ([klicken Sie, um das Bild in voller Größe anzeigen](debugging-stored-procedures-cs/_static/image7.png))</span><span class="sxs-lookup"><span data-stu-id="7f568-177">**Figure 3**: Check the SQL Server Checkbox in the Application s Property Pages ([Click to view full-size image](debugging-stored-procedures-cs/_static/image7.png))</span></span>


<span data-ttu-id="7f568-178">Darüber hinaus müssen wir zum Aktualisieren der Datenbank-Verbindungszeichenfolge, die von der Anwendung verwendet wird, so dass Verbindungspooling deaktiviert ist.</span><span class="sxs-lookup"><span data-stu-id="7f568-178">Additionally, we need to update the database connection string used by the application so that connection pooling is disabled.</span></span> <span data-ttu-id="7f568-179">Wenn eine Verbindung mit einer Datenbank geschlossen wird, den entsprechenden `SqlConnection` Objekt befindet sich in einem Pool der verfügbaren Verbindungen.</span><span class="sxs-lookup"><span data-stu-id="7f568-179">When a connection to a database is closed, the corresponding `SqlConnection` object is placed in a pool of available connections.</span></span> <span data-ttu-id="7f568-180">Beim Herstellen einer Verbindungs mit einer Datenbank, ein Objekt verfügbare Verbindung abgerufen werden können, aus diesem Pool anstatt erstellen und eine neue Verbindung herstellen müssen.</span><span class="sxs-lookup"><span data-stu-id="7f568-180">When establishing a connection to a database, an available connection object can be retrieved from this pool rather than having to create and establish a new connection.</span></span> <span data-ttu-id="7f568-181">Diese pooling von Verbindungsobjekten ist eine leistungsverbesserung und ist standardmäßig aktiviert.</span><span class="sxs-lookup"><span data-stu-id="7f568-181">This pooling of connection objects is a performance enhancement and is enabled by default.</span></span> <span data-ttu-id="7f568-182">Allerdings beim Debuggen sollten deaktivieren Verbindungspooling, da der Debuginfrastruktur nicht ordnungsgemäß wiederhergestellt ist, wenn Sie mit einer Verbindung zu arbeiten, die aus dem Pool erstellt wurde.</span><span class="sxs-lookup"><span data-stu-id="7f568-182">However, when debugging we want to turn off connection pooling because the debugging infrastructure is not correctly reestablished when working with a connection that was taken from the pool.</span></span>

<span data-ttu-id="7f568-183">Deaktiviertes Verbindungspooling, aktualisieren Sie die `NORTHWNDConnectionString` in `Web.config` , damit sie die Einstellung enthält `Pooling=false` .</span><span class="sxs-lookup"><span data-stu-id="7f568-183">To disabled connection pooling, update the `NORTHWNDConnectionString` in `Web.config` so that it includes the setting `Pooling=false` .</span></span>


[!code-xml[Main](debugging-stored-procedures-cs/samples/sample1.xml)]

> [!NOTE]
> <span data-ttu-id="7f568-184">Wenn Sie fertig sind Debuggen von SQL Server über die ASP.NET-Anwendung achten reaktivieren, Verbindungspooling durch das Entfernen der `Pooling` aus der Verbindungszeichenfolge festlegen (oder durch Festlegung auf `Pooling=true` ).</span><span class="sxs-lookup"><span data-stu-id="7f568-184">Once you have finished debugging SQL Server through the ASP.NET application be sure to reinstate connection pooling by removing the `Pooling` setting from the connection string (or by setting it to `Pooling=true` ).</span></span>


<span data-ttu-id="7f568-185">An diesem Punkt wurde die ASP.NET-Anwendung konfiguriert, um Visual Studio zum Debuggen von SQL Server-Datenbankobjekte, die beim Aufrufen durch die Webanwendung zu ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="7f568-185">At this point the ASP.NET application has been configured to allow Visual Studio to debug SQL Server database objects when invoked through the web application.</span></span> <span data-ttu-id="7f568-186">Jetzt muss nur noch eine gespeicherte Prozedur einen Haltepunkt hinzu, und starten Sie das Debuggen wird!</span><span class="sxs-lookup"><span data-stu-id="7f568-186">All that remains now is to add a breakpoint to a stored procedure and start debugging!</span></span>

## <a name="step-3-adding-a-breakpoint-and-debugging"></a><span data-ttu-id="7f568-187">Schritt 3: Hinzufügen eines Haltepunkts und das Debuggen</span><span class="sxs-lookup"><span data-stu-id="7f568-187">Step 3: Adding a Breakpoint and Debugging</span></span>

<span data-ttu-id="7f568-188">Öffnen der `Products_SelectByCategoryID` gespeicherte Prozedur, und legen Sie einen Haltepunkt am Anfang der `SELECT` Anweisung durch Klicken auf den Rand bei der entsprechenden Stelle platzieren den Cursor am Anfang oder das `SELECT` -Anweisung und drücken F9.</span><span class="sxs-lookup"><span data-stu-id="7f568-188">Open the `Products_SelectByCategoryID` stored procedure and set a breakpoint at the start of the `SELECT` statement by clicking in the margin at the appropriate place or by placing your cursor at the start of the `SELECT` statement and hitting F9.</span></span> <span data-ttu-id="7f568-189">Wie in Abbildung 4 dargestellt, wird der Haltepunkt als roter Kreis im Rand angezeigt.</span><span class="sxs-lookup"><span data-stu-id="7f568-189">As Figure 4 illustrates, the breakpoint appears as a red circle in the margin.</span></span>


<span data-ttu-id="7f568-190">[![Festlegen eines Haltepunkts in der Products_SelectByCategoryID gespeicherten Prozedur](debugging-stored-procedures-cs/_static/image9.png)](debugging-stored-procedures-cs/_static/image8.png)</span><span class="sxs-lookup"><span data-stu-id="7f568-190">[![Set a Breakpoint in the Products_SelectByCategoryID Stored Procedure](debugging-stored-procedures-cs/_static/image9.png)](debugging-stored-procedures-cs/_static/image8.png)</span></span>

<span data-ttu-id="7f568-191">**Abbildung 4**: Festlegen eines Haltepunkts in der `Products_SelectByCategoryID` Stored Procedure ([klicken Sie, um das Bild in voller Größe anzeigen](debugging-stored-procedures-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="7f568-191">**Figure 4**: Set a Breakpoint in the `Products_SelectByCategoryID` Stored Procedure ([Click to view full-size image](debugging-stored-procedures-cs/_static/image10.png))</span></span>


<span data-ttu-id="7f568-192">In der Reihenfolge für eine SQL-Datenbank zu debuggenden Objekts, durch eine Clientanwendung ist es zwingend erforderlich, dass die Datenbank für die Unterstützung des Debuggens der Anwendung konfiguriert werden.</span><span class="sxs-lookup"><span data-stu-id="7f568-192">In order for a SQL database object to be debugged through a client application, it is imperative that the database be configured to support application debugging.</span></span> <span data-ttu-id="7f568-193">Wenn Sie zuerst einen Haltepunkt festlegen, sollten diese Einstellung automatisch aktiviert werden, aber es ist ratsam, überprüfen Sie noch einmal.</span><span class="sxs-lookup"><span data-stu-id="7f568-193">When you first set a breakpoint, this setting should automatically be switched on, but it is prudent to double-check.</span></span> <span data-ttu-id="7f568-194">Mit der rechten Maustaste auf die `NORTHWND.MDF` Knoten im Server-Explorer.</span><span class="sxs-lookup"><span data-stu-id="7f568-194">Right-click on the `NORTHWND.MDF` node in the Server Explorer.</span></span> <span data-ttu-id="7f568-195">Das Kontextmenü sollte aktiviert Menüelement Anwendungsdebugging enthalten.</span><span class="sxs-lookup"><span data-stu-id="7f568-195">The context menu should include a checked menu item named Application Debugging .</span></span>


![Stellen Sie sicher, dass die Anwendung debuggen-Option aktiviert ist](debugging-stored-procedures-cs/_static/image11.png)

<span data-ttu-id="7f568-197">**Abbildung 5**: Stellen Sie sicher, dass die Anwendung debuggen-Option aktiviert ist</span><span class="sxs-lookup"><span data-stu-id="7f568-197">**Figure 5**: Ensure that the Application Debugging Option is Enabled</span></span>


<span data-ttu-id="7f568-198">Mit dem gesetzten Haltepunkt und die Anwendungsdebuggen-Option aktiviert sind wir bereit für die gespeicherte Prozedur, die beim Aufruf von der ASP.NET-Anwendung zu debuggen.</span><span class="sxs-lookup"><span data-stu-id="7f568-198">With the breakpoint set and the Application Debugging option enabled, we are ready to debug the stored procedure when called from the ASP.NET application.</span></span> <span data-ttu-id="7f568-199">Starten Sie den Debugger, indem Sie im Menü Debuggen, und Sie Debuggen starten auswählen, durch Drücken von F5 oder durch Klicken auf die grüne play-Symbol auf der Symbolleiste.</span><span class="sxs-lookup"><span data-stu-id="7f568-199">Start the debugger by going to the Debug menu and choosing Start Debugging, by hitting F5, or by clicking the green play icon in the Toolbar.</span></span> <span data-ttu-id="7f568-200">Den Debugger zu starten wird und die Website zu starten.</span><span class="sxs-lookup"><span data-stu-id="7f568-200">This will start the debugger and launch the website.</span></span>

<span data-ttu-id="7f568-201">Die `Products_SelectByCategoryID` gespeicherte Prozedur wurde erstellt, der [vorhandene gespeicherte Prozeduren verwenden, für die typisierte DataSet-s TableAdapters](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs.md) Tutorial.</span><span class="sxs-lookup"><span data-stu-id="7f568-201">The `Products_SelectByCategoryID` stored procedure was created in the [Using Existing Stored Procedures for the Typed DataSet s TableAdapters](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs.md) tutorial.</span></span> <span data-ttu-id="7f568-202">Die entsprechende Webseite (`~/AdvancedDAL/ExistingSprocs.aspx`) enthält eine GridView, die von dieser gespeicherten Prozedur zurückgegebenen Ergebnisse werden angezeigt.</span><span class="sxs-lookup"><span data-stu-id="7f568-202">Its corresponding web page (`~/AdvancedDAL/ExistingSprocs.aspx`) contains a GridView that displays the results returned by this stored procedure.</span></span> <span data-ttu-id="7f568-203">Besuchen Sie diese Seite über den Browser aus.</span><span class="sxs-lookup"><span data-stu-id="7f568-203">Visit this page through the browser.</span></span> <span data-ttu-id="7f568-204">Beim Erreichen der Seite, die den Haltepunkt in der `Products_SelectByCategoryID` gespeicherte Prozedur wird erreicht, und Visual Studio die Steuerung zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="7f568-204">Upon reaching the page, the breakpoint in the `Products_SelectByCategoryID` stored procedure will be hit and control returned to Visual Studio.</span></span> <span data-ttu-id="7f568-205">Genau wie in Schritt 1, können Sie schrittweise Durchlaufen der gespeicherten Prozedur s-Anweisungen und die Ansicht und die Parameterwerte ändern.</span><span class="sxs-lookup"><span data-stu-id="7f568-205">Just like in Step 1, you can step through the stored procedure s statements and view and modify the parameter values.</span></span>


<span data-ttu-id="7f568-206">[![Die Seite ExistingSprocs.aspx werden zuerst die Getränke angezeigt.](debugging-stored-procedures-cs/_static/image13.png)](debugging-stored-procedures-cs/_static/image12.png)</span><span class="sxs-lookup"><span data-stu-id="7f568-206">[![The ExistingSprocs.aspx Page Initially Displays the Beverages](debugging-stored-procedures-cs/_static/image13.png)](debugging-stored-procedures-cs/_static/image12.png)</span></span>

<span data-ttu-id="7f568-207">**Abbildung 6**: die `ExistingSprocs.aspx` Seite zeigt zu Beginn der Getränke ([klicken Sie, um das Bild in voller Größe anzeigen](debugging-stored-procedures-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="7f568-207">**Figure 6**: The `ExistingSprocs.aspx` Page Initially Displays the Beverages ([Click to view full-size image](debugging-stored-procedures-cs/_static/image14.png))</span></span>


<span data-ttu-id="7f568-208">[![Die gespeicherte Prozedur s Haltepunkt wurde erreicht](debugging-stored-procedures-cs/_static/image16.png)](debugging-stored-procedures-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="7f568-208">[![The Stored Procedure s Breakpoint has been Reached](debugging-stored-procedures-cs/_static/image16.png)](debugging-stored-procedures-cs/_static/image15.png)</span></span>

<span data-ttu-id="7f568-209">**Abbildung 7**: die gespeicherte Prozedur s Haltepunkt erreicht wurde ([klicken Sie, um das Bild in voller Größe anzeigen](debugging-stored-procedures-cs/_static/image17.png))</span><span class="sxs-lookup"><span data-stu-id="7f568-209">**Figure 7**: The Stored Procedure s Breakpoint has been Reached ([Click to view full-size image](debugging-stored-procedures-cs/_static/image17.png))</span></span>


<span data-ttu-id="7f568-210">Als das Fenster "überwachen" in Abbildung 7 zeigt, der Wert des der `@CategoryID` -Parameter ist 1.</span><span class="sxs-lookup"><span data-stu-id="7f568-210">As the Watch window in Figure 7 shows, the value of the `@CategoryID` parameter is 1.</span></span> <span data-ttu-id="7f568-211">Grund hierfür ist die `ExistingSprocs.aspx` Seite zeigt anfänglich Produkte in der Kategorie "Getränke", die eine `CategoryID` Wert 1.</span><span class="sxs-lookup"><span data-stu-id="7f568-211">This is because the `ExistingSprocs.aspx` page initially displays products in the beverages category, which has a `CategoryID` value of 1.</span></span> <span data-ttu-id="7f568-212">Wählen Sie eine andere Kategorie aus der Dropdown Liste ein.</span><span class="sxs-lookup"><span data-stu-id="7f568-212">Choose a different category from the drop-down list.</span></span> <span data-ttu-id="7f568-213">Dies führt dazu, dass einen Postback und führt erneut die `Products_SelectByCategoryID` gespeicherte Prozedur.</span><span class="sxs-lookup"><span data-stu-id="7f568-213">Doing so causes a postback and re-executes the `Products_SelectByCategoryID` stored procedure.</span></span> <span data-ttu-id="7f568-214">Der Haltepunkt erreicht wird, erneut aus, aber dieses Mal die `@CategoryID` s-Parameterwert entspricht dem ausgewählten Dropdown-Listenfeld-Element s `CategoryID`.</span><span class="sxs-lookup"><span data-stu-id="7f568-214">The breakpoint is hit again, but this time the `@CategoryID` parameter s value reflects the selected drop-down list item s `CategoryID`.</span></span>


<span data-ttu-id="7f568-215">[![Wählen Sie eine andere Kategorie aus der Dropdown Liste](debugging-stored-procedures-cs/_static/image19.png)](debugging-stored-procedures-cs/_static/image18.png)</span><span class="sxs-lookup"><span data-stu-id="7f568-215">[![Choose a Different Category from the Drop-Down List](debugging-stored-procedures-cs/_static/image19.png)](debugging-stored-procedures-cs/_static/image18.png)</span></span>

<span data-ttu-id="7f568-216">**Abbildung 8**: Wählen Sie eine andere Kategorie aus der Dropdown Liste ([klicken Sie, um das Bild in voller Größe anzeigen](debugging-stored-procedures-cs/_static/image20.png))</span><span class="sxs-lookup"><span data-stu-id="7f568-216">**Figure 8**: Choose a Different Category from the Drop-Down List ([Click to view full-size image](debugging-stored-procedures-cs/_static/image20.png))</span></span>


<span data-ttu-id="7f568-217">[![Die @CategoryID Parameter gibt die Kategorie, die von der Webseite ausgewählt](debugging-stored-procedures-cs/_static/image22.png)](debugging-stored-procedures-cs/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="7f568-217">[![The @CategoryID Parameter Reflects the Category Selected from the Web Page](debugging-stored-procedures-cs/_static/image22.png)](debugging-stored-procedures-cs/_static/image21.png)</span></span>

<span data-ttu-id="7f568-218">**Abbildung 9**: die `@CategoryID` Parameter gibt die Kategorie, die von der Webseite ausgewählt ([klicken Sie, um das Bild in voller Größe anzeigen](debugging-stored-procedures-cs/_static/image23.png))</span><span class="sxs-lookup"><span data-stu-id="7f568-218">**Figure 9**: The `@CategoryID` Parameter Reflects the Category Selected from the Web Page ([Click to view full-size image](debugging-stored-procedures-cs/_static/image23.png))</span></span>


> [!NOTE]
> <span data-ttu-id="7f568-219">Wenn der Breakpoint im der `Products_SelectByCategoryID` gespeicherte Prozedur wird nicht erreicht werden, wenn das Unternehmen Besuchen der `ExistingSprocs.aspx` Seite, stellen Sie sicher, dass das Kontrollkästchen für die SQL Server im Abschnitt "Debugger" der ASP.NET-Anwendung s-Seite "Eigenschaften" markiert ist, wurde der Verbindungs-pooling deaktiviert, und dass die Datenbank s Anwendungsdebugging-Option aktiviert ist.</span><span class="sxs-lookup"><span data-stu-id="7f568-219">If the breakpoint in the `Products_SelectByCategoryID` stored procedure is not hit when visiting the `ExistingSprocs.aspx` page, make sure that the SQL Server checkbox has been checked in the Debuggers section of the ASP.NET application s Properties Page, that connection pooling has been disabled, and that the database s Application Debugging option is enabled.</span></span> <span data-ttu-id="7f568-220">Sollten Sie erneut immer noch Probleme auftreten, starten Sie Visual Studio, und versuchen Sie es erneut.</span><span class="sxs-lookup"><span data-stu-id="7f568-220">If you re still having problems, restart Visual Studio and try again.</span></span>


## <a name="debugging-t-sql-database-objects-on-remote-instances"></a><span data-ttu-id="7f568-221">Debuggen von T-SQL-Datenbankobjekte auf Remoteinstanzen</span><span class="sxs-lookup"><span data-stu-id="7f568-221">Debugging T-SQL Database Objects on Remote Instances</span></span>

<span data-ttu-id="7f568-222">Debuggen von Datenbankobjekten über Visual Studio ist recht einfach, wenn die SQL Server-Datenbankinstanz auf dem gleichen Computer wie Visual Studio ist.</span><span class="sxs-lookup"><span data-stu-id="7f568-222">Debugging database objects through Visual Studio is fairly straightforward when the SQL Server database instance is on the same machine as Visual Studio.</span></span> <span data-ttu-id="7f568-223">Jedoch SQL Server und Visual Studio, die auf verschiedenen Computern befinden sich ist eine sorgfältige Konfiguration erforderlich, alles ordnungsgemäß funktioniert.</span><span class="sxs-lookup"><span data-stu-id="7f568-223">However, if SQL Server and Visual Studio reside on different machines then some careful configuration is required to get everything working properly.</span></span> <span data-ttu-id="7f568-224">Es gibt zwei Hauptaufgaben, die, denen wir mit konfrontiert sind:</span><span class="sxs-lookup"><span data-stu-id="7f568-224">There are two core tasks we are faced with:</span></span>

- <span data-ttu-id="7f568-225">Stellen Sie sicher, dass die Anmeldung bei der Herstellung einer Verbindung mit der Datenbank über ADO.NET verwendet, gehört die `sysadmin` Rolle.</span><span class="sxs-lookup"><span data-stu-id="7f568-225">Ensure that the login used to connect to the database via ADO.NET belongs to the `sysadmin` role.</span></span>
- <span data-ttu-id="7f568-226">Stellen Sie sicher, dass das Windows-Benutzerkonto von Visual Studio verwendet werden, auf dem Entwicklungscomputer ein gültiger SQL Server-Anmeldekonto ist, zu dem gehört die `sysadmin` Rolle.</span><span class="sxs-lookup"><span data-stu-id="7f568-226">Ensure that the Windows user account used by Visual Studio on the development machine is a valid SQL Server login account that belongs to the `sysadmin` role.</span></span>

<span data-ttu-id="7f568-227">Der erste Schritt ist relativ unkompliziert.</span><span class="sxs-lookup"><span data-stu-id="7f568-227">The first step is relatively straightforward.</span></span> <span data-ttu-id="7f568-228">Ermitteln Sie zuerst das Benutzerkonto zum Verbinden mit der Datenbank von der ASP.NET-Anwendung ein, und fügen Sie in SQL Server Management Studio, Anmeldekonto an, die `sysadmin` Rolle.</span><span class="sxs-lookup"><span data-stu-id="7f568-228">First, identify the user account used to connect to the database from the ASP.NET application and then, from SQL Server Management Studio, add that login account to the `sysadmin` role.</span></span>

<span data-ttu-id="7f568-229">Der zweite Task erfordert, dass die Windows-Benutzerkonto, das Sie verwenden, um das Debuggen der Anwendung eine gültige Anmeldung auf der Remotedatenbank.</span><span class="sxs-lookup"><span data-stu-id="7f568-229">The second task requires that the Windows user account you use to debug the application be a valid login on the remote database.</span></span> <span data-ttu-id="7f568-230">Allerdings ist es wahrscheinlich an, dass das Windows-Konto, das Sie auf Ihrer Arbeitsstation mit angemeldet nicht um eine gültige Anmeldung auf SQL Server ist.</span><span class="sxs-lookup"><span data-stu-id="7f568-230">However, chances are the Windows account you logged on to your workstation with is not a valid login on SQL Server.</span></span> <span data-ttu-id="7f568-231">Anstelle von SQL Server Ihr bestimmtes Anmeldekonto hinzugefügt haben, würde eine bessere Wahl sein, einige Windows-Benutzerkonto als das debugging SQL Server-Dienstkonto festgelegt werden soll.</span><span class="sxs-lookup"><span data-stu-id="7f568-231">Rather than adding your particular login account to SQL Server, a better choice would be to designate some Windows user account as the SQL Server debugging account.</span></span> <span data-ttu-id="7f568-232">Um die Datenbankobjekte einer SQL Server-Remoteinstanz zu debuggen, ausführen Sie anschließend Visual Studio, die mit dieser Windows-Anmeldeinformationen Konto s.</span><span class="sxs-lookup"><span data-stu-id="7f568-232">Then, to debug the database objects of a remote SQL Server instance, you would run Visual Studio using that Windows login account s credentials.</span></span>

<span data-ttu-id="7f568-233">Ein Beispiel sollte Ihnen Dinge.</span><span class="sxs-lookup"><span data-stu-id="7f568-233">An example should help clarify things.</span></span> <span data-ttu-id="7f568-234">Angenommen, es ein Windows-Konto, das mit dem Namen ist `SQLDebug` innerhalb der Windows-Domäne.</span><span class="sxs-lookup"><span data-stu-id="7f568-234">Imagine that there is a Windows account named `SQLDebug` within the Windows domain.</span></span> <span data-ttu-id="7f568-235">Dieses Konto mit der SQL Server-Remoteinstanz als gültigen Anmeldenamen und ein Mitglied hinzugefügt werden müssten die `sysadmin` Rolle.</span><span class="sxs-lookup"><span data-stu-id="7f568-235">This account would need to be added to the remote SQL Server instance as a valid login and as a member of the `sysadmin` role.</span></span> <span data-ttu-id="7f568-236">Klicken Sie dann, um die SQL Server-Remoteinstanz in Visual Studio zu debuggen, müssen wir zum Ausführen von Visual Studio als die `SQLDebug` Benutzer.</span><span class="sxs-lookup"><span data-stu-id="7f568-236">Then, to debug the remote SQL Server instance from Visual Studio, we would need to run Visual Studio as the `SQLDebug` user.</span></span> <span data-ttu-id="7f568-237">Dies kann durch Abmelden eigenen Arbeitsstation, wieder anmelden, als `SQLDebug`, und klicken Sie dann starten von Visual Studio, jedoch ein einfacherer Ansatz wäre, die Anmeldung bei den eigenen Arbeitsstation mit eigenen Anmeldeinformationen und verwenden Sie dann `runas.exe` zum Starten von Visual Studio als die `SQLDebug` Benutzer.</span><span class="sxs-lookup"><span data-stu-id="7f568-237">This could be done by logging out of our workstation, logging back in as `SQLDebug`, and then launching Visual Studio, but a simpler approach would be to login to our workstation using our own credentials and then use `runas.exe` to launch Visual Studio as the `SQLDebug` user.</span></span> <span data-ttu-id="7f568-238">`runas.exe` können eine bestimmte Anwendung unter dem Deckmantel von einem anderen Benutzerkonto ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="7f568-238">`runas.exe` allows a particular application to be executed under the guise of a different user account.</span></span> <span data-ttu-id="7f568-239">Zum Starten von Visual Studio als `SQLDebug`, könnten Sie die folgende Anweisung in der Befehlszeile eingeben:</span><span class="sxs-lookup"><span data-stu-id="7f568-239">To launch Visual Studio as `SQLDebug`, you could enter the following statement at the command line:</span></span>


[!code-console[Main](debugging-stored-procedures-cs/samples/sample2.cmd)]

<span data-ttu-id="7f568-240">Eine ausführlichere Erläuterung zu diesem Prozess werden soll, finden Sie unter [William R. Vaughn](http://betav.com/BLOG/billva/) s *Hitchhiker s Leitfaden für Visual Studio und SQL Server, die siebte Ausgabe* sowie [so wird's gemacht: SQL Server-Berechtigungen festlegen für das Debuggen](https://msdn.microsoft.com/library/w1bhybwz(VS.80).aspx).</span><span class="sxs-lookup"><span data-stu-id="7f568-240">For a more detailed explanation on this process, see [William R. Vaughn](http://betav.com/BLOG/billva/) s *Hitchhiker s Guide to Visual Studio and SQL Server, Seventh Edition* as well as [How To: Set SQL Server Permissions for Debugging](https://msdn.microsoft.com/library/w1bhybwz(VS.80).aspx).</span></span>

> [!NOTE]
> <span data-ttu-id="7f568-241">Wenn Ihrem Entwicklungscomputer Windows XP Service Pack 2 ausgeführt wird, Sie die Windows-Firewall zum Remotedebuggen konfigurieren müssen.</span><span class="sxs-lookup"><span data-stu-id="7f568-241">If your development machine is running Windows XP Service Pack 2 you will need to configure the Internet Connection Firewall to allow remote debugging.</span></span> <span data-ttu-id="7f568-242">[Wie zu: SQL Server 2005-Debuggen aktivieren](https://msdn.microsoft.com/library/s0fk6z6e(VS.80).aspx) Artikel – Anmerkungen zu dieser, dass diese zwei Schritten besteht: (a) auf dem Visual Studio-Hostcomputer, müssen Sie hinzufügen `Devenv.exe` auf die Liste mit Ausnahmen und öffnen Sie die TCP-Anschluss 135; und (b) auf einem Remotecomputer (SQL), müssen Sie öffnen die 135 TCP-port, und fügen `sqlservr.exe` zur Liste Ausnahmen.</span><span class="sxs-lookup"><span data-stu-id="7f568-242">[The How To: Enable SQL Server 2005 Debugging](https://msdn.microsoft.com/library/s0fk6z6e(VS.80).aspx) article notes that this involves two steps: (a) On the Visual Studio host machine, you must add `Devenv.exe` to the Exceptions list and open the TCP 135 port; and (b) On the remote (SQL) machine, you must open the TCP 135 port and add `sqlservr.exe` to the Exceptions list.</span></span> <span data-ttu-id="7f568-243">Wenn die Domänenrichtlinie die Netzwerkkommunikation über IPSec erfordert, müssen Sie die Ports UDP 4500 und UDP 500 öffnen.</span><span class="sxs-lookup"><span data-stu-id="7f568-243">If your domain policy requires network communication to be done through IPSec, you must open the UDP 4500 and UDP 500 ports.</span></span>


## <a name="summary"></a><span data-ttu-id="7f568-244">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="7f568-244">Summary</span></span>

<span data-ttu-id="7f568-245">Zusätzlich zur Bereitstellung von debugging-Unterstützung für .NET-Anwendungscode, bietet Visual Studio auch eine Vielzahl von Debugoptionen für SQL Server 2005.</span><span class="sxs-lookup"><span data-stu-id="7f568-245">In addition to providing debugging support for .NET application code, Visual Studio also provides a variety of debugging options for SQL Server 2005.</span></span> <span data-ttu-id="7f568-246">In diesem Tutorial erläutert, zwei dieser Optionen: Direktes Datenbankdebugging und Anwendungsdebuggen.</span><span class="sxs-lookup"><span data-stu-id="7f568-246">In this tutorial we looked at two of those options: Direct Database Debugging and application debugging.</span></span> <span data-ttu-id="7f568-247">Um ein T-SQL-Database-Objekt direkt zu debuggen, suchen Sie das Objekt über den Server-Explorer und dann mit der rechten Maustaste darauf, und Einzelschritt auswählen.</span><span class="sxs-lookup"><span data-stu-id="7f568-247">To directly debug a T-SQL database object, locate the object through the Server Explorer then right-click on it and choose Step Into.</span></span> <span data-ttu-id="7f568-248">Dadurch wird der Debugger gestartet und hält bei der ersten Anweisung des Datenbankobjekts, das an diesem Punkt können Sie durchlaufen die Objekt-s-Anweisungen und anzeigen und ändern die Parameterwerte.</span><span class="sxs-lookup"><span data-stu-id="7f568-248">This starts the debugger and halts on the first statement in the database object, at which point you can step through the object s statements and view and modify parameter values.</span></span> <span data-ttu-id="7f568-249">In Schritt 1 dieser Ansatz in Einzelschritten wird die `Products_SelectByCategoryID` gespeicherte Prozedur.</span><span class="sxs-lookup"><span data-stu-id="7f568-249">In Step 1 we used this approach to step into the `Products_SelectByCategoryID` stored procedure.</span></span>

<span data-ttu-id="7f568-250">Anwendungsdebuggen können Haltepunkte direkt in die Datenbankobjekte festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="7f568-250">Application debugging allows breakpoints to be set directly within the database objects.</span></span> <span data-ttu-id="7f568-251">Wenn ein Datenbankobjekt mit Haltepunkten aus einer Clientanwendung (z. B. eine ASP.NET-Webanwendung) aufgerufen wird, stoppt das Programm, wie der Debugger übernimmt.</span><span class="sxs-lookup"><span data-stu-id="7f568-251">When a database object with breakpoints is invoked from a client application (such as an ASP.NET web application), the program halts as the debugger takes over.</span></span> <span data-ttu-id="7f568-252">Anwendungsdebuggen ist nützlich, weil es deutlicher zeigt, welche Anwendungsaktion führt dazu, dass ein bestimmtes Datenbankobjekt aufgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="7f568-252">Application debugging is useful because it more clearly shows what application action causes a particular database object to be invoked.</span></span> <span data-ttu-id="7f568-253">Es erfordert jedoch ein wenig mehr Konfigurations- und Setupprobleme als direktes Datenbankdebugging.</span><span class="sxs-lookup"><span data-stu-id="7f568-253">However, it requires a bit more configuration and setup than Direct Database Debugging.</span></span>

<span data-ttu-id="7f568-254">Datenbankobjekte können auch über SQL Server-Projekte gedebuggt werden.</span><span class="sxs-lookup"><span data-stu-id="7f568-254">Database objects can also be debugged through SQL Server Projects.</span></span> <span data-ttu-id="7f568-255">Betrachten wir mithilfe von SQL Server-Projekte, und verwenden sie zum Erstellen und Debuggen von verwalteten Datenbankobjekten im nächsten Tutorial.</span><span class="sxs-lookup"><span data-stu-id="7f568-255">We will look at using SQL Server Projects and how to use them to create and debug managed database objects in the next tutorial.</span></span>

<span data-ttu-id="7f568-256">Viel Spaß beim Programmieren!</span><span class="sxs-lookup"><span data-stu-id="7f568-256">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="7f568-257">Der Autor</span><span class="sxs-lookup"><span data-stu-id="7f568-257">About the Author</span></span>

<span data-ttu-id="7f568-258">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), Autor von sieben Büchern zu ASP/ASP.NET und Gründer von [4GuysFromRolla.com](http://www.4guysfromrolla.com), arbeitet mit Microsoft-Web-Technologien seit 1998.</span><span class="sxs-lookup"><span data-stu-id="7f568-258">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="7f568-259">Er ist als ein unabhängiger Berater, Schulungsleiter und Autor.</span><span class="sxs-lookup"><span data-stu-id="7f568-259">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="7f568-260">Sein neueste Buch wird [*Sams Schulen selbst ASP.NET 2.0 in 24 Stunden*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="7f568-260">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="7f568-261">Er ist unter [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="7f568-261">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="7f568-262">oder über seinen Blog finden Sie unter [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="7f568-262">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="7f568-263">[Zurück](protecting-connection-strings-and-other-configuration-information-cs.md)
> [Weiter](creating-stored-procedures-and-user-defined-functions-with-managed-code-cs.md)</span><span class="sxs-lookup"><span data-stu-id="7f568-263">[Previous](protecting-connection-strings-and-other-configuration-information-cs.md)
[Next](creating-stored-procedures-and-user-defined-functions-with-managed-code-cs.md)</span></span>
