---
uid: web-forms/overview/data-access/displaying-data-with-the-datalist-and-repeater/formatting-the-datalist-and-repeater-based-upon-data-cs
title: Formatieren des DataList- und Wiederholungssteuerelements auf Datenbasis lässt sich sagen (c#) | Microsoft-Dokumentation
author: rick-anderson
description: In diesem Tutorial werden wir schrittweise Beispiele wie wir die Darstellung der DataList- oder Repeater-Steuerelemente, entweder mithilfe von Formatierungsfunktionen mit formatieren...
ms.author: aspnetcontent
ms.date: 09/13/2006
ms.assetid: 83e3d759-82b8-41e6-8d62-f0f4b3edec41
msc.legacyurl: /web-forms/overview/data-access/displaying-data-with-the-datalist-and-repeater/formatting-the-datalist-and-repeater-based-upon-data-cs
msc.type: authoredcontent
ms.openlocfilehash: cfb23a65c288ed155625a1f8a4d7db1330ab2407
ms.sourcegitcommit: b28cd0313af316c051c2ff8549865bff67f2fbb4
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 07/05/2018
ms.locfileid: "37840257"
---
<a name="formatting-the-datalist-and-repeater-based-upon-data-c"></a><span data-ttu-id="a8bd0-103">Formatieren des DataList- und Wiederholungssteuerelements auf Datenbasis (c#)</span><span class="sxs-lookup"><span data-stu-id="a8bd0-103">Formatting the DataList and Repeater Based Upon Data (C#)</span></span>
====================
<span data-ttu-id="a8bd0-104">durch [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="a8bd0-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="a8bd0-105">[Beispiel-App herunter](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_30_CS.exe) oder [PDF-Datei herunterladen](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/datatutorial30cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="a8bd0-105">[Download Sample App](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_30_CS.exe) or [Download PDF](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/datatutorial30cs1.pdf)</span></span>

> <span data-ttu-id="a8bd0-106">In diesem Tutorial werden wir schrittweise Beispiele wie wir die Darstellung der DataList- oder Repeater-Steuerelemente, entweder mithilfe von Formatierungsfunktionen in Vorlagen oder durch Behandlung des Ereignisses für die Datenbindung zu formatieren.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-106">In this tutorial we'll step through examples of how we format the appearance of the DataList and Repeater controls, either by using formatting functions within templates or by handling the DataBound event.</span></span>


## <a name="introduction"></a><span data-ttu-id="a8bd0-107">Einführung</span><span class="sxs-lookup"><span data-stu-id="a8bd0-107">Introduction</span></span>

<span data-ttu-id="a8bd0-108">Wie wir im vorherigen Tutorial gesehen haben, bietet DataList-Steuerelement eine Reihe von Formatvorlagen bezogenen Eigenschaften, die die Darstellung zu beeinflussen.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-108">As we saw in the preceding tutorial, the DataList offers a number of style-related properties that affect its appearance.</span></span> <span data-ttu-id="a8bd0-109">Insbesondere wurde erläutert, wie standardmäßige CSS-Klassen an die Datenliste s weisen `HeaderStyle`, `ItemStyle`, `AlternatingItemStyle`, und `SelectedItemStyle` Eigenschaften.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-109">In particular, we saw how to assign default CSS classes to the DataList s `HeaderStyle`, `ItemStyle`, `AlternatingItemStyle`, and `SelectedItemStyle` properties.</span></span> <span data-ttu-id="a8bd0-110">Zusätzlich zu diesen vier Eigenschaften, umfasst DataList-Steuerelement eine Reihe von anderen auf Formatvorlagen bezogenen Steuerelementeigenschaften, wie z. B. `Font`, `ForeColor`, `BackColor`, und `BorderWidth`, um nur einige zu nennen.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-110">In addition to these four properties, the DataList includes a number of other style-related properties, such as `Font`, `ForeColor`, `BackColor`, and `BorderWidth`, to name a few.</span></span> <span data-ttu-id="a8bd0-111">Das Repeater-Steuerelement enthält keine Formatvorlagen bezogenen Eigenschaften.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-111">The Repeater control does not contain any style-related properties.</span></span> <span data-ttu-id="a8bd0-112">Alle diese formateinstellungen müssen direkt in das Markup in den Repeater-s-Vorlagen vorgenommen werden.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-112">Any such style settings must be made directly within the markup in the Repeater s templates.</span></span>

<span data-ttu-id="a8bd0-113">Oft, hängt wie die Daten formatiert werden soll jedoch von den Daten selbst.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-113">Often, though, how data should be formatted depends on the data itself.</span></span> <span data-ttu-id="a8bd0-114">Z. B. beim Auflisten von Produkten wir möchten die Produktinformationen in einen hellen grauen Schrift angezeigt, wenn es nicht mehr unterstützt wird, oder wir hervorheben möchten die `UnitsInStock` -Wert, wenn es sich um 0 (null) ist.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-114">For example, when listing products we might want to display the product information in a light gray font color if it is discontinued, or we may want to highlight the `UnitsInStock` value if it is zero.</span></span> <span data-ttu-id="a8bd0-115">Wie wir in vorherigen Tutorials gesehen haben, bieten die GridView, DetailsView und FormView-Steuerelement zwei unterschiedliche Möglichkeiten, um ihre Darstellung auf der Grundlage ihrer Daten zu formatieren:</span><span class="sxs-lookup"><span data-stu-id="a8bd0-115">As we saw in previous tutorials, the GridView, DetailsView, and FormView offer two distinct ways to format their appearance based on their data:</span></span>

- <span data-ttu-id="a8bd0-116">**Die `DataBound` Ereignis** erstellen Sie einen Ereignishandler für das entsprechende `DataBound` Ereignis, das ausgelöst wird, nachdem die Daten zu jedem Element gebunden wurde (für die GridView war die `RowDataBound` Ereignis DataList- oder Wiederholungssteuerelement ist die `ItemDataBound`Ereignis).</span><span class="sxs-lookup"><span data-stu-id="a8bd0-116">**The `DataBound` event** create an event handler for the appropriate `DataBound` event, which fires after the data has been bound to each item (for the GridView it was the `RowDataBound` event; for the DataList and Repeater it is the `ItemDataBound` event).</span></span> <span data-ttu-id="a8bd0-117">In diesem Fall Handler auf, die gebundenen Daten nur untersucht werden kann und formatierungsentscheidungen vorgenommen.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-117">In that event handler, the data just bound can be examined and formatting decisions made.</span></span> <span data-ttu-id="a8bd0-118">Untersuchten wir diese Vorgehensweise in der [benutzerdefinierte Formatierung basierend auf Daten](../custom-formatting/custom-formatting-based-upon-data-cs.md) Tutorial.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-118">We examined this technique in the [Custom Formatting Based Upon Data](../custom-formatting/custom-formatting-based-upon-data-cs.md) tutorial.</span></span>
- <span data-ttu-id="a8bd0-119">**Formatieren von Funktionen in Vorlagen** bei Verwendung von TemplateFields in DetailsView oder GridView-Steuerelemente oder einer Vorlage in das FormView-Steuerelement können wir eine Formatierung Funktion der ASP.NET Page s-Code-Behind-Klasse, die Geschäftslogikschicht oder eines hinzufügen andere Klassenbibliothek, die von der Webanwendung zugegriffen werden kann.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-119">**Formatting Functions in Templates** when using TemplateFields in the DetailsView or GridView controls, or a template in the FormView control, we can add a formatting function to the ASP.NET page s code-behind class, the Business Logic Layer, or any other class library that is accessible from the web application.</span></span> <span data-ttu-id="a8bd0-120">Diese Formatierung Funktion lässt eine beliebige Anzahl von Eingabeparametern, jedoch muss den HTML-Code zum Rendern in der Vorlage zurück.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-120">This formatting function can accept an arbitrary number of input parameters, but must return the HTML to render in the template.</span></span> <span data-ttu-id="a8bd0-121">Formatierungsoptionen wurden zuerst in untersucht die [Verwenden von TemplateFields, im GridView-Steuerelement](../custom-formatting/using-templatefields-in-the-gridview-control-cs.md) Tutorial.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-121">Formatting functions were first examined in the [Using TemplateFields in the GridView Control](../custom-formatting/using-templatefields-in-the-gridview-control-cs.md) tutorial.</span></span>

<span data-ttu-id="a8bd0-122">Beide Techniken Formatierung sind verfügbar, mit dem DataList- und Wiederholungssteuerelement-Steuerelementen.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-122">Both of these formatting techniques are available with the DataList and Repeater controls.</span></span> <span data-ttu-id="a8bd0-123">In diesem Tutorial werden wir Beispiele für die Verwendung der beiden Techniken für beide Steuerelemente durchlaufen.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-123">In this tutorial we'll step through examples using both techniques for both controls.</span></span>

## <a name="using-theitemdataboundevent-handler"></a><span data-ttu-id="a8bd0-124">Mithilfe der`ItemDataBound`-Ereignishandler</span><span class="sxs-lookup"><span data-stu-id="a8bd0-124">Using the`ItemDataBound`Event Handler</span></span>

<span data-ttu-id="a8bd0-125">Wenn Daten gebunden ist, einem DataList-Steuerelement, ein Datenquellen-Steuerelement oder über die Daten programmgesteuert zuweisen, auf das Steuerelement s `DataSource` -Eigenschaft ab, und rufen die `DataBind()` -Methode, DataList-Steuerelement s `DataBinding` Ereignis ausgelöst wird, die Datenquelle aufgelistet, und jeder Datensatz an die Datenliste gebunden ist.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-125">When data is bound to a DataList, either from a data source control or through programmatically assigning data to the control s `DataSource` property and calling its `DataBind()` method, the DataList s `DataBinding` event fires, the data source enumerated, and each data record is bound to the DataList.</span></span> <span data-ttu-id="a8bd0-126">Für jeden Datensatz in der Datenquelle, DataList-Steuerelement erstellt eine [ `DataListItem` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalistitem.aspx) -Standardobjekt ab, und klicken Sie dann auf den aktuellen Datensatz gebunden.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-126">For each record in the data source, the DataList creates a [`DataListItem`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalistitem.aspx) object that is then bound to the current record.</span></span> <span data-ttu-id="a8bd0-127">Während dieses Vorgangs löst DataList-Steuerelement zwei Ereignisse:</span><span class="sxs-lookup"><span data-stu-id="a8bd0-127">During this process, the DataList raises two events:</span></span>

- <span data-ttu-id="a8bd0-128">**`ItemCreated`** wird ausgelöst, nachdem die `DataListItem` erstellt wurde</span><span class="sxs-lookup"><span data-stu-id="a8bd0-128">**`ItemCreated`** fires after the `DataListItem` has been created</span></span>
- <span data-ttu-id="a8bd0-129">**`ItemDataBound`** wird ausgelöst, nachdem der aktuelle Datensatz an gebunden wurde die `DataListItem`</span><span class="sxs-lookup"><span data-stu-id="a8bd0-129">**`ItemDataBound`** fires after the current record has been bound to the `DataListItem`</span></span>

<span data-ttu-id="a8bd0-130">Die folgenden Schritte beschreiben den Prozess der Datenbindung für das DataList-Steuerelement.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-130">The following steps outline the data binding process for the DataList control.</span></span>

1. <span data-ttu-id="a8bd0-131">DataList-Steuerelement s [ `DataBinding` Ereignis](https://msdn.microsoft.com/library/system.web.ui.control.databinding.aspx) ausgelöst wird</span><span class="sxs-lookup"><span data-stu-id="a8bd0-131">The DataList s [`DataBinding` event](https://msdn.microsoft.com/library/system.web.ui.control.databinding.aspx) fires</span></span>
2. <span data-ttu-id="a8bd0-132">Die Daten werden an die Datenliste gebunden.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-132">The data is bound to the DataList</span></span>  
  
   <span data-ttu-id="a8bd0-133">Für jeden Datensatz in der Datenquelle</span><span class="sxs-lookup"><span data-stu-id="a8bd0-133">For each record in the data source</span></span> 

    1. <span data-ttu-id="a8bd0-134">Erstellen Sie eine `DataListItem` Objekt</span><span class="sxs-lookup"><span data-stu-id="a8bd0-134">Create a `DataListItem` object</span></span>
    2. <span data-ttu-id="a8bd0-135">Auslösen der [ `ItemCreated` Ereignis](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalist.itemcreated.aspx)</span><span class="sxs-lookup"><span data-stu-id="a8bd0-135">Fire the [`ItemCreated` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalist.itemcreated.aspx)</span></span>
    3. <span data-ttu-id="a8bd0-136">Binden Sie den Datensatz auf der `DataListItem`</span><span class="sxs-lookup"><span data-stu-id="a8bd0-136">Bind the record to the `DataListItem`</span></span>
    4. <span data-ttu-id="a8bd0-137">Auslösen der [ `ItemDataBound` Ereignis](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalist.itemdatabound.aspx)</span><span class="sxs-lookup"><span data-stu-id="a8bd0-137">Fire the [`ItemDataBound` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalist.itemdatabound.aspx)</span></span>
    5. <span data-ttu-id="a8bd0-138">Hinzufügen der `DataListItem` auf die `Items` Auflistung</span><span class="sxs-lookup"><span data-stu-id="a8bd0-138">Add the `DataListItem` to the `Items` collection</span></span>

<span data-ttu-id="a8bd0-139">Beim Binden von Daten an das Repeater-Steuerelement, durchläuft sie genau dieselbe Sequenz von Schritten.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-139">When binding data to the Repeater control, it progresses through the exact same sequence of steps.</span></span> <span data-ttu-id="a8bd0-140">Der einzige Unterschied ist, dass statt des `DataListItem` Instanzen, die erstellt wird, der Repeater verwendet [ `RepeaterItem` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.repeateritem(VS.80).aspx)s.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-140">The only difference is that instead of `DataListItem` instances being created, the Repeater uses [`RepeaterItem`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.repeateritem(VS.80).aspx)s.</span></span>

> [!NOTE]
> <span data-ttu-id="a8bd0-141">Der aufmerksame Leser eine leichte Anomalie zwischen die Abfolge der Schritte haben möglicherweise bemerkt, das eintritt, wenn dem DataList- und Wiederholungssteuerelement an Daten im Vergleich zu gebunden sind, wenn die GridView an Daten gebunden ist.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-141">The astute reader may have noticed a slight anomaly between the sequence of steps that transpire when the DataList and Repeater are bound to data versus when the GridView is bound to data.</span></span> <span data-ttu-id="a8bd0-142">Am Ende des Protokollfragments der dem Prozess der Datenbindung, GridView löst die `DataBound` Ereignis jedoch weder die Repeater das DataList-Steuerelement einem solchen haben.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-142">At the tail end of the data binding process, the GridView raises the `DataBound` event; however, neither the DataList nor Repeater control have such an event.</span></span> <span data-ttu-id="a8bd0-143">Dies ist, weil die DataList- oder Repeater-Steuerelemente wieder in den ASP.NET 1.x-Zeitrahmen erstellt wurden, bevor das vorab und nachträglich auf Ereignis-Muster "Meldungshandler" häufiger eingesetzt werden mussten.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-143">This is because the DataList and Repeater controls were created back in the ASP.NET 1.x timeframe, before the pre- and post-level event handler pattern had become common.</span></span>


<span data-ttu-id="a8bd0-144">Mit GridView ist eine Option für die Formatierung basierend auf den Daten, erstellen Sie einen Ereignishandler für die `ItemDataBound` Ereignis.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-144">Like with the GridView, one option for formatting based on the data is to create an event handler for the `ItemDataBound` event.</span></span> <span data-ttu-id="a8bd0-145">Dieser Ereignishandler würde überprüfen Sie die Daten, die nur auf gebunden wurde, hatte der `DataListItem` oder `RepeaterItem` und Auswirkungen auf die Formatierung des Steuerelements nach Bedarf.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-145">This event handler would inspect the data that had just been bound to the `DataListItem` or `RepeaterItem` and affect the formatting of the control as needed.</span></span>

<span data-ttu-id="a8bd0-146">Formatieren von Änderungen für das DataList-Steuerelement, das gesamte Element implementiert werden kann, mit der `DataListItem` s Formatvorlagen bezogenen Eigenschaften, die den Standard enthalten `Font`, `ForeColor`, `BackColor`, `CssClass`und so weiter.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-146">For the DataList control, formatting changes for the entire item can be implemented using the `DataListItem` s style-related properties, which include the standard `Font`, `ForeColor`, `BackColor`, `CssClass`, and so on.</span></span> <span data-ttu-id="a8bd0-147">Um die Formatierung von bestimmten Websteuerelementen innerhalb der DataList-s-Vorlage zu beeinflussen, müssen wir programmgesteuerten Zugriff auf und Ändern des Stils von dieser Web-Steuerelemente.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-147">To affect the formatting of particular Web controls within the DataList s template, we need to programmatically access and modify the style of those Web controls.</span></span> <span data-ttu-id="a8bd0-148">Erläutert, wie diese zurück in die *benutzerdefinierte Formatierung basierend auf Daten* Tutorial.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-148">We saw how to accomplish this back in the *Custom Formatting Based Upon Data* tutorial.</span></span> <span data-ttu-id="a8bd0-149">Repeater-Steuerelement, wie die `RepeaterItem` -Klasse verfügt über keine Formatvorlagen bezogenen Eigenschaften; aus diesem Grund alle Formatvorlagen bezogenen Änderungen an einer `RepeaterItem` in die `ItemDataBound` Ereignishandler muss erfolgen, indem Sie programmgesteuert zugreifen und diese aktualisieren Websteuerelemente in die Vorlage.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-149">Like the Repeater control, the `RepeaterItem` class has no style-related properties; therefore, all style-related changes made to a `RepeaterItem` in the `ItemDataBound` event handler must be done by programmatically accessing and updating Web controls within the template.</span></span>

<span data-ttu-id="a8bd0-150">Da die `ItemDataBound` Formatierung von Verfahren für die dem DataList- und Wiederholungssteuerelement nahezu identisch sind, in unserem Beispiel konzentriert sich auf die mit DataList-Steuerelement.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-150">Since the `ItemDataBound` formatting technique for the DataList and Repeater are virtually identical, our example will focus on using the DataList.</span></span>

## <a name="step-1-displaying-product-information-in-the-datalist"></a><span data-ttu-id="a8bd0-151">Schritt 1: Anzeigen von Produktinformationen im DataList-Steuerelement</span><span class="sxs-lookup"><span data-stu-id="a8bd0-151">Step 1: Displaying Product Information in the DataList</span></span>

<span data-ttu-id="a8bd0-152">Bevor wir die Formatierung kümmern, Let s zunächst erstellen eine Seite, die einem DataList-Steuerelement verwendet wird, um Produktinformationen anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-152">Before we worry about the formatting, let s first create a page that uses a DataList to display product information.</span></span> <span data-ttu-id="a8bd0-153">In der [vorherigen Tutorial](displaying-data-with-the-datalist-and-repeater-controls-cs.md) wir einem DataList-Steuerelement erstellt, deren `ItemTemplate` angezeigt wird, jede s, Produktname, die Kategorie, die Lieferanten, die Menge pro Einheit und Preis.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-153">In the [previous tutorial](displaying-data-with-the-datalist-and-repeater-controls-cs.md) we created a DataList whose `ItemTemplate` displayed each product s name, category, supplier, quantity per unit, and price.</span></span> <span data-ttu-id="a8bd0-154">Lassen Sie s, die diese Funktionalität wird hier in diesem Tutorial zu wiederholen.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-154">Let s repeat this functionality here in this tutorial.</span></span> <span data-ttu-id="a8bd0-155">Zu diesem Zweck erstellen Sie entweder DataList-Steuerelement und seine "ObjectDataSource" von Grund auf neu, oder Sie können über die Steuerelemente auf der Seite, die im vorherigen Tutorial erstellte kopieren (`Basics.aspx`) und fügen Sie sie auf der Seite für dieses Tutorial (`Formatting.aspx`).</span><span class="sxs-lookup"><span data-stu-id="a8bd0-155">To accomplish this, you can either recreate the DataList and its ObjectDataSource from scratch, or you can copy over those controls from the page created in the previous tutorial (`Basics.aspx`) and paste them into the page for this tutorial (`Formatting.aspx`).</span></span>

<span data-ttu-id="a8bd0-156">Nachdem Sie die Funktionalität DataList-Steuerelement und "ObjectDataSource" repliziert haben `Basics.aspx` in `Formatting.aspx`, DataList-Steuerelement s ändern in Ruhe `ID` Eigenschaft aus `DataList1` um einen aussagekräftigeren `ItemDataBoundFormattingExample`.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-156">Once you have replicated the DataList and ObjectDataSource functionality from `Basics.aspx` into `Formatting.aspx`, take a moment to change the DataList s `ID` property from `DataList1` to a more descriptive `ItemDataBoundFormattingExample`.</span></span> <span data-ttu-id="a8bd0-157">Als Nächstes werden DataList-Steuerelement in einem Browser anzeigen.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-157">Next, view the DataList in a browser.</span></span> <span data-ttu-id="a8bd0-158">Wie in Abbildung 1 gezeigt, ist der einzige Formatierung Unterschied zwischen jedes Produkt, die Farbe des Hintergrunds wechselt.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-158">As Figure 1 shows, the only formatting difference between each product is that the background color alternates.</span></span>


<span data-ttu-id="a8bd0-159">[![Die Produkte sind in dem DataList-Steuerelement aufgeführt.](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image2.png)](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="a8bd0-159">[![The Products are Listed in the DataList Control](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image2.png)](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image1.png)</span></span>

<span data-ttu-id="a8bd0-160">**Abbildung 1**: der Produkte finden Sie in das DataList-Steuerelement ([klicken Sie, um das Bild in voller Größe anzeigen](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="a8bd0-160">**Figure 1**: The Products are Listed in the DataList Control ([Click to view full-size image](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image3.png))</span></span>


<span data-ttu-id="a8bd0-161">In diesem Tutorial können Sie s DataList-Steuerelement formatieren, sodass alle Produkte mit einem Preis kleiner-als-20,00 $pro sowohl der Name müssen und Unit price gelb hervorgehoben.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-161">For this tutorial, let s format the DataList such that any products with a price less than $20.00 will have both its name and unit price highlighted yellow.</span></span>

## <a name="step-2-programmatically-determining-the-value-of-the-data-in-the-itemdatabound-event-handler"></a><span data-ttu-id="a8bd0-162">Schritt 2: Programmgesteuertes bestimmen den Wert der Daten in den ItemDataBound-Ereignishandler</span><span class="sxs-lookup"><span data-stu-id="a8bd0-162">Step 2: Programmatically Determining the Value of the Data in the ItemDataBound Event Handler</span></span>

<span data-ttu-id="a8bd0-163">Da nur die Produkte mit einem Preis unter 20,00 $pro wird die benutzerdefinierte Formatierung angewendet haben, müssen wir jede s Produktpreis bestimmen können.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-163">Since only those products with a price under $20.00 will have the custom formatting applied, we must be able to determine each product s price.</span></span> <span data-ttu-id="a8bd0-164">Beim Binden von Daten an einem DataList-Steuerelement, DataList-Steuerelement zählt die Datensätze in der Datenquelle und für die einzelnen Datensätze erstellt eine `DataListItem` Instanz, die den Datensatz der Datenquelle zum Binden der `DataListItem`.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-164">When binding data to a DataList, the DataList enumerates the records in its data source and, for each record, creates a `DataListItem` instance, binding the data source record to the `DataListItem`.</span></span> <span data-ttu-id="a8bd0-165">Nach den entsprechenden Datensatz s Daten gebunden wurde mit dem aktuellen `DataListItem` -Objekt, das DataList s `ItemDataBound` Ereignis wird ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-165">After the particular record s data has been bound to the current `DataListItem` object, the DataList s `ItemDataBound` event is fired.</span></span> <span data-ttu-id="a8bd0-166">Erstellen wir einen Ereignishandler für dieses Ereignis, um die Datenwerte für die aktuelle überprüfen `DataListItem` und, basierend auf diesen Werten, Änderungen vornehmen, Formatierungen erforderlich.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-166">We can create an event handler for this event to inspect the data values for the current `DataListItem` and, based upon those values, make any formatting changes necessary.</span></span>

<span data-ttu-id="a8bd0-167">Erstellen Sie eine `ItemDataBound` -Ereignis für DataList-Steuerelement und fügen Sie den folgenden Code hinzu:</span><span class="sxs-lookup"><span data-stu-id="a8bd0-167">Create an `ItemDataBound` event for the DataList and add the following code:</span></span>


[!code-csharp[Main](formatting-the-datalist-and-repeater-based-upon-data-cs/samples/sample1.cs)]

<span data-ttu-id="a8bd0-168">Während das Konzept und die Semantik hinter dem DataList-Steuerelement s `ItemDataBound` Ereignishandler sind identisch mit denen ein, die das GridView-s `RowDataBound` -Ereignishandler in der *benutzerdefinierte Formatierung basierend auf Daten* Tutorial, um die Syntax unterscheidet etwas.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-168">While the concept and semantics behind the DataList s `ItemDataBound` event handler are the same as those used by the GridView s `RowDataBound` event handler in the *Custom Formatting Based Upon Data* tutorial, the syntax differs slightly.</span></span> <span data-ttu-id="a8bd0-169">Wenn die `ItemDataBound` Ereignis wird ausgelöst, die `DataListItem` nur an Daten gebunden wird an die entsprechenden Ereignishandler über übergeben `e.Item` (anstelle von `e.Row`entspricht der Vorgehensweise bei der GridView-s `RowDataBound` -Ereignishandler).</span><span class="sxs-lookup"><span data-stu-id="a8bd0-169">When the `ItemDataBound` event fires, the `DataListItem` just bound to data is passed into corresponding event handler via `e.Item` (instead of `e.Row`, as with the GridView s `RowDataBound` event handler).</span></span> <span data-ttu-id="a8bd0-170">DataList-Steuerelement s `ItemDataBound` Ereignishandler ausgelöst wird, für die *jedes* Zeile DataList-Steuerelement, einschließlich Kopfzeilen, Fußzeilen und Trennzeichen für Zeilen hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-170">The DataList s `ItemDataBound` event handler fires for *each* row added to the DataList, including header rows, footer rows, and separator rows.</span></span> <span data-ttu-id="a8bd0-171">Die Produktinformationen ist jedoch nur auf die Datenzeilen gebunden.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-171">However, the product information is only bound to the data rows.</span></span> <span data-ttu-id="a8bd0-172">Aus diesem Grund bei Verwendung der `ItemDataBound` Ereignis, um die Daten zu überprüfen, die an DataList-Steuerelement gebunden werden, müssen wir zuerst sicherstellen, dass es neu mit einem Datenelement arbeiten.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-172">Therefore, when using the `ItemDataBound` event to inspect the data bound to the DataList, we need to first ensure that we re working with a data item.</span></span> <span data-ttu-id="a8bd0-173">Dies kann erreicht werden, indem Sie überprüfen die `DataListItem` s [ `ItemType` Eigenschaft](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalistitem.itemtype.aspx), die einen der enthalten kann [die folgenden acht Werte](https://msdn.microsoft.com/library/system.web.ui.webcontrols.listitemtype.aspx):</span><span class="sxs-lookup"><span data-stu-id="a8bd0-173">This can be accomplished by checking the `DataListItem` s [`ItemType` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalistitem.itemtype.aspx), which can have one of [the following eight values](https://msdn.microsoft.com/library/system.web.ui.webcontrols.listitemtype.aspx):</span></span>

- `AlternatingItem`
- `EditItem`
- `Footer`
- `Header`
- `Item`
- `Pager`
- `SelectedItem`
- `Separator`

<span data-ttu-id="a8bd0-174">Beide `Item` und `AlternatingItem``DataListItem` s Zusammensetzung der DataList-s-Datenelemente.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-174">Both `Item` and `AlternatingItem``DataListItem` s makeup the DataList s data items.</span></span> <span data-ttu-id="a8bd0-175">Wenn wir erneut die Arbeit mit einer `Item` oder `AlternatingItem`, wir Zugriff auf die tatsächliche `ProductsRow` -Instanz, die mit dem aktuellen gebunden war `DataListItem`.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-175">Assuming we re working with an `Item` or `AlternatingItem`, we access the actual `ProductsRow` instance that was bound to the current `DataListItem`.</span></span> <span data-ttu-id="a8bd0-176">Die `DataListItem` s [ `DataItem` Eigenschaft](https://msdn.microsoft.com/system.web.ui.webcontrols.datalistitem.dataitem.aspx) enthält einen Verweis auf die `DataRowView` Objekt, dessen `Row` Eigenschaft stellt einen Verweis auf die tatsächliche `ProductsRow` Objekt.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-176">The `DataListItem` s [`DataItem` property](https://msdn.microsoft.com/system.web.ui.webcontrols.datalistitem.dataitem.aspx) contains a reference to the `DataRowView` object, whose `Row` property provides a reference to the actual `ProductsRow` object.</span></span>

<span data-ttu-id="a8bd0-177">Als Nächstes überprüfen wir die `ProductsRow` s-Instanz `UnitPrice` Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-177">Next, we check the `ProductsRow` instance s `UnitPrice` property.</span></span> <span data-ttu-id="a8bd0-178">Seit der Tabelle "Products" s `UnitPrice` Feld ermöglicht `NULL` Werte, bevor Sie versuchen, den Zugriff auf die `UnitPrice` Eigenschaft wir sollten zunächst überprüfen, festzustellen, ob sie verfügt über eine `NULL` -Wert mithilfe der `IsUnitPriceNull()` Methode.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-178">Since the Products table s `UnitPrice` field allows `NULL` values, before attempting to access the `UnitPrice` property we should first check to see if it has a `NULL` value using the `IsUnitPriceNull()` method.</span></span> <span data-ttu-id="a8bd0-179">Wenn die `UnitPrice` Wert ist kein `NULL`, wir dann prüfen um festzustellen, ob es kleiner als 20,00 $pro.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-179">If the `UnitPrice` value is not `NULL`, we then check to see if it s less than $20.00.</span></span> <span data-ttu-id="a8bd0-180">Wenn es tatsächlich unter 20,00 $ ist, müssen wir die benutzerdefinierte Formatierung anzuwenden.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-180">If it is indeed under $20.00, we then need to apply the custom formatting.</span></span>

## <a name="step-3-highlighting-the-product-s-name-and-price"></a><span data-ttu-id="a8bd0-181">Schritt 3: Markieren, die Produkt-s-Namen und Preise</span><span class="sxs-lookup"><span data-stu-id="a8bd0-181">Step 3: Highlighting the Product s Name and Price</span></span>

<span data-ttu-id="a8bd0-182">Sobald wir wissen, dass ein Produktpreis s weniger als 20,00 $ ist, übrig bleibt, markieren Sie den Namen und den Preis.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-182">Once we know that a product s price is less than $20.00, all that remains is to highlight its name and price.</span></span> <span data-ttu-id="a8bd0-183">Um dies zu erreichen, wir müssen zunächst programmgesteuert verweisen die Label-Steuerelemente in der `ItemTemplate` , von denen Produktname s und Preis angezeigt.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-183">To accomplish this, we must first programmatically reference the Label controls in the `ItemTemplate` that display the product s name and price.</span></span> <span data-ttu-id="a8bd0-184">Als Nächstes benötigen wir diese einen gelben Hintergrund angezeigt.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-184">Next, we need to have them display a yellow background.</span></span> <span data-ttu-id="a8bd0-185">Diese Formatierungsinformationen kann angewendet werden, durch direktes Bearbeiten der Bezeichnungen `BackColor` Eigenschaften (`LabelID.BackColor = Color.Yellow`), im Idealfall jedoch alle Angelegenheiten im Zusammenhang mit Anzeige durch cascading Stylesheets ausgedrückt werden.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-185">This formatting information can be applied by directly modifying the Labels `BackColor` properties (`LabelID.BackColor = Color.Yellow`); ideally, though, all display-related matters should be expressed through cascading stylesheets.</span></span> <span data-ttu-id="a8bd0-186">Tatsächlich haben wir bereits ein Stylesheet, die bereitstellt, die gewünschte Formatierung in definierten `Styles.css`  -  `AffordablePriceEmphasis`, die erstellt wurde, und erläutert, die der *benutzerdefinierte Formatierung basierend auf Daten* Tutorial.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-186">In fact, we already have a stylesheet that provides the desired formatting defined in `Styles.css` - `AffordablePriceEmphasis`, which was created and discussed in the *Custom Formatting Based Upon Data* tutorial.</span></span>

<span data-ttu-id="a8bd0-187">Wenn die Formatierung angewendet werden soll, legen Sie einfach die zwei Label-Websteuerelemente `CssClass` Eigenschaften `AffordablePriceEmphasis`, wie im folgenden Code gezeigt:</span><span class="sxs-lookup"><span data-stu-id="a8bd0-187">To apply the formatting, simply set the two Label Web controls `CssClass` properties to `AffordablePriceEmphasis`, as shown in the following code:</span></span>


[!code-csharp[Main](formatting-the-datalist-and-repeater-based-upon-data-cs/samples/sample2.cs)]

<span data-ttu-id="a8bd0-188">Mit der `ItemDataBound` -Ereignishandler ausgeführt, rufen Sie erneut die `Formatting.aspx` Seite in einem Browser.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-188">With the `ItemDataBound` event handler completed, revisit the `Formatting.aspx` page in a browser.</span></span> <span data-ttu-id="a8bd0-189">Wie Abbildung 2 veranschaulicht, müssen diese Produkte mit einem Preis unter 20,00 $pro, ihren Namen und den Preis hervorgehoben.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-189">As Figure 2 illustrates, those products with a price under $20.00 have both their name and price highlighted.</span></span>


<span data-ttu-id="a8bd0-190">[![Diese Produkte kleiner als 20,00 $pro hervorgehoben sind](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image5.png)](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="a8bd0-190">[![Those Products Less than $20.00 are Highlighted](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image5.png)](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image4.png)</span></span>

<span data-ttu-id="a8bd0-191">**Abbildung 2**: Diese Produkte kleiner als 20,00 $pro werden hervorgehoben ([klicken Sie, um das Bild in voller Größe anzeigen](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="a8bd0-191">**Figure 2**: Those Products Less than $20.00 are Highlighted ([Click to view full-size image](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image6.png))</span></span>


> [!NOTE]
> <span data-ttu-id="a8bd0-192">Da DataList-Steuerelement als HTML gerendert wird `<table>`, dessen `DataListItem` Instanzen verfügen über Formatvorlagen bezogenen Eigenschaften, die festgelegt werden, um ein bestimmtes Format für das gesamte Element gelten.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-192">Since the DataList is rendered as an HTML `<table>`, its `DataListItem` instances have style-related properties that can be set to apply a specific style to the entire item.</span></span> <span data-ttu-id="a8bd0-193">Angenommen, wir wollten, markieren Sie die *gesamte* Element Gelb, wenn der Preis von weniger als 20,00 $ war, wir könnten wurden ersetzt den Code, der die Bezeichnungen auf die verwiesen wird, und legen ihre `CssClass` Eigenschaften mit der folgenden Zeile des Codes: `e.Item.CssClass = "AffordablePriceEmphasis"` (siehe Abbildung 3).</span><span class="sxs-lookup"><span data-stu-id="a8bd0-193">For example, if we wanted to highlight the *entire* item yellow when its price was less than $20.00, we could have replaced the code that referenced the Labels and set their `CssClass` properties with the following line of code: `e.Item.CssClass = "AffordablePriceEmphasis"` (see Figure 3).</span></span>


<span data-ttu-id="a8bd0-194">Die `RepeaterItem` s, aus denen das Repeater-Steuerelement, allerdings Don t bieten solche Eigenschaften Format auf.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-194">The `RepeaterItem` s that make up the Repeater control, however, don t offer such style-level properties.</span></span> <span data-ttu-id="a8bd0-195">Daher erfordert die benutzerdefinierte Formatierung auf das Repeater das Anwenden von Stileigenschaften auf die Web-Steuerelemente in den Vorlagen Repeater s nur wie in Abbildung 2.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-195">Therefore, applying custom formatting to the Repeater requires the application of style properties to the Web controls within the Repeater s templates, just like we did in Figure 2.</span></span>


<span data-ttu-id="a8bd0-196">[![Das gesamte Produkt-Element ist für Produkte unter 20,00 $pro hervorgehoben.](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image8.png)](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="a8bd0-196">[![The Entire Product Item is Highlighted for Products Under $20.00](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image8.png)](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image7.png)</span></span>

<span data-ttu-id="a8bd0-197">**Abbildung 3**: das gesamte Produkt-Element wird für die Produkte unter 20,00 $pro hervorgehoben ([klicken Sie, um das Bild in voller Größe anzeigen](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="a8bd0-197">**Figure 3**: The Entire Product Item is Highlighted for Products Under $20.00 ([Click to view full-size image](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image9.png))</span></span>


## <a name="using-formatting-functions-from-within-the-template"></a><span data-ttu-id="a8bd0-198">Verwenden die Formatierungsfunktionen von innerhalb der Vorlage</span><span class="sxs-lookup"><span data-stu-id="a8bd0-198">Using Formatting Functions from Within the Template</span></span>

<span data-ttu-id="a8bd0-199">In der *Verwenden von TemplateFields, im GridView-Steuerelement* Tutorial erläutert, wie eine Formatierung Funktion innerhalb einer GridView TemplateField verwenden, wenden Sie benutzerdefinierte Formatierung auf Grundlage der Daten, die an die GridView-s-Zeilen gebunden.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-199">In the *Using TemplateFields in the GridView Control* tutorial we saw how to use a formatting function within a GridView TemplateField to apply custom formatting based upon the data bound to the GridView s rows.</span></span> <span data-ttu-id="a8bd0-200">Eine Formatierung-Funktion ist eine Methode, die aus einer Vorlage kann aufgerufen werden, und gibt den HTML-Code, an seiner Stelle ausgegeben werden soll.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-200">A formatting function is a method that can be invoked from a template and returns the HTML to be emitted in its place.</span></span> <span data-ttu-id="a8bd0-201">Formatierungsoptionen können in der CodeBehind-Klasse in ASP.NET Seite s gespeichert werden oder zentralisiert werden kann, in Klassendateien in die `App_Code` Ordner oder in einem separaten Klassenbibliotheksprojekt.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-201">Formatting functions can reside in the ASP.NET page s code-behind class or can be centralized into class files in the `App_Code` folder or in a separate Class Library project.</span></span> <span data-ttu-id="a8bd0-202">Verschieben die Formatierungsfunktion aus der ASP.NET Page-s-Code-Behind-Klasse ist ideal, wenn Sie die gleiche Funktion für die Formatierung verwenden, auf mehreren Seiten von ASP.NET oder in anderen ASP.NET-Webanwendungen möchten.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-202">Moving the formatting function out of the ASP.NET page s code-behind class is ideal if you plan on using the same formatting function in multiple ASP.NET pages or in other ASP.NET web applications.</span></span>

<span data-ttu-id="a8bd0-203">Um die Formatierungsoptionen zu demonstrieren, haben können s die Produktinformationen, die den Text [DISCONTINUED] neben dem Produktnamen s enthalten, wenn es s nicht mehr unterstützt.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-203">To demonstrate formatting functions, let s have the product information include the text [DISCONTINUED] next to the product s name if it s discontinued.</span></span> <span data-ttu-id="a8bd0-204">Darüber hinaus können s hervorgehobenen gelben Preis If haben es kleiner als 20,00 $pro (wie der `ItemDataBound` Beispiel für einen Ereignishandler); Wenn der Preis 20,00 $pro ist oder höher, Let s nicht den tatsächlichen Preis angezeigt, aber stattdessen rufen Sie der Text ein, geben Sie für eine Preisinformationen.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-204">Also, let s have the price highlighted yellow if it s less than $20.00 (as we did in the `ItemDataBound` event handler example); if the price is $20.00 or higher, let s not display the actual price, but instead the text, Please call for a price quote.</span></span> <span data-ttu-id="a8bd0-205">Abbildung 4 zeigt einen Screenshot, der die Produkte, die Liste, die mit diesen Regeln für die Formatierung angewendet.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-205">Figure 4 shows a screen shot of the products listing with these formatting rules applied.</span></span>


<span data-ttu-id="a8bd0-206">[![Für die teuersten Produkte wird der Preis mit dem Text, rufen Sie für eine Preisinformationen ersetzt.](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image11.png)](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="a8bd0-206">[![For Expensive Products, the Price is Replaced with the Text, Please call for a price quote](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image11.png)](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image10.png)</span></span>

<span data-ttu-id="a8bd0-207">**Abbildung 4**: der Preis wird für teuersten Produkte, mit dem Text, rufen Sie für eine Preisinformationen ersetzt ([klicken Sie, um das Bild in voller Größe anzeigen](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="a8bd0-207">**Figure 4**: For Expensive Products, the Price is Replaced with the Text, Please call for a price quote ([Click to view full-size image](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image12.png))</span></span>


## <a name="step-1-create-the-formatting-functions"></a><span data-ttu-id="a8bd0-208">Schritt 1: Erstellen Sie die Formatierungsfunktionen</span><span class="sxs-lookup"><span data-stu-id="a8bd0-208">Step 1: Create the Formatting Functions</span></span>

<span data-ttu-id="a8bd0-209">In diesem Beispiel wir benötigen zwei Formatierungsfunktionen, eine, die den Namen des Produkts zusammen mit dem Text [DISCONTINUED], zeigt an, bei Bedarf und eine, die entweder einen hervorgehobenen Preis angezeigt, wenn es kleiner als 20,00 $pro oder den Text ein, rufen Sie für eine andernfalls Preisinformationen.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-209">For this example we need two formatting functions, one that displays the product name along with the text [DISCONTINUED], if needed, and another that displays either a highlighted price if it s less than $20.00, or the text, Please call for a price quote otherwise.</span></span> <span data-ttu-id="a8bd0-210">Lassen Sie s, die diese Funktionen in der ASP.NET Seite s-Code-Behind-Klasse erstellen, und nennen Sie diese `DisplayProductNameAndDiscontinuedStatus` und `DisplayPrice`.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-210">Let s create these functions in the ASP.NET page s code-behind class and name them `DisplayProductNameAndDiscontinuedStatus` and `DisplayPrice`.</span></span> <span data-ttu-id="a8bd0-211">Beide Methoden müssen als Zeichenfolge Rendern den HTML-Code zurückgeben, und beide müssen markiert werden `Protected` (oder `Public`) um ab der ASP.NET Seite s deklarative Syntax aufgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-211">Both methods need to return the HTML to render as a string and both need to be marked `Protected` (or `Public`) in order to be invoked from the ASP.NET page s declarative syntax portion.</span></span> <span data-ttu-id="a8bd0-212">Der Code für diese beiden Methoden folgt:</span><span class="sxs-lookup"><span data-stu-id="a8bd0-212">The code for these two methods follows:</span></span>


[!code-csharp[Main](formatting-the-datalist-and-repeater-based-upon-data-cs/samples/sample3.cs)]

<span data-ttu-id="a8bd0-213">Beachten Sie, dass die `DisplayProductNameAndDiscontinuedStatus` Methode akzeptiert die Werte von der `productName` und `discontinued` Daten von Feldern nach Skalarwerte, während die `DisplayPrice` -Methode akzeptiert eine `ProductsRow` Instanz (anstelle eines `unitPrice` Skalarwert).</span><span class="sxs-lookup"><span data-stu-id="a8bd0-213">Note that the `DisplayProductNameAndDiscontinuedStatus` method accepts the values of the `productName` and `discontinued` data fields as scalar values, whereas the `DisplayPrice` method accepts a `ProductsRow` instance (rather than a `unitPrice` scalar value).</span></span> <span data-ttu-id="a8bd0-214">Beide Ansätze funktioniert. allerdings, wenn die Formatierungsfunktion arbeitet mit skalaren Werten, die Datenbank enthalten kann `NULL` Werte (z. B. `UnitPrice`; weder `ProductName` noch `Discontinued` ermöglichen `NULL` Werte), besondere Vorsicht bei der Verarbeitung dieser Skalare Eingaben.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-214">Either approach will work; however, if the formatting function is working with scalar values that can contain database `NULL` values (such as `UnitPrice`; neither `ProductName` nor `Discontinued` allow `NULL` values), special care must be taken in handling these scalar inputs.</span></span>

<span data-ttu-id="a8bd0-215">Insbesondere muss der Eingabeparameter des Typs `Object` da der eingehende Wert möglicherweise einen `DBNull` Instanz statt mit den erwarteten Datentyp.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-215">In particular, the input parameter must be of type `Object` since the incoming value might be a `DBNull` instance instead of the expected data type.</span></span> <span data-ttu-id="a8bd0-216">Darüber hinaus eine Überprüfung muss erfolgen, zu bestimmen, ob der eingehende Wert einer Datenbank ist `NULL` Wert.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-216">Additionally, a check must be made to determine whether or not the incoming value is a database `NULL` value.</span></span> <span data-ttu-id="a8bd0-217">D. h. wenn wir wollten die `DisplayPrice` Methode, um den Preis als einen skalaren Wert an, wir d akzeptiert haben, verwenden Sie den folgenden Code:</span><span class="sxs-lookup"><span data-stu-id="a8bd0-217">That is, if we wanted the `DisplayPrice` method to accept the price as a scalar value, we d have to use the following code:</span></span>


[!code-csharp[Main](formatting-the-datalist-and-repeater-based-upon-data-cs/samples/sample4.cs)]

<span data-ttu-id="a8bd0-218">Beachten Sie, dass die `unitPrice` Eingabeparameter ist vom Typ `Object` und, die die Auswertung der Anweisung wurde geändert, um Wenn ermitteln `unitPrice` ist `DBNull` oder nicht.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-218">Note that the `unitPrice` input parameter is of type `Object` and that the conditional statement has been modified to ascertain if `unitPrice` is `DBNull` or not.</span></span> <span data-ttu-id="a8bd0-219">Darüber hinaus, da die `unitPrice` Eingabeparameter wird als übergeben eine `Object`, es muss ein decimal-Wert umgewandelt werden.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-219">Furthermore, since the `unitPrice` input parameter is passed in as an `Object`, it must be cast to a decimal value.</span></span>

## <a name="step-2-calling-the-formatting-function-from-the-datalist-s-itemtemplate"></a><span data-ttu-id="a8bd0-220">Schritt 2: Aufrufen der Formatierungsfunktion aus ItemTemplate DataList s</span><span class="sxs-lookup"><span data-stu-id="a8bd0-220">Step 2: Calling the Formatting Function from the DataList s ItemTemplate</span></span>

<span data-ttu-id="a8bd0-221">Mit die Formatierungen Funktionen unserer ASP.NET Seite s Code-Behind-Klasse hinzugefügt die, übrig bleibt, rufen diese Funktionen aus DataList-Steuerelement s Formatierung `ItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-221">With the formatting functions added to our ASP.NET page s code-behind class, all that remains is to invoke these formatting functions from the DataList s `ItemTemplate`.</span></span> <span data-ttu-id="a8bd0-222">Um eine Formatierung Funktion aus einer Vorlage zu aufzurufen, platzieren Sie den Aufruf der Funktion in die Databinding-Syntax:</span><span class="sxs-lookup"><span data-stu-id="a8bd0-222">To call a formatting function from a template, place the function call within the databinding syntax:</span></span>


[!code-aspx[Main](formatting-the-datalist-and-repeater-based-upon-data-cs/samples/sample5.aspx)]

<span data-ttu-id="a8bd0-223">Im DataList-Steuerelement s `ItemTemplate` der `ProductNameLabel` Bezeichnung Websteuerelement derzeit zeigt den Namen des Produkts s durch Zuweisen der `Text` Eigenschaft das Ergebnis der `<%# Eval("ProductName") %>`.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-223">In the DataList s `ItemTemplate` the `ProductNameLabel` Label Web control currently displays the product s name by assigning its `Text` property the result of `<%# Eval("ProductName") %>`.</span></span> <span data-ttu-id="a8bd0-224">Damit diese den Namen und den Text [DISCONTINUED], anzeigen, wenn benötigt, aktualisieren Sie die deklarative Syntax, damit er stattdessen weist der `Text` Eigenschaft ist der Wert von der `DisplayProductNameAndDiscontinuedStatus` Methode.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-224">In order to have it display the name plus the text [DISCONTINUED], if needed, update the declarative syntax so that it instead assigns the `Text` property the value of the `DisplayProductNameAndDiscontinuedStatus` method.</span></span> <span data-ttu-id="a8bd0-225">Dabei müssen wir übergeben, in der Produktname s und nicht mehr unterstützte Werte, die mit der `Eval("columnName")` Syntax.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-225">When doing so, we must pass in the product s name and discontinued values using the `Eval("columnName")` syntax.</span></span> <span data-ttu-id="a8bd0-226">`Eval` Gibt einen Wert vom Typ `Object`, aber die `DisplayProductNameAndDiscontinuedStatus` Methode erwartet Parameter vom Typ `String` und `Boolean`; aus diesem Grund müssen wir die Rückgabewerte Umwandeln der `Eval` Methode, um die Typen Erwarteter Eingabeparameter wie folgt:</span><span class="sxs-lookup"><span data-stu-id="a8bd0-226">`Eval` returns a value of type `Object`, but the `DisplayProductNameAndDiscontinuedStatus` method expects input parameters of type `String` and `Boolean`; therefore, we must cast the values returned by the `Eval` method to the expected input parameter types, like so:</span></span>


[!code-aspx[Main](formatting-the-datalist-and-repeater-based-upon-data-cs/samples/sample6.aspx)]

<span data-ttu-id="a8bd0-227">Wir können einfach festlegen, um den Preis anzuzeigen, die `UnitPriceLabel` Bezeichnung s `Text` Eigenschaft, um den Rückgabewert von der `DisplayPrice` -Methode, wie wir für die Anzeige der Name des Produkts s haben und [] Text eingestellt.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-227">To display the price, we can simply set the `UnitPriceLabel` Label s `Text` property to the value returned by the `DisplayPrice` method, just like we did for displaying the product s name and [DISCONTINUED] text.</span></span> <span data-ttu-id="a8bd0-228">Allerdings nicht in der `UnitPrice` als skalare Eingabeparameter, wir stattdessen übergeben Sie in der gesamten `ProductsRow` Instanz:</span><span class="sxs-lookup"><span data-stu-id="a8bd0-228">However, instead of passing in the `UnitPrice` as a scalar input parameter, we instead pass in the entire `ProductsRow` instance:</span></span>


[!code-aspx[Main](formatting-the-datalist-and-repeater-based-upon-data-cs/samples/sample7.aspx)]

<span data-ttu-id="a8bd0-229">Können Sie mit den Aufrufen für die Formatierungen Funktionen vorhanden unseren Fortschritt in einem Browser anzeigen.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-229">With the calls to the formatting functions in place, take a moment to view our progress in a browser.</span></span> <span data-ttu-id="a8bd0-230">Ihr Bildschirm sollte ähnlich wie in Abbildung 5 aussehen, die nicht mehr unterstützte Produkte, die auch den Text [DISCONTINUED] und dieser Produkte, die mehr als 20,00 $pro müssen ihren Preis Kosten durch den Text ersetzt Aufruf für eine Preisinformationen.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-230">Your screen should look similar to Figure 5, with the discontinued products including the text [DISCONTINUED] and those products costing more than $20.00 having their price replaced with the text Please call for a price quote .</span></span>


<span data-ttu-id="a8bd0-231">[![Für die teuersten Produkte wird der Preis mit dem Text, rufen Sie für eine Preisinformationen ersetzt.](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image14.png)](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="a8bd0-231">[![For Expensive Products, the Price is Replaced with the Text, Please call for a price quote](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image14.png)](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image13.png)</span></span>

<span data-ttu-id="a8bd0-232">**Abbildung 5**: der Preis wird für teuersten Produkte, mit dem Text, rufen Sie für eine Preisinformationen ersetzt ([klicken Sie, um das Bild in voller Größe anzeigen](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="a8bd0-232">**Figure 5**: For Expensive Products, the Price is Replaced with the Text, Please call for a price quote ([Click to view full-size image](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image15.png))</span></span>


## <a name="summary"></a><span data-ttu-id="a8bd0-233">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="a8bd0-233">Summary</span></span>

<span data-ttu-id="a8bd0-234">Formatieren den Inhalt eines DataList- oder Repeater-Steuerelements, die auf Grundlage der Daten kann mithilfe von zwei Techniken erreicht werden.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-234">Formatting the contents of a DataList or Repeater control based upon the data can be accomplished using two techniques.</span></span> <span data-ttu-id="a8bd0-235">Die erste Technik ist, erstellen Sie einen Ereignishandler für die `ItemDataBound` Ereignis, das ausgelöst wird, wie jeder Datensatz in der Datenquelle, um ein neues gebunden ist `DataListItem` oder `RepeaterItem`.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-235">The first technique is to create an event handler for the `ItemDataBound` event, which fires as each record in the data source is bound to a new `DataListItem` or `RepeaterItem`.</span></span> <span data-ttu-id="a8bd0-236">In der `ItemDataBound` -Ereignishandler die aktuellen Artikel s Daten untersucht werden können, und klicken Sie dann das Formatieren angewendet werden auf den Inhalt der Vorlage oder für `DataListItem` s, auf das gesamte Element selbst.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-236">In the `ItemDataBound` event handler, the current item s data can be examined and then formatting can be applied to the contents of the template or, for `DataListItem` s, to the entire item itself.</span></span>

<span data-ttu-id="a8bd0-237">Alternativ kann benutzerdefinierte Formatierung realisiert werden, durch das Formatieren von Funktionen.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-237">Alternatively, custom formatting can be realized through formatting functions.</span></span> <span data-ttu-id="a8bd0-238">Eine Formatierung Funktion ist eine Methode, die über DataList-Steuerelement aufgerufen werden kann oder Repeater-s-Vorlagen, die den HTML-Code ausgeben an seiner Stelle zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-238">A formatting function is a method that can be invoked from the DataList or Repeater s templates that returns the HTML to emit in its place.</span></span> <span data-ttu-id="a8bd0-239">Der HTML-Code von einer Formatierung Funktion zurückgegebenen wird häufig durch die Werte gebunden wird, auf das aktuelle Element bestimmt.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-239">Often, the HTML returned by a formatting function is determined by the values being bound to the current item.</span></span> <span data-ttu-id="a8bd0-240">Diese Werte können in der Formatierungsfunktion übergeben werden, entweder als skalare Werte oder durch das gesamte Objekt gebunden wird, auf das Element übergeben (wie z. B. die `ProductsRow` Instanz).</span><span class="sxs-lookup"><span data-stu-id="a8bd0-240">These values can be passed into the formatting function, either as scalar values or by passing in the entire object being bound to the item (such as the `ProductsRow` instance).</span></span>

<span data-ttu-id="a8bd0-241">Viel Spaß beim Programmieren!</span><span class="sxs-lookup"><span data-stu-id="a8bd0-241">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="a8bd0-242">Der Autor</span><span class="sxs-lookup"><span data-stu-id="a8bd0-242">About the Author</span></span>

<span data-ttu-id="a8bd0-243">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), Autor von sieben Büchern zu ASP/ASP.NET und Gründer von [4GuysFromRolla.com](http://www.4guysfromrolla.com), arbeitet mit Microsoft-Web-Technologien seit 1998.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-243">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="a8bd0-244">Er ist als ein unabhängiger Berater, Schulungsleiter und Autor.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-244">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="a8bd0-245">Sein neueste Buch wird [*Sams Schulen selbst ASP.NET 2.0 in 24 Stunden*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="a8bd0-245">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="a8bd0-246">Er ist unter [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="a8bd0-246">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="a8bd0-247">oder über seinen Blog finden Sie unter [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="a8bd0-247">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="a8bd0-248">Besonderen Dank an</span><span class="sxs-lookup"><span data-stu-id="a8bd0-248">Special Thanks To</span></span>

<span data-ttu-id="a8bd0-249">Diese tutorialreihe wurde durch viele hilfreiche Reviewer überprüft.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-249">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="a8bd0-250">Führendes Prüfer für dieses Tutorial wurden Yaakov Ellis Randy Schmidt und Liz Shulok.</span><span class="sxs-lookup"><span data-stu-id="a8bd0-250">Lead reviewers for this tutorial were Yaakov Ellis, Randy Schmidt, and Liz Shulok.</span></span> <span data-ttu-id="a8bd0-251">Meine zukünftigen MSDN-Artikeln überprüfen möchten?</span><span class="sxs-lookup"><span data-stu-id="a8bd0-251">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="a8bd0-252">Wenn dies der Fall ist, löschen Sie mir eine Linie an [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="a8bd0-252">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="a8bd0-253">[Zurück](displaying-data-with-the-datalist-and-repeater-controls-cs.md)
> [Weiter](showing-multiple-records-per-row-with-the-datalist-control-cs.md)</span><span class="sxs-lookup"><span data-stu-id="a8bd0-253">[Previous](displaying-data-with-the-datalist-and-repeater-controls-cs.md)
[Next](showing-multiple-records-per-row-with-the-datalist-control-cs.md)</span></span>
