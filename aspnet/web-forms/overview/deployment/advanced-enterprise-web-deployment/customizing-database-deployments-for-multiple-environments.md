---
uid: web-forms/overview/deployment/advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments
title: Anpassen von Datenbank-Bereitstellungen für mehrere Umgebungen | Microsoft Docs
author: jrjlee
description: 'Dieses Thema beschreibt, wie Sie die Eigenschaften einer Datenbank zu bestimmten zielumgebungen im Rahmen des Bereitstellungsprozesses anpassen können. Hinweis: Das Thema wird davon ausgegangen th...'
ms.author: aspnetcontent
manager: wpickett
ms.date: 05/04/2012
ms.topic: article
ms.assetid: a172979a-1318-4318-a9c6-4f9560d26267
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/deployment/advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments
msc.type: authoredcontent
ms.openlocfilehash: 06f22bc9a3068ee5621df62ee5ed1bea06d7e9e6
ms.sourcegitcommit: 6784510cfb589308c3875ccb5113eb31031766b4
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 06/08/2018
ms.locfileid: "30881356"
---
<a name="customizing-database-deployments-for-multiple-environments"></a><span data-ttu-id="5641c-104">Anpassen von Datenbank-Bereitstellungen für mehrere Umgebungen</span><span class="sxs-lookup"><span data-stu-id="5641c-104">Customizing Database Deployments for Multiple Environments</span></span>
====================
<span data-ttu-id="5641c-105">durch [Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="5641c-105">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="5641c-106">PDF herunterladen</span><span class="sxs-lookup"><span data-stu-id="5641c-106">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="5641c-107">Dieses Thema beschreibt, wie Sie die Eigenschaften einer Datenbank zu bestimmten zielumgebungen im Rahmen des Bereitstellungsprozesses anpassen können.</span><span class="sxs-lookup"><span data-stu-id="5641c-107">This topic describes how to tailor the properties of a database to specific target environments as part of the deployment process.</span></span>
> 
> > [!NOTE]
> > <span data-ttu-id="5641c-108">Das Thema wird davon ausgegangen, dass Sie ein Visual Studio 2010-Datenbankprojekt mithilfe von MSBuild.exe und VSDBCMD.exe bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="5641c-108">The topic assumes that you're deploying a Visual Studio 2010 database project using MSBuild.exe and VSDBCMD.exe.</span></span> <span data-ttu-id="5641c-109">Weitere Informationen, warum Sie diesen Ansatz auswählen können, finden Sie unter [Webbereitstellung im Unternehmen](../web-deployment-in-the-enterprise/web-deployment-in-the-enterprise.md) und [Datenbankprojekte bereitstellen](../web-deployment-in-the-enterprise/deploying-database-projects.md).</span><span class="sxs-lookup"><span data-stu-id="5641c-109">For more information on why you might choose this approach, see [Web Deployment in the Enterprise](../web-deployment-in-the-enterprise/web-deployment-in-the-enterprise.md) and [Deploying Database Projects](../web-deployment-in-the-enterprise/deploying-database-projects.md).</span></span>
> 
> 
> <span data-ttu-id="5641c-110">Wenn Sie ein Datenbankprojekt an mehrere Ziele bereitstellen, möchten Sie häufig die Datenbank-Bereitstellungseigenschaften für jedes zielumgebung anpassen.</span><span class="sxs-lookup"><span data-stu-id="5641c-110">When you deploy a database project to multiple destinations, you'll often want to customize the database deployment properties for each target environment.</span></span> <span data-ttu-id="5641c-111">Beispielsweise würde in testumgebungen Sie in der Regel die Datenbank bei jeder Bereitstellung neu erstellen hingegen in Staging-oder produktionsumgebung Sie viel wahrscheinlicher damit inkrementelle Updates für Ihre Daten zu erhalten werden würde.</span><span class="sxs-lookup"><span data-stu-id="5641c-111">For example, in test environments you'd typically recreate the database on every deployment, whereas in staging or production environments you'd be a lot more likely to make incremental updates to preserve your data.</span></span>
> 
> <span data-ttu-id="5641c-112">In einem Visual Studio 2010-Datenbankprojekt sind Einstellungen für eine Bereitstellung in einer Bereitstellungskonfigurationsdatei (.sqldeployment) enthalten.</span><span class="sxs-lookup"><span data-stu-id="5641c-112">In a Visual Studio 2010 database project, deployment settings are contained within a deployment configuration (.sqldeployment) file.</span></span> <span data-ttu-id="5641c-113">In diesem Thema wird gezeigt, wie umgebungsspezifische bereitstellungskonfigurationsdateien erstellen und angeben, die Sie als Parameter VSDBCMD verwenden möchten.</span><span class="sxs-lookup"><span data-stu-id="5641c-113">This topic will show you how to create environment-specific deployment configuration files and specify the one you want to use as a VSDBCMD parameter.</span></span>


<span data-ttu-id="5641c-114">Dieses Thema ist Teil einer Reihe von Lernprogrammen, die auf der Basis der Enterprise-bereitstellungsanforderungen eines fiktiven Unternehmens mit dem Namen Fabrikam, Inc. Dieses Lernprogramm Zeichenreihe verwendet eine beispiellösung&#x2014;der [Kontakt-Manager-Lösung](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;zur Darstellung einer Webanwendung mit einer realistischen Maß an Komplexität, einschließlich einer ASP.NET MVC 3-Anwendung, einen Windows Communication Foundation (WCF)-Dienst, und ein Datenbankprojekt.</span><span class="sxs-lookup"><span data-stu-id="5641c-114">This topic forms part of a series of tutorials based around the enterprise deployment requirements of a fictional company named Fabrikam, Inc. This tutorial series uses a sample solution&#x2014;the [Contact Manager solution](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;to represent a web application with a realistic level of complexity, including an ASP.NET MVC 3 application, a Windows Communication Foundation (WCF) service, and a database project.</span></span>

<span data-ttu-id="5641c-115">Die Bereitstellungsmethode das Herzstück mit diesen Lernprogrammen basiert auf in beschriebene Ansatz der Teilung Projekt Datei [verstehen die Projektdatei](../web-deployment-in-the-enterprise/understanding-the-project-file.md), in dem durch der Buildprozess gesteuert wird zwei Projektdateien&#x2014;enthält Erstellen Sie für jede zielumgebung und enthält umgebungsspezifische Einstellungen für Build- und Bereitstellungsprozess geltenden Anweisungen, an.</span><span class="sxs-lookup"><span data-stu-id="5641c-115">The deployment method at the heart of these tutorials is based on the split project file approach described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md), in which the build process is controlled by two project files&#x2014;one containing build instructions that apply to every destination environment, and one containing environment-specific build and deployment settings.</span></span> <span data-ttu-id="5641c-116">Zur Buildzeit ist die Unabhängigkeit von der Umgebung-Projektdatei, einen vollständigen Satz von Buildanweisungen bilden die Projektdatei umgebungsspezifische zusammengeführt.</span><span class="sxs-lookup"><span data-stu-id="5641c-116">At build time, the environment-specific project file is merged into the environment-agnostic project file to form a complete set of build instructions.</span></span>

## <a name="task-overview"></a><span data-ttu-id="5641c-117">Übersicht über den Task</span><span class="sxs-lookup"><span data-stu-id="5641c-117">Task Overview</span></span>

<span data-ttu-id="5641c-118">In diesem Thema wird Folgendes vorausgesetzt:</span><span class="sxs-lookup"><span data-stu-id="5641c-118">This topic assumes that:</span></span>

- <span data-ttu-id="5641c-119">Verwenden Sie die Teilung Projekt Datei Vorgehensweise bei der Bereitstellung von Projektmappen, wie in beschrieben [verstehen die Projektdatei](../web-deployment-in-the-enterprise/understanding-the-project-file.md).</span><span class="sxs-lookup"><span data-stu-id="5641c-119">You use the split project file approach to solution deployment, as described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md).</span></span>
- <span data-ttu-id="5641c-120">Sie rufen VSDBCMD aus der Projektdatei, um das Datenbankprojekt bereitstellen, wie in beschrieben [Verständnis des Build-Prozesses](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span><span class="sxs-lookup"><span data-stu-id="5641c-120">You call VSDBCMD from the project file to deploy your database project, as described in [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span></span>

<span data-ttu-id="5641c-121">Um ein Bereitstellungssystem zu erstellen, die unterschiedliche Eigenschaften zur datenbankbereitstellung zwischen zielumgebungen unterstützt, müssen Sie Folgendes ausführen:</span><span class="sxs-lookup"><span data-stu-id="5641c-121">To create a deployment system that supports varying the database deployment properties between target environments, you'll need to:</span></span>

- <span data-ttu-id="5641c-122">Eine Bereitstellungskonfigurationsdatei (.sqldeployment) für jede zielumgebung zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="5641c-122">Create a deployment configuration (.sqldeployment) file for each target environment.</span></span>
- <span data-ttu-id="5641c-123">Erstellen Sie einen VSDBCMD-Befehl, der angibt, die Bereitstellungskonfigurationsdatei als einer Befehlszeilenoption.</span><span class="sxs-lookup"><span data-stu-id="5641c-123">Create a VSDBCMD command that specifies the deployment configuration file as a command-line switch.</span></span>
- <span data-ttu-id="5641c-124">Parametrisieren Sie die VSDBCMD-Befehl in einer Projektdatei Microsoft Build Engine (MSBuild), sodass die VSDBCMD-Optionen für die zielumgebung geeignet sind.</span><span class="sxs-lookup"><span data-stu-id="5641c-124">Parameterize the VSDBCMD command in a Microsoft Build Engine (MSBuild) project file, so that the VSDBCMD options are appropriate to the target environment.</span></span>

<span data-ttu-id="5641c-125">In diesem Thema erfahren Sie, wie Sie jede der folgenden Verfahren ausführen.</span><span class="sxs-lookup"><span data-stu-id="5641c-125">This topic will show you how to perform each of these procedures.</span></span>

## <a name="creating-environment-specific-deployment-configuration-files"></a><span data-ttu-id="5641c-126">Umgebungsspezifische Bereitstellungskonfigurationsdateien erstellen</span><span class="sxs-lookup"><span data-stu-id="5641c-126">Creating Environment-Specific Deployment Configuration Files</span></span>

<span data-ttu-id="5641c-127">Standardmäßig enthält ein Datenbankprojekt eine einzelne Bereitstellung-Konfigurationsdatei mit dem Namen *Database.sqldeployment*.</span><span class="sxs-lookup"><span data-stu-id="5641c-127">By default, a database project contains a single deployment configuration file named *Database.sqldeployment*.</span></span> <span data-ttu-id="5641c-128">Wenn Sie diese Datei in Visual Studio 2010 öffnen, sehen Sie die verschiedenen Bereitstellungsoptionen, die Ihnen zur Verfügung stehen:</span><span class="sxs-lookup"><span data-stu-id="5641c-128">If you open this file in Visual Studio 2010, you can see the different deployment options that are available to you:</span></span>

- <span data-ttu-id="5641c-129">**Bereitstellung Vergleich Sortierung**.</span><span class="sxs-lookup"><span data-stu-id="5641c-129">**Deployment comparison collation**.</span></span> <span data-ttu-id="5641c-130">Auf diese Weise können Sie entscheiden, ob die datenbanksortierung des Projekts verwendet werden soll (der *Quelle* Sortierung) oder die datenbanksortierung des Zielservers (die *Ziel* Sortierung).</span><span class="sxs-lookup"><span data-stu-id="5641c-130">This lets you choose whether to use the database collation of your project (the *source* collation) or the database collation of your destination server (the *target* collation).</span></span> <span data-ttu-id="5641c-131">In den meisten Fällen sollten Sie die quellsortierung zu verwenden, wenn Sie für eine Entwicklung bereitstellen oder testumgebung.</span><span class="sxs-lookup"><span data-stu-id="5641c-131">In most cases, you'll want to use the source collation when you deploy to a development or test environment.</span></span> <span data-ttu-id="5641c-132">Wenn Sie in einer Staging- oder produktionsumgebung bereitstellen, sollten Sie in der Regel die zielsortierung zur Vermeidung von jegliche Interoperabilitätsprobleme unverändert zu lassen.</span><span class="sxs-lookup"><span data-stu-id="5641c-132">When you deploy to a staging or production environment, you'll usually want to leave the target collation unchanged to avoid any interoperability issues.</span></span>
- <span data-ttu-id="5641c-133">**Datenbankeigenschaften bereitstellen**.</span><span class="sxs-lookup"><span data-stu-id="5641c-133">**Deploy database properties**.</span></span> <span data-ttu-id="5641c-134">Auf diese Weise können Sie auswählen, ob die Datenbankeigenschaften gelten gemäß der *Database.sqlsettings* Datei.</span><span class="sxs-lookup"><span data-stu-id="5641c-134">This lets you choose whether to apply the database properties, as defined in the *Database.sqlsettings* file.</span></span> <span data-ttu-id="5641c-135">Wenn Sie eine Datenbank zum ersten Mal bereitstellen, sollten Sie die Datenbankeigenschaften bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="5641c-135">When you deploy a database for the first time, you should deploy the database properties.</span></span> <span data-ttu-id="5641c-136">Wenn Sie eine vorhandene Datenbank aktualisieren, Eigenschaften sollte bereits vorhanden sein, und Sie sollte nicht erneut bereitstellen müssen.</span><span class="sxs-lookup"><span data-stu-id="5641c-136">If you're updating an existing database, the properties should already be in place, and you shouldn't need to deploy them again.</span></span>
- <span data-ttu-id="5641c-137">**Datenbank immer neu erstellen**.</span><span class="sxs-lookup"><span data-stu-id="5641c-137">**Always re-create database**.</span></span> <span data-ttu-id="5641c-138">Damit können Sie auswählen, ob die Zieldatenbank erneut zu erstellen, jedes Mal, wenn Sie bereitstellen oder stellen inkrementelle Änderungen an die Zieldatenbank schalten mit Ihrem Schema auf dem neuesten Stand.</span><span class="sxs-lookup"><span data-stu-id="5641c-138">This lets you choose whether to re-create the target database every time you deploy or make incremental changes to bring the target database up to date with your schema.</span></span> <span data-ttu-id="5641c-139">Wenn die Datenbank neu erstellt wird, verlieren Sie alle Daten in der vorhandenen Datenbank.</span><span class="sxs-lookup"><span data-stu-id="5641c-139">If you re-create the database, you'll lose any data in the existing database.</span></span> <span data-ttu-id="5641c-140">Daher ist es möglich, Sie sollten in der Regel festlegen, um **"false"** für Bereitstellungen auf Staging-oder produktionsumgebung.</span><span class="sxs-lookup"><span data-stu-id="5641c-140">As such, you should usually set this to **false** for deployments to staging or production environments.</span></span>
- <span data-ttu-id="5641c-141">**Inkrementelle Bereitstellung blockieren, wenn Datenverlust auftreten könnte**.</span><span class="sxs-lookup"><span data-stu-id="5641c-141">**Block incremental deployment if data loss might occur**.</span></span> <span data-ttu-id="5641c-142">Dadurch können Sie auswählen, ob die Bereitstellung beendet werden soll, wenn eine Änderung am Datenbankschema Datenverlust führen.</span><span class="sxs-lookup"><span data-stu-id="5641c-142">This lets you choose whether deployment should stop if a change to the database schema will cause the loss of data.</span></span> <span data-ttu-id="5641c-143">Sie in der Regel festlegen, um **"true"** für eine Bereitstellung in einer produktionsumgebung, bieten die Möglichkeit, eingreifen und keine wichtigen Daten zu schützen.</span><span class="sxs-lookup"><span data-stu-id="5641c-143">You typically set this to **true** for a deployment to a production environment, to give you the opportunity to intervene and protect any important data.</span></span> <span data-ttu-id="5641c-144">Wenn Sie festgelegt haben **Datenbank immer neu erstellen** auf **"false"**, diese Einstellung hat keine Auswirkung.</span><span class="sxs-lookup"><span data-stu-id="5641c-144">If you have set **Always re-create database** to **false**, this setting will have no effect.</span></span>
- <span data-ttu-id="5641c-145">**Führen Sie die Bereitstellung im Einzelbenutzermodus**.</span><span class="sxs-lookup"><span data-stu-id="5641c-145">**Execute deployment in single-user mode**.</span></span> <span data-ttu-id="5641c-146">Dies ist nicht in der Regel ein Problem in einer Umgebung für Entwicklungs- oder Testserver.</span><span class="sxs-lookup"><span data-stu-id="5641c-146">This is not usually an issue in development or test environments.</span></span> <span data-ttu-id="5641c-147">Aber Sie sollten in der Regel festlegen, um **"true"** für Bereitstellungen auf Staging-oder produktionsumgebung.</span><span class="sxs-lookup"><span data-stu-id="5641c-147">However, you should typically set this to **true** for deployments to staging or production environments.</span></span> <span data-ttu-id="5641c-148">Dadurch wird verhindert, dass Benutzer Änderungen an der Datenbank vorgenommen werden, während die Bereitstellung ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="5641c-148">This prevents users from making changes to the database while the deployment is underway.</span></span>
- <span data-ttu-id="5641c-149">**Sichern Sie die Datenbank vor der Bereitstellung**.</span><span class="sxs-lookup"><span data-stu-id="5641c-149">**Back up database before deployment**.</span></span> <span data-ttu-id="5641c-150">Sie in der Regel festlegen, um **"true"** bei der Bereitstellung in einer produktionsumgebung als vorsichtmaßnahme gegen Datenverlust.</span><span class="sxs-lookup"><span data-stu-id="5641c-150">You typically set this to **true** when you deploy to a production environment, as a precaution against data loss.</span></span> <span data-ttu-id="5641c-151">Möchten Sie möglicherweise auch festgelegt ist, dass **"true"** bei der Bereitstellung in einer Stagingumgebung erforderlich, wenn Ihre Stagingdatenbank eine große Datenmenge enthält.</span><span class="sxs-lookup"><span data-stu-id="5641c-151">You may also want to set it to **true** when you deploy to a staging environment, if your staging database contains a lot of data.</span></span>
- <span data-ttu-id="5641c-152">**Generieren von DROP-Anweisungen für Objekte, die sich in der Zieldatenbank, aber nicht im Datenbankprojekt sind**.</span><span class="sxs-lookup"><span data-stu-id="5641c-152">**Generate DROP statements for objects that are in the target database but that are not in the database project**.</span></span> <span data-ttu-id="5641c-153">In den meisten Fällen ist dies ein wesentlicher und notwendiger Teil von inkrementellen Änderungen an einer Datenbank vorgenommen werden.</span><span class="sxs-lookup"><span data-stu-id="5641c-153">In most cases, this is an integral and essential part of making incremental changes to a database.</span></span> <span data-ttu-id="5641c-154">Wenn Sie festgelegt haben **Datenbank immer neu erstellen** auf **"false"**, diese Einstellung hat keine Auswirkung.</span><span class="sxs-lookup"><span data-stu-id="5641c-154">If you have set **Always re-create database** to **false**, this setting will have no effect.</span></span>
- <span data-ttu-id="5641c-155">**Verwenden Sie ALTER ASSEMBLY-Anweisungen nicht zum Aktualisieren von CLR-Typen**.</span><span class="sxs-lookup"><span data-stu-id="5641c-155">**Do not use ALTER ASSEMBLY statements to update CLR types**.</span></span> <span data-ttu-id="5641c-156">Diese Einstellung bestimmt, wie SQL Server common Language Runtime (CLR)-Typen auf neuere Assemblyversionen aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="5641c-156">This setting determines how SQL Server should update common language runtime (CLR) types to newer assembly versions.</span></span> <span data-ttu-id="5641c-157">Dies sollte festgelegt werden, um **"false"** in den meisten Szenarien.</span><span class="sxs-lookup"><span data-stu-id="5641c-157">This should be set to **false** in most scenarios.</span></span>

<span data-ttu-id="5641c-158">Diese Tabelle zeigt typische Einstellungen für unterschiedliche zielumgebungen.</span><span class="sxs-lookup"><span data-stu-id="5641c-158">This table shows typical deployment settings for different destination environments.</span></span> <span data-ttu-id="5641c-159">Die Einstellungen variieren, je nachdem Bindungen die Anforderungen möglicherweise.</span><span class="sxs-lookup"><span data-stu-id="5641c-159">However, your settings may be different depending on your exact requirements.</span></span>

|  | <span data-ttu-id="5641c-160">Entwickler/Test</span><span class="sxs-lookup"><span data-stu-id="5641c-160">Developer/Test</span></span> | <span data-ttu-id="5641c-161">Staging-Integration</span><span class="sxs-lookup"><span data-stu-id="5641c-161">Staging/Integration</span></span> | <span data-ttu-id="5641c-162">Produktion</span><span class="sxs-lookup"><span data-stu-id="5641c-162">Production</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="5641c-163">**Bereitstellung Vergleich Sortierung**</span><span class="sxs-lookup"><span data-stu-id="5641c-163">**Deployment comparison collation**</span></span> | <span data-ttu-id="5641c-164">Quelle</span><span class="sxs-lookup"><span data-stu-id="5641c-164">Source</span></span> | <span data-ttu-id="5641c-165">Ziel</span><span class="sxs-lookup"><span data-stu-id="5641c-165">Target</span></span> | <span data-ttu-id="5641c-166">Ziel</span><span class="sxs-lookup"><span data-stu-id="5641c-166">Target</span></span> |
| <span data-ttu-id="5641c-167">**Datenbankeigenschaften bereitstellen**</span><span class="sxs-lookup"><span data-stu-id="5641c-167">**Deploy database properties**</span></span> | <span data-ttu-id="5641c-168">True</span><span class="sxs-lookup"><span data-stu-id="5641c-168">True</span></span> | <span data-ttu-id="5641c-169">Nur beim ersten Mal</span><span class="sxs-lookup"><span data-stu-id="5641c-169">First time only</span></span> | <span data-ttu-id="5641c-170">Nur beim ersten Mal</span><span class="sxs-lookup"><span data-stu-id="5641c-170">First time only</span></span> |
| <span data-ttu-id="5641c-171">**Datenbank immer neu erstellen**</span><span class="sxs-lookup"><span data-stu-id="5641c-171">**Always re-create database**</span></span> | <span data-ttu-id="5641c-172">True</span><span class="sxs-lookup"><span data-stu-id="5641c-172">True</span></span> | <span data-ttu-id="5641c-173">False</span><span class="sxs-lookup"><span data-stu-id="5641c-173">False</span></span> | <span data-ttu-id="5641c-174">False</span><span class="sxs-lookup"><span data-stu-id="5641c-174">False</span></span> |
| <span data-ttu-id="5641c-175">**Blockieren Sie inkrementelle Bereitstellung, wenn Datenverlust auftreten könnte**</span><span class="sxs-lookup"><span data-stu-id="5641c-175">**Block incremental deployment if data loss might occur**</span></span> | <span data-ttu-id="5641c-176">False</span><span class="sxs-lookup"><span data-stu-id="5641c-176">False</span></span> | <span data-ttu-id="5641c-177">Vielleicht</span><span class="sxs-lookup"><span data-stu-id="5641c-177">Maybe</span></span> | <span data-ttu-id="5641c-178">True</span><span class="sxs-lookup"><span data-stu-id="5641c-178">True</span></span> |
| <span data-ttu-id="5641c-179">**Bereitstellungsskript im Einzelbenutzermodus ausführen**</span><span class="sxs-lookup"><span data-stu-id="5641c-179">**Execute deployment script in single-user mode**</span></span> | <span data-ttu-id="5641c-180">False</span><span class="sxs-lookup"><span data-stu-id="5641c-180">False</span></span> | <span data-ttu-id="5641c-181">True</span><span class="sxs-lookup"><span data-stu-id="5641c-181">True</span></span> | <span data-ttu-id="5641c-182">True</span><span class="sxs-lookup"><span data-stu-id="5641c-182">True</span></span> |
| <span data-ttu-id="5641c-183">**Sichern der Datenbank vor der Bereitstellung**</span><span class="sxs-lookup"><span data-stu-id="5641c-183">**Back up database before deployment**</span></span> | <span data-ttu-id="5641c-184">False</span><span class="sxs-lookup"><span data-stu-id="5641c-184">False</span></span> | <span data-ttu-id="5641c-185">Vielleicht</span><span class="sxs-lookup"><span data-stu-id="5641c-185">Maybe</span></span> | <span data-ttu-id="5641c-186">True</span><span class="sxs-lookup"><span data-stu-id="5641c-186">True</span></span> |
| <span data-ttu-id="5641c-187">**Generieren Sie DROP-Anweisungen für Objekte, die sich in der Zieldatenbank, aber nicht im Datenbankprojekt sind,**</span><span class="sxs-lookup"><span data-stu-id="5641c-187">**Generate DROP statements for objects that are in the target database but that are not in the database project**</span></span> | <span data-ttu-id="5641c-188">False</span><span class="sxs-lookup"><span data-stu-id="5641c-188">False</span></span> | <span data-ttu-id="5641c-189">True</span><span class="sxs-lookup"><span data-stu-id="5641c-189">True</span></span> | <span data-ttu-id="5641c-190">True</span><span class="sxs-lookup"><span data-stu-id="5641c-190">True</span></span> |
| <span data-ttu-id="5641c-191">**Verwenden Sie ALTER ASSEMBLY-Anweisungen nicht zum Aktualisieren von CLR-Typen**</span><span class="sxs-lookup"><span data-stu-id="5641c-191">**Do not use ALTER ASSEMBLY statements to update CLR types**</span></span> | <span data-ttu-id="5641c-192">False</span><span class="sxs-lookup"><span data-stu-id="5641c-192">False</span></span> | <span data-ttu-id="5641c-193">False</span><span class="sxs-lookup"><span data-stu-id="5641c-193">False</span></span> | <span data-ttu-id="5641c-194">False</span><span class="sxs-lookup"><span data-stu-id="5641c-194">False</span></span> |
  

> [!NOTE]
> <span data-ttu-id="5641c-195">Weitere Informationen zu den Eigenschaften für die datenbankbereitstellung und Aspekte der Umgebung, finden Sie unter [eine Übersicht der Datenbankprojekteinstellungen](https://msdn.microsoft.com/library/aa833291(v=VS.100).aspx), [Vorgehensweise: Konfigurieren von Eigenschaften für Bereitstellungsdetails](https://msdn.microsoft.com/library/dd172125.aspx), [ Erstellen und Bereitstellen der Datenbank in einer isolierten Entwicklungsumgebung](https://msdn.microsoft.com/library/dd193409.aspx), und [erstellen und Bereitstellen von Datenbanken in einer Staging- oder Produktionsumgebung](https://msdn.microsoft.com/library/dd193413.aspx).</span><span class="sxs-lookup"><span data-stu-id="5641c-195">For more information on database deployment properties and environment considerations, see [An Overview of Database Project Settings](https://msdn.microsoft.com/library/aa833291(v=VS.100).aspx), [How to: Configure Properties for Deployment Details](https://msdn.microsoft.com/library/dd172125.aspx), [Build and Deploy Database to an Isolated Development Environment](https://msdn.microsoft.com/library/dd193409.aspx), and [Build and Deploy Databases to a Staging or Production Environment](https://msdn.microsoft.com/library/dd193413.aspx).</span></span>


<span data-ttu-id="5641c-196">Um die Bereitstellung eines Datenbankprojekts an mehrere Ziele zu unterstützen, sollten Sie eine Bereitstellungskonfigurationsdatei für jede zielumgebung erstellen.</span><span class="sxs-lookup"><span data-stu-id="5641c-196">To support the deployment of a database project to multiple destinations, you should create a deployment configuration file for each target environment.</span></span>

<span data-ttu-id="5641c-197">**Zum Erstellen einer umgebungsspezifische-Konfigurationsdatei**</span><span class="sxs-lookup"><span data-stu-id="5641c-197">**To create an environment-specific configuration file**</span></span>

1. <span data-ttu-id="5641c-198">In Visual Studio 2010 in der **Projektmappen-Explorer** rechten Maustaste auf das Datenbankprojekt, und klicken Sie dann auf **Eigenschaften**.</span><span class="sxs-lookup"><span data-stu-id="5641c-198">In Visual Studio 2010, in the **Solution Explorer** window, right-click your database project, and then click **Properties**.</span></span>
2. <span data-ttu-id="5641c-199">Auf der Projekteigenschaftenseite für die Datenbank auf die **bereitstellen** Registerkarte die **Bereitstellungskonfigurationsdatei** auf **neu**.</span><span class="sxs-lookup"><span data-stu-id="5641c-199">On the database project properties page, on the **Deploy** tab, in the **Deployment configuration file** row, click **New**.</span></span>

    ![](customizing-database-deployments-for-multiple-environments/_static/image1.png)
3. <span data-ttu-id="5641c-200">In der **neue Bereitstellungskonfigurationsdatei** Dialogfeld Feld, geben Sie der Datei einen aussagekräftigen Namen (z. B. **TestEnvironment.sqldeployment**), und klicken Sie dann auf **speichern**.</span><span class="sxs-lookup"><span data-stu-id="5641c-200">In the **New Deployment Configuration File** dialog box, give the file a meaningful name (for example, **TestEnvironment.sqldeployment**), and then click **Save**.</span></span>
4. <span data-ttu-id="5641c-201">Auf der *[Dateiname] *** SQLDEPLOYMENT** Seite, legen Sie die Bereitstellungseigenschaften entsprechend die Anforderungen der zielumgebung und speichern Sie die Datei.</span><span class="sxs-lookup"><span data-stu-id="5641c-201">On the *[Filename]***.sqldeployment** page, set the deployment properties to match the requirements of your destination environment, and then save the file.</span></span>

    ![](customizing-database-deployments-for-multiple-environments/_static/image2.png)
5. <span data-ttu-id="5641c-202">Beachten Sie, dass die neue Datei im Ordner "Eigenschaften" auf das Datenbankprojekt hinzugefügt wird.</span><span class="sxs-lookup"><span data-stu-id="5641c-202">Notice that the new file is added to the Properties folder in your database project.</span></span>

    ![](customizing-database-deployments-for-multiple-environments/_static/image3.png)

## <a name="specifying-the-deployment-configuration-file-in-vsdbcmd"></a><span data-ttu-id="5641c-203">Die Konfigurationsdatei für die Bereitstellung angeben in VSDBCMD</span><span class="sxs-lookup"><span data-stu-id="5641c-203">Specifying the Deployment Configuration File in VSDBCMD</span></span>

<span data-ttu-id="5641c-204">Wenn Sie Projektmappenkonfigurationen (z. B. Debug- und Release) innerhalb von Visual Studio 2010 verwenden, können Sie jede Konfiguration eine Bereitstellungskonfigurationsdatei zuordnen.</span><span class="sxs-lookup"><span data-stu-id="5641c-204">When you use solution configurations (like Debug and Release) within Visual Studio 2010, you can associate a deployment configuration file with each configuration.</span></span> <span data-ttu-id="5641c-205">Wenn Sie eine bestimmte Konfiguration erstellen, generiert während des Erstellungsprozesses eine spezifische Konfiguration Bereitstellungsmanifestdatei, die konfigurationsspezifischen Bereitstellungskonfigurationsdatei verweist.</span><span class="sxs-lookup"><span data-stu-id="5641c-205">When you build a particular configuration, the build process generates a configuration-specific deployment manifest file that points to the configuration-specific deployment configuration file.</span></span> <span data-ttu-id="5641c-206">Allerdings ist eine der wichtigsten Ziele des Ansatzes zur Bereitstellung in diesen Lernprogrammen beschrieben Personen Zugriff auf den Bereitstellungsprozess zu steuern, ohne Verwendung von Visual Studio 2010 und Projektmappenkonfigurationen zu gewähren.</span><span class="sxs-lookup"><span data-stu-id="5641c-206">However, one of the main aims of the approach to deployment described in these tutorials is to give people the ability to control the deployment process without using Visual Studio 2010 and solution configurations.</span></span> <span data-ttu-id="5641c-207">Bei dieser Vorgehensweise ist die Projektmappenkonfiguration unabhängig von der zielbereitstellungsumgebung identisch.</span><span class="sxs-lookup"><span data-stu-id="5641c-207">In this approach, the solution configuration is the same regardless of the target deployment environment.</span></span> <span data-ttu-id="5641c-208">Die VSDBCMD-Befehlszeilenoptionen können Sie zum Anpassen der Bereitstellung der Datenbank auf ein bestimmtes Ziel-Umgebung Ihre Bereitstellungskonfigurationsdatei anzugeben.</span><span class="sxs-lookup"><span data-stu-id="5641c-208">To tailor your database deployment to a specific destination environment, you can use the VSDBCMD command-line options to specify your deployment configuration file.</span></span>

<span data-ttu-id="5641c-209">Verwenden Sie zum Angeben einer Konfigurationsdatei für die Bereitstellung in Ihrer VSDBCMD der **p:/DeploymentConfigurationFile** Schalter, und geben Sie den vollständigen Pfad zur Datei.</span><span class="sxs-lookup"><span data-stu-id="5641c-209">To specify a deployment configuration file in your VSDBCMD, use the **p:/DeploymentConfigurationFile** switch and provide the full path to your file.</span></span> <span data-ttu-id="5641c-210">Dadurch werden die Bereitstellungskonfigurationsdatei überschrieben, die das Bereitstellungsmanifest identifiziert.</span><span class="sxs-lookup"><span data-stu-id="5641c-210">This will override the deployment configuration file that the deployment manifest identifies.</span></span> <span data-ttu-id="5641c-211">Angenommen, Sie können mit diesem Befehl VSDBCMD Bereitstellen der **ContactManager** Datenbank in einer testumgebung:</span><span class="sxs-lookup"><span data-stu-id="5641c-211">For example, you could use this VSDBCMD command to deploy the **ContactManager** database to a test environment:</span></span>


[!code-console[Main](customizing-database-deployments-for-multiple-environments/samples/sample1.cmd)]


> [!NOTE]
> <span data-ttu-id="5641c-212">Beachten Sie, dass während des Erstellungsprozesses SQLDEPLOYMENT-Datei umbenennen kann, wenn er die Datei in das Ausgabeverzeichnis kopiert.</span><span class="sxs-lookup"><span data-stu-id="5641c-212">Note that the build process may rename your .sqldeployment file when it copies the file to the output directory.</span></span>


<span data-ttu-id="5641c-213">Bei Verwendung von SQL-Befehlsvariablen in Ihrer SQL-Skripts vor oder nach der Bereitstellung können Sie einen ähnlichen Ansatz, der Bereitstellung eine umgebungsspezifische SQLCMDVARS-Datei zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="5641c-213">If you use SQL command variables in your pre-deployment or post-deployment SQL scripts, you can use a similar approach to associate an environment-specific .sqlcmdvars file with your deployment.</span></span> <span data-ttu-id="5641c-214">In diesem Fall verwenden Sie die **p:/SqlCommandVariablesFile** Switch SQLCMDVARS-Datei zu identifizieren.</span><span class="sxs-lookup"><span data-stu-id="5641c-214">In this case, you use the **p:/SqlCommandVariablesFile** switch to identify your .sqlcmdvars file.</span></span>

## <a name="running-the-vsdbcmd-command-from-an-msbuild-project-file"></a><span data-ttu-id="5641c-215">Ein MSBuild-Projektdatei Ausführen den VSDBCMD-Befehl</span><span class="sxs-lookup"><span data-stu-id="5641c-215">Running the VSDBCMD Command from an MSBuild Project File</span></span>

<span data-ttu-id="5641c-216">Sie können einen VSDBCMD-Befehl von einer MSBuild-Projektdatei aufrufen, indem Sie mithilfe einer **Exec** Aufgabe innerhalb einer MSBuild-Ziel.</span><span class="sxs-lookup"><span data-stu-id="5641c-216">You can invoke a VSDBCMD command from an MSBuild project file by using an **Exec** task within an MSBuild target.</span></span> <span data-ttu-id="5641c-217">In der einfachsten Form ihn sieht dann folgendermaßen aus:</span><span class="sxs-lookup"><span data-stu-id="5641c-217">In its simplest form, it would look like this:</span></span>


[!code-xml[Main](customizing-database-deployments-for-multiple-environments/samples/sample2.xml)]


- <span data-ttu-id="5641c-218">In der Praxis stellen Sie die Projektdateien leicht zu lesen und wiederverwenden möchten, sollten Sie zum Erstellen von Eigenschaften, um die verschiedenen Befehlszeilenparameter zu speichern.</span><span class="sxs-lookup"><span data-stu-id="5641c-218">In practice, to make your project files easy to read and reuse, you'll want to create properties to store the various command-line parameters.</span></span> <span data-ttu-id="5641c-219">Dies erleichtert es Benutzern, um Eigenschaftswerte in einer Projektdatei, umgebungsspezifische bereitzustellen oder um Standardwerte in der MSBuild-Befehlszeile zu überschreiben.</span><span class="sxs-lookup"><span data-stu-id="5641c-219">This makes it easier for users to provide property values in an environment-specific project file or to override default values from the MSBuild command line.</span></span> <span data-ttu-id="5641c-220">Bei Verwendung in beschriebenen Ansatz der Teilung Projekt Datei [verstehen die Projektdatei](../web-deployment-in-the-enterprise/understanding-the-project-file.md), Sie sollten die Buildanweisungen und die Eigenschaften zwischen den beiden Dateien entsprechend unterteilen:</span><span class="sxs-lookup"><span data-stu-id="5641c-220">If you use the split project file approach described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md), you should divide your build instructions and properties between the two files accordingly:</span></span>
- <span data-ttu-id="5641c-221">Umgebungsspezifische Einstellungen wie der Name der Konfigurationsdatei Bereitstellung, die Datenbank-Verbindungszeichenfolge und den Namen der Zieldatenbank, sollte in der Projektdatei umgebungsspezifische wechseln.</span><span class="sxs-lookup"><span data-stu-id="5641c-221">Environment-specific settings, like the deployment configuration filename, the database connection string, and the target database name, should go in the environment-specific project file.</span></span>
- <span data-ttu-id="5641c-222">Das MSBuild-Ziel, das der Befehl VSDBCMD zusammen mit universellen Eigenschaften wie den Speicherort der ausführbaren Datei VSDBCMD ausführt sollte in der universelle Projektdatei eingefügt werden.</span><span class="sxs-lookup"><span data-stu-id="5641c-222">The MSBuild target that runs the VSDBCMD command, together with any universal properties like the location of the VSDBCMD executable, should go in the universal project file.</span></span>

<span data-ttu-id="5641c-223">Sie sollten auch sicherstellen, dass Sie das Datenbankprojekt erstellen, bevor Sie VSDBCMD aufrufen, damit die DEPLOYMANIFEST-Datei erstellt wurde und einsatzbereit ist.</span><span class="sxs-lookup"><span data-stu-id="5641c-223">You should also ensure that you build the database project before you invoke VSDBCMD so that the .deploymanifest file is created and ready to use.</span></span> <span data-ttu-id="5641c-224">Sehen Sie ein vollständiges Beispiel dieses Ansatzes im Thema [Verständnis des Build-Prozesses](../web-deployment-in-the-enterprise/understanding-the-build-process.md), die führt Sie durch die Projektdateien in die [Vorgesetzten Kontakts Beispielprojektmappe](../web-deployment-in-the-enterprise/the-contact-manager-solution.md).</span><span class="sxs-lookup"><span data-stu-id="5641c-224">You can see a full example of this approach in the topic [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md), which walks you through the project files in the [Contact Manager sample solution](../web-deployment-in-the-enterprise/the-contact-manager-solution.md).</span></span>

## <a name="conclusion"></a><span data-ttu-id="5641c-225">Schlussbemerkung</span><span class="sxs-lookup"><span data-stu-id="5641c-225">Conclusion</span></span>

<span data-ttu-id="5641c-226">In diesem Thema wird beschrieben, wie Sie die Datenbankeigenschaften, die unterschiedliche zielumgebungen beim Bereitstellen von Datenbankprojekten, die mithilfe von MSBuild und VSDBCMD anpassen können.</span><span class="sxs-lookup"><span data-stu-id="5641c-226">This topic described how you can tailor database properties to different destination environments when you deploy database projects using MSBuild and VSDBCMD.</span></span> <span data-ttu-id="5641c-227">Dieser Ansatz ist hilfreich, wenn Sie Datenbankprojekte als Teil der größeren, unternehmensweite Lösungen bereitstellen müssen.</span><span class="sxs-lookup"><span data-stu-id="5641c-227">This approach is useful when you need to deploy database projects as part of larger, enterprise-scale solutions.</span></span> <span data-ttu-id="5641c-228">Diese Lösungen werden häufig an mehrere Ziele, wie Sandbox Entwicklungs- oder Testserver Umgebungen, Staging- oder Integration Plattformen und Produktion oder live-Umgebungen bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="5641c-228">These solutions are often deployed to multiple destinations, like sandboxed development or test environments, staging or integration platforms, and production or live environments.</span></span> <span data-ttu-id="5641c-229">Jede dieser zielumgebungen erfordert in der Regel einen eindeutigen Satz von Eigenschaften für die datenbankbereitstellung.</span><span class="sxs-lookup"><span data-stu-id="5641c-229">Each of these target environments typically requires a unique set of database deployment properties.</span></span>

## <a name="further-reading"></a><span data-ttu-id="5641c-230">Weiterführende Themen</span><span class="sxs-lookup"><span data-stu-id="5641c-230">Further Reading</span></span>

<span data-ttu-id="5641c-231">Weitere Informationen zum Bereitstellen von Datenbankprojekten mit VSDBCMD.exe finden Sie unter [Datenbankprojekte bereitstellen](../web-deployment-in-the-enterprise/deploying-database-projects.md).</span><span class="sxs-lookup"><span data-stu-id="5641c-231">For more information on deploying database projects using VSDBCMD.exe, see [Deploying Database Projects](../web-deployment-in-the-enterprise/deploying-database-projects.md).</span></span> <span data-ttu-id="5641c-232">Weitere Informationen finden Sie unter benutzerdefinierte MSBuild-Projektdateien um den Bereitstellungsprozess zu steuern, finden Sie unter [verstehen die Projektdatei](../web-deployment-in-the-enterprise/understanding-the-project-file.md) und [Verständnis des Build-Prozesses](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span><span class="sxs-lookup"><span data-stu-id="5641c-232">For more information on using custom MSBuild project files to control the deployment process, see [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md) and [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span></span>

<span data-ttu-id="5641c-233">Diese Artikel auf MSDN bieten allgemeineren Leitfaden für die Bereitstellung:</span><span class="sxs-lookup"><span data-stu-id="5641c-233">These articles on MSDN provide more general guidance on database deployment:</span></span>

- <span data-ttu-id="5641c-234">[Eine Übersicht über Datenbankprojekteinstellungen](https://msdn.microsoft.com/library/aa833291(v=VS.100).aspx)</span><span class="sxs-lookup"><span data-stu-id="5641c-234">[An Overview of Database Project Settings](https://msdn.microsoft.com/library/aa833291(v=VS.100).aspx)</span></span>
- [<span data-ttu-id="5641c-235">Vorgehensweise: Konfigurieren von Eigenschaften für Bereitstellungsdetails</span><span class="sxs-lookup"><span data-stu-id="5641c-235">How to: Configure Properties for Deployment Details</span></span>](https://msdn.microsoft.com/library/dd172125.aspx)
- [<span data-ttu-id="5641c-236">Erstellen und Bereitstellen von Datenbanken in einer isolierten Entwicklungsumgebung</span><span class="sxs-lookup"><span data-stu-id="5641c-236">Build and Deploy Databases to an Isolated Development Environment</span></span>](https://msdn.microsoft.com/library/dd193409.aspx)
- [<span data-ttu-id="5641c-237">Erstellen und Bereitstellen von Datenbanken in einer Staging- oder Produktionsumgebung</span><span class="sxs-lookup"><span data-stu-id="5641c-237">Build and Deploy Databases to a Staging or Production Environment</span></span>](https://msdn.microsoft.com/library/dd193413.aspx)

> [!div class="step-by-step"]
> <span data-ttu-id="5641c-238">[Zurück](performing-a-what-if-deployment.md)
> [Weiter](deploying-database-role-memberships-to-test-environments.md)</span><span class="sxs-lookup"><span data-stu-id="5641c-238">[Previous](performing-a-what-if-deployment.md)
[Next](deploying-database-role-memberships-to-test-environments.md)</span></span>
