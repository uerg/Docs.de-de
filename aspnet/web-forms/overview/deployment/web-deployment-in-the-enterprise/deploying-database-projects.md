---
uid: web-forms/overview/deployment/web-deployment-in-the-enterprise/deploying-database-projects
title: Bereitstellen von Datenbankprojekten | Microsoft-Dokumentation
author: jrjlee
description: 'Hinweis: Die Vielzahl von Bereitstellungsszenarios benötigen Sie die Möglichkeit, um inkrementelle Updates in einer bereitgestellten Datenbank zu veröffentlichen. Die Alternative besteht darin, neu erstellen...'
ms.author: aspnetcontent
ms.date: 05/04/2012
ms.assetid: 832f226a-1aa3-4093-8c29-ce4196793259
msc.legacyurl: /web-forms/overview/deployment/web-deployment-in-the-enterprise/deploying-database-projects
msc.type: authoredcontent
ms.openlocfilehash: 1e5af29a91f5f432f9241dc3ba0c8fc0bfcf773f
ms.sourcegitcommit: b28cd0313af316c051c2ff8549865bff67f2fbb4
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 07/05/2018
ms.locfileid: "37804982"
---
<a name="deploying-database-projects"></a><span data-ttu-id="097f9-104">Bereitstellen von Datenbankprojekten</span><span class="sxs-lookup"><span data-stu-id="097f9-104">Deploying Database Projects</span></span>
====================
<span data-ttu-id="097f9-105">durch [Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="097f9-105">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="097f9-106">PDF herunterladen</span><span class="sxs-lookup"><span data-stu-id="097f9-106">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> [!NOTE]
> <span data-ttu-id="097f9-107">In vielen Bereitstellungsszenarios benötigen Sie die Möglichkeit, inkrementelle Updates an einer bereitgestellten Datenbank zu veröffentlichen.</span><span class="sxs-lookup"><span data-stu-id="097f9-107">In lots of enterprise deployment scenarios, you need the ability to publish incremental updates to a deployed database.</span></span> <span data-ttu-id="097f9-108">Die Alternative ist die Datenbank bei jeder Bereitstellung, neu erstellen, was bedeutet, dass Sie alle Daten in der vorhandenen Datenbank verloren gehen.</span><span class="sxs-lookup"><span data-stu-id="097f9-108">The alternative is to recreate the database on every deployment, which means you lose any data in the existing database.</span></span> <span data-ttu-id="097f9-109">Wenn Sie mit Visual Studio 2010 arbeiten, ist das mit VSDBCMD die empfohlene Vorgehensweise für inkrementelle datenbankveröffentlichung aus.</span><span class="sxs-lookup"><span data-stu-id="097f9-109">When you work with Visual Studio 2010, using VSDBCMD is the recommended approach to incremental database publishing.</span></span> <span data-ttu-id="097f9-110">Allerdings wird die nächste Version von Visual Studio und das Web Publishing-Pipeline (WPP) Tools enthalten, die unterstützt inkrementelle direkt zu veröffentlichen.</span><span class="sxs-lookup"><span data-stu-id="097f9-110">However, the next version of Visual Studio and the Web Publishing Pipeline (WPP) will include tooling that supports incremental publishing directly.</span></span>


<span data-ttu-id="097f9-111">Wenn Sie die beispiellösung Contact Manager in Visual Studio 2010 öffnen, sehen Sie sich, dass das Projekt einen Ordner "Properties" enthält, die vier Dateien enthält.</span><span class="sxs-lookup"><span data-stu-id="097f9-111">If you open the Contact Manager sample solution in Visual Studio 2010, you'll see that the database project includes a Properties folder that contains four files.</span></span>

![](deploying-database-projects/_static/image1.png)

<span data-ttu-id="097f9-112">Zusammen mit der Projektdatei (*ContactManager.Database.dbproj* in diesem Fall), diese Dateien steuern verschiedene Aspekte des Build & Deployment-Prozesses:</span><span class="sxs-lookup"><span data-stu-id="097f9-112">Together with the project file (*ContactManager.Database.dbproj* in this case), these files control various aspects of the build and deployment process:</span></span>

- <span data-ttu-id="097f9-113">Die *Database.sqlcmdvars* Datei enthält die Werte für alle SQLCMD-Variablen, die Sie verwenden, wenn Sie das Projekt bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="097f9-113">The *Database.sqlcmdvars* file provides values for any SQLCMD variables you use when you deploy the project.</span></span> <span data-ttu-id="097f9-114">Jeder Projektmappenkonfiguration (z. B. "Debug" und "Release") kann es sich um eine andere SQLCMDVARS-Datei angegeben.</span><span class="sxs-lookup"><span data-stu-id="097f9-114">Each solution configuration (for example, debug and release) can specify a different .sqlcmdvars file.</span></span>
- <span data-ttu-id="097f9-115">Die *Database.sqldeployment* Datei enthält die Bereitstellung-spezifische Einstellungen wie angibt, ob die Sortierung definiert, die in Ihrem Projekt oder die Sortierung des Zielservers, verwendet angibt, ob die Zieldatenbank neu erstellt. jede Zeit, oder ändern Sie einfach die vorhandene Datenbank auf dem neuesten Stand zu bringen und so weiter.</span><span class="sxs-lookup"><span data-stu-id="097f9-115">The *Database.sqldeployment* file provides deployment-specific settings, like whether to use the collation defined in your project or the collation of the destination server, whether to recreate the destination database every time or simply amend the existing database to bring it up to date, and so on.</span></span> <span data-ttu-id="097f9-116">Jeder Projektmappenkonfiguration kann es sich um eine andere SQLDEPLOYMENT-Datei angeben.</span><span class="sxs-lookup"><span data-stu-id="097f9-116">Each solution configuration can specify a different .sqldeployment file.</span></span>
- <span data-ttu-id="097f9-117">Die *Database.sqlpermissions* Datei ist ein XML-Dokument, das Sie verwenden können, um Berechtigungen zu definieren, in die Zieldatenbank hinzufügen möchten.</span><span class="sxs-lookup"><span data-stu-id="097f9-117">The *Database.sqlpermissions* file is an XML document that you can use to define any permissions you want to add to the target database.</span></span> <span data-ttu-id="097f9-118">Alle Projektmappenkonfigurationen verwenden die gleichen SQLPERMISSIONS-Datei.</span><span class="sxs-lookup"><span data-stu-id="097f9-118">All solution configurations share the same .sqlpermissions file.</span></span>
- <span data-ttu-id="097f9-119">Die *Database.sqlsettings* Datei gibt an, die auf Datenbankebene Eigenschaften beim Erstellen der Datenbank, wie bei der Sortierung zu verwenden, das Verhalten der Vergleichsoperatoren, und so weiter.</span><span class="sxs-lookup"><span data-stu-id="097f9-119">The *Database.sqlsettings* file specifies the database-level properties to use when creating the database, like the collation to use, the behavior of comparison operators, and so on.</span></span> <span data-ttu-id="097f9-120">Alle Projektmappenkonfigurationen verwenden die gleiche sqlsettings--Datei.</span><span class="sxs-lookup"><span data-stu-id="097f9-120">All solution configurations share the same .sqlsettings file.</span></span>

<span data-ttu-id="097f9-121">Es ist, sollten Sie sich einen Moment Zeit, diese Dateien in Visual Studio öffnen, und machen Sie sich mit dem Inhalt vertraut.</span><span class="sxs-lookup"><span data-stu-id="097f9-121">It's worth taking a moment to open these files in Visual Studio and familiarize yourself with the contents.</span></span>

<span data-ttu-id="097f9-122">Wenn Sie ein Datenbankprojekt erstellen, erstellt der Buildprozess zwei Dateien:</span><span class="sxs-lookup"><span data-stu-id="097f9-122">When you build a database project, the build process creates two files:</span></span>

- <span data-ttu-id="097f9-123">Ein *Datenbankschema* (DBSCHEMA-Datei).</span><span class="sxs-lookup"><span data-stu-id="097f9-123">A *database schema* (.dbschema file).</span></span> <span data-ttu-id="097f9-124">Hier wird beschrieben, das Schema der Datenbank, die Sie in der XML-Format erstellen möchten.</span><span class="sxs-lookup"><span data-stu-id="097f9-124">This describes the schema of the database you want to create in XML format.</span></span>
- <span data-ttu-id="097f9-125">Ein *Bereitstellungsmanifest* (DEPLOYMANIFEST-Datei).</span><span class="sxs-lookup"><span data-stu-id="097f9-125">A *deployment manifest* (.deploymanifest file).</span></span> <span data-ttu-id="097f9-126">Diese Datei enthält alle Informationen, die zum Erstellen und Bereitstellen der Datenbank erforderlich.</span><span class="sxs-lookup"><span data-stu-id="097f9-126">This contains all the information required to create and deploy your database.</span></span> <span data-ttu-id="097f9-127">Es verweist auf die DBSCHEMA-Datei zusammen mit anderen Ressourcen, wie in den bereitstellungsanweisungen (die SQLDEPLOYMENT-Datei) und alle SQL­Skripts vor oder nach der Bereitstellung.</span><span class="sxs-lookup"><span data-stu-id="097f9-127">It references the .dbschema file along with other resources, like the deployment instructions (the .sqldeployment file) and any pre-deployment or post-deployment SQL scripts.</span></span>

<span data-ttu-id="097f9-128">Dies zeigt die Beziehung zwischen diesen Ressourcen:</span><span class="sxs-lookup"><span data-stu-id="097f9-128">This shows the relationship between these resources:</span></span>

![](deploying-database-projects/_static/image2.png)

<span data-ttu-id="097f9-129">Wie Sie sehen können, sind die sqlsettings- und die Datei sqlpermissions Eingaben für den Buildprozess.</span><span class="sxs-lookup"><span data-stu-id="097f9-129">As you can see, the .sqlsettings file and the .sqlpermissions file are inputs to the build process.</span></span> <span data-ttu-id="097f9-130">Zusammen mit der Datenbank-Projektdatei werden diese Dateien verwendet, um die Schemadatei für die Datenbank zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="097f9-130">Along with the database project file, these files are used to create the database schema file.</span></span> <span data-ttu-id="097f9-131">Die SQLDEPLOYMENT-Datei und der SQLCMDVARS-Datei pass-through-Buildprozess unverändert.</span><span class="sxs-lookup"><span data-stu-id="097f9-131">The .sqldeployment file and the .sqlcmdvars file pass through the build process unchanged.</span></span> <span data-ttu-id="097f9-132">Das Bereitstellungsmanifest gibt den Speicherort der das Schema der Datenbank, die SQLDEPLOYMENT-Datei, die SQLCMDVARS-Datei und alle SQL­Skripts vor oder nach der Bereitstellung an.</span><span class="sxs-lookup"><span data-stu-id="097f9-132">The deployment manifest indicates the location of the database schema, the .sqldeployment file, the .sqlcmdvars file, and any pre-deployment or post-deployment SQL scripts.</span></span>

## <a name="why-use-vsdbcmd-to-deploy-a-database-project"></a><span data-ttu-id="097f9-133">Warum verwenden Sie VSDBCMD, um ein Datenbankprojekt bereitstellen?</span><span class="sxs-lookup"><span data-stu-id="097f9-133">Why Use VSDBCMD to Deploy a Database Project?</span></span>

<span data-ttu-id="097f9-134">Es gibt verschiedene Ansätze zum Bereitstellen von Datenbankprojekten.</span><span class="sxs-lookup"><span data-stu-id="097f9-134">There are various different approaches to deploying database projects.</span></span> <span data-ttu-id="097f9-135">Allerdings sind nicht alle von ihnen für die Bereitstellung eines Datenbankprojekts auf Remoteserver in einer unternehmensumgebung geeignet ist.</span><span class="sxs-lookup"><span data-stu-id="097f9-135">However, not all of them are suitable for deploying a database project to remote servers in an enterprise environment.</span></span> <span data-ttu-id="097f9-136">Erwägen Sie die gewünschten aus einer Datenbank-Projekt-Bereitstellung.</span><span class="sxs-lookup"><span data-stu-id="097f9-136">Consider what you want from a database project deployment.</span></span> <span data-ttu-id="097f9-137">In Enterprise-Bereitstellungsszenarien sind Sie eher die:</span><span class="sxs-lookup"><span data-stu-id="097f9-137">In enterprise deployment scenarios, you're likely to want:</span></span>

- <span data-ttu-id="097f9-138">Die Fähigkeit zum Bereitstellen des Datenbankprojekts von einem Remotestandort aus.</span><span class="sxs-lookup"><span data-stu-id="097f9-138">The ability to deploy the database project from a remote location.</span></span>
- <span data-ttu-id="097f9-139">Die Fähigkeit, inkrementelle Updates an einer vorhandenen Datenbank vornehmen.</span><span class="sxs-lookup"><span data-stu-id="097f9-139">The ability to make incremental updates to an existing database.</span></span>
- <span data-ttu-id="097f9-140">Die Möglichkeit, Skripts vor der Bereitstellung oder Skripts nach der Bereitstellung enthalten.</span><span class="sxs-lookup"><span data-stu-id="097f9-140">The ability to include pre-deployment scripts or post-deployment scripts.</span></span>
- <span data-ttu-id="097f9-141">Die Fähigkeit zum Anpassen der Bereitstellung in zielumgebungen mit mehreren.</span><span class="sxs-lookup"><span data-stu-id="097f9-141">The ability to tailor the deployment to multiple destination environments.</span></span>
- <span data-ttu-id="097f9-142">Die Möglichkeit zum Bereitstellen des Datenbankprojekts als Teil eines größeren, in der Regel ein Skript erstellt, Bereitstellung von einem Schritt.</span><span class="sxs-lookup"><span data-stu-id="097f9-142">The ability to deploy the database project as part of a larger, typically scripted, single-step solution deployment.</span></span>

<span data-ttu-id="097f9-143">Es gibt drei wichtigsten Ansätze, die Sie verwenden können, um ein Datenbankprojekt bereitstellen:</span><span class="sxs-lookup"><span data-stu-id="097f9-143">There are three main approaches you can use to deploy a database project:</span></span>

- <span data-ttu-id="097f9-144">Sie können die neue Bereitstellungsfunktion mit der Datenbank-Projekttyp in Visual Studio 2010 verwenden.</span><span class="sxs-lookup"><span data-stu-id="097f9-144">You can use the deployment functionality with the database project type in Visual Studio 2010.</span></span> <span data-ttu-id="097f9-145">Beim Erstellen und ein Datenbankprojekt in Visual Studio 2010 bereitstellen, wird während des Bereitstellungsvorgangs das Bereitstellungsmanifest zum Generieren einer SQL-basierte Bereitstellung-Datei, die spezifisch für die Buildkonfiguration verwendet.</span><span class="sxs-lookup"><span data-stu-id="097f9-145">When you build and deploy a database project in Visual Studio 2010, the deployment process uses the deployment manifest to generate a SQL-based deployment file specific to the build configuration.</span></span> <span data-ttu-id="097f9-146">Dadurch wird die Datenbank erstellt, wenn es nicht bereits vorhanden ist oder alle notwendigen Änderungen an der Datenbank vornehmen, wenn sie bereits vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="097f9-146">This will create the database if it doesn't already exist or make any necessary changes to the database if it does already exist.</span></span> <span data-ttu-id="097f9-147">Können Sie SQLCMD.exe diese Datei auf dem Zielserver ausgeführt, oder Sie können Visual Studio zum Erstellen und führen Sie die Datei festlegen.</span><span class="sxs-lookup"><span data-stu-id="097f9-147">You can use SQLCMD.exe to run this file on your destination server, or you can set Visual Studio to create and run the file.</span></span> <span data-ttu-id="097f9-148">Der Nachteil dieses Ansatzes ist, dass Sie die Kontrolle über die bereitstellungseinstellungen nur eingeschränkte haben.</span><span class="sxs-lookup"><span data-stu-id="097f9-148">The disadvantage of this approach is that you have only limited control over the deployment settings.</span></span> <span data-ttu-id="097f9-149">Sie müssen häufig auch so ändern Sie die SQL-Bereitstellung-Datei, um umgebungsspezifische Werte bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="097f9-149">You may often also need to modify the SQL deployment file to provide environment-specific variable values.</span></span> <span data-ttu-id="097f9-150">Nur können Sie diesen Ansatz aus einem Computer mit Visual Studio 2010 installiert, und die Entwickler müssen wissen, und geben Sie Verbindungszeichenfolgen und Anmeldeinformationen für alle zielumgebungen.</span><span class="sxs-lookup"><span data-stu-id="097f9-150">You can only use this approach from a computer with Visual Studio 2010 installed, and the developer would need to know and provide connection strings and credentials for all destination environments.</span></span>
- <span data-ttu-id="097f9-151">Sie können das Internet Information Services (IIS)-Webbereitstellungstool (Web Deploy) verwenden, um [Bereitstellen einer Datenbank als Teil eines Webanwendungsprojekts](https://msdn.microsoft.com/library/dd465343.aspx).</span><span class="sxs-lookup"><span data-stu-id="097f9-151">You can use the Internet Information Services (IIS) Web Deployment Tool (Web Deploy) to [deploy a database as part of a web application project](https://msdn.microsoft.com/library/dd465343.aspx).</span></span> <span data-ttu-id="097f9-152">Dieser Ansatz ist jedoch sehr viel komplizierter, wenn Sie ein Datenbankprojekt bereitstellen, anstatt einfach eine vorhandene lokale Datenbank auf einem Zielserver zu replizieren möchten.</span><span class="sxs-lookup"><span data-stu-id="097f9-152">However, this approach is a lot more complex if you want to deploy a database project rather than simply replicate an existing local database on a destination server.</span></span> <span data-ttu-id="097f9-153">Sie können die Web Deploy, um das SQL-Bereitstellungsskript ausführen, das das Datenbankprojekt generiert, aber zu diesem Zweck konfigurieren, müssen Sie eine benutzerdefinierte WPP Targets-Datei für das Webanwendungsprojekt zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="097f9-153">You can configure Web Deploy to run the SQL deployment script that the database project generates, but in order to do this, you need to create a custom WPP targets file for your web application project.</span></span> <span data-ttu-id="097f9-154">Dadurch wird der Bereitstellungsprozess eine beträchtliche Menge an Komplexität hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="097f9-154">This adds a substantial amount of complexity to the deployment process.</span></span> <span data-ttu-id="097f9-155">Darüber hinaus unterstützt Web Deploy direkt inkrementelle Updates für vorhandene Datenbanken nicht.</span><span class="sxs-lookup"><span data-stu-id="097f9-155">In addition, Web Deploy does not directly support incremental updates to existing databases.</span></span> <span data-ttu-id="097f9-156">Weitere Informationen zu diesem Ansatz finden Sie unter [erweitern die Veröffentlichung Webpipeline Datenbankprojekt Paket bereitgestellten SQL-Datei](https://go.microsoft.com/?linkid=9805121).</span><span class="sxs-lookup"><span data-stu-id="097f9-156">For more information on this approach, see [Extending the Web Publishing Pipeline to package database project deployed SQL file](https://go.microsoft.com/?linkid=9805121).</span></span>
- <span data-ttu-id="097f9-157">Sie können das VSDBCMD-Dienstprogramm verwenden, um der Datenbank bereitzustellen, über das Datenbankschema oder das Bereitstellungsmanifest.</span><span class="sxs-lookup"><span data-stu-id="097f9-157">You can use the VSDBCMD utility to deploy the database, using either the database schema or the deployment manifest.</span></span> <span data-ttu-id="097f9-158">Sie können ein MSBuild-Ziel VSDBCMD.exe aufrufen Hier können Sie die Datenbanken als Teil eines größeren, im Skript enthaltenen Deployment-Prozesses zu veröffentlichen.</span><span class="sxs-lookup"><span data-stu-id="097f9-158">You can call VSDBCMD.exe from an MSBuild target, which lets you publish databases as part of a larger, scripted deployment process.</span></span> <span data-ttu-id="097f9-159">Sie können angeben, überschreiben die Variablen in Ihren SQLCMDVARS-Datei und viele andere Eigenschaften der von einem VSDBCMD-Befehl, mit der Sie die Bereitstellung für unterschiedliche Umgebungen anpassen, ohne zu mehreren Buildkonfigurationen erstellen können.</span><span class="sxs-lookup"><span data-stu-id="097f9-159">You can override the variables in your .sqlcmdvars file and lots of other database properties from a VSDBCMD command, which allows you to customize your deployment for different environments without creating multiple build configurations.</span></span> <span data-ttu-id="097f9-160">VSDBCMD Differenzierung stellt Funktionen bereit, was, dass nur die erforderlichen Änderungen bedeutet an eine Zieldatenbank mit Ihr Datenbankschema erleichtern.</span><span class="sxs-lookup"><span data-stu-id="097f9-160">VSDBCMD provides differentiation functionality, which means it will make only the necessary changes to align a destination database with your database schema.</span></span> <span data-ttu-id="097f9-161">VSDBCMD bietet auch eine Vielzahl von Befehlszeilenoptionen, die Sie eine präzisere Kontrolle über den Bereitstellungsprozess bieten.</span><span class="sxs-lookup"><span data-stu-id="097f9-161">VSDBCMD also offers a wide range of command-line options, which give you fine-grained control over the deployment process.</span></span>

<span data-ttu-id="097f9-162">In dieser Übersicht sehen Sie sich, dass MSBuild VSDBCMD mit den Ansatz zu einem typischen Unternehmensszenario für die Bereitstellung am besten geeignet ist:</span><span class="sxs-lookup"><span data-stu-id="097f9-162">From this overview, you can see that using VSDBCMD with MSBuild is the approach best suited to a typical enterprise deployment scenario:</span></span>

|  | <span data-ttu-id="097f9-163">Visual Studio 2010</span><span class="sxs-lookup"><span data-stu-id="097f9-163">Visual Studio 2010</span></span> | <span data-ttu-id="097f9-164">Web Deploy 2.0</span><span class="sxs-lookup"><span data-stu-id="097f9-164">Web Deploy 2.0</span></span> | <span data-ttu-id="097f9-165">VSDBCMD.exe</span><span class="sxs-lookup"><span data-stu-id="097f9-165">VSDBCMD.exe</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="097f9-166">Unterstützt die Bereitstellung von Remotezugriff?</span><span class="sxs-lookup"><span data-stu-id="097f9-166">Supports remote deployment?</span></span> | <span data-ttu-id="097f9-167">Ja</span><span class="sxs-lookup"><span data-stu-id="097f9-167">Yes</span></span> | <span data-ttu-id="097f9-168">Ja</span><span class="sxs-lookup"><span data-stu-id="097f9-168">Yes</span></span> | <span data-ttu-id="097f9-169">Ja</span><span class="sxs-lookup"><span data-stu-id="097f9-169">Yes</span></span> |
| <span data-ttu-id="097f9-170">Unterstützt inkrementelle Updates werden?</span><span class="sxs-lookup"><span data-stu-id="097f9-170">Supports incremental updates?</span></span> | <span data-ttu-id="097f9-171">Ja</span><span class="sxs-lookup"><span data-stu-id="097f9-171">Yes</span></span> | <span data-ttu-id="097f9-172">Nein</span><span class="sxs-lookup"><span data-stu-id="097f9-172">No</span></span> | <span data-ttu-id="097f9-173">Ja</span><span class="sxs-lookup"><span data-stu-id="097f9-173">Yes</span></span> |
| <span data-ttu-id="097f9-174">Unterstützt Skripts, Pre-und post-Bereitstellung?</span><span class="sxs-lookup"><span data-stu-id="097f9-174">Supports pre/post-deployment scripts?</span></span> | <span data-ttu-id="097f9-175">Ja</span><span class="sxs-lookup"><span data-stu-id="097f9-175">Yes</span></span> | <span data-ttu-id="097f9-176">Ja</span><span class="sxs-lookup"><span data-stu-id="097f9-176">Yes</span></span> | <span data-ttu-id="097f9-177">Ja</span><span class="sxs-lookup"><span data-stu-id="097f9-177">Yes</span></span> |
| <span data-ttu-id="097f9-178">Unterstützt die Bereitstellung von mehreren Umgebungen?</span><span class="sxs-lookup"><span data-stu-id="097f9-178">Supports multi-environment deployment?</span></span> | <span data-ttu-id="097f9-179">Eingeschränkt</span><span class="sxs-lookup"><span data-stu-id="097f9-179">Limited</span></span> | <span data-ttu-id="097f9-180">Eingeschränkt</span><span class="sxs-lookup"><span data-stu-id="097f9-180">Limited</span></span> | <span data-ttu-id="097f9-181">Ja</span><span class="sxs-lookup"><span data-stu-id="097f9-181">Yes</span></span> |
| <span data-ttu-id="097f9-182">Unterstützt die skriptgesteuerte Bereitstellung?</span><span class="sxs-lookup"><span data-stu-id="097f9-182">Supports scripted deployment?</span></span> | <span data-ttu-id="097f9-183">Eingeschränkt</span><span class="sxs-lookup"><span data-stu-id="097f9-183">Limited</span></span> | <span data-ttu-id="097f9-184">Ja</span><span class="sxs-lookup"><span data-stu-id="097f9-184">Yes</span></span> | <span data-ttu-id="097f9-185">Ja</span><span class="sxs-lookup"><span data-stu-id="097f9-185">Yes</span></span> |

<span data-ttu-id="097f9-186">Im weiteren Verlauf dieses Themas wird die Verwendung von VSDBCMD mit MSBuild zum Bereitstellen von Datenbankprojekten beschrieben.</span><span class="sxs-lookup"><span data-stu-id="097f9-186">The remainder of this topic describes the use of VSDBCMD with MSBuild to deploy database projects.</span></span>

## <a name="understanding-the-deployment-process"></a><span data-ttu-id="097f9-187">Grundlegendes zu den Bereitstellungsprozess</span><span class="sxs-lookup"><span data-stu-id="097f9-187">Understanding the Deployment Process</span></span>

<span data-ttu-id="097f9-188">Die VSDBCMD-Dienstprogramm können Sie eine Datenbank mit dem Datenbankschema (die DBSCHEMA-Datei) oder das Bereitstellungsmanifest (die DEPLOYMANIFEST-Datei) bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="097f9-188">The VSDBCMD utility lets you deploy a database using either the database schema (the .dbschema file) or the deployment manifest (the .deploymanifest file).</span></span> <span data-ttu-id="097f9-189">In der Praxis ist verwenden fast immer das Bereitstellungsmanifest, Sie, wie das Bereitstellungsmanifest können Sie die Standardwerte für die verschiedenen Eigenschaften der Bereitstellung zur Verfügung gestellt, und identifizieren alle vor oder nach der Bereitstellung SQL­Skripts, die Sie ausführen möchten.</span><span class="sxs-lookup"><span data-stu-id="097f9-189">In practice, you'll almost always use the deployment manifest, as the deployment manifest lets you provide default values for various deployment properties and identify any pre-deployment or post-deployment SQL scripts you want to run.</span></span> <span data-ttu-id="097f9-190">Mit diesem Befehl VSDBCMD dient beispielsweise zum Bereitstellen der **ContactManager** Datenbank mit einem Datenbankserver in einer testumgebung:</span><span class="sxs-lookup"><span data-stu-id="097f9-190">For example, this VSDBCMD command is used to deploy the **ContactManager** database to a database server in a test environment:</span></span>


[!code-console[Main](deploying-database-projects/samples/sample1.cmd)]


<span data-ttu-id="097f9-191">In diesem Fall gilt Folgendes:</span><span class="sxs-lookup"><span data-stu-id="097f9-191">In this case:</span></span>

- <span data-ttu-id="097f9-192">Die **/a** (oder **/Action**) Option gibt an, was VSDBCMD tun soll.</span><span class="sxs-lookup"><span data-stu-id="097f9-192">The **/a** (or **/Action**) switch specifies what you want VSDBCMD to do.</span></span> <span data-ttu-id="097f9-193">Sie können dies festlegen, um **Import** oder **bereitstellen**.</span><span class="sxs-lookup"><span data-stu-id="097f9-193">You can set this to **Import** or **Deploy**.</span></span> <span data-ttu-id="097f9-194">Die **Import** Option wird verwendet, um eine DBSCHEMA-Datei aus einer vorhandenen Datenbank generieren und die **bereitstellen** Option wird verwendet, um eine DBSCHEMA-Datei in eine Zieldatenbank bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="097f9-194">The **Import** option is used to generate a .dbschema file from an existing database, and the **Deploy** option is used to deploy a .dbschema file to a target database.</span></span>
- <span data-ttu-id="097f9-195">Die **/manifest** (oder **MANIFESTFILE**) Switch identifiziert die DEPLOYMANIFEST-Datei, die Sie bereitstellen möchten.</span><span class="sxs-lookup"><span data-stu-id="097f9-195">The **/manifest** (or **/ManifestFile**) switch identifies the .deploymanifest file you want to deploy.</span></span> <span data-ttu-id="097f9-196">Wenn Sie die DBSCHEMA-Datei verwenden möchten, verwenden Sie die **/Modell** (oder **/ModelFile**) wechseln.</span><span class="sxs-lookup"><span data-stu-id="097f9-196">If you wanted to use the .dbschema file instead, you'd use the **/model** (or **/ModelFile**) switch.</span></span>
- <span data-ttu-id="097f9-197">Die **/cs** (oder **/ConnectionString**)-Switch bietet die Verbindungszeichenfolge für den Zielserver für die Datenbank.</span><span class="sxs-lookup"><span data-stu-id="097f9-197">The **/cs** (or **/ConnectionString**) switch provides the connection string for the target database server.</span></span> <span data-ttu-id="097f9-198">Beachten Sie, dass dies der Name der Datenbank umfassen keine&#x2014;VSDBCMD muss an den Server zum Erstellen der Datenbank; eine Verbindung herstellen Es muss nicht mit einer einzelnen Datenbank herstellen.</span><span class="sxs-lookup"><span data-stu-id="097f9-198">Note that this doesn't include the name of the database&#x2014;VSDBCMD needs to connect to the server to create the database; it doesn't need to connect to an individual database.</span></span> <span data-ttu-id="097f9-199">Wenn Ihre DEPLOYMANIFEST-Datei eine Verbindungszeichenfolge enthält, können Sie diese Option weglassen.</span><span class="sxs-lookup"><span data-stu-id="097f9-199">If your .deploymanifest file includes a connection string, you can omit this switch.</span></span> <span data-ttu-id="097f9-200">Wenn Sie den Schalter trotzdem verwenden, wird der Switch-Wert, der DeployManifest-Wert überschrieben.</span><span class="sxs-lookup"><span data-stu-id="097f9-200">If you use the switch anyway, the switch value will override the .deploymanifest value.</span></span>
- <span data-ttu-id="097f9-201">Die <strong>/p:TargetDatabase</strong> -Eigenschaft gibt den Namen, die Sie in die Zieldatenbank bei der Erstellung zuweisen möchten.</span><span class="sxs-lookup"><span data-stu-id="097f9-201">The <strong>/p:TargetDatabase</strong> property provides the name you want to assign to the target database on creation.</span></span> <span data-ttu-id="097f9-202">Dies überschreibt den Wert für die <strong>TargetDatabase</strong> Eigenschaft in der Datei DeployManifest.</span><span class="sxs-lookup"><span data-stu-id="097f9-202">This overrides the value of the <strong>TargetDatabase</strong> property in the .deploymanifest file.</span></span> <span data-ttu-id="097f9-203">Sie können die <strong>/p:</strong> <em>[Eigenschaftenname]</em>Syntax, um eine Vielzahl von Eigenschaften für die Bereitstellung festzulegen und um alle SQLCMD-Variablen zu überschreiben, die in der SQLCMDVARS-Datei deklariert.</span><span class="sxs-lookup"><span data-stu-id="097f9-203">You can use the <strong>/p:</strong> <em>[property name]</em>syntax to set a wide variety of deployment properties and to override any SQLCMD variables declared in your .sqlcmdvars file.</span></span>
- <span data-ttu-id="097f9-204">Die **/dd+** (oder **/DeployToDatabase+**) diese Option gibt an, dass Sie eine Bereitstellung erstellen, und klicken Sie in der zielumgebung bereitstellen möchten.</span><span class="sxs-lookup"><span data-stu-id="097f9-204">The **/dd+** (or **/DeployToDatabase+**) switch indicates that you want to create a deployment and deploy it to the target environment.</span></span> <span data-ttu-id="097f9-205">Bei Angabe von **/dd-**, oder lassen Sie den Switch, VSDBCMD ein Bereitstellungsskript generiert, aber nicht in der zielumgebung bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="097f9-205">If you specify **/dd-**, or omit the switch, VSDBCMD will generate a deployment script but will not deploy it to the target environment.</span></span> <span data-ttu-id="097f9-206">Dieser Schalter ist häufig die Quelle der Verwirrung und wird im nächsten Abschnitt ausführlicher erläutert.</span><span class="sxs-lookup"><span data-stu-id="097f9-206">This switch is often the source of confusion and is explained in more detail in the next section.</span></span>
- <span data-ttu-id="097f9-207">Die **/script** (oder **/DeploymentScriptFile**) Option gibt an, in dem Sie das Bereitstellungsskript generieren möchten.</span><span class="sxs-lookup"><span data-stu-id="097f9-207">The **/script** (or **/DeploymentScriptFile**) switch specifies where you want to generate the deployment script.</span></span> <span data-ttu-id="097f9-208">Dieser Wert wirkt sich nicht auf den Bereitstellungsprozess aus.</span><span class="sxs-lookup"><span data-stu-id="097f9-208">This value does not affect the deployment process.</span></span>

<span data-ttu-id="097f9-209">Weitere Informationen zu VSDBCMD, finden Sie unter [Befehlszeilenreferenz für VSDBCMD. EXE-Datei ("Bereitstellung" und "Schema importieren")](https://msdn.microsoft.com/library/dd193283.aspx) und [wie: Vorbereiten einer Datenbank für die Bereitstellung über eine Eingabeaufforderung mit VSDBCMD. EXE-Datei](https://msdn.microsoft.com/library/dd193258.aspx).</span><span class="sxs-lookup"><span data-stu-id="097f9-209">For more information on VSDBCMD, see [Command-Line Reference for VSDBCMD.EXE (Deployment and Schema Import)](https://msdn.microsoft.com/library/dd193283.aspx) and [How to: Prepare a Database for Deployment From a Command Prompt by Using VSDBCMD.EXE](https://msdn.microsoft.com/library/dd193258.aspx).</span></span>

<span data-ttu-id="097f9-210">Ein Beispiel, wie Sie aus einer MSBuild-Projektdatei VSDBCMD verwenden können, finden Sie unter [Verständnis des Prozesses erstellen](understanding-the-build-process.md).</span><span class="sxs-lookup"><span data-stu-id="097f9-210">For an example of how you can use VSDBCMD from an MSBuild project file, see [Understanding the Build Process](understanding-the-build-process.md).</span></span> <span data-ttu-id="097f9-211">Beispiele für die Bereitstellung der datenbankeinstellungen für mehrere Umgebungen konfigurieren, finden Sie unter [Anpassen von Datenbankbereitstellungen für mehrere Umgebungen](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span><span class="sxs-lookup"><span data-stu-id="097f9-211">For examples of how to configure database deployment settings for multiple environments, see [Customizing Database Deployments for Multiple Environments](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span></span>

## <a name="understanding-the-deploytodatabase-switch"></a><span data-ttu-id="097f9-212">Grundlegendes zu den DeployToDatabase-Schalter</span><span class="sxs-lookup"><span data-stu-id="097f9-212">Understanding the DeployToDatabase Switch</span></span>

<span data-ttu-id="097f9-213">Das Verhalten der **dd /** oder **/DeployToDatabase** Switch, hängt davon ab, ob Sie VSDBCMD mit einer DBSCHEMA-Datei oder eine DEPLOYMANIFEST-Datei verwenden.</span><span class="sxs-lookup"><span data-stu-id="097f9-213">The behavior of the **/dd** or **/DeployToDatabase** switch depends on whether you're using VSDBCMD with a .dbschema file or a .deploymanifest file.</span></span> <span data-ttu-id="097f9-214">Wenn Sie eine DBSCHEMA-Datei verwenden, ist das Verhalten recht einfach:</span><span class="sxs-lookup"><span data-stu-id="097f9-214">If you're using a .dbschema file, the behavior is fairly straightforward:</span></span>

- <span data-ttu-id="097f9-215">Bei Angabe von **/dd+** oder **dd /**, VSDBCMD wird ein Bereitstellungsskript generieren und Bereitstellen der Datenbank.</span><span class="sxs-lookup"><span data-stu-id="097f9-215">If you specify **/dd+** or **/dd**, VSDBCMD will generate a deployment script and deploy the database.</span></span>
- <span data-ttu-id="097f9-216">Bei Angabe von **/dd-** oder ohne den Schalter, VSDBCMD wird nur ein Bereitstellungsskript generiert.</span><span class="sxs-lookup"><span data-stu-id="097f9-216">If you specify **/dd-** or omit the switch, VSDBCMD will generate a deployment script only.</span></span>

<span data-ttu-id="097f9-217">Wenn Sie eine Datei DeployManifest verwenden, ist das Verhalten wesentlich komplizierter.</span><span class="sxs-lookup"><span data-stu-id="097f9-217">If you're using a .deploymanifest file, the behavior is a lot more complicated.</span></span> <span data-ttu-id="097f9-218">Dies ist, da die DEPLOYMANIFEST-Datei in einen Eigenschaftsnamen **DeployToDatabase** , wird auch bestimmt, ob die Datenbank bereitgestellt wird.</span><span class="sxs-lookup"><span data-stu-id="097f9-218">This is because the .deploymanifest file contains a property name **DeployToDatabase** that also determines whether the database is deployed.</span></span>


[!code-xml[Main](deploying-database-projects/samples/sample2.xml)]


<span data-ttu-id="097f9-219">Der Wert dieser Eigenschaft wird gemäß den Eigenschaften des Datenbankprojekts festgelegt.</span><span class="sxs-lookup"><span data-stu-id="097f9-219">The value of this property is set according to the properties of the database project.</span></span> <span data-ttu-id="097f9-220">Setzen Sie die **bereitstellen-Aktion** zu **erstellen Sie ein Skript für die Bereitstellung (. SQL)**, der Wert **"false"**.</span><span class="sxs-lookup"><span data-stu-id="097f9-220">If you set the **Deploy action** to **Create a deployment script (.sql)**, the value will be **False**.</span></span> <span data-ttu-id="097f9-221">Setzen Sie die **bereitstellen-Aktion** zu **Bereitstellungsskript (. SQL) erstellen und Bereitstellen von in die Datenbank**, der Wert **"true"**.</span><span class="sxs-lookup"><span data-stu-id="097f9-221">If you set the **Deploy action** to **Create a deployment script (.sql) and deploy to the database**, the value will be **True**.</span></span>

> [!NOTE]
> <span data-ttu-id="097f9-222">Diese Einstellungen sind mit einem bestimmten Build-Konfiguration und Plattform zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="097f9-222">These settings are associated with a specific build configuration and platform.</span></span> <span data-ttu-id="097f9-223">Angenommen, Sie konfigurieren, dass die Einstellungen für die **Debuggen** Konfiguration, und klicken Sie dann veröffentlichen Sie mithilfe der **Version** Konfiguration Ihre Einstellungen nicht verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="097f9-223">For example, if you configure settings for the **Debug** configuration and then publish using the **Release** configuration, your settings will not be used.</span></span>


![](deploying-database-projects/_static/image3.png)

> [!NOTE]
> <span data-ttu-id="097f9-224">In diesem Szenario die **bereitstellen-Aktion** sollte immer festgelegt werden, um **erstellen Sie ein Skript für die Bereitstellung (. SQL)**, da Sie nicht, dass Visual Studio 2010 zum Bereitstellen Ihrer Datenbank möchten.</span><span class="sxs-lookup"><span data-stu-id="097f9-224">In this scenario, the **Deploy action** should always be set to **Create a deployment script (.sql)**, because you don't want Visual Studio 2010 to deploy your database.</span></span> <span data-ttu-id="097f9-225">Das heißt, die **DeployToDatabase** Eigenschaft muss immer **"false"**.</span><span class="sxs-lookup"><span data-stu-id="097f9-225">In other words, the **DeployToDatabase** property should always be **False**.</span></span>


<span data-ttu-id="097f9-226">Wenn eine **DeployToDatabase** -Eigenschaft angegeben ist, die **dd /** Switch wird die Eigenschaft nur überschreiben, wenn der Eigenschaftswert ist **"false"**:</span><span class="sxs-lookup"><span data-stu-id="097f9-226">When a **DeployToDatabase** property is specified, the **/dd** switch will only override the property if the property value is **false**:</span></span>

- <span data-ttu-id="097f9-227">Wenn die **DeployToDatabase** Eigenschaft **"false"**, und geben Sie **/dd+** oder **dd /**, VSDBCMD überschreibt die  **DeployToDatabase** Eigenschaft und die Datenbank bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="097f9-227">If the **DeployToDatabase** property is **False**, and you specify **/dd+** or **/dd**, VSDBCMD will override the **DeployToDatabase** property and deploy the database.</span></span>
- <span data-ttu-id="097f9-228">Wenn die **DeployToDatabase** Eigenschaft **"false"**, und geben Sie **/dd-** oder ohne den Schalter, VSDBCMD die Datenbank nicht bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="097f9-228">If the **DeployToDatabase** property is **False**, and you specify **/dd-** or omit the switch, VSDBCMD will not deploy the database.</span></span>
- <span data-ttu-id="097f9-229">Wenn die **DeployToDatabase** Eigenschaft **"true"**, VSDBCMD ignoriert den Schalter und die Datenbank bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="097f9-229">If the **DeployToDatabase** property is **True**, VSDBCMD will ignore the switch and deploy the database.</span></span>
- <span data-ttu-id="097f9-230">In jedem Fall, unabhängig davon, ob Sie die Datenbank sowie bereitstellen, wird ein Bereitstellungsskript generiert.</span><span class="sxs-lookup"><span data-stu-id="097f9-230">A deployment script is generated in each case, regardless of whether you're deploying the database as well.</span></span>

## <a name="conclusion"></a><span data-ttu-id="097f9-231">Schlussbemerkung</span><span class="sxs-lookup"><span data-stu-id="097f9-231">Conclusion</span></span>

<span data-ttu-id="097f9-232">In diesem Thema wird eine Übersicht über den Build & Deployment-Prozess für Datenbankprojekte in Visual Studio 2010 bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="097f9-232">This topic provided an overview of the build and deployment process for database projects in Visual Studio 2010.</span></span> <span data-ttu-id="097f9-233">Es wird beschrieben, wie Sie VSDBCMD.exe mit MSBuild verwenden können, um die unternehmensweite Bereitstellung unterstützt.</span><span class="sxs-lookup"><span data-stu-id="097f9-233">It also described how you can use VSDBCMD.exe with MSBuild to support enterprise-scale database deployment.</span></span>

<span data-ttu-id="097f9-234">Weitere Informationen dazu, wie dies in der Praxis funktioniert, finden Sie unter [Anpassen von Datenbankbereitstellungen für mehrere Umgebungen](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span><span class="sxs-lookup"><span data-stu-id="097f9-234">For more information on how this works in practice, see [Customizing Database Deployments for Multiple Environments](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span></span>

## <a name="further-reading"></a><span data-ttu-id="097f9-235">Weiterführende Themen</span><span class="sxs-lookup"><span data-stu-id="097f9-235">Further Reading</span></span>

<span data-ttu-id="097f9-236">Informationen zum datenbankbereitstellungen anpassen, indem Sie eine separate Bereitstellung-Konfigurationsdatei für jede Umgebung erstellen, finden Sie unter [Anpassen von Datenbankbereitstellungen für mehrere Umgebungen](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span><span class="sxs-lookup"><span data-stu-id="097f9-236">For information on how to customize database deployments by creating a separate deployment configuration file for each environment, see [Customizing Database Deployments for Multiple Environments](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span></span> <span data-ttu-id="097f9-237">Anleitungen zum Konfigurieren von Datenbank-Rollenmitgliedschaften durch Ausführen eines Skripts nach der Bereitstellung finden Sie unter [Bereitstellen von Datenbankrollenmitgliedschaften in Test-Umgebungen](../advanced-enterprise-web-deployment/deploying-database-role-memberships-to-test-environments.md).</span><span class="sxs-lookup"><span data-stu-id="097f9-237">For guidance on how to configure database role memberships by running a post-deployment script, see [Deploying Database Role Memberships to Test Environments](../advanced-enterprise-web-deployment/deploying-database-role-memberships-to-test-environments.md).</span></span> <span data-ttu-id="097f9-238">Anleitungen zum Verwalten Sie einige besondere Anforderungen die Mitgliedschaft von Datenbanken zu erzwingen, finden Sie unter [Bereitstellen von Datenbankrollenmitgliedschaften in Enterprise-Umgebungen](../advanced-enterprise-web-deployment/deploying-membership-databases-to-enterprise-environments.md).</span><span class="sxs-lookup"><span data-stu-id="097f9-238">For guidance on managing some of the unique challenges that membership databases impose, see [Deploying Membership Databases to Enterprise Environments](../advanced-enterprise-web-deployment/deploying-membership-databases-to-enterprise-environments.md).</span></span>

<span data-ttu-id="097f9-239">Diese Themen auf MSDN finden Sie umfassendere Anleitung und Hintergrundinformationen für Visual Studio Database Projects und den Bereitstellungsprozess für die Datenbank:</span><span class="sxs-lookup"><span data-stu-id="097f9-239">These topics on MSDN provide broader guidance and background information on Visual Studio database projects and the database deployment process:</span></span>

- [<span data-ttu-id="097f9-240">Visual Studio 2010 SQL Server-Datenbankprojekte</span><span class="sxs-lookup"><span data-stu-id="097f9-240">Visual Studio 2010 SQL Server Database Projects</span></span>](https://msdn.microsoft.com/library/ff678491.aspx)
- [<span data-ttu-id="097f9-241">Verwalten von Datenbankänderungen</span><span class="sxs-lookup"><span data-stu-id="097f9-241">Managing Database Change</span></span>](https://msdn.microsoft.com/library/aa833404.aspx)
- [<span data-ttu-id="097f9-242">Vorgehensweise: Vorbereiten einer Datenbank für die Bereitstellung über eine Eingabeaufforderung mit VSDBCMD. EXE-DATEI</span><span class="sxs-lookup"><span data-stu-id="097f9-242">How to: Prepare a Database for Deployment From a Command Prompt by Using VSDBCMD.EXE</span></span>](https://msdn.microsoft.com/library/dd193258.aspx)
- [<span data-ttu-id="097f9-243">Eine Übersicht über Datenbank-Build und Bereitstellung</span><span class="sxs-lookup"><span data-stu-id="097f9-243">An Overview of Database Build and Deployment</span></span>](https://msdn.microsoft.com/library/aa833165.aspx)

> [!div class="step-by-step"]
> <span data-ttu-id="097f9-244">[Zurück](deploying-web-packages.md)
> [Weiter](creating-and-running-a-deployment-command-file.md)</span><span class="sxs-lookup"><span data-stu-id="097f9-244">[Previous](deploying-web-packages.md)
[Next](creating-and-running-a-deployment-command-file.md)</span></span>
