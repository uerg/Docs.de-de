---
uid: web-forms/overview/getting-started/getting-started-with-aspnet-45-web-forms/shopping-cart
title: Warenkorb | Microsoft-Dokumentation
author: Erikre
description: Diese lernprogrammreihe vermittelt Ihnen die Grundlagen zum Erstellen einer ASP.NET Web Forms-Anwendung mithilfe von ASP.NET 4.5 und Microsoft Visual Studio Express 2013 für wir...
ms.author: aspnetcontent
manager: wpickett
ms.date: 09/08/2014
ms.topic: article
ms.assetid: 6898c601-6c31-432f-8388-e6843f8a17cb
ms.technology: dotnet-webforms
msc.legacyurl: /web-forms/overview/getting-started/getting-started-with-aspnet-45-web-forms/shopping-cart
msc.type: authoredcontent
ms.openlocfilehash: 22253b8708efd9ce505c9fbeb9cb2e942588b37d
ms.sourcegitcommit: 953ff9ea4369f154d6fd0239599279ddd3280009
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 07/03/2018
ms.locfileid: "37375777"
---
<a name="shopping-cart"></a><span data-ttu-id="6ad4a-103">Einkaufswagen</span><span class="sxs-lookup"><span data-stu-id="6ad4a-103">Shopping Cart</span></span>
====================
<span data-ttu-id="6ad4a-104">durch [Erik Reitan](https://github.com/Erikre)</span><span class="sxs-lookup"><span data-stu-id="6ad4a-104">by [Erik Reitan](https://github.com/Erikre)</span></span>

<span data-ttu-id="6ad4a-105">[Herunterladen der Wingtip Toys-Beispielprojekts (c#)](http://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) oder [E-Book (PDF) herunterladen](http://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20ASP.NET%204.5%20Web%20Forms%20and%20Visual%20Studio%202013.pdf)</span><span class="sxs-lookup"><span data-stu-id="6ad4a-105">[Download Wingtip Toys Sample Project (C#)](http://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) or [Download E-book (PDF)](http://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20ASP.NET%204.5%20Web%20Forms%20and%20Visual%20Studio%202013.pdf)</span></span>

> <span data-ttu-id="6ad4a-106">Diese lernprogrammreihe vermittelt Ihnen die Grundlagen zum Erstellen einer ASP.NET Web Forms-Anwendung mithilfe von ASP.NET 4.5 und Microsoft Visual Studio Express 2013 für Web.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-106">This tutorial series will teach you the basics of building an ASP.NET Web Forms application using ASP.NET 4.5 and Microsoft Visual Studio Express 2013 for Web.</span></span> <span data-ttu-id="6ad4a-107">Eine Visual Studio 2013 [-Projekts mit C#-Quellcode](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) ist verfügbar, die dieser tutorialreihe begleitet.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-107">A Visual Studio 2013 [project with C# source code](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) is available to accompany this tutorial series.</span></span>


<span data-ttu-id="6ad4a-108">In diesem Tutorial wird beschrieben, die Geschäftslogik erforderlich, um einen Einkaufswagen gelegt hat der Wingtip Toys-beispielanwendung von ASP.NET Web Forms hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-108">This tutorial describes the business logic required to add a shopping cart to the Wingtip Toys sample ASP.NET Web Forms application.</span></span> <span data-ttu-id="6ad4a-109">Dieses Tutorial baut auf dem vorherigen Lernprogramm "Anzeige Elemente und Details zum Data" und ist Teil der tutorialreihe Wingtip Toys-Store.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-109">This tutorial builds on the previous tutorial "Display Data Items and Details" and is part of the Wingtip Toy Store tutorial series.</span></span> <span data-ttu-id="6ad4a-110">Wenn Sie dieses Tutorial abgeschlossen haben, werden die Benutzer die Beispiel-app hinzufügen, entfernen und ändern die Produkte im Einkaufswagen können.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-110">When you've completed this tutorial, the users of your sample app will be able to add, remove, and modify the products in their shopping cart.</span></span>

## <a name="what-youll-learn"></a><span data-ttu-id="6ad4a-111">Sie lernen Folgendes:</span><span class="sxs-lookup"><span data-stu-id="6ad4a-111">What you'll learn:</span></span>

1. <span data-ttu-id="6ad4a-112">Vorgehensweise: Erstellen Sie einen Einkaufswagen gelegt hat, für die Webanwendung.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-112">How to create a shopping cart for the web application.</span></span>
2. <span data-ttu-id="6ad4a-113">Wie Benutzer Elemente zum Einkaufswagen hinzufügen können.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-113">How to enable users to add items to the shopping cart.</span></span>
3. <span data-ttu-id="6ad4a-114">Gewusst wie: Hinzufügen einer [GridView](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview(v=vs.110).aspx#introduction) Steuerelement shopping Cart-Details angezeigt.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-114">How to add a [GridView](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview(v=vs.110).aspx#introduction) control to display shopping cart details.</span></span>
4. <span data-ttu-id="6ad4a-115">Informationen zum Berechnen und die Gesamtsumme der Bestellungen anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-115">How to calculate and display the order total.</span></span>
5. <span data-ttu-id="6ad4a-116">Vorgehensweise beim Entfernen und Aktualisieren von Elementen in den Einkaufswagen.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-116">How to remove and update items in the shopping cart.</span></span>
6. <span data-ttu-id="6ad4a-117">Wie Sie einen shopping Cart-Indikator enthalten.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-117">How to include a shopping cart counter.</span></span>

## <a name="code-features-in-this-tutorial"></a><span data-ttu-id="6ad4a-118">Features des Code in diesem Tutorial:</span><span class="sxs-lookup"><span data-stu-id="6ad4a-118">Code features in this tutorial:</span></span>

1. <span data-ttu-id="6ad4a-119">Entitätsframework Code First</span><span class="sxs-lookup"><span data-stu-id="6ad4a-119">Entity Framework Code First</span></span>
2. <span data-ttu-id="6ad4a-120">Datenanmerkungen</span><span class="sxs-lookup"><span data-stu-id="6ad4a-120">Data Annotations</span></span>
3. <span data-ttu-id="6ad4a-121">Stark typisierte Datensteuerelemente</span><span class="sxs-lookup"><span data-stu-id="6ad4a-121">Strongly typed data controls</span></span>
4. <span data-ttu-id="6ad4a-122">Modellbindung</span><span class="sxs-lookup"><span data-stu-id="6ad4a-122">Model binding</span></span>

## <a name="creating-a-shopping-cart"></a><span data-ttu-id="6ad4a-123">Erstellen einen Einkaufswagen gelegt hat</span><span class="sxs-lookup"><span data-stu-id="6ad4a-123">Creating a Shopping Cart</span></span>

<span data-ttu-id="6ad4a-124">Weiter oben in dieser tutorialreihe haben Sie Seiten und Code zum Anzeigen von Produktdaten aus einer Datenbank hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-124">Earlier in this tutorial series, you added pages and code to view product data from a database.</span></span> <span data-ttu-id="6ad4a-125">In diesem Tutorial erstellen Sie einen Einkaufswagen gelegt hat, um die Produkte zu verwalten, erwerben Benutzer interessiert sind.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-125">In this tutorial, you'll create a shopping cart to manage the products that users are interested in buying.</span></span> <span data-ttu-id="6ad4a-126">Benutzer werden suchen und Hinzufügen von Elementen zum Einkaufswagen, auch wenn sie nicht registriert oder angemeldet sind.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-126">Users will be able to browse and add items to the shopping cart even if they are not registered or logged in.</span></span> <span data-ttu-id="6ad4a-127">Zum Verwalten des Zugriffs für shopping Cart weisen Sie Benutzern eine eindeutige `ID` zum ersten Mal Einkaufswagen einen global eindeutigen Bezeichner (GUID) verwenden, wenn der Benutzer dem Einkaufswagen zugreift.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-127">To manage shopping cart access, you will assign users a unique `ID` using a globally unique identifier (GUID) when the user accesses the shopping cart for the first time.</span></span> <span data-ttu-id="6ad4a-128">Sie speichern diese `ID` mithilfe den ASP.NET Sitzungszustand.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-128">You'll store this `ID` using the ASP.NET Session state.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="6ad4a-129">Der Sitzungszustand von ASP.NET ist eine bequeme Möglichkeit, benutzerspezifische Informationen speichern, die ablaufen wird, nachdem der Benutzer die Site verlässt.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-129">The ASP.NET Session state is a convenient place to store user-specific information which will expire after the user leaves the site.</span></span> <span data-ttu-id="6ad4a-130">Während unsachgemäße Verwendung des Sitzungsstatus für größere Sites die Auswirkungen auf die Leistung haben kann, Licht Ins mithilfe der Sitzung, die Zustand funktioniert auch für Demonstrationszwecke.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-130">While misuse of session state can have performance implications on larger sites, light use of session state works well for demonstration purposes.</span></span> <span data-ttu-id="6ad4a-131">Die Wingtip Toys-Beispielprojekt veranschaulicht Sie Sitzungszustand ohne einen externen Anbieter, wobei Sitzungszustand gespeicherten in-Process auf dem Webserver, der die Standortdatenbank hostet.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-131">The Wingtip Toys sample project shows how to use session state without an external provider, where session state is stored in-process on the web server hosting the site.</span></span> <span data-ttu-id="6ad4a-132">Bei größeren Sites, die mehrere Instanzen einer Anwendung bereitstellen oder Standorten, an denen mehrere Instanzen einer Anwendung auf verschiedenen Servern ausführen, sollten Sie **Windows Azure Cache Service**.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-132">For larger sites that provide multiple instances of an application or for sites that run multiple instances of an application on different servers, consider using **Windows Azure Cache Service**.</span></span> <span data-ttu-id="6ad4a-133">Dieser Cache-Dienst bietet es sich um ein verteilter Cachedienst, der für die Website extern ist und löst das Problem der Verwendung von in-Process-Sitzungszustand.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-133">This Cache Service provides a distributed caching service that is external to the web site and solves the problem of using in-process session state.</span></span> <span data-ttu-id="6ad4a-134">Weitere Informationen finden Sie unter [verwendet ASP.NET Session State mit Windows Azure-Websites wie](https://docs.microsoft.com/azure/redis-cache/cache-aspnet-session-state-provider).</span><span class="sxs-lookup"><span data-stu-id="6ad4a-134">For more information see, [How to Use ASP.NET Session State with Windows Azure Web Sites](https://docs.microsoft.com/azure/redis-cache/cache-aspnet-session-state-provider).</span></span>


### <a name="add-cartitem-as-a-model-class"></a><span data-ttu-id="6ad4a-135">Fügen Sie CartItem als eine Modellklasse hinzu.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-135">Add CartItem as a Model Class</span></span>

<span data-ttu-id="6ad4a-136">Weiter oben in dieser tutorialreihe definiert Sie das Schema für die Kategorie und Daten durch das Erstellen der `Category` und `Product` Klassen in der *Modelle* Ordner.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-136">Earlier in this tutorial series, you defined the schema for the category and product data by creating the `Category` and `Product` classes in the *Models* folder.</span></span> <span data-ttu-id="6ad4a-137">Fügen Sie nun eine neue Klasse zum Definieren des Schemas für den Einkaufswagen hinzu.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-137">Now, add a new class to define the schema for the shopping cart.</span></span> <span data-ttu-id="6ad4a-138">Weiter unten in diesem Tutorial fügen Sie eine Klasse zum Behandeln des Datenzugriffs für die `CartItem` Tabelle.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-138">Later in this tutorial, you will add a class to handle data access to the `CartItem` table.</span></span> <span data-ttu-id="6ad4a-139">Diese Klasse wird die Geschäftslogik zum Hinzufügen, entfernen und aktualisieren die Elemente im Warenkorb bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-139">This class will provide the business logic to add, remove, and update items in the shopping cart.</span></span>

1. <span data-ttu-id="6ad4a-140">Mit der rechten Maustaste die *Modelle* Ordner, und wählen **hinzufügen**  - &gt; **neues Element**.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-140">Right-click the *Models* folder and select **Add** -&gt; **New Item**.</span></span> 

    ![Warenkorb - neues Element](shopping-cart/_static/image1.png)
2. <span data-ttu-id="6ad4a-142">Das Dialogfeld **Neues Element hinzufügen** wird angezeigt.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-142">The **Add New Item** dialog box is displayed.</span></span> <span data-ttu-id="6ad4a-143">Wählen Sie **Code**, und wählen Sie dann **Klasse**.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-143">Select **Code**, and then select **Class**.</span></span> 

    ![Warenkorb - Dialogfeld für neue Elemente hinzufügen](shopping-cart/_static/image2.png)
3. <span data-ttu-id="6ad4a-145">Nennen Sie diese neue Klasse *CartItem.cs*.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-145">Name this new class *CartItem.cs*.</span></span>
4. <span data-ttu-id="6ad4a-146">Klicken Sie auf **Hinzufügen**.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-146">Click **Add**.</span></span>  
   <span data-ttu-id="6ad4a-147">Die neue Klassendatei wird im Editor angezeigt.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-147">The new class file is displayed in the editor.</span></span>
5. <span data-ttu-id="6ad4a-148">Ersetzen Sie den Standardcode durch folgenden Code:</span><span class="sxs-lookup"><span data-stu-id="6ad4a-148">Replace the default code with the following code:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample1.cs)]

<span data-ttu-id="6ad4a-149">Die `CartItem` -Klasse enthält das Schema, die definieren, jedes Produkt zum Einkaufswagen hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-149">The `CartItem` class contains the schema that will define each product a user adds to the shopping cart.</span></span> <span data-ttu-id="6ad4a-150">Diese Klasse ähnelt den anderen Klassen, die Sie zuvor in dieser tutorialreihe erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-150">This class is similar to the other schema classes you created earlier in this tutorial series.</span></span> <span data-ttu-id="6ad4a-151">Gemäß der Konvention, Entity Framework Code First erwartet, dass der primäre Schlüssel für die `CartItem` Tabelle werden entweder `CartItemId` oder `ID`.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-151">By convention, Entity Framework Code First expects that the primary key for the `CartItem` table will be either `CartItemId` or `ID`.</span></span> <span data-ttu-id="6ad4a-152">Allerdings der Code überschreibt das Standardverhalten, mithilfe der-Anmerkung Daten `[Key]` Attribut.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-152">However, the code overrides the default behavior by using the data annotation `[Key]` attribute.</span></span> <span data-ttu-id="6ad4a-153">Die `Key` Attribut der Element-ID-Eigenschaft gibt an, dass die `ItemID` Eigenschaft ist der primäre Schlüssel.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-153">The `Key` attribute of the ItemId property specifies that the `ItemID` property is the primary key.</span></span>

<span data-ttu-id="6ad4a-154">Die `CartId` Eigenschaft gibt an, die `ID` des Benutzers, der das Element, das erwerben zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-154">The `CartId` property specifies the `ID` of the user that is associated with the item to purchase.</span></span> <span data-ttu-id="6ad4a-155">Fügen Sie Code zum Erstellen dieser Benutzer `ID` Wenn der Benutzer greift auf den Einkaufswagen.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-155">You'll add code to create this user `ID` when the user accesses the shopping cart.</span></span> <span data-ttu-id="6ad4a-156">Dies `ID` werden auch als ASP.NET-Sitzung-Variable gespeichert.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-156">This `ID` will also be stored as an ASP.NET Session variable.</span></span>

### <a name="update-the-product-context"></a><span data-ttu-id="6ad4a-157">Aktualisieren Sie den Produktkontext</span><span class="sxs-lookup"><span data-stu-id="6ad4a-157">Update the Product Context</span></span>

<span data-ttu-id="6ad4a-158">Neben dem Hinzufügen der `CartItem` -Klasse, Sie müssen den Datenbankkontext-Klasse zu aktualisieren, verwaltet die Entitätsklassen und den Datenzugriff auf die Datenbank bereitstellt.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-158">In addition to adding the `CartItem` class, you will need to update the database context class that manages the entity classes and that provides data access to the database.</span></span> <span data-ttu-id="6ad4a-159">Zu diesem Zweck fügen Sie die neu erstellte `CartItem` model-Klasse, um die `ProductContext` Klasse.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-159">To do this, you will add the newly created `CartItem` model class to the `ProductContext` class.</span></span>

1. <span data-ttu-id="6ad4a-160">In **Projektmappen-Explorer**suchen oder öffnen Sie die *ProductContext.cs* Datei die *Modelle* Ordner.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-160">In **Solution Explorer**, find and open the *ProductContext.cs* file in the *Models* folder.</span></span>
2. <span data-ttu-id="6ad4a-161">Fügen Sie den hervorgehobenen Code die *ProductContext.cs* -Datei wie folgt:</span><span class="sxs-lookup"><span data-stu-id="6ad4a-161">Add the highlighted code to the *ProductContext.cs* file as follows:</span></span>  

    [!code-csharp[Main](shopping-cart/samples/sample2.cs?highlight=14)]

<span data-ttu-id="6ad4a-162">Wie bereits erwähnt in dieser tutorialreihe, den Code in die *ProductContext.cs* Datei fügt die `System.Data.Entity` Namespace, damit Sie Zugriff auf die Kernfunktionen des Entity Framework haben.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-162">As mentioned previously in this tutorial series, the code in the *ProductContext.cs* file adds the `System.Data.Entity` namespace so that you have access to all the core functionality of the Entity Framework.</span></span> <span data-ttu-id="6ad4a-163">Diese Funktionen umfassen die Möglichkeit, Abfragen, einfügen, aktualisieren und Löschen von Daten durch Verwendung stark typisierter Objekte.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-163">This functionality includes the capability to query, insert, update, and delete data by working with strongly typed objects.</span></span> <span data-ttu-id="6ad4a-164">Die `ProductContext` Klasse fügt den Zugriff auf die neu hinzugefügte `CartItem` Modellklasse.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-164">The `ProductContext` class adds access to the newly added `CartItem` model class.</span></span>

### <a name="managing-the-shopping-cart-business-logic"></a><span data-ttu-id="6ad4a-165">Die Shopping Cart-Geschäftslogik verwalten</span><span class="sxs-lookup"><span data-stu-id="6ad4a-165">Managing the Shopping Cart Business Logic</span></span>

<span data-ttu-id="6ad4a-166">Als Nächstes erstellen Sie die `ShoppingCart` Klasse in einer neuen *Logik* Ordner.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-166">Next, you'll create the `ShoppingCart` class in a new *Logic* folder.</span></span> <span data-ttu-id="6ad4a-167">Die `ShoppingCart` Klasse behandelt den Datenzugriff auf die `CartItem` Tabelle.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-167">The `ShoppingCart` class handles data access to the `CartItem` table.</span></span> <span data-ttu-id="6ad4a-168">Die Klasse umfasst auch die Geschäftslogik zum Hinzufügen, entfernen und aktualisieren die Elemente im Warenkorb.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-168">The class will also include the business logic to add, remove, and update items in the shopping cart.</span></span>

<span data-ttu-id="6ad4a-169">Die shopping Cart-Logik, die Sie hinzufügen, enthält Funktionen zum Verwalten der folgenden Aktionen:</span><span class="sxs-lookup"><span data-stu-id="6ad4a-169">The shopping cart logic that you will add will contain the functionality to manage the following actions:</span></span>

1. <span data-ttu-id="6ad4a-170">Hinzufügen von Elementen zum Einkaufswagen</span><span class="sxs-lookup"><span data-stu-id="6ad4a-170">Adding items to the shopping cart</span></span>
2. <span data-ttu-id="6ad4a-171">Entfernen von Elementen aus dem Warenkorb</span><span class="sxs-lookup"><span data-stu-id="6ad4a-171">Removing items from the shopping cart</span></span>
3. <span data-ttu-id="6ad4a-172">Die Warenkorb-ID abrufen</span><span class="sxs-lookup"><span data-stu-id="6ad4a-172">Getting the shopping cart ID</span></span>
4. <span data-ttu-id="6ad4a-173">Abrufen von Elementen aus dem Einkaufswagen</span><span class="sxs-lookup"><span data-stu-id="6ad4a-173">Retrieving items from the shopping cart</span></span>
5. <span data-ttu-id="6ad4a-174">Addieren Sie die Menge an alle dem Artikel im Warenkorb</span><span class="sxs-lookup"><span data-stu-id="6ad4a-174">Totaling the amount of all the shopping cart items</span></span>
6. <span data-ttu-id="6ad4a-175">Aktualisieren die Einkaufswagendaten</span><span class="sxs-lookup"><span data-stu-id="6ad4a-175">Updating the shopping cart data</span></span>

<span data-ttu-id="6ad4a-176">Eine Warenkorb-Seite (*ShoppingCart.aspx*) und die einkaufswagenklasse werden zusammen verwendet werden, auf die Einkaufswagendaten.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-176">A shopping cart page (*ShoppingCart.aspx*) and the shopping cart class will be used together to access shopping cart data.</span></span> <span data-ttu-id="6ad4a-177">Die Warenkorb-Seite zeigt alle Elemente, die der Benutzer zum Einkaufswagen hinzufügt.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-177">The shopping cart page will display all the items the user adds to the shopping cart.</span></span> <span data-ttu-id="6ad4a-178">Neben den Bezug auf den Warenkorb Seite und die Klasse, erstellen Sie eine Seite (*AddToCart.aspx*), um den Einkaufswagen Produkte hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-178">Besides the shopping cart page and class, you'll create a page (*AddToCart.aspx*) to add products to the shopping cart.</span></span> <span data-ttu-id="6ad4a-179">Außerdem fügen Sie Code für die *"ProductList.aspx"* Seite und die *ProductDetails.aspx* Seite, die einen Link zum Bereitstellen der *AddToCart.aspx* Seite, damit der Benutzer hinzufügen kann Produkte in den Einkaufswagen legen.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-179">You will also add code to the *ProductList.aspx* page and the *ProductDetails.aspx* page that will provide a link to the *AddToCart.aspx* page, so that the user can add products to the shopping cart.</span></span>

<span data-ttu-id="6ad4a-180">Das folgende Diagramm zeigt das grundlegende Verfahren, das auftritt, wenn der Benutzer ein Produkts zum Einkaufswagen hinzufügt.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-180">The following diagram shows the basic process that occurs when the user adds a product to the shopping cart.</span></span>

![Warenkorb - zum Einkaufswagen hinzufügen](shopping-cart/_static/image3.png)

<span data-ttu-id="6ad4a-182">Klickt der Benutzer die **Add To Cart** Link auf die *"ProductList.aspx"* Seite oder die *ProductDetails.aspx* Seite, die Anwendung navigiert zu der *AddToCart.aspx* Seite und dann automatisch in die *ShoppingCart.aspx* Seite.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-182">When the user clicks the **Add To Cart** link on either the *ProductList.aspx* page or the *ProductDetails.aspx* page, the application will navigate to the *AddToCart.aspx* page and then automatically to the *ShoppingCart.aspx* page.</span></span> <span data-ttu-id="6ad4a-183">Die *AddToCart.aspx* Seite wird das Auswählen des Produkts zum Einkaufswagen hinzufügen, durch Aufrufen einer Methode in die ShoppingCart-Klasse.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-183">The *AddToCart.aspx* page will add the select product to the shopping cart by calling a method in the ShoppingCart class.</span></span> <span data-ttu-id="6ad4a-184">Die *ShoppingCart.aspx* Seite zeigt die Produkte, die zum Einkaufswagen hinzugefügt wurden.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-184">The *ShoppingCart.aspx* page will display the products that have been added to the shopping cart.</span></span>

#### <a name="creating-the-shopping-cart-class"></a><span data-ttu-id="6ad4a-185">Erstellen der Shopping Cart-Klasse</span><span class="sxs-lookup"><span data-stu-id="6ad4a-185">Creating the Shopping Cart Class</span></span>

<span data-ttu-id="6ad4a-186">Die `ShoppingCart` Klasse werden in einen separaten Ordner in der Anwendung hinzugefügt werden, sodass eine klare Unterscheidung zwischen des Modells (Ordner "Models"), die Seiten (Stammordner) und die Logik (Ordner für Logik) fallen.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-186">The `ShoppingCart` class will be added to a separate folder in the application so that there will be a clear distinction between the model (Models folder), the pages (root folder) and the logic (Logic folder).</span></span>

1. <span data-ttu-id="6ad4a-187">In **Projektmappen-Explorer**, mit der rechten Maustaste die **WingtipToys**Projekt, und wählen **hinzufügen**-&gt;**neuer Ordner**.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-187">In **Solution Explorer**, right-click the **WingtipToys**project and select **Add**-&gt;**New Folder**.</span></span> <span data-ttu-id="6ad4a-188">Nennen Sie diesen Ordner *Logik*.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-188">Name the new folder *Logic*.</span></span>
2. <span data-ttu-id="6ad4a-189">Mit der rechten Maustaste die *Logik* Ordner, und wählen Sie dann **hinzufügen**  - &gt; **neues Element**.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-189">Right-click the *Logic* folder and then select **Add** -&gt; **New Item**.</span></span>
3. <span data-ttu-id="6ad4a-190">Fügen Sie eine neue Klassendatei mit dem Namen *ShoppingCartActions.cs*.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-190">Add a new class file named *ShoppingCartActions.cs*.</span></span>
4. <span data-ttu-id="6ad4a-191">Ersetzen Sie den Standardcode durch folgenden Code:</span><span class="sxs-lookup"><span data-stu-id="6ad4a-191">Replace the default code with the following code:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample3.cs)]

<span data-ttu-id="6ad4a-192">Die `AddToCart` Methode ermöglicht die einzelnen Produkte in den Einkaufswagen basierend auf dem Produkt einbezogen werden `ID`.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-192">The `AddToCart` method enables individual products to be included in the shopping cart based on the product `ID`.</span></span> <span data-ttu-id="6ad4a-193">Das Produkt wird dem Warenkorb hinzugefügt, oder wenn der Warenkorb bereits ein Element für dieses Produkt enthält, wird die Menge erhöht.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-193">The product is added to the cart, or if the cart already contains an item for that product, the quantity is incremented.</span></span>

<span data-ttu-id="6ad4a-194">Die `GetCartId` Methodenrückgabe des Warenkorbs `ID` für den Benutzer.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-194">The `GetCartId` method returns the cart `ID` for the user.</span></span> <span data-ttu-id="6ad4a-195">Der Einkaufswagen `ID` wird verwendet, um die Elemente zu verfolgen, die ein Benutzer in ihrem Einkaufswagen besitzt.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-195">The cart `ID` is used to track the items that a user has in their shopping cart.</span></span> <span data-ttu-id="6ad4a-196">Wenn der Benutzer keiner vorhandenen Warenkorb `ID`, eine neue Warenkorb `ID` wird für sie erstellt.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-196">If the user does not have an existing cart `ID`, a new cart `ID` is created for them.</span></span> <span data-ttu-id="6ad4a-197">Wenn die Anmeldung des Benutzers als registrierter Benutzer, dem Einkaufswagen `ID` festgelegt ist, die Ihrem jeweiligen Benutzernamen.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-197">If the user is signed in as a registered user, the cart `ID` is set to their user name.</span></span> <span data-ttu-id="6ad4a-198">Aber wenn der Benutzer nicht, in den Warenkorb angemeldet ist `ID` in einen eindeutigen Wert (eine GUID) festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-198">However, if the user is not signed in, the cart `ID` is set to a unique value (a GUID).</span></span> <span data-ttu-id="6ad4a-199">Eine GUID wird sichergestellt, dass dieser nur einen Warenkorb für jeden Benutzer, die basierend auf der Sitzung erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-199">A GUID ensures that only one cart is created for each user, based on session.</span></span>

<span data-ttu-id="6ad4a-200">Die `GetCartItems` Methode gibt eine Liste der Artikel im Warenkorb für den Benutzer zurück.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-200">The `GetCartItems` method returns a list of shopping cart items for the user.</span></span> <span data-ttu-id="6ad4a-201">Weiter unten in diesem Tutorial sehen Sie, dass modellbindung, zum Anzeigen der Warenkorb-Elemente verwendet wird in die shopping Cart mithilfe der `GetCartItems` Methode.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-201">Later in this tutorial, you will see that model binding is used to display the cart items in the shopping cart using the `GetCartItems` method.</span></span>

### <a name="creating-the-add-to-cart-functionality"></a><span data-ttu-id="6ad4a-202">Erstellen die Add To Cart-Funktion</span><span class="sxs-lookup"><span data-stu-id="6ad4a-202">Creating the Add-To-Cart Functionality</span></span>

<span data-ttu-id="6ad4a-203">Wie bereits erwähnt, erstellen Sie eine Verarbeitung-Seite namens *AddToCart.aspx* , Hinzufügen von neuen Produkten zum Einkaufswagen des Benutzers verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-203">As mentioned earlier, you will create a processing page named *AddToCart.aspx* that will be used to add new products to the shopping cart of the user.</span></span> <span data-ttu-id="6ad4a-204">Auf dieser Seite ruft die `AddToCart` -Methode in der die `ShoppingCart` -Klasse, die Sie gerade erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-204">This page will call the `AddToCart` method in the `ShoppingCart` class that you just created.</span></span> <span data-ttu-id="6ad4a-205">Die *AddToCart.aspx* Seite werden erwarten, dass ein Produkt `ID` übergeben wird.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-205">The *AddToCart.aspx* page will expect that a product `ID` is passed to it.</span></span> <span data-ttu-id="6ad4a-206">Dieses Produkt `ID` verwendet wird, wenn der Aufruf der `AddToCart` -Methode in der die `ShoppingCart` Klasse.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-206">This product `ID` will be used when calling the `AddToCart` method in the `ShoppingCart` class.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="6ad4a-207">Ändern Sie den Code-Behind (*AddToCart.aspx.cs*) für diese Seite, nicht die Seiten-UI (*AddToCart.aspx*).</span><span class="sxs-lookup"><span data-stu-id="6ad4a-207">You will be modifying the code-behind (*AddToCart.aspx.cs*) for this page, not the page UI (*AddToCart.aspx*).</span></span>


#### <a name="to-create-the-add-to-cart-functionality"></a><span data-ttu-id="6ad4a-208">Zum Erstellen von Add To Cart Funktionen:</span><span class="sxs-lookup"><span data-stu-id="6ad4a-208">To create the Add-To-Cart functionality:</span></span>

1. <span data-ttu-id="6ad4a-209">In **Projektmappen-Explorer**, mit der rechten Maustaste die **WingtipToys**Projekt, klicken Sie auf **hinzufügen**  - &gt; **neues Element**.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-209">In **Solution Explorer**, right-click the **WingtipToys**project, click **Add** -&gt; **New Item**.</span></span>  
   <span data-ttu-id="6ad4a-210">Das Dialogfeld **Neues Element hinzufügen** wird angezeigt.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-210">The **Add New Item** dialog box is displayed.</span></span>
2. <span data-ttu-id="6ad4a-211">Fügen Sie eine standardmäßige neue Seite (Web Form), für die Anwendung, die mit dem Namen *AddToCart.aspx*.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-211">Add a standard new page (Web Form) to the application named *AddToCart.aspx*.</span></span> 

    ![Warenkorb - Web Form hinzufügen](shopping-cart/_static/image4.png)
3. <span data-ttu-id="6ad4a-213">In **Projektmappen-Explorer**, mit der rechten Maustaste die *AddToCart.aspx* Seite, und klicken Sie dann auf **Ansichtscode**.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-213">In **Solution Explorer**, right-click the *AddToCart.aspx* page and then click **View Code**.</span></span> <span data-ttu-id="6ad4a-214">Die *AddToCart.aspx.cs* Code-Behind-Datei im Editor geöffnet ist.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-214">The *AddToCart.aspx.cs* code-behind file is opened in the editor.</span></span>
4. <span data-ttu-id="6ad4a-215">Ersetzen Sie den vorhandenen Code in die *AddToCart.aspx.cs* CodeBehind durch Folgendes:</span><span class="sxs-lookup"><span data-stu-id="6ad4a-215">Replace the existing code in the *AddToCart.aspx.cs* code-behind with the following:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample4.cs)]

<span data-ttu-id="6ad4a-216">Wenn die *AddToCart.aspx* Seite geladen wurde, wird das Produkt `ID` aus der Abfragezeichenfolge abgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-216">When the *AddToCart.aspx* page is loaded, the product `ID` is retrieved from the query string.</span></span> <span data-ttu-id="6ad4a-217">Als Nächstes eine Instanz von der einkaufswagenklasse erstellt und verwendet Sie zum Aufrufen der `AddToCart` -Methode, die Sie zuvor in diesem Lernprogramm hinzugefügt haben.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-217">Next, an instance of the shopping cart class is created and used to call the `AddToCart` method that you added earlier in this tutorial.</span></span> <span data-ttu-id="6ad4a-218">Die `AddToCart` in enthaltenen-Methode der *ShoppingCartActions.cs* Datei, die Logik für das ausgewählte Produkt zum Einkaufswagen hinzufügen, oder erhöhen die Produktmenge des ausgewählten Produkts enthält.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-218">The `AddToCart` method, contained in the *ShoppingCartActions.cs* file, includes the logic to add the selected product to the shopping cart or increment the product quantity of the selected product.</span></span> <span data-ttu-id="6ad4a-219">Wenn nicht das Produkt zum Einkaufswagen hinzugefügt wurde, das Produkt wurde die `CartItem` Tabelle der Datenbank.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-219">If the product hasn't been added to the shopping cart, the product is added to the `CartItem` table of the database.</span></span> <span data-ttu-id="6ad4a-220">Wenn das Produkt bereits zum Einkaufswagen hinzugefügt wurde und der Benutzer fügt ein zusätzliches Element desselben Produkts hinzu, wird die Produktmenge erhöht die `CartItem` Tabelle.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-220">If the product has already been added to the shopping cart and the user adds an additional item of the same product, the product quantity is incremented in the `CartItem` table.</span></span> <span data-ttu-id="6ad4a-221">Zum Schluss die Seite leitet an die *ShoppingCart.aspx* Seite, die Sie im nächsten Schritt hinzufügen, in denen der Benutzer eine aktualisierte Liste der Elemente im Warenkorb sieht.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-221">Finally, the page redirects back to the *ShoppingCart.aspx* page that you'll add in the next step, where the user sees an updated list of items in the cart.</span></span>

<span data-ttu-id="6ad4a-222">Wie bereits erwähnt, einen Benutzer `ID` wird verwendet, um die Produkte zu identifizieren, die einen bestimmten Benutzer zugeordnet sind.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-222">As previously mentioned, a user `ID` is used to identify the products that are associated with a specific user.</span></span> <span data-ttu-id="6ad4a-223">Dies `ID` wird hinzugefügt, um eine Zeile in der `CartItem` Tabelle jedes Mal, die der Benutzer ein Produkt zum Einkaufswagen hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-223">This `ID` is added to a row in the `CartItem` table each time the user adds a product to the shopping cart.</span></span>

### <a name="creating-the-shopping-cart-ui"></a><span data-ttu-id="6ad4a-224">Den Einkaufswagen UI erstellen</span><span class="sxs-lookup"><span data-stu-id="6ad4a-224">Creating the Shopping Cart UI</span></span>

<span data-ttu-id="6ad4a-225">Die *ShoppingCart.aspx* Seite zeigt die Produkte, die der Benutzer zu ihrem Einkaufswagen hinzugefügt hat.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-225">The *ShoppingCart.aspx* page will display the products that the user has added to their shopping cart.</span></span> <span data-ttu-id="6ad4a-226">Es stellt auch die Möglichkeit, hinzufügen, entfernen und aktualisieren die Elemente im Warenkorb bereit.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-226">It will also provide the ability to add, remove and update items in the shopping cart.</span></span>

1. <span data-ttu-id="6ad4a-227">In **Projektmappen-Explorer**, mit der rechten Maustaste **WingtipToys**, klicken Sie auf **hinzufügen**  - &gt; **neues Element**.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-227">In **Solution Explorer**, right-click **WingtipToys**, click **Add** -&gt; **New Item**.</span></span>  
   <span data-ttu-id="6ad4a-228">Das Dialogfeld **Neues Element hinzufügen** wird angezeigt.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-228">The **Add New Item** dialog box is displayed.</span></span>
2. <span data-ttu-id="6ad4a-229">Hinzufügen einer neuen Seite (Web Form), die eine Masterseite dazu enthält **Webformular mit Gestaltungsvorlage**.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-229">Add a new page (Web Form) that includes a master page by selecting **Web Form using Master Page**.</span></span> <span data-ttu-id="6ad4a-230">Nennen Sie die neue Seite *ShoppingCart.aspx*.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-230">Name the new page *ShoppingCart.aspx*.</span></span>
3. <span data-ttu-id="6ad4a-231">Wählen Sie **Site.Master** anzufügende Masterseite auf das neu erstellte *aspx* Seite.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-231">Select **Site.Master** to attach the master page to the newly created *.aspx* page.</span></span>
4. <span data-ttu-id="6ad4a-232">In der *ShoppingCart.aspx* Seite, ersetzen Sie das vorhandene Markup durch das folgende Markup:</span><span class="sxs-lookup"><span data-stu-id="6ad4a-232">In the *ShoppingCart.aspx* page, replace the existing markup with the following markup:</span></span>   

    [!code-aspx[Main](shopping-cart/samples/sample5.aspx)]

<span data-ttu-id="6ad4a-233">Die *ShoppingCart.aspx* Seite enthält eine **GridView** Steuerelement mit dem Namen `CartList`.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-233">The *ShoppingCart.aspx* page includes a **GridView** control named `CartList`.</span></span> <span data-ttu-id="6ad4a-234">Dieses Steuerelement verwendet die modellbindung binden Sie die Einkaufswagendaten aus der Datenbank, die **GridView** Steuerelement.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-234">This control uses model binding to bind the shopping cart data from the database to the **GridView** control.</span></span> <span data-ttu-id="6ad4a-235">Beim Festlegen der `ItemType` Eigenschaft der **GridView** zu steuern, die XPath-Datenbindungsausdruck `Item` finden Sie in das Markup des Steuerelements und das Steuerelement wird stark typisiert.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-235">When you set the `ItemType` property of the **GridView** control, the data-binding expression `Item` is available in the markup of the control and the control becomes strongly typed.</span></span> <span data-ttu-id="6ad4a-236">Wie weiter oben in dieser tutorialreihe erwähnt, können Sie auswählen, Details zu den `Item` Objekt unter Verwendung von IntelliSense.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-236">As mentioned earlier in this tutorial series, you can select details of the `Item` object using IntelliSense.</span></span> <span data-ttu-id="6ad4a-237">Um ein Steuerelement zum modellbindung zu verwenden, zum Auswählen von Daten zu konfigurieren, legen Sie die `SelectMethod` -Eigenschaft des Steuerelements.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-237">To configure a data control to use model binding to select data, you set the `SelectMethod` property of the control.</span></span> <span data-ttu-id="6ad4a-238">In das Markup oben, legen Sie die `SelectMethod` die GetShoppingCartItems-Methode verwenden, wodurch eine Liste der `CartItem` Objekte.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-238">In the markup above, you set the `SelectMethod` to use the GetShoppingCartItems method which returns a list of `CartItem` objects.</span></span> <span data-ttu-id="6ad4a-239">Die **GridView** -Steuerelement ruft die Methode zum geeigneten Zeitpunkt im Lebenszyklus Seite und die zurückgegebenen Daten automatisch gebunden.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-239">The **GridView** data control calls the method at the appropriate time in the page life cycle and automatically binds the returned data.</span></span> <span data-ttu-id="6ad4a-240">Die `GetShoppingCartItems` Methode muss immer noch hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-240">The `GetShoppingCartItems` method must still be added.</span></span>

#### <a name="retrieving-the-shopping-cart-items"></a><span data-ttu-id="6ad4a-241">Abrufen der Artikel im Warenkorb</span><span class="sxs-lookup"><span data-stu-id="6ad4a-241">Retrieving the Shopping Cart Items</span></span>

<span data-ttu-id="6ad4a-242">Anschließend fügen Sie Code für die *ShoppingCart.aspx.cs* CodeBehind zum Abrufen und Auffüllen der Shopping Cart-Benutzeroberfläche.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-242">Next, you add code to the *ShoppingCart.aspx.cs* code-behind to retrieve and populate the Shopping Cart UI.</span></span>

1. <span data-ttu-id="6ad4a-243">In **Projektmappen-Explorer**, mit der rechten Maustaste die *ShoppingCart.aspx* Seite, und klicken Sie dann auf **Ansichtscode**.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-243">In **Solution Explorer**, right-click the *ShoppingCart.aspx* page and then click **View Code**.</span></span> <span data-ttu-id="6ad4a-244">Die *ShoppingCart.aspx.cs* Code-Behind-Datei im Editor geöffnet ist.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-244">The *ShoppingCart.aspx.cs* code-behind file is opened in the editor.</span></span>
2. <span data-ttu-id="6ad4a-245">Ersetzen Sie den vorhandenen Code durch folgenden Code:</span><span class="sxs-lookup"><span data-stu-id="6ad4a-245">Replace the existing code with the following:</span></span>  

    [!code-csharp[Main](shopping-cart/samples/sample6.cs)]

<span data-ttu-id="6ad4a-246">Wie bereits erwähnt, die `GridView` Daten steuern, Aufrufe der `GetShoppingCartItems` Methode zum geeigneten Zeitpunkt im Lebenszyklus Seite blättern und bindet automatisch die zurückgegebenen Daten.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-246">As mentioned above, the `GridView` data control calls the `GetShoppingCartItems` method at the appropriate time in the page life cycle and automatically binds the returned data.</span></span> <span data-ttu-id="6ad4a-247">Die `GetShoppingCartItems` Methode erstellt eine Instanz der `ShoppingCartActions` Objekt.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-247">The `GetShoppingCartItems` method creates an instance of the `ShoppingCartActions` object.</span></span> <span data-ttu-id="6ad4a-248">Klicken Sie dann mit der Code dieser Instanz verwendet, um die Elemente zusammen in den durch den Aufruf zurückgeben dem `GetCartItems` Methode.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-248">Then, the code uses that instance to return the items in the cart by calling the `GetCartItems` method.</span></span>

### <a name="adding-products-to-the-shopping-cart"></a><span data-ttu-id="6ad4a-249">Hinzufügen von Produkten zum Einkaufswagen</span><span class="sxs-lookup"><span data-stu-id="6ad4a-249">Adding Products to the Shopping Cart</span></span>

<span data-ttu-id="6ad4a-250">Wenn entweder die *"ProductList.aspx"* oder *ProductDetails.aspx* Seite wird angezeigt, die der Benutzer kann das Produkt zum Einkaufswagen über einen Link hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-250">When either the *ProductList.aspx* or the *ProductDetails.aspx* page is displayed, the user will be able to add the product to the shopping cart using a link.</span></span> <span data-ttu-id="6ad4a-251">Wenn sie den Link klicken, wird die Anwendung navigiert, um die Seite "Verarbeitung" mit dem Namen *AddToCart.aspx*.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-251">When they click the link, the application navigates to the processing page named *AddToCart.aspx*.</span></span> <span data-ttu-id="6ad4a-252">Die *AddToCart.aspx* Seite ruft die `AddToCart` -Methode in der die `ShoppingCart` -Klasse, die Sie zuvor in diesem Lernprogramm hinzugefügt haben.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-252">The *AddToCart.aspx* page will call the `AddToCart` method in the `ShoppingCart` class that you added earlier in this tutorial.</span></span>

<span data-ttu-id="6ad4a-253">Fügen Sie nun eine **zum Warenkorb hinzufügen** Link sowohl die *"ProductList.aspx"* Seite und die *ProductDetails.aspx* Seite.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-253">Now, you'll add an **Add to Cart** link to both the *ProductList.aspx* page and the *ProductDetails.aspx* page.</span></span> <span data-ttu-id="6ad4a-254">Dieser Link enthält das Produkt `ID` , die aus der Datenbank abgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-254">This link will include the product `ID` that is retrieved from the database.</span></span>

1. <span data-ttu-id="6ad4a-255">In **Projektmappen-Explorer**, suchen und öffnen Sie die Seite mit dem Namen *"ProductList.aspx"*.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-255">In **Solution Explorer**, find and open the page named *ProductList.aspx*.</span></span>
2. <span data-ttu-id="6ad4a-256">Fügen Sie das Markup in Gelb zu markiert die *"ProductList.aspx"* Seite, damit die gesamte Seite wie folgt aussieht:</span><span class="sxs-lookup"><span data-stu-id="6ad4a-256">Add the markup highlighted in yellow to the *ProductList.aspx* page so that the entire page appears as follows:</span></span>  

    [!code-aspx[Main](shopping-cart/samples/sample7.aspx?highlight=50-54)]

### <a name="testing-the-shopping-cart"></a><span data-ttu-id="6ad4a-257">Testen des Einkaufswagens</span><span class="sxs-lookup"><span data-stu-id="6ad4a-257">Testing the Shopping Cart</span></span>

<span data-ttu-id="6ad4a-258">Führen Sie die Anwendung aus, um festzustellen, wie Sie Produkten zum Einkaufswagen hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-258">Run the application to see how you add products to the shopping cart.</span></span>

1. <span data-ttu-id="6ad4a-259">Drücken Sie **F5**, um die Anwendung auszuführen.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-259">Press **F5** to run the application.</span></span>  
 <span data-ttu-id="6ad4a-260">Nachdem das Projekt mit die Datenbank neu erstellt, der Browser wird geöffnet und zeigt die *"default.aspx"* Seite.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-260">After the project recreates the database, the browser will open and show the *Default.aspx* page.</span></span>
2. <span data-ttu-id="6ad4a-261">Wählen Sie **Autos** im Navigationsmenü der Kategorie.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-261">Select **Cars** from the category navigation menu.</span></span>  
 <span data-ttu-id="6ad4a-262">Die *"ProductList.aspx"* Seite wird angezeigt, die nur die Produkte in der Kategorie "Cars" enthalten.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-262">The *ProductList.aspx* page is displayed showing only products included in the "Cars" category.</span></span> 

    ![Warenkorb - Autos](shopping-cart/_static/image5.png)
3. <span data-ttu-id="6ad4a-264">Klicken Sie auf die **zum Warenkorb hinzufügen** neben das erste Produkt aufgeführt (Autos konvertiert werden kann).</span><span class="sxs-lookup"><span data-stu-id="6ad4a-264">Click the **Add to Cart** link next to the first product listed (the convertible car).</span></span>   
 <span data-ttu-id="6ad4a-265">Die *ShoppingCart.aspx* Seite wird angezeigt, die Auswahl in Ihrem Warenkorb.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-265">The *ShoppingCart.aspx* page is displayed, showing the selection in your shopping cart.</span></span> 

    ![Warenkorb - Warenkorb](shopping-cart/_static/image6.png)
4. <span data-ttu-id="6ad4a-267">Zusätzliche Produkte anzeigen, indem er **Ebenen** im Navigationsmenü der Kategorie.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-267">View additional products by selecting **Planes** from the category navigation menu.</span></span>
5. <span data-ttu-id="6ad4a-268">Klicken Sie auf die **zum Warenkorb hinzufügen** neben das erste Produkt, aufgeführt.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-268">Click the **Add to Cart** link next to the first product listed.</span></span>  
 <span data-ttu-id="6ad4a-269">Die *ShoppingCart.aspx* Seite wird angezeigt, mit dem zusätzliche Element.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-269">The *ShoppingCart.aspx* page is displayed with the additional item.</span></span>
6. <span data-ttu-id="6ad4a-270">Schließen Sie den Browser.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-270">Close the browser.</span></span>

### <a name="calculating-and-displaying-the-order-total"></a><span data-ttu-id="6ad4a-271">Berechnen und Anzeigen von der Gesamtsumme der Bestellungen</span><span class="sxs-lookup"><span data-stu-id="6ad4a-271">Calculating and Displaying the Order Total</span></span>

<span data-ttu-id="6ad4a-272">Zusätzlich zum Hinzufügen von Produkten zum Einkaufswagen, fügen Sie eine `GetTotal` Methode, um die `ShoppingCart` Klasse und den Betrag in die Warenkorb-Seite angezeigt.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-272">In addition to adding products to the shopping cart, you will add a `GetTotal` method to the `ShoppingCart` class and display the total order amount in the shopping cart page.</span></span>

1. <span data-ttu-id="6ad4a-273">In **Projektmappen-Explorer**öffnen die *ShoppingCartActions.cs* Datei die *Logik* Ordner.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-273">In **Solution Explorer**, open the *ShoppingCartActions.cs* file in the *Logic* folder.</span></span>
2. <span data-ttu-id="6ad4a-274">Fügen Sie die folgenden `GetTotal` Methode, die in Gelb zu markiert die `ShoppingCart` Klasse, sodass die Klasse wie folgt aussieht:</span><span class="sxs-lookup"><span data-stu-id="6ad4a-274">Add the following `GetTotal` method highlighted in yellow to the `ShoppingCart` class, so that the class appears as follows:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample8.cs?highlight=85-97)]

<span data-ttu-id="6ad4a-275">Zunächst wird die `GetTotal` Methode ruft die ID des Warenkorbs für den Benutzer ab.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-275">First, the `GetTotal` method gets the ID of the shopping cart for the user.</span></span> <span data-ttu-id="6ad4a-276">Klicken Sie dann Ruft die Methode ab dem Einkaufswagen insgesamt durch Multiplikation der Produktpreis mit die Produktmenge für jedes Produkt im Einkaufswagen aufgeführt.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-276">Then the method gets the cart total by multiplying the product price by the product quantity for each product listed in the cart.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="6ad4a-277">Der obige Code verwendet einen nullable-Typ "`int?`".</span><span class="sxs-lookup"><span data-stu-id="6ad4a-277">The above code uses the nullable type "`int?`".</span></span> <span data-ttu-id="6ad4a-278">Auf NULL festlegbare Typen können alle Werte eines zugrunde liegenden Typs sowie als null-Wert darstellen.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-278">Nullable types can represent all the values of an underlying type, and also as a null value.</span></span> <span data-ttu-id="6ad4a-279">Weitere Informationen finden Sie unter [Using Nullable Types](https://msdn.microsoft.com/library/2cf62fcy(v=vs.110).aspx).</span><span class="sxs-lookup"><span data-stu-id="6ad4a-279">For more information see, [Using Nullable Types](https://msdn.microsoft.com/library/2cf62fcy(v=vs.110).aspx).</span></span>


### <a name="modify-the-shopping-cart-display"></a><span data-ttu-id="6ad4a-280">Ändern Sie die Shopping Cart-Anzeige</span><span class="sxs-lookup"><span data-stu-id="6ad4a-280">Modify the Shopping Cart Display</span></span>

<span data-ttu-id="6ad4a-281">Als Nächstes ändern Sie den Code für die *ShoppingCart.aspx* Seite Aufrufen der `GetTotal` -Methode und die Anzeige ab, die auf die Gesamtanzahl der *ShoppingCart.aspx* Seite beim Laden der Seite.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-281">Next you'll modify the code for the *ShoppingCart.aspx* page to call the `GetTotal` method and display that total on the *ShoppingCart.aspx* page when the page loads.</span></span>

1. <span data-ttu-id="6ad4a-282">In **Projektmappen-Explorer**, mit der rechten Maustaste die *ShoppingCart.aspx* Seite und wählen Sie **Ansichtscode**.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-282">In **Solution Explorer**, right-click the *ShoppingCart.aspx* page and select **View Code**.</span></span>
2. <span data-ttu-id="6ad4a-283">In der *ShoppingCart.aspx.cs* Datei, aktualisieren Sie die `Page_Load` Ereignishandler, indem Sie den folgenden Code in gelb hervorgehoben hinzufügen:</span><span class="sxs-lookup"><span data-stu-id="6ad4a-283">In the *ShoppingCart.aspx.cs* file, update the `Page_Load` handler by adding the following code highlighted in yellow:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample9.cs?highlight=16-31)]

<span data-ttu-id="6ad4a-284">Wenn die *ShoppingCart.aspx* Seite geladen wird, lädt das shopping Cart-Objekt und ruft dann die einkaufswagensumme durch Aufrufen der `GetTotal` -Methode der der `ShoppingCart` Klasse.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-284">When the *ShoppingCart.aspx* page loads, it loads the shopping cart object and then retrieves the shopping cart total by calling the `GetTotal` method of the `ShoppingCart` class.</span></span> <span data-ttu-id="6ad4a-285">Wenn der Einkaufswagen leer ist, wird zu diesem Zweck eine Meldung angezeigt.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-285">If the shopping cart is empty, a message to that effect is displayed.</span></span>

### <a name="testing-the-shopping-cart-total"></a><span data-ttu-id="6ad4a-286">Testen der Einkaufswagensumme</span><span class="sxs-lookup"><span data-stu-id="6ad4a-286">Testing the Shopping Cart Total</span></span>

<span data-ttu-id="6ad4a-287">Führen Sie die Anwendung jetzt, um festzustellen, wie Sie nicht nur ein Produkts zum Einkaufswagen hinzufügen können, aber Sie können die einkaufswagensumme finden Sie unter.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-287">Run the application now to see how you can not only add a product to the shopping cart, but you can see the shopping cart total.</span></span>

1. <span data-ttu-id="6ad4a-288">Drücken Sie **F5**, um die Anwendung auszuführen.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-288">Press **F5** to run the application.</span></span>  
 <span data-ttu-id="6ad4a-289">Der Browser wird geöffnet und zeigt die *"default.aspx"* Seite.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-289">The browser will open and show the *Default.aspx* page.</span></span>
2. <span data-ttu-id="6ad4a-290">Wählen Sie **Autos** im Navigationsmenü der Kategorie.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-290">Select **Cars** from the category navigation menu.</span></span>
3. <span data-ttu-id="6ad4a-291">Klicken Sie auf die **Add To Cart** neben das erste Produkt.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-291">Click the **Add To Cart** link next to the first product.</span></span>   
 <span data-ttu-id="6ad4a-292">Die *ShoppingCart.aspx* Seite wird angezeigt, mit der Gesamtsumme der Bestellungen.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-292">The *ShoppingCart.aspx* page is displayed with the order total.</span></span> 

    ![Warenkorb - Warenkorb gesamt](shopping-cart/_static/image7.png)
4. <span data-ttu-id="6ad4a-294">Fügen Sie dem Einkaufswagen einige andere Produkte (z. B. eine Ebene) hinzu.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-294">Add some other products (for example, a plane) to the cart.</span></span>
5. <span data-ttu-id="6ad4a-295">Die *ShoppingCart.aspx* Seite wird angezeigt, mit einer aktualisierten Summe für alle Produkte, die Sie hinzugefügt haben.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-295">The *ShoppingCart.aspx* page is displayed with an updated total for all the products you've added.</span></span> 

    ![Warenkorb - mehrere Produkte](shopping-cart/_static/image8.png)
6. <span data-ttu-id="6ad4a-297">Beenden Sie die ausgeführte app, indem Sie das Browserfenster schließen.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-297">Stop the running app by closing the browser window.</span></span>

### <a name="adding-update-and-checkout-buttons-to-the-shopping-cart"></a><span data-ttu-id="6ad4a-298">Update und Auschecken Schaltflächen zum Einkaufswagen hinzufügen</span><span class="sxs-lookup"><span data-stu-id="6ad4a-298">Adding Update and Checkout Buttons to the Shopping Cart</span></span>

<span data-ttu-id="6ad4a-299">Damit wird der Benutzer den Einkaufswagen zu ändern, fügen Sie eine **Update** Schaltfläche und ein **Auschecken** Schaltfläche, um die Warenkorb-Seite.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-299">To allow the users to modify the shopping cart, you'll add an **Update** button and a **Checkout** button to the shopping cart page.</span></span> <span data-ttu-id="6ad4a-300">Die **Auschecken** Schaltfläche wird erst später in diesem Tutorial nicht verwendet.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-300">The **Checkout** button is not used until later in this tutorial series.</span></span>

1. <span data-ttu-id="6ad4a-301">In **Projektmappen-Explorer**öffnen die *ShoppingCart.aspx* Seite im Stammverzeichnis des Webanwendungsprojekts.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-301">In **Solution Explorer**, open the *ShoppingCart.aspx* page in the root of the web application project.</span></span>
2. <span data-ttu-id="6ad4a-302">Hinzufügen der **Update** Schaltfläche und die **Auschecken** Schaltfläche, um die *ShoppingCart.aspx* Seite, fügen Sie das Markup in Gelb, um das vorhandene Markup, hervorgehoben, siehe die folgender Code:</span><span class="sxs-lookup"><span data-stu-id="6ad4a-302">To add the **Update** button and the **Checkout** button to the *ShoppingCart.aspx* page, add the markup highlighted in yellow to the existing markup, as shown in the following code:</span></span>   

    [!code-aspx[Main](shopping-cart/samples/sample10.aspx?highlight=36-45)]

<span data-ttu-id="6ad4a-303">Klickt der Benutzer die **Update** Schaltfläche der `UpdateBtn_Click` -Ereignishandler wird aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-303">When the user clicks the **Update** button, the `UpdateBtn_Click` event handler will be called.</span></span> <span data-ttu-id="6ad4a-304">Dieser Ereignishandler ruft den Code, den Sie im nächsten Schritt hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-304">This event handler will call the code that you'll add in the next step.</span></span>

<span data-ttu-id="6ad4a-305">Sie können als Nächstes aktualisieren Sie den Code, der in enthalten die *ShoppingCart.aspx.cs* Datei so durchlaufen Sie das im Warenkorb, und rufen die `RemoveItem` und `UpdateItem` Methoden.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-305">Next, you can update the code contained in the *ShoppingCart.aspx.cs* file to loop through the cart items and call the `RemoveItem` and `UpdateItem` methods.</span></span>

1. <span data-ttu-id="6ad4a-306">In **Projektmappen-Explorer**öffnen die *ShoppingCart.aspx.cs* Datei im Stammverzeichnis des Webanwendungsprojekts.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-306">In **Solution Explorer**, open the *ShoppingCart.aspx.cs* file in the root of the web application project.</span></span>
2. <span data-ttu-id="6ad4a-307">Fügen Sie die folgenden Codeabschnitte in Gelb zu markiert die *ShoppingCart.aspx.cs* Datei:</span><span class="sxs-lookup"><span data-stu-id="6ad4a-307">Add the following code sections highlighted in yellow to the *ShoppingCart.aspx.cs* file:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample11.cs?highlight=9-11,33,44-89)]

<span data-ttu-id="6ad4a-308">Klickt der Benutzer die **Update** Schaltfläche der *ShoppingCart.aspx* Seite, die die UpdateCartItems-Methode aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-308">When the user clicks the **Update** button on the *ShoppingCart.aspx* page, the UpdateCartItems method is called.</span></span> <span data-ttu-id="6ad4a-309">Die UpdateCartItems-Methode ruft die aktualisierten Werte für jeden Artikel im Warenkorb ab.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-309">The UpdateCartItems method gets the updated values for each item in the shopping cart.</span></span> <span data-ttu-id="6ad4a-310">Klicken Sie dann die UpdateCartItems-Methode ruft die `UpdateShoppingCartDatabase` -Methode (hinzugefügt und im nächsten Schritt beschrieben) entweder hinzufügen oder Entfernen von Elementen aus dem Warenkorb.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-310">Then, the UpdateCartItems method calls the `UpdateShoppingCartDatabase` method (added and explained in the next step) to either add or remove items from the shopping cart.</span></span> <span data-ttu-id="6ad4a-311">Sobald die Updates in den Einkaufswagen legen, entsprechend die Datenbank aktualisiert wurde die **GridView** Steuerelement wird aktualisiert, auf die Warenkorb-Seite durch Aufrufen der `DataBind` -Methode für die **GridView**.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-311">Once the database has been updated to reflect the updates to the shopping cart, the **GridView** control is updated on the shopping cart page by calling the `DataBind` method for the **GridView**.</span></span> <span data-ttu-id="6ad4a-312">Darüber hinaus wird der Betrag für die Warenkorb-Seite die aktualisierte Liste der Elemente entsprechend aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-312">Also, the total order amount on the shopping cart page is updated to reflect the updated list of items.</span></span>

### <a name="updating-and-removing-shopping-cart-items"></a><span data-ttu-id="6ad4a-313">Aktualisieren und entfernen die Artikel im Warenkorb</span><span class="sxs-lookup"><span data-stu-id="6ad4a-313">Updating and Removing Shopping Cart Items</span></span>

<span data-ttu-id="6ad4a-314">Auf der *ShoppingCart.aspx* Seite sehen, da Sie Steuerelemente wurden für die Menge eines Elements zu aktualisieren und Entfernen eines Elements hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-314">On the *ShoppingCart.aspx* page, you can see controls have been added for updating the quantity of an item and removing an item.</span></span> <span data-ttu-id="6ad4a-315">Fügen Sie nun den Code, der diese Steuerelemente werden kann.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-315">Now, add the code that will make these controls work.</span></span>

1. <span data-ttu-id="6ad4a-316">In **Projektmappen-Explorer**öffnen die *ShoppingCartActions.cs* Datei die *Logik* Ordner.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-316">In **Solution Explorer**, open the *ShoppingCartActions.cs* file in the *Logic* folder.</span></span>
2. <span data-ttu-id="6ad4a-317">Fügen Sie folgenden Code in Gelb zu markiert die *ShoppingCartActions.cs* Klassendatei:</span><span class="sxs-lookup"><span data-stu-id="6ad4a-317">Add the following code highlighted in yellow to the *ShoppingCartActions.cs* class file:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample12.cs?highlight=99-213)]

<span data-ttu-id="6ad4a-318">Die `UpdateShoppingCartDatabase` Methode namens aus der `UpdateCartItems` Methode für die *ShoppingCart.aspx.cs* Seite, die Logik zum Aktualisieren oder Entfernen von Elementen aus dem Warenkorb enthält.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-318">The `UpdateShoppingCartDatabase` method, called from the `UpdateCartItems` method on the *ShoppingCart.aspx.cs* page, contains the logic to either update or remove items from the shopping cart.</span></span> <span data-ttu-id="6ad4a-319">Die `UpdateShoppingCartDatabase` Methode durchläuft alle Zeilen in der shopping Cart-Liste.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-319">The `UpdateShoppingCartDatabase` method iterates through all the rows within the shopping cart list.</span></span> <span data-ttu-id="6ad4a-320">Wenn ein Artikel im Warenkorb dieses markiert entfernt werden sollen, oder die Menge kleiner als 1, die `RemoveItem` Methode wird aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-320">If a shopping cart item has been marked to be removed, or the quantity is less than one, the `RemoveItem` method is called.</span></span> <span data-ttu-id="6ad4a-321">Hingegen wird für den Artikel im Warenkorb dieses überprüft wird, wenn der `UpdateItem` Methode wird aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-321">Otherwise, the shopping cart item is checked for updates when the `UpdateItem` method is called.</span></span> <span data-ttu-id="6ad4a-322">Nachdem der Artikel im Warenkorb dieses aktualisiert oder entfernt wurde, werden die Änderungen in der Datenbank gespeichert.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-322">After the shopping cart item has been removed or updated, the database changes are saved.</span></span>

<span data-ttu-id="6ad4a-323">Die `ShoppingCartUpdates` Struktur wird verwendet, um alle dem Artikel im Warenkorb enthalten.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-323">The `ShoppingCartUpdates` structure is used to hold all the shopping cart items.</span></span> <span data-ttu-id="6ad4a-324">Die `UpdateShoppingCartDatabase` -Methode verwendet die `ShoppingCartUpdates` Struktur, die bestimmen, ob keines der Elemente, die aktualisiert oder entfernt werden müssen.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-324">The `UpdateShoppingCartDatabase` method uses the `ShoppingCartUpdates` structure to determine if any of the items need to be updated or removed.</span></span>

<span data-ttu-id="6ad4a-325">Im nächsten Tutorial, verwenden Sie die `EmptyCart` Methode zum Deaktivieren der Warenkorb Einkaufswagen, nach dem Kauf von Produkten.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-325">In the next tutorial, you will use the `EmptyCart` method to clear the shopping cart after purchasing products.</span></span> <span data-ttu-id="6ad4a-326">Jetzt verwenden Sie jedoch die `GetCount` -Methode, die Sie gerade hinzugefügt, um haben die *ShoppingCartActions.cs* Datei, um zu bestimmen, wie viele Elemente im Warenkorb sind.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-326">But for now, you will use the `GetCount` method that you just added to the *ShoppingCartActions.cs* file to determine how many items are in the shopping cart.</span></span>

### <a name="adding-a-shopping-cart-counter"></a><span data-ttu-id="6ad4a-327">Hinzufügen eines Shopping Cart-Leistungsindikators</span><span class="sxs-lookup"><span data-stu-id="6ad4a-327">Adding a Shopping Cart Counter</span></span>

<span data-ttu-id="6ad4a-328">Damit um den Benutzer die Gesamtanzahl der Elemente im Warenkorb anzeigen zu können, fügen Sie einen Leistungsindikator an, die *Site.Master* Seite.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-328">To allow the user to view the total number of items in the shopping cart, you will add a counter to the *Site.Master* page.</span></span> <span data-ttu-id="6ad4a-329">Dieser Leistungsindikator wird auch als einen Link zum Einkaufswagen fungieren.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-329">This counter will also act as a link to the shopping cart.</span></span>

1. <span data-ttu-id="6ad4a-330">In **Projektmappen-Explorer**öffnen die *Site.Master* Seite.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-330">In **Solution Explorer**, open the *Site.Master* page.</span></span>
2. <span data-ttu-id="6ad4a-331">Ändern Sie das Markup, durch den warenkorblink klicken Indikator hinzufügen, wie in Gelb im Navigationsbereich-Abschnitt dargestellt werden, damit es wie folgt aussieht:</span><span class="sxs-lookup"><span data-stu-id="6ad4a-331">Modify the markup by adding the shopping cart counter link as shown in yellow to the navigation section so it appears as follows:</span></span>  

    [!code-html[Main](shopping-cart/samples/sample13.html?highlight=6)]
3. <span data-ttu-id="6ad4a-332">Aktualisieren Sie den Code-Behind der als Nächstes die *Site.Master.cs* Datei durch Hinzufügen des Codes, die wie folgt in gelb hervorgehoben:</span><span class="sxs-lookup"><span data-stu-id="6ad4a-332">Next, update the code-behind of the *Site.Master.cs* file by adding the code highlighted in yellow as follows:</span></span>  

    [!code-csharp[Main](shopping-cart/samples/sample14.cs?highlight=11,77-84)]

<span data-ttu-id="6ad4a-333">Bevor Sie die Seite als HTML gerendert wird die `Page_PreRender` Ereignis wird ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-333">Before the page is rendered as HTML, the `Page_PreRender` event is raised.</span></span> <span data-ttu-id="6ad4a-334">In der `Page_PreRender` Handler, der die Gesamtzahl der dem Einkaufswagen bestimmt, indem die `GetCount` Methode.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-334">In the `Page_PreRender` handler, the total count of the shopping cart is determined by calling the `GetCount` method.</span></span> <span data-ttu-id="6ad4a-335">Der zurückgegebene Wert wird hinzugefügt, um die `cartCount` Spanne, die im Markup enthalten die *Site.Master* Seite.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-335">The returned value is added to the `cartCount` span included in the markup of the *Site.Master* page.</span></span> <span data-ttu-id="6ad4a-336">Die `<span>` Tags können die inneren Elemente ordnungsgemäß gerendert werden soll.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-336">The `<span>` tags enables the inner elements to be properly rendered.</span></span> <span data-ttu-id="6ad4a-337">Wenn Seite der Website angezeigt wird, wird die einkaufswagensumme angezeigt.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-337">When any page of the site is displayed, the shopping cart total will be displayed.</span></span> <span data-ttu-id="6ad4a-338">Benutzer kann auch die einkaufswagensumme zum Einkaufswagen ordnungsgemäß anzeigen klicken.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-338">The user can also click the shopping cart total to display the shopping cart.</span></span>

## <a name="testing-the-completed-shopping-cart"></a><span data-ttu-id="6ad4a-339">Testen den abgeschlossenen Einkaufswagen</span><span class="sxs-lookup"><span data-stu-id="6ad4a-339">Testing the Completed Shopping Cart</span></span>

<span data-ttu-id="6ad4a-340">Sie können die Anwendung jetzt, um anzuzeigen, wie Sie hinzufügen, löschen und Aktualisieren von Elementen in den Einkaufswagen ausführen.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-340">You can run the application now to see how you can add, delete, and update items in the shopping cart.</span></span> <span data-ttu-id="6ad4a-341">Die einkaufswagensumme spiegeln die Gesamtkosten für alle Elemente im Warenkorb.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-341">The shopping cart total will reflect the total cost of all items in the shopping cart.</span></span>

1. <span data-ttu-id="6ad4a-342">Drücken Sie **F5**, um die Anwendung auszuführen.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-342">Press **F5** to run the application.</span></span>  
 <span data-ttu-id="6ad4a-343">Der Browser wird geöffnet und zeigt die *"default.aspx"* Seite.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-343">The browser opens and shows the *Default.aspx* page.</span></span>
2. <span data-ttu-id="6ad4a-344">Wählen Sie **Autos** im Navigationsmenü der Kategorie.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-344">Select **Cars** from the category navigation menu.</span></span>
3. <span data-ttu-id="6ad4a-345">Klicken Sie auf die **Add To Cart** neben das erste Produkt.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-345">Click the **Add To Cart** link next to the first product.</span></span>   
 <span data-ttu-id="6ad4a-346">Die *ShoppingCart.aspx* Seite wird angezeigt, mit der Gesamtsumme der Bestellungen.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-346">The *ShoppingCart.aspx* page is displayed with the order total.</span></span>
4. <span data-ttu-id="6ad4a-347">Wählen Sie **Ebenen** im Navigationsmenü der Kategorie.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-347">Select **Planes** from the category navigation menu.</span></span>
5. <span data-ttu-id="6ad4a-348">Klicken Sie auf die **Add To Cart** neben das erste Produkt.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-348">Click the **Add To Cart** link next to the first product.</span></span>
6. <span data-ttu-id="6ad4a-349">Die Menge des ersten Elements in den Einkaufswagen auf 3 festgelegt, und wählen Sie die **Element entfernen** Sie das Kontrollkästchen für das zweite Element.<a id="a"></a></span><span class="sxs-lookup"><span data-stu-id="6ad4a-349">Set the quantity of the first item in the shopping cart to 3 and select the **Remove Item** check box of the second item.<a id="a"></a></span></span>
7. <span data-ttu-id="6ad4a-350">Klicken Sie auf die **aktualisieren** Schaltfläche, um die Warenkorb-Seite zu aktualisieren und die neue Gesamtsumme der Bestellungen anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-350">Click the **Update** button to update the shopping cart page and display the new order total.</span></span> 

    ![Warenkorb - Warenkorb-Update](shopping-cart/_static/image9.png)

## <a name="summary"></a><span data-ttu-id="6ad4a-352">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="6ad4a-352">Summary</span></span>

<span data-ttu-id="6ad4a-353">In diesem Tutorial haben Sie einen Einkaufswagen gelegt hat, für die Wingtip Toys Web Forms-beispielanwendung erstellt.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-353">In this tutorial, you have created a shopping cart for the Wingtip Toys Web Forms sample application.</span></span> <span data-ttu-id="6ad4a-354">In diesem Tutorial haben Sie Entity Framework Code First, datenanmerkungen, stark typisierte Datensteuerelemente und modellbindung verwendet.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-354">During this tutorial you have used Entity Framework Code First, data annotations, strongly typed data controls, and model binding.</span></span>

<span data-ttu-id="6ad4a-355">Der Einkaufswagen unterstützt hinzufügen, löschen und Aktualisieren von Elementen, die der Benutzer zum Kauf ausgewählt hat.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-355">The shopping cart supports adding, deleting, and updating items that the user has selected for purchase.</span></span> <span data-ttu-id="6ad4a-356">Zusätzlich zur Implementierung der shopping Cart-Funktionalität, haben Sie erfahren, wie Sie im Artikel im Warenkorb anzeigen einer **GridView** steuern und die Gesamtsumme der Bestellungen berechnen.</span><span class="sxs-lookup"><span data-stu-id="6ad4a-356">In addition to implementing the shopping cart functionality, you have learned how to display shopping cart items in a **GridView** control and calculate the order total.</span></span>

## <a name="addition-information"></a><span data-ttu-id="6ad4a-357">Zusätzliche Informationen</span><span class="sxs-lookup"><span data-stu-id="6ad4a-357">Addition Information</span></span>

[<span data-ttu-id="6ad4a-358">Übersicht über die ASP.NET Session State</span><span class="sxs-lookup"><span data-stu-id="6ad4a-358">ASP.NET Session State Overview</span></span>](https://msdn.microsoft.com/library/ms178581.aspx)

> [!div class="step-by-step"]
> <span data-ttu-id="6ad4a-359">[Zurück](display_data_items_and_details.md)
> [Weiter](checkout-and-payment-with-paypal.md)</span><span class="sxs-lookup"><span data-stu-id="6ad4a-359">[Previous](display_data_items_and_details.md)
[Next](checkout-and-payment-with-paypal.md)</span></span>
